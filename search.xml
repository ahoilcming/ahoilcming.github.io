<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>1、ubuntu系统u盘启动盘的制作</title>
      <link href="/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-1%E3%80%81ubuntu%E7%B3%BB%E7%BB%9Fu%E7%9B%98%E5%90%AF%E5%8A%A8%E7%9B%98%E7%9A%84%E5%88%B6%E4%BD%9C/"/>
      <url>/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-1%E3%80%81ubuntu%E7%B3%BB%E7%BB%9Fu%E7%9B%98%E5%90%AF%E5%8A%A8%E7%9B%98%E7%9A%84%E5%88%B6%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>手把手教你如何制作ubuntu系统的U盘启动盘<br>预先准备好一个16G的U盘，并以NTFS格式化</p><h2 id="一、官网下载-iso镜像文件"><a href="#一、官网下载-iso镜像文件" class="headerlink" title="一、官网下载.iso镜像文件"></a>一、官网下载.iso镜像文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">官网地址 https://ubuntu.com/download/desktop</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">清华大学：https://mirror.tuna.tsinghua.edu.cn/</span><br><span class="line"></span><br><span class="line">阿里云：http://mirrors.aliyun.com/ </span><br><span class="line"></span><br><span class="line">中国科技大学：http://mirrors.ustc.edu.cn/</span><br></pre></td></tr></table></figure><h2 id="二、使用UltralSO制作启动盘"><a href="#二、使用UltralSO制作启动盘" class="headerlink" title="二、使用UltralSO制作启动盘"></a>二、使用UltralSO制作启动盘</h2><h3 id="1、下载安装UltralSO"><a href="#1、下载安装UltralSO" class="headerlink" title="1、下载安装UltralSO"></a>1、下载安装UltralSO</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cn.ultraiso.net/xiazai.html</span><br></pre></td></tr></table></figure><h3 id="2、运行UltralSO软件打开刚才下载的-iso文件"><a href="#2、运行UltralSO软件打开刚才下载的-iso文件" class="headerlink" title="2、运行UltralSO软件打开刚才下载的.iso文件"></a>2、运行UltralSO软件打开刚才下载的.iso文件</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/216d9c5eb7d942a4bd8e1ab3750bb0de.png" alt="在这里插入图片描述"></p><p>3、制作U盘启动器<br>左上角启动-写入硬盘映像</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/d14090ec4aa141bea1d2b6d35cc8785e.png" alt="在这里插入图片描述"></p><p>（1）选择你要制作的硬盘驱动器（就是你要做的U盘）<br>（2） 写入方式USB-HDD+<br>（3）便捷启动-写入新的硬盘主引导（MBR）记录-选择USB-HDD+<br>（4）点击写入</p><h2 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h2><p>然后等它完成，U盘启动盘就制作完成啦！</p><p>1、使用U盘重装Ubuntu系统<br>插入你需要重装系统的已关机的电脑中，开机一直按F12，进入到重装系统的界面，选择u盘启动，按步骤进行ubuntu系统的安装配置，自行查找教程，有很多。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ELinux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2、新装ubuntu系统配置</title>
      <link href="/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-2%E3%80%81%E6%96%B0%E8%A3%85ubuntu%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE/"/>
      <url>/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-2%E3%80%81%E6%96%B0%E8%A3%85ubuntu%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="一、-配置root密码"><a href="#一、-配置root密码" class="headerlink" title="一、 配置root密码"></a>一、 配置root密码</h2><p>​    新装的ubuntu是没有root账号的，需要自己配置，输入命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure><p>如果有需要远程使用root账号登录的话，还需做如下配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 打开这个文件 --需要提前安装vim 如果没有安装 使用vi编辑（不太方便）</span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"># 修改</span><br><span class="line">...</span><br><span class="line">#PermitRootLogin prohibit-password</span><br><span class="line">PermitRootLogin yes# 允许root直接登录</span><br><span class="line">...</span><br><span class="line">#PermitEmptyPasswords no</span><br><span class="line">PermitEmptyPasswords no# 因为设置了root密码，所以需要修改为no</span><br><span class="line">...</span><br><span class="line"># 重启服务</span><br><span class="line">systemctl restart ssh</span><br><span class="line"># 注释此行</span><br><span class="line"># auth required pam_succeed_if.so user != root quiet_success</span><br></pre></td></tr></table></figure><h2 id="二、-更新apt源"><a href="#二、-更新apt源" class="headerlink" title="二、 更新apt源"></a>二、 更新apt源</h2><p>把apt-get下载源换成华为源，以后下载软件包的速度就会快很多</p><p>1、备份配置文件：</p><p>sudo cp -a /etc/apt/sources.list /etc/apt/sources.list.bak<br>2、修改sources.list文件</p><p>将<a href="http://archive.ubuntu.com和http://security.ubuntu.com替换成http://repo.huaweicloud.com，可以参考如下命令：">http://archive.ubuntu.com和http://security.ubuntu.com替换成http://repo.huaweicloud.com，可以参考如下命令：</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i &quot;s@http://.*archive.ubuntu.com@http://repo.huaweicloud.com@g&quot; /etc/apt/sources.list</span><br><span class="line">sudo sed -i &quot;s@http://.*security.ubuntu.com@http://repo.huaweicloud.com@g&quot; /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>​    3、执行apt-get update更新索引</p><p>其他工具源我也做了一些配置，比如python的pip源，其他工具都可以在华为开源镜像站上搜索，进行配置，这里就不展开了，需要什么自己配就行了。</p><h3 id="三、tldr安装"><a href="#三、tldr安装" class="headerlink" title="三、tldr安装"></a>三、tldr安装</h3><p>在Linux上当简单查询某条命令如何使用时，用man查看输入的东西实在太多，不方便阅读。那就来试试tldr（Too Long Don’t Read!） github地址  安装方式很简单，详见readme。我这边使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g tldr</span><br></pre></td></tr></table></figure><p>安装完成后，我执行tldr命令，结果显示：</p><p>我去网上查了一下，需要安装nodejs-legacy</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install nodejs-legacy</span><br></pre></td></tr></table></figure><p>现在使用tldr查看ps命令</p><p>查看tar命令</p><p>是不是相对于用man查看命令要清爽很多</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ELinux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3、ubuntu开启ssh服务远程登录</title>
      <link href="/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-3%E3%80%81ubuntu%E5%BC%80%E5%90%AFssh%E6%9C%8D%E5%8A%A1%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/"/>
      <url>/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-3%E3%80%81ubuntu%E5%BC%80%E5%90%AFssh%E6%9C%8D%E5%8A%A1%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Ubuntu开启SSH服务远程登录"><a href="#Ubuntu开启SSH服务远程登录" class="headerlink" title="Ubuntu开启SSH服务远程登录"></a>Ubuntu开启SSH服务远程登录</h1><p>ssh–secure shell，提供安全的远程登录。从事嵌入式开发搭建linux开发环境中，ssh的服务的安装是其中必不可少的一步。ssh方便一个开发小组中人员登录一台服务器，从事代码的编写、编译、运行。方便代码的共享及管理。ssh是一种安全协议，主要用于给远程登录会话数据进行加密，保证数据传输的安全。</p><ol><li>SSH分客户端 openssh-client 和 openssh-server 如果你只是想登陆别的机器的SSH只需要安装 openssh-client（ubuntu有默认安装，如果没有则 sudo apt-get install openssh-client），如果要使本机开放SSH服务就需要安装 openssh-server。</li><li>查看当前的ubuntu是否安装了 ssh-server 服务。默认只安装 ssh-client服务。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep ssh</span><br></pre></td></tr></table></figure><ol><li>安装ssh-server服务</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br></pre></td></tr></table></figure><p>再次查看安装的服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep ssh</span><br></pre></td></tr></table></figure><p>然后确认ssh-server是否启动了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -e | grep ssh</span><br></pre></td></tr></table></figure><p>如果看到ssh那说明ssh-server已经启动了。</p><p>如果没有则可以这样启动：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/ssh start 或 sudo service ssh start</span><br></pre></td></tr></table></figure><h5 id="配置相关："><a href="#配置相关：" class="headerlink" title="配置相关："></a>配置相关：</h5><p>ssh-server配置文件位于/etc/ssh/sshd_config，在这里可以定义SSH的服务端口，默认端口是22，你可以自己定义成其他端口号，如222。（或把配置文件中的”PermitRootLogin without-password”加一个”#”号,把它注释掉，再增加一句”PermitRootLogin yes”） 然后重启SSH服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/ssh stop sudo /etc/init.d/ssh start</span><br></pre></td></tr></table></figure><ol><li>登陆SSH（Linux）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh username@192.168.1.103</span><br></pre></td></tr></table></figure><p>其中，username为192.168.1.103机器上的用户，需要输入密码。 断开连接：exit</p><p>测试</p><p>（1）服务器：192.168.1.103(jackgao用户)</p><p>（2）客户端：192.168.1.104(root用户)</p><p>（3）客户端远程ssh登录服务器</p><p>（4）退出远程登录</p><p>另外，如果安装了ssh服务，windows下可以使用xshell或者putty链接这台ubuntu了（但是每次都得输入用户名和密码，即使xshell可以存储用户名和密码但是登陆速度很慢。所以可以使用公共密钥的登陆方式来提高速度和安全性。参考链接：ubuntu SSH配置 以及 与xshell文件传输<a href="http://blog.sina.com.cn/s/blog_53683dc20102v3wz.html）">http://blog.sina.com.cn/s/blog_53683dc20102v3wz.html）</a></p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ELinux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4、vim配置和使用</title>
      <link href="/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-4%E3%80%81vim%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-4%E3%80%81vim%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="vim配置和使用"><a href="#vim配置和使用" class="headerlink" title="vim配置和使用"></a>vim配置和使用</h1><h2 id="一、在终端中开打-vimrc文档"><a href="#一、在终端中开打-vimrc文档" class="headerlink" title="一、在终端中开打.vimrc文档"></a>一、在终端中开打.vimrc文档</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi  ~/.vimrc</span><br></pre></td></tr></table></figure><h2 id="二、在-vimrc文档中添加配置内容"><a href="#二、在-vimrc文档中添加配置内容" class="headerlink" title="二、在.vimrc文档中添加配置内容"></a>二、在.vimrc文档中添加配置内容</h2><h3 id="1-常用设置"><a href="#1-常用设置" class="headerlink" title="1.常用设置"></a>1.常用设置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">set number          &quot; 显示行号</span><br><span class="line">syntax on           &quot; 语法高亮度显示</span><br><span class="line">set autoindent      &quot; vim使用自动对起，也就是把当前行的对起格式应用到下一行</span><br><span class="line">set smartindent     &quot; 依据上面的对起格式，智能的选择对起方式，对于类似C语言编</span><br><span class="line">set tabstop=4       &quot; 设置tab键为4个空格</span><br><span class="line">set shiftwidth=4    &quot; 设置当行之间交错时使用4个空格</span><br><span class="line">set showmatch       &quot; 设置匹配模式，类似当输入一个左括号时会匹配相应的那个右括号</span><br></pre></td></tr></table></figure><p>注：英文状态下输入双引号</p><h3 id="2-自动备份"><a href="#2-自动备份" class="headerlink" title="2.自动备份"></a>2.自动备份</h3><p>//修改一个文件后，自动进行备份，备份的文件名为原文件名加“~“后缀</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if has(&quot;vms&quot;)</span><br><span class="line">    set nobackup</span><br><span class="line">else</span><br><span class="line">    set backup</span><br><span class="line">endif</span><br></pre></td></tr></table></figure><p>注：英文状态下输入双引号</p><h3 id="3-自动补全"><a href="#3-自动补全" class="headerlink" title="3.自动补全"></a>3.自动补全</h3><p>//常用的自动补全</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">inoremap ( ()&lt;ESC&gt;i</span><br><span class="line">inoremap [ []&lt;ESC&gt;i</span><br><span class="line">inoremap &#123; &#123;&#125;&lt;ESC&gt;i</span><br><span class="line">inoremap &lt; &lt;&gt;&lt;ESC&gt;i</span><br><span class="line">inoremap &quot; &quot;&quot;&lt;ESC&gt;i</span><br><span class="line">inoremap &#x27; &#x27;&#x27;&lt;ESC&gt;i</span><br><span class="line">inoremap ` &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&lt;ESC&gt;i</span><br></pre></td></tr></table></figure><h2 id="三、保存退出"><a href="#三、保存退出" class="headerlink" title="三、保存退出"></a>三、保存退出</h2><p>按ESC，输入：X，退出保存即可。</p><h2 id="四、代码高亮不显示"><a href="#四、代码高亮不显示" class="headerlink" title="四、代码高亮不显示"></a>四、代码高亮不显示</h2><p>ubuntu默认安装的不是完全版的vim, 可通过</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure><p>安装vim，装完后会有高亮显示。</p><h2 id="vi和vim的使用"><a href="#vi和vim的使用" class="headerlink" title="vi和vim的使用"></a>vi和vim的使用</h2><h3 id="vi和vim简介："><a href="#vi和vim简介：" class="headerlink" title="vi和vim简介："></a>vi和vim简介：</h3><p>vi编辑器是Linux和Unix上最基本的文本编辑器，工作在字符模式下。由于不需要图形界面，vi是效率很高的文本编辑器。尽管在Linux上也有很多图形界面的编辑器可用，但vi在系统和服务器管理中的功能是那些图形编辑器所无法比拟的。</p><p>vim是vi的增强版，比vi更容易使用。vi的命令几乎全部都可以在vim上使用。</p><h3 id="Vi和vim三种常见模式："><a href="#Vi和vim三种常见模式：" class="headerlink" title="Vi和vim三种常见模式："></a>Vi和vim三种常见模式：</h3><p><strong>命令模式</strong>: 以vi/vim 命令打开一个档案就直接进入底行模式了(这是默认的模式)。在这个模式中，你可以使用『上下左右』按键来移动光标，你可以使用『删除字符』或『删除整行』快捷键来处理档案内容，也可以使用『复制、贴上』快捷键来处理你的文件数据。</p><p><strong>编辑模式</strong>：按下i, I, o, O, a, A, r, R等任何一个字母之后才会进入编辑模式, 一般来说按i即可.</p><p><strong>底行模式</strong>：在这个模式当中，可以提供你相关指令，完成读取、存盘、替换、离开vim 、显示行号等的动作则是在此模式中达成的 ！</p><h3 id="进入编辑模式的方法："><a href="#进入编辑模式的方法：" class="headerlink" title="进入编辑模式的方法："></a><strong>进入编辑模式的方法：</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">i   从光标前插入</span><br><span class="line">a   从光标后插入</span><br><span class="line">I   从行首插入</span><br><span class="line">A   从行尾插入</span><br><span class="line">o   光标下插入行</span><br><span class="line">O   光标上插入行</span><br></pre></td></tr></table></figure><p><strong>Vi和vim常用快捷键</strong></p><p>**命名模式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- j向下   k向上 h向左 l向右</span><br><span class="line">- w：快速向后移动一个单词</span><br><span class="line">- b: 快速向前移动一个单词</span><br><span class="line">- $:光标移动到行尾</span><br><span class="line">- yy            拷贝当前行(yy) , 拷贝当前行向下的5行(5yy)，并粘贴(p)。</span><br><span class="line">- yw            将光标所在单词拷入剪贴板</span><br><span class="line">- y$            将光标至行尾的字符拷入剪贴板</span><br><span class="line">- yG            复制当前行到最后一行</span><br><span class="line">- dd        删除当前行 , 删除当前行向下的5行(5dd)。</span><br><span class="line">- dw        删除光标所在的单词</span><br><span class="line">- d$        删除光标至行尾的所有字符</span><br><span class="line">- dG        删除当前行到最后一行</span><br><span class="line">- 撤销这个动作(u)。反撤销ctrl+r</span><br></pre></td></tr></table></figure><p>底行模式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">在文件中查找某个单词，[：(/关键字)，回车查找, 输入(n) 就是查找下一个]。</span><br><span class="line">使用快捷键到达文档的最首行[gg]和最末行[G]。</span><br><span class="line">/string    往前搜索string</span><br><span class="line">n 查找下一个</span><br><span class="line">?string     往后搜索string</span><br><span class="line">：%s/A/B/g   用B换A</span><br><span class="line">文件编辑，保存，退出</span><br><span class="line">:q      不保存退出</span><br><span class="line">:q!  不保存强制性退出</span><br><span class="line">:w      保存编辑</span><br><span class="line">:w filename 存入文件filename中</span><br><span class="line">:w! filename 强制性存入文件filename中</span><br><span class="line">:wq: / :x / ZZ   保存退出</span><br><span class="line">:wq!    强制保存然后退出</span><br></pre></td></tr></table></figure><p>多文档形式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:sp filename vim将分割出一个横向窗口, 并在该窗口中打开新文件.</span><br><span class="line">:vsp filename vim将在右边分割出一个窗口, 并在该窗口中打开新文件.</span><br><span class="line"> 如果:sp 或 :vsp没有指定文件，则在新窗口中打开原文件。</span><br><span class="line">  ctrl+w w来在vim打开的多个窗口中切换.</span><br><span class="line">  打开的两个文件上下窗口分布 ： vim -o file1 file2</span><br><span class="line">  打开的两个文件左右窗口分布 ： vim -O file1 file2</span><br></pre></td></tr></table></figure><p>临时配置vim：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">set nu              // 在左侧显示行号</span><br><span class="line"></span><br><span class="line">set tabstop=4          //tab 长度设置为 4</span><br><span class="line"></span><br><span class="line">set cursorline        //突出显示当前行</span><br><span class="line"></span><br><span class="line">set cursorcolumn   //突出显示当前列</span><br><span class="line"></span><br><span class="line">set ruler            //在右下角显示光标位置的状态行</span><br><span class="line"></span><br><span class="line">set autoindent       //自动缩进</span><br><span class="line"></span><br><span class="line">syntax on       //打开语法高亮</span><br><span class="line"></span><br><span class="line">set showcmd     //在状态栏显示用户输入的命令，比如你按dd时,第一个“d”能在下面看到</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ELinux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5、zsh的配置与使用</title>
      <link href="/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-5%E3%80%81zsh%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-5%E3%80%81zsh%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>前言<br>提示：这里可以添加本文要记录的大概内容：</p><p>在学习ros过程中会用到Ubuntu，大家推荐使用安装zsh设置为默认的shell，由于其配置过于复杂又推荐使用oh-my-zsh来辅助完成配置。</p><p>提示：以下是本篇文章正文内容，下面案例可供参考</p><p>一、zsh安装步骤</p><h1 id="1：查看现有shell及目前所用shell"><a href="#1：查看现有shell及目前所用shell" class="headerlink" title="1：查看现有shell及目前所用shell"></a>1：查看现有shell及目前所用shell</h1><p>正式安装之前，在终端输入以下命令，查看系统现有的shell：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shells</span><br></pre></td></tr></table></figure><p>一般现有shell有如下几个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#/etc/shells: valid login shells</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/dash</span><br><span class="line">/bin/bash</span><br><span class="line">/bin/rbash</span><br></pre></td></tr></table></figure><p>在终端，输入以下命令查看终端目前使用的shell：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $SHELL</span><br></pre></td></tr></table></figure><p>一般的输出为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash</span><br></pre></td></tr></table></figure><h1 id="2：从apt包中安装zsh"><a href="#2：从apt包中安装zsh" class="headerlink" title="2：从apt包中安装zsh"></a>2：从apt包中安装zsh</h1><p>在终端直接输入以下命令，进行安装zsh：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install zsh</span><br></pre></td></tr></table></figure><p>安装完毕后，输入以下命令可以查看zsh的版本：</p><p>zsh —version</p><p>安装完成后</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/fd55e4edfb78478b923c06a805391121.png" alt=""></p><h1 id="3：验证zsh是否安装成功"><a href="#3：验证zsh是否安装成功" class="headerlink" title="3：验证zsh是否安装成功"></a>3：验证zsh是否安装成功</h1><p>再次查看系统的shell，命令如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shells</span><br></pre></td></tr></table></figure><p>此时shell中会增加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh</span><br><span class="line">/usr/bin/zsh</span><br></pre></td></tr></table></figure><h1 id="4：设置zsh为默认的shell"><a href="#4：设置zsh为默认的shell" class="headerlink" title="4：设置zsh为默认的shell"></a>4：设置zsh为默认的shell</h1><p>输入以下命令设置zsh为终端默认shell：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s $(which zsh)</span><br></pre></td></tr></table></figure><p>然后进行重启(注意是重启系统不是终端)：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><p>二、oh-my-zsh安装<br>1.从github下载并安装oh-my-zsh（以下2选1）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;</span><br><span class="line"></span><br><span class="line">sh -c &quot;$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)&quot;</span><br></pre></td></tr></table></figure><p>2.由于从GitHub下载太慢可从清华镜像源安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://mirrors.tuna.tsinghua.edu.cn/git/ohmyzsh.git</span><br><span class="line">cd ohmyzsh/tools</span><br><span class="line">REMOTE=https://mirrors.tuna.tsinghua.edu.cn/git/ohmyzsh.git sh install.sh</span><br></pre></td></tr></table></figure><p>切换已有oh-my-zsh</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git -C $ZSH remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/ohmyzsh.git</span><br><span class="line">git -C $ZSH pull</span><br></pre></td></tr></table></figure><p>3.设置系统字体为Powerline字体<br>直接按照以下方法一步一步输入程序即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/powerline/fonts.git --depth=1</span><br><span class="line">安装字体</span><br><span class="line">cd fonts</span><br><span class="line">./install.sh</span><br><span class="line">卸载安装包</span><br><span class="line">cd ..     （或者是cd fonts）忘记了</span><br><span class="line">rm -rf fonts</span><br></pre></td></tr></table></figure><p>然后在终端右键出找到字体选择Ubuntu Mono derivative Powerline Regular即可</p><p>接下来要验证特殊字体是否正常：<br>在终端，输入如下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo “\ue0b0 \u00b1 \ue0a0 \u27a6 \u2718 \u26a1 \u2699”</span><br></pre></td></tr></table></figure><p>正常会出现±等6个特殊符号</p><p>4.修改主题（使用默认下载的即可）<br>输入以下命令，通过vim打开~/.zshrc配置文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.zshrc</span><br></pre></td></tr></table></figure><p>找到其中的ZSH_THEME选项，将robbyrussell更改为agnoster，注意不要加空格！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSH_THEME=“agnoster”</span><br></pre></td></tr></table></figure><p>而后保存退出~/.zshrc配置文件，然后输入以下命令生效主题：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure><p>注意：进入vim，按i键后才可以修改内容，修改好代码以后按esc退出编辑模式后，在输入:wq，保存并退出。一定一定要注意不要丢弃:这个符号</p><p>三、安装一些插件<br>1.自带插件使用<br>输入以下命令，可以查看oh-my-zsh自带插件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls $ZSH/plugins/</span><br></pre></td></tr></table></figure><p>自带插件启用方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br></pre></td></tr></table></figure><p>找到红线部分</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/88ed89107c6b46dea158f617c00a7453.png" alt="在这里插入图片描述"></p><p>按照以上方式添加即可<br>在~/.zshrc的plugins中加入插件名。【插件与插件之间空格隔开】<br>执行source ~/.zshrc</p><p>常用的插件是我上面添加的这个几个</p><p>2.存在的一些问题<br>还有一个incr，我的电脑添加失败。欢迎大佬指正如何添加，失败原因如下图片</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/7e3e8ba31fd045c1b7fdf4115c3a2da6.png" alt="在这里插入图片描述"></p><p>查找plugin已安装的插件时有incr，但是添加后报错如下</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ELinux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux基础</title>
      <link href="/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-linux%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/11/23/%E7%89%A9%E8%81%94%E7%BD%91-%E5%B5%8C%E5%85%A5%E5%BC%8F-linux%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux作为嵌入式操作系统的概述与优势"><a href="#Linux作为嵌入式操作系统的概述与优势" class="headerlink" title="Linux作为嵌入式操作系统的概述与优势"></a>Linux作为嵌入式操作系统的概述与优势</h1><h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><p>Linux是一套免费试用和自由传播的类Unix操作系统。它作为操作系统，位于底层硬件与用户之间，担当两者的沟通桥梁。通过用户界面，Linux能解释用户命令、驱动硬件设备，满足用户需求。Linux操作系统的功能包括管理计算机系统的硬件、软件及数据资源，控制程序运行，改善人机界面，提供支持给其它应用软件，确保计算机系统资源的最大化利用。</p><p>嵌入式系统则是以应用为中心、软硬件可裁剪的专用计算机系统。它们在功能、可靠性、成本、体积、功耗等方面有特殊要求，与通用计算机系统的区别在于应用的差异性。</p><h2 id="二、嵌入式系统的特点"><a href="#二、嵌入式系统的特点" class="headerlink" title="二、嵌入式系统的特点"></a>二、嵌入式系统的特点</h2><ol><li><strong>特定应用导向</strong>：嵌入式系统通常面向特定应用设计，具有低功耗、体积小、集成度高等特点。</li><li><strong>技术集成系统</strong>：嵌入式系统涉及多个领域的技术，是一个技术密集、资金密集、高度分散、不断创新的系统。</li><li><strong>高度可定制性</strong>：嵌入式系统的硬件和软件必须高度可定制以适应应用的需要。</li><li><strong>长生命周期</strong>：嵌入式系统的生命周期与其所应用产品的生命周期几乎一样长。</li><li><strong>软件固化</strong>：软件一般固化在存储器芯片中，而非磁盘等载体。</li><li><strong>开发工具依赖</strong>：嵌入式系统本身不具备自举开发能力，需要专门的开发工具和环境。</li></ol><h2 id="三、Linux作为嵌入式操作系统的优势"><a href="#三、Linux作为嵌入式操作系统的优势" class="headerlink" title="三、Linux作为嵌入式操作系统的优势"></a>三、Linux作为嵌入式操作系统的优势</h2><ol><li><strong>低成本开发系统</strong>：Linux源码开放，降低开发成本，提高效率。</li><li><strong>多硬件平台支持</strong>：Linux支持多种体系结构，适用于多种硬件平台。</li><li><strong>可定制的内核</strong>：Linux的内核模块机制允许实时地调整内核模块，根据需要进行裁剪。</li><li><strong>性能优异</strong>：Linux系统内核精简高效，运行稳定，硬件利用率高。</li><li><strong>良好的网络支持</strong>：Linux首先实现TCP/IP协议栈，提供全面的网络支持。</li></ol><p>Linux作为嵌入式操作系统，其灵活性、开放性、高性能及网络支持等特性，使其在嵌入式领域中具有显著优势。</p><h2 id="四、基础概念"><a href="#四、基础概念" class="headerlink" title="四、基础概念"></a>四、基础概念</h2><h3 id="1、文件系统、分区和挂载"><a href="#1、文件系统、分区和挂载" class="headerlink" title="1、文件系统、分区和挂载"></a>1、文件系统、分区和挂载</h3><p>linux的文件系统和windows中的文件系统有很大区别，Windows文件系统是以驱动器的盘符为基础的，而且每一个目录与相应的分区对应。而linux文件系统是一棵文件树，且它的所有文件和外部设备（如硬盘、光驱等）都是以文件的形式挂在这个文件树上，在Windows下，目录结构属于分区；linux下，分区属于目录结构。</p><h3 id="2、文件类型及文件属性"><a href="#2、文件类型及文件属性" class="headerlink" title="2、文件类型及文件属性"></a>2、文件类型及文件属性</h3><p>linux中的文件类型与Windows有显著的区别，其中最显著的区别在于Linux对<strong>目录和设备都当做文件</strong>来处理，这样就简化了对各种不同设备的处理，提高了效率。linux中主要的文件类型分为四种：</p><h4 id="（1）普通文件"><a href="#（1）普通文件" class="headerlink" title="（1）普通文件"></a>（1）普通文件</h4><p>普通文件同Windows中的文件一样，是用户日常使用最多的文件。它包括文本文件、shell脚本、二进制的可执行程序和各种类型的数据</p><h4 id="（2）目录文件"><a href="#（2）目录文件" class="headerlink" title="（2）目录文件"></a>（2）目录文件</h4><p>Linux中，目录也是文件，它们包含文件名和子目录名以及指向那些文件的子目录的指针。目录文件时linux中存储文件名的唯一地方，当把文件和目录相对应起来时，也就是<strong>用指针将其链接起来</strong>之后，就构成了目录文件。</p><h4 id="（3）链接文件"><a href="#（3）链接文件" class="headerlink" title="（3）链接文件"></a>（3）链接文件</h4><p>链接文件类似于Windows中的“快捷方式”，但是它的功能更为强大。它可以实现对不同的目录，文件系统甚至是不同的机器上的文件直接访问，并且不必重新占用磁盘空间</p><h4 id="（4）设备文件"><a href="#（4）设备文件" class="headerlink" title="（4）设备文件"></a>（4）设备文件</h4><p>linux把设备都当作文件一样来进行操作，这样就大大方便了用户的使用。在linux下的设备相关的文件一般都在/dev目录下，它包括两种，一种是块设备文件，另一种是字符设备文件</p><ul><li>块设备文件是指数据的读写，它们是以块为单位的设备，最简单的如硬盘等</li><li>字符设备主要是指串行端口的接口设备</li></ul><h2 id="五、文件属性"><a href="#五、文件属性" class="headerlink" title="五、文件属性"></a>五、文件属性</h2><p>Linux中的文件拥有者可以把文件的访问属性设成三种不同的访问权限：<strong>可读（r）、可写（w）和可执行（x）</strong>。文件又有三个不同的用户级别：<strong>文件拥有者（u）、所属的用户组（g）和系统里的其他用户（o）</strong></p><p>第一个字符显示文件的类型：</p><ul><li>“-“ 表示普通文件</li><li>“d” 表示目录文件</li><li>“l” 表示链接文件</li><li>“c” 表示字符设备</li><li>“b”表示块设备</li><li>“p” 表示命名管道，比如FIFO文件（first in first out，先进先出）</li><li>“f” 表示堆栈文件，比如LIFO文件（last in first out，后进先出）</li><li>“s” 表示套接字</li></ul><h2 id="六、文件系统类型"><a href="#六、文件系统类型" class="headerlink" title="六、文件系统类型"></a>六、文件系统类型</h2><h3 id="1、Ext2和Ext3"><a href="#1、Ext2和Ext3" class="headerlink" title="1、Ext2和Ext3"></a>1、Ext2和Ext3</h3><p>Ext3是现在Linux常见的默认文件系统，它是Ext2的升级版本。从Ext2转换到Ext3主要有四个理由：<strong>可用性、数据完整性、速度及易于转化。</strong>Ext3中采用了日志式的管理机制，它使文件系统具有很强的快速恢复能力，并且由于从Ext2转换到Ext3无须进行格式化，因此更加推进了Ext3文件系统的推广。</p><h3 id="2、SWAP文件系统"><a href="#2、SWAP文件系统" class="headerlink" title="2、SWAP文件系统"></a>2、SWAP文件系统</h3><p>该文件系统是Linux中作为交换分区使用的。在安装Linux时，交换分区是必须建立的，并且它所采用的文件系统类型必须是SWAP而没有其他选择。</p><h3 id="3、VFAT文件系统"><a href="#3、VFAT文件系统" class="headerlink" title="3、VFAT文件系统"></a>3、VFAT文件系统</h3><p>Linux中把DOS中采用的FAT文件系统（包括FAT12、FAT16、FAT32）都称为VFAT文件系统。</p><h3 id="4、NFS文件系统"><a href="#4、NFS文件系统" class="headerlink" title="4、NFS文件系统"></a>4、NFS文件系统</h3><p>NFS文件系统是指<strong>网络文件系统</strong>，它可以很方便地在<strong>局域网内实现文件共享</strong>，并且使多台主机共享同一主机上的文件系统。而且NFS文件系统访问速度快、稳定性高，已经得到了广泛的应用，尤其是在嵌入式领域。使用NFS文件系统可以很多方便地实现文件本地修改，从而免去了一次次读/写Flash的忧虑。</p><h3 id="5、ISO-9660文件系统"><a href="#5、ISO-9660文件系统" class="headerlink" title="5、ISO 9660文件系统"></a>5、ISO 9660文件系统</h3><p>这是光盘所使用的文件系统，在Linux中对光盘已有了很好的支持，它不仅可以提供对光盘的读/写，还可以实现对光盘的刻录。</p><h2 id="七、Linux目录结构"><a href="#七、Linux目录结构" class="headerlink" title="七、Linux目录结构"></a>七、Linux目录结构</h2><p>可以把Linux系统看作由四部分构成：内核、用户界面、文件结构和实用工具</p><ul><li><strong>/bin</strong> 普通用户的可执行文件，系统的任何用户都可以执行该目录中的命令</li><li><strong>/boot</strong> 存放Linux操作系统启动时所需要的文件</li><li><strong>/dev</strong> 系统中所有设备文件</li><li><strong>/etc</strong> 系统中的配置文件</li><li><strong>/home</strong> 普通用户的宿主目录，每个用户在该目下都有一个于用户名同名的目录。</li><li><strong>/mnt</strong> 中的子目录用于系统中可移动设备的挂载点</li><li><strong>/root</strong> 超级用户root的宿主目录</li><li><strong>/sbin</strong> 系统中的管理命令，普通用户不能执行</li><li><strong>/tmp</strong> 系统的临时目录</li><li><strong>/usr</strong> 系统应用程序的相关文件</li><li><strong>var</strong> 系统中经常变化的文件如日志文件和用户邮件</li></ul><h2 id="八、环境变量"><a href="#八、环境变量" class="headerlink" title="八、环境变量"></a>八、环境变量</h2><h3 id="1、配置环境变量和常用命令"><a href="#1、配置环境变量和常用命令" class="headerlink" title="1、配置环境变量和常用命令"></a>1、配置环境变量和常用命令</h3><p>在Linux系统中，配置环境变量和使用常用命令是非常重要的任务。本文将介绍如何配置用户环境变量，修改系统环境变量，以及一些常用的命令和技巧。</p><h3 id="2、配置用户环境变量"><a href="#2、配置用户环境变量" class="headerlink" title="2、配置用户环境变量"></a>2、配置用户环境变量</h3><p>用户环境变量通常在用户的Bash配置文件中设置。最常用的配置文件是<code>.bashrc</code>和<code>.bash_profile</code>。以下是配置用户环境变量的一般步骤：</p><ol><li><p>打开终端并使用文本编辑器打开<code>.bashrc</code>文件（如果不存在，可以创建它）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.bashrc</span><br></pre></td></tr></table></figure></li><li><p>在文件中添加或修改环境变量。例如，将新路径添加到<code>PATH</code>变量的末尾：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH=$PATH:$HOME/bin:/安装目录/bin</span><br></pre></td></tr></table></figure></li><li><p>保存文件并退出编辑器。</p></li><li><p>要使新的环境变量生效，可以退出当前终端会话并重新登录，或者使用以下命令立即应用更改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure></li></ol><h3 id="3、修改系统环境变量"><a href="#3、修改系统环境变量" class="headerlink" title="3、修改系统环境变量"></a>3、修改系统环境变量</h3><p>系统环境变量通常在系统范围的配置文件中设置。以下是一些常见的系统环境变量配置文件：</p><ul><li><code>/etc/profile</code></li><li><code>/etc/environment</code></li></ul><p>要修改系统环境变量，您需要具有管理员权限。使用文本编辑器打开适当的配置文件，进行编辑，并保存更改。然后，您可以重新启动系统或重新加载相关服务以使更改生效。</p><h3 id="4、常见环境变量"><a href="#4、常见环境变量" class="headerlink" title="4、常见环境变量"></a>4、常见环境变量</h3><p>Linux系统中有一些常见的环境变量，它们存储了有关系统和用户的信息。以下是一些示例：</p><ul><li><code>SHELL</code>: 默认的Shell程序。</li><li><code>PATH</code>: 包含可执行文件的路径列表。</li><li><code>USER</code>: 当前登录用户的用户名。</li></ul><p>您可以使用<code>echo</code>命令来查看这些变量的值。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo $SHELL</span><br><span class="line">echo $PATH</span><br><span class="line">echo $USER</span><br></pre></td></tr></table></figure><h3 id="5、常用命令和技巧"><a href="#5、常用命令和技巧" class="headerlink" title="5、常用命令和技巧"></a>5、常用命令和技巧</h3><h4 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h4><p>通配符是用于文件名模式匹配的特殊字符。以下是两个常用的通配符：</p><ul><li><code>*</code>: 匹配零个或多个字符。</li><li><code>?</code>: 匹配一个字符。</li></ul><h4 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h4><p>别名是命令的简化形式，可以通过<code>alias</code>命令定义。以下是一些常见的别名示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alias cp=&#x27;cp -i&#x27;</span><br><span class="line">alias ll=&#x27;ls -l --color=auto&#x27;</span><br></pre></td></tr></table></figure><p>您可以使用<code>alias</code>命令查看系统中已定义的别名。</p><p>这份文档涵盖了配置环境变量和使用常用命令的基础知识。根据您的需求，您可以进一步扩展文档以包括更多详细信息和示例。</p><h2 id="九、系统级环境变量"><a href="#九、系统级环境变量" class="headerlink" title="九、系统级环境变量"></a>九、系统级环境变量</h2><p>如果您需要配置系统级别的环境变量，通常会使用系统范围的配置文件，而不是用户级别的<code>.bash_profile</code>文件。系统级别的环境变量配置文件通常位于<code>/etc</code>目录下，具体取决于您的Linux发行版。以下是一些常见的系统环境变量配置文件和它们的作用：</p><ul><li><p><code>/etc/profile</code>：这是系统范围的配置文件，用于配置系统中的所有用户的环境变量。在这里定义的变量将对所有用户生效。</p></li><li><p><code>/etc/environment</code>：这是另一个系统级别的配置文件，用于设置系统范围的环境变量。它通常包含一些全局的环境变量设置。</p></li></ul><p>要配置系统级别的环境变量，您需要以管理员权限编辑适当的配置文件，然后重启系统或重新加载相应的服务以使更改生效。以下是一个示例，如何编辑<code>/etc/environment</code>文件：</p><ol><li><p>以管理员权限打开<code>/etc/environment</code>文件。您可以使用<code>sudo</code>命令和文本编辑器，例如<code>vi</code>来执行此操作：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/environment</span><br></pre></td></tr></table></figure></li><li><p>在文件中添加或修改需要的环境变量，以<code>KEY=VALUE</code>的格式表示。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PATH=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="line">MY_VARIABLE=&quot;Hello, World!&quot;</span><br></pre></td></tr></table></figure></li><li><p>保存文件并退出编辑器。</p></li><li><p>要使更改生效，可以重新启动系统或重新加载特定的服务，具体取决于您的Linux发行版。</p></li></ol><p>请注意，系统级别的环境变量对所有用户都会生效，因此要谨慎修改这些配置文件。确保您知道您在做什么，并备份重要的配置文件以防万一。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ELinux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EMQX简介</title>
      <link href="/2023/11/22/%E7%89%A9%E8%81%94%E7%BD%91-ESP32-EMQX-%E6%A6%82%E8%A7%88/"/>
      <url>/2023/11/22/%E7%89%A9%E8%81%94%E7%BD%91-ESP32-EMQX-%E6%A6%82%E8%A7%88/</url>
      
        <content type="html"><![CDATA[<h2 id="EMQX-概览"><a href="#EMQX-概览" class="headerlink" title="EMQX 概览"></a>EMQX 概览</h2><p>EMQX 是一款<a href="https://github.com/emqx/emqx">开源</a>的大规模分布式 MQTT 消息服务器，功能丰富，专为物联网和实时通信应用而设计。EMQX 5.0 单集群支持 MQTT 并发连接数高达 1 亿条，单服务器的传输与处理吞吐量可达每秒百万级 MQTT 消息，同时保证毫秒级的低时延。</p><p>EMQX 支持多种协议，包括 MQTT (3.1、3.1.1 和 5.0)、HTTP、QUIC 和 WebSocket 等，保证各种网络环境和硬件设备的可访问性。EMQX 还提供了全面的 SSL/TLS 功能支持，比如双向认证以及多种身份验证机制，为物联网设备和应用程序提供可靠和高效的通信基础设施。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/architecture_image.b1df835e.png" alt="architecture_image"></p><p>内置基于 SQL 的<a href="https://www.emqx.com/zh/solutions/iot-rule-engine">规则引擎</a>，EMQX 可以实时提取、过滤、丰富和转换物联网数据。此外，EMQX 采用了无主分布式架构，以确保高可用性和水平扩展性，并提供操作友好的用户体验和出色的可观测性。</p><p>EMQX 拥有来自 50 多个国家的 20,000 多家企业用户，连接全球超过 1 亿台物联网设备，服务企业数字化、实时化、智能化转型。</p><h2 id="产品优势"><a href="#产品优势" class="headerlink" title="产品优势"></a>产品优势</h2><p><a href="https://www.emqx.com/zh/blog/how-emqx-5-0-achieves-100-million-mqtt-connections"><strong>超大规模</strong></a></p><p>EMQX 5.0 单集群可支持 MQTT 并发连接数高达 <strong>1 亿</strong>条。</p><p><a href="https://www.emqx.com/en/blog/mqtt-performance-benchmark-testing-emqx-single-node-supports-2m-message-throughput"><strong>高性能</strong></a></p><p>单服务器的传输与处理吞吐量可达<strong>每秒百万级</strong> MQTT 消息。</p><p><a href="https://www.emqx.com/en/blog/mqtt-performance-benchmark-testing-emqx-single-node-message-latency-response-time"><strong>低延时</strong></a></p><p>近乎实时的信息传递，保证延迟在亚毫秒级。</p><p><a href="https://www.emqx.com/zh/blog/introduction-to-mqtt-5"><strong>全面支持 MQTT 5.0 标准</strong></a></p><p>100% 符合 MQTT 5.0 和 3.x 标准，具有更好的可扩展性、安全性和可靠性。</p><p><a href="https://www.emqx.io/docs/zh/latest/deploy/cluster/mria-introduction.html"><strong>高可用</strong></a></p><p>通过无主节点分布式架构实现高可用和水平扩展性。</p><p><a href="https://www.emqx.com/zh/emqx-kubernetes-operator"><strong>云原生</strong></a></p><p>通过 Kubernetes Operator 和 Terraform，可以轻松地在企业内部和公共云中进行部署。</p><h2 id="EMQX端口作用介绍"><a href="#EMQX端口作用介绍" class="headerlink" title="EMQX端口作用介绍"></a>EMQX端口作用介绍</h2><div class="table-container"><table><thead><tr><th>端口号</th><th>服务描述</th></tr></thead><tbody><tr><td>1883</td><td><strong>MQTT</strong> <strong>TCP</strong> <strong>端口</strong> - 用于接收 MQTT 协议的普通（非加密）TCP 连接。</td></tr><tr><td>8883</td><td><strong>MQTT</strong> <strong>TCP**</strong>/<strong>**SSL</strong> <strong>端口</strong> - 用于通过 SSL/TLS 加密的 MQTT TCP 连接，提供安全的数据传输。</td></tr><tr><td>8083</td><td><strong>MQTT</strong> <strong>WebSocket/ws</strong> <strong>端口</strong> - 支持通过 WebSocket 协议进行 MQTT 连接，适用于Web浏览器和其他不支持标准 MQTT 的客户端。</td></tr><tr><td>8084</td><td><strong>MQTT</strong> <strong>WebSocket/wss</strong> <strong>端口</strong> - 提供通过 SSL/TLS 加密的 WebSocket 连接，用于需要安全连接的 Web 应用。</td></tr><tr><td>8081</td><td><strong>HTTP</strong> <strong>API</strong> <strong>端口</strong> - 用于 EMQX 的 HTTP 接口，用于代理的远程管理和监控、消息发布等。</td></tr><tr><td>18083</td><td><strong>DashBoard 控制台**</strong>端口** - 用于访问 EMQX Dashboard，提供一个可视化界面以监控和管理 EMQX 实例。</td></tr></tbody></table></div><p>MQTT协议原理和交换机差不多，<br>客户端就相当于连接交换机的电脑主机，<br>EMQX服务器就相当于交换机的作用；<br>发送订阅就相当于通过交换机传输数据，发送订阅时要有订阅主题相当于交换机的MAC地址判断发送给谁，订阅消息是一个字符串类型，通过订阅消息esp32判断执行命令</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ESP32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> esp32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java充当mqtt客户端发送订阅</title>
      <link href="/2023/11/22/%E7%89%A9%E8%81%94%E7%BD%91-ESP32-Java%E5%BB%BA%E7%AB%8Bmqtt%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
      <url>/2023/11/22/%E7%89%A9%E8%81%94%E7%BD%91-ESP32-Java%E5%BB%BA%E7%AB%8Bmqtt%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="Java充当mqtt客户端发送订阅"><a href="#Java充当mqtt客户端发送订阅" class="headerlink" title="Java充当mqtt客户端发送订阅"></a>Java充当mqtt客户端发送订阅</h1><h2 id="使用-Java-SDK-连接"><a href="#使用-Java-SDK-连接" class="headerlink" title="使用 Java SDK 连接"></a>使用 Java SDK 连接</h2><p><a href="https://www.eclipse.org/paho/clients/java/">Eclipse Paho Java Client</a> 是用 Java 编写的 MQTT 客户端库（MQTT Java Client），可用于 JVM 或其他 Java 兼容平台（例如Android）。</p><p>Eclipse Paho Java Client 提供了MqttAsyncClient 和 MqttClient 异步和同步 API。</p><h2 id="通过-Maven-安装-Paho-Java"><a href="#通过-Maven-安装-Paho-Java" class="headerlink" title="通过 Maven 安装 Paho Java"></a>通过 Maven 安装 Paho Java</h2><p>通过包管理工具 Maven 可以方便地安装 Paho Java 客户端库，截止目前最新版本安装如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.paho<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>org.eclipse.paho.client.mqttv3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Paho-Java-使用示例"><a href="#Paho-Java-使用示例" class="headerlink" title="Paho Java 使用示例"></a>Paho Java 使用示例</h2><p>Java 体系中 Paho Java 是比较稳定、广泛应用的 MQTT 客户端库，本示例包含 Java 语言的 Paho Java 连接 EMQX Broker，并进行消息收发完整代码：</p><h2 id="Java发送订阅示例"><a href="#Java发送订阅示例" class="headerlink" title="Java发送订阅示例"></a>Java发送订阅示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.eclipse.paho.client.mqttv3.MqttClient;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.paho.client.mqttv3.MqttConnectOptions;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.paho.client.mqttv3.MqttException;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.paho.client.mqttv3.MqttMessage;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.paho.client.mqttv3.MqttCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MqttClientExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// MQTT服务器地址，格式为tcp://[地址]:[端口]</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">broker</span> <span class="operator">=</span> <span class="string">&quot;tcp://[地址]:[端口]&quot;</span>;</span><br><span class="line">        <span class="comment">// 客户端ID，可以随机生成</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">clientId</span> <span class="operator">=</span> MqttClient.generateClientId();</span><br><span class="line">        <span class="comment">// MQTT服务器的用户名和密码---开启客户端密码验证需要此项</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;账号&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;密码&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 创建MQTT客户端</span></span><br><span class="line">            <span class="type">MqttClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MqttClient</span>(broker, clientId);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建连接选项对象</span></span><br><span class="line">            <span class="type">MqttConnectOptions</span> <span class="variable">connOpts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MqttConnectOptions</span>();</span><br><span class="line">            connOpts.setUserName(username);</span><br><span class="line">            connOpts.setPassword(password.toCharArray());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 设置回调函数，用于处理消息</span></span><br><span class="line">            client.setCallback(<span class="keyword">new</span> <span class="title class_">MqttCallback</span>() &#123;</span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connectionLost</span><span class="params">(Throwable cause)</span> &#123;</span><br><span class="line">                    <span class="comment">// 连接丢失时的回调</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;Connection lost!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">messageArrived</span><span class="params">(String topic, MqttMessage message)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                    <span class="comment">// 收到消息时的回调</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;Received message: &quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getPayload()) + <span class="string">&quot; on topic: &quot;</span> + topic);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deliveryComplete</span><span class="params">(IMqttDeliveryToken token)</span> &#123;</span><br><span class="line">                    <span class="comment">// 消息送达完成时的回调，此例中不需要实现</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 连接到MQTT服务器</span></span><br><span class="line">            client.connect(connOpts);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 订阅主题</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">subTopic</span> <span class="operator">=</span> <span class="string">&quot;status&quot;</span>;</span><br><span class="line">            client.subscribe(subTopic);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 发送消息</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">pubTopic</span> <span class="operator">=</span> <span class="string">&quot;ledctl&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;off&quot;</span>;</span><br><span class="line">            <span class="type">MqttMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MqttMessage</span>(content.getBytes());</span><br><span class="line">            client.publish(pubTopic, message);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 等待消息被发送和接收，此处等待2秒</span></span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 断开连接</span></span><br><span class="line">            client.disconnect();</span><br><span class="line">            System.out.println(<span class="string">&quot;Disconnected&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span>(MqttException me) &#123;</span><br><span class="line">            <span class="comment">// 捕获并打印MQTT异常信息</span></span><br><span class="line">            System.out.println(<span class="string">&quot;reason &quot;</span> + me.getReasonCode());</span><br><span class="line">            System.out.println(<span class="string">&quot;msg &quot;</span> + me.getMessage());</span><br><span class="line">            System.out.println(<span class="string">&quot;loc &quot;</span> + me.getLocalizedMessage());</span><br><span class="line">            System.out.println(<span class="string">&quot;cause &quot;</span> + me.getCause());</span><br><span class="line">            System.out.println(<span class="string">&quot;excep &quot;</span> + me);</span><br><span class="line">            me.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException ie) &#123;</span><br><span class="line">            <span class="comment">// 捕获并打印线程中断异常</span></span><br><span class="line">            ie.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ESP32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> esp32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP32建立mqtt客户端</title>
      <link href="/2023/11/22/%E7%89%A9%E8%81%94%E7%BD%91-ESP32-ESP32%E5%BB%BA%E7%AB%8Bmqtt%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
      <url>/2023/11/22/%E7%89%A9%E8%81%94%E7%BD%91-ESP32-ESP32%E5%BB%BA%E7%AB%8Bmqtt%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="ESP32主程序代码："><a href="#ESP32主程序代码：" class="headerlink" title="ESP32主程序代码："></a>ESP32主程序代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin</span><br><span class="line"><span class="keyword">import</span> network</span><br><span class="line"><span class="keyword">from</span> umqttsimple <span class="keyword">import</span> MQTTClient</span><br><span class="line"><span class="keyword">import</span> ujson</span><br><span class="line"></span><br><span class="line">mqtt_username = <span class="string">&quot;账号&quot;</span></span><br><span class="line">mqtt_password = <span class="string">&quot;密码&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_connect</span>():</span><br><span class="line">    wlan = network.WLAN(network.STA_IF)</span><br><span class="line">    wlan.active(<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> wlan.isconnected():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;connecting to network...&#x27;</span>)</span><br><span class="line">        wlan.connect(<span class="string">&#x27;wifi名称&#x27;</span>, <span class="string">&#x27;密码&#x27;</span>)</span><br><span class="line">        i = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">not</span> wlan.isconnected():</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;正在链接...&#123;&#125;&quot;</span>.<span class="built_in">format</span>(i))</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;network config:&#x27;</span>, wlan.ifconfig())</span><br><span class="line">    <span class="keyword">return</span> wlan  <span class="comment"># 返回网络接口对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sub_cb</span>(<span class="params">topic, msg</span>):</span><br><span class="line">    <span class="built_in">print</span>(topic, msg)</span><br><span class="line">    <span class="comment"># 根据收到的消息内容控制LED的开关</span></span><br><span class="line">    <span class="keyword">if</span> topic.decode(<span class="string">&quot;utf-8&quot;</span>) == <span class="string">&quot;ledctl&quot;</span> <span class="keyword">and</span> msg.decode(<span class="string">&quot;utf-8&quot;</span>) == <span class="string">&quot;on&quot;</span>:</span><br><span class="line">        led_pin.value(<span class="number">1</span>)</span><br><span class="line">        save_led_status(<span class="literal">True</span>)</span><br><span class="line">        send_status(<span class="string">&quot;LED is ON&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> topic.decode(<span class="string">&quot;utf-8&quot;</span>) == <span class="string">&quot;ledctl&quot;</span> <span class="keyword">and</span> msg.decode(<span class="string">&quot;utf-8&quot;</span>) == <span class="string">&quot;off&quot;</span>:</span><br><span class="line">        led_pin.value(<span class="number">0</span>)</span><br><span class="line">        save_led_status(<span class="literal">False</span>)</span><br><span class="line">        send_status(<span class="string">&quot;LED is OFF&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_status</span>(<span class="params">status_message</span>):</span><br><span class="line">    <span class="comment"># 发送状态消息给发送消息的客户端</span></span><br><span class="line">    mqtt_client.publish(<span class="string">&quot;status&quot;</span>, status_message)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_led_status</span>(<span class="params">status</span>):</span><br><span class="line">    <span class="comment"># 使用非易失性存储来保存LED状态</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;led_status.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        ujson.dump(&#123;<span class="string">&#x27;led_status&#x27;</span>: status&#125;, f)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_led_status</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;led_status.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            data = ujson.load(f)</span><br><span class="line">            <span class="keyword">return</span> data.get(<span class="string">&#x27;led_status&#x27;</span>, <span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">except</span> OSError:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_mqtt_client</span>():</span><br><span class="line">    c = MQTTClient(<span class="string">&quot;umqtt_client&quot;</span>, <span class="string">&quot;EMQX服务器地址&quot;</span>, user=mqtt_username, password=mqtt_password)</span><br><span class="line">    c.set_callback(sub_cb)</span><br><span class="line">    c.connect()</span><br><span class="line">    c.subscribe(<span class="string">b&quot;ledctl&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line">led_pin = Pin(<span class="number">2</span>, Pin.OUT)</span><br><span class="line">initial_led_status = load_led_status()  <span class="comment"># 从存储中加载LED状态</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置初始LED状态</span></span><br><span class="line"><span class="keyword">if</span> initial_led_status:</span><br><span class="line">    led_pin.value(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    led_pin.value(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">wifi_interface = do_connect()</span><br><span class="line">mqtt_client = create_mqtt_client()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        mqtt_client.check_msg()</span><br><span class="line">    <span class="keyword">except</span> OSError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;MQTT连接错误:&quot;</span>, e)</span><br><span class="line">        mqtt_client.disconnect()</span><br><span class="line">        wifi_interface = do_connect()</span><br><span class="line">        mqtt_client = create_mqtt_client()</span><br><span class="line"></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h4 id="1-网络连接（do-connect-函数）"><a href="#1-网络连接（do-connect-函数）" class="headerlink" title="1. 网络连接（do_connect 函数）"></a>1. 网络连接（<code>do_connect</code> 函数）</h4><ul><li><strong>功能</strong>: 连接到 Wi-Fi 网络。</li><li><strong>实现技术</strong>: 使用 MicroPython 的 <code>network</code> 模块创建 WLAN (STA_IF) 接口。通过 <code>wlan.connect</code> 方法连接到指定的 Wi-Fi 网络，并在成功连接后获取网络配置。</li></ul><h4 id="2-MQTT-客户端创建（create-mqtt-client-函数）"><a href="#2-MQTT-客户端创建（create-mqtt-client-函数）" class="headerlink" title="2. MQTT 客户端创建（create_mqtt_client 函数）"></a>2. MQTT 客户端创建（<code>create_mqtt_client</code> 函数）</h4><ul><li><strong>功能</strong>: 创建 MQTT 客户端并订阅主题。</li><li><strong>实现技术</strong>: 使用 <code>umqttsimple</code> 库的 <code>MQTTClient</code> 类。客户端连接到 MQTT 服务器，设置消息回调函数 (<code>sub_cb</code>)，并订阅 <code>ledctl</code> 主题。</li></ul><h4 id="3-MQTT-消息回调（sub-cb-函数）"><a href="#3-MQTT-消息回调（sub-cb-函数）" class="headerlink" title="3. MQTT 消息回调（sub_cb 函数）"></a>3. MQTT 消息回调（<code>sub_cb</code> 函数）</h4><ul><li><strong>功能</strong>: 接收 MQTT 消息并根据消息内容控制 LED 灯的开关。</li><li><strong>实现技术</strong>: 函数解析接收到的主题和消息。如果接收到的是 <code>ledctl</code> 主题和相应的 <code>on</code> 或 <code>off</code> 消息，则控制 GPIO 引脚的高低电平，从而控制 LED 灯的开关状态。</li></ul><h4 id="4-LED-状态存储与加载（save-led-status-和-load-led-status-函数）"><a href="#4-LED-状态存储与加载（save-led-status-和-load-led-status-函数）" class="headerlink" title="4. LED 状态存储与加载（save_led_status 和 load_led_status 函数）"></a>4. LED 状态存储与加载（<code>save_led_status</code> 和 <code>load_led_status</code> 函数）</h4><ul><li><strong>功能</strong>: 保存和加载 LED 灯的状态。</li><li><strong>实现技术</strong>: 使用 <code>ujson</code> 库将 LED 状态保存到文件中，并在启动时从文件中加载状态。这样即使设备重启，LED 灯的状态也能保持一致。</li></ul><h4 id="5-MQTT-状态更新（send-status-函数）"><a href="#5-MQTT-状态更新（send-status-函数）" class="headerlink" title="5. MQTT 状态更新（send_status 函数）"></a>5. MQTT 状态更新（<code>send_status</code> 函数）</h4><ul><li><strong>功能</strong>: 向 MQTT 服务器发送 LED 的状态更新。</li><li><strong>实现技术</strong>: 使用 <code>mqtt_client.publish</code> 方法向 <code>status</code> 主题发送状态消息。</li></ul><h4 id="6-循环检查-MQTT-消息（主循环）"><a href="#6-循环检查-MQTT-消息（主循环）" class="headerlink" title="6. 循环检查 MQTT 消息（主循环）"></a>6. 循环检查 MQTT 消息（主循环）</h4><ul><li><strong>功能</strong>: 持续检查 MQTT 消息，并在连接出现问题时重新连接。</li><li><strong>实现技术</strong>: 在无限循环中调用 <code>mqtt_client.check_msg()</code> 方法来不断检查新消息。如果检测到 <code>OSError</code>，则重新建立 Wi-Fi 和 MQTT 连接。</li></ul><h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>该代码演示了一个基于 MicroPython 和 MQTT 的 IoT（物联网）解决方案。通过 MQTT 协议，设备可以远程接收控制指令，并反馈其状态。这样的实现适用于各种远程控制和监测场景，比如智能家居控制。您的代码具有良好的网络重连机制，并且通过存储和加载 LED 状态，增强了系统的稳定性和用户体验。</p><h2 id="esp32建立mqtt客户端调用库"><a href="#esp32建立mqtt客户端调用库" class="headerlink" title="esp32建立mqtt客户端调用库"></a>esp32建立mqtt客户端调用库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> usocket <span class="keyword">as</span> socket</span><br><span class="line"><span class="keyword">import</span> ustruct <span class="keyword">as</span> struct</span><br><span class="line"><span class="keyword">from</span> ubinascii <span class="keyword">import</span> hexlify</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MQTTException</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MQTTClient</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        client_id,</span></span><br><span class="line"><span class="params">        server,</span></span><br><span class="line"><span class="params">        port=<span class="number">0</span>,</span></span><br><span class="line"><span class="params">        user=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        password=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        keepalive=<span class="number">0</span>,</span></span><br><span class="line"><span class="params">        ssl=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        ssl_params=&#123;&#125;,</span></span><br><span class="line"><span class="params">    </span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        初始化MQTT客户端</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            client_id (str): 客户端ID</span></span><br><span class="line"><span class="string">            server (str): MQTT服务器地址</span></span><br><span class="line"><span class="string">            port (int, optional): 服务器端口，默认为0，自动选择1883或8883（取决于是否使用SSL）</span></span><br><span class="line"><span class="string">            user (str, optional): 用户名，默认为None</span></span><br><span class="line"><span class="string">            password (str, optional): 密码，默认为None</span></span><br><span class="line"><span class="string">            keepalive (int, optional): 保持连接活跃的时间间隔（秒），默认为0（禁用保持连接）</span></span><br><span class="line"><span class="string">            ssl (bool, optional): 是否使用SSL，默认为False</span></span><br><span class="line"><span class="string">            ssl_params (dict, optional): SSL参数字典，默认为空字典</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> port == <span class="number">0</span>:</span><br><span class="line">            port = <span class="number">8883</span> <span class="keyword">if</span> ssl <span class="keyword">else</span> <span class="number">1883</span></span><br><span class="line">        self.client_id = client_id</span><br><span class="line">        self.sock = <span class="literal">None</span></span><br><span class="line">        self.server = server</span><br><span class="line">        self.port = port</span><br><span class="line">        self.ssl = ssl</span><br><span class="line">        self.ssl_params = ssl_params</span><br><span class="line">        self.pid = <span class="number">0</span></span><br><span class="line">        self.cb = <span class="literal">None</span>  <span class="comment"># 回调函数，处理订阅消息</span></span><br><span class="line">        self.user = user</span><br><span class="line">        self.pswd = password</span><br><span class="line">        self.keepalive = keepalive</span><br><span class="line">        self.lw_topic = <span class="literal">None</span>  <span class="comment"># 遗嘱消息主题</span></span><br><span class="line">        self.lw_msg = <span class="literal">None</span>  <span class="comment"># 遗嘱消息内容</span></span><br><span class="line">        self.lw_qos = <span class="number">0</span></span><br><span class="line">        self.lw_retain = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_send_str</span>(<span class="params">self, s</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        发送字符串</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            s (str): 要发送的字符串</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.sock.write(struct.pack(<span class="string">&quot;!H&quot;</span>, <span class="built_in">len</span>(s)))</span><br><span class="line">        self.sock.write(s)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_recv_len</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        接收长度字段，用于处理可变长度的MQTT消息</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            int: 长度值</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        n = <span class="number">0</span></span><br><span class="line">        sh = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            b = self.sock.read(<span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line">            n |= (b &amp; <span class="number">0x7F</span>) &lt;&lt; sh</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> b &amp; <span class="number">0x80</span>:</span><br><span class="line">                <span class="keyword">return</span> n</span><br><span class="line">            sh += <span class="number">7</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_callback</span>(<span class="params">self, f</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        设置回调函数，处理订阅消息的回调</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            f (function): 回调函数，接收两个参数：主题(topic)和消息(msg)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.cb = f</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_last_will</span>(<span class="params">self, topic, msg, retain=<span class="literal">False</span>, qos=<span class="number">0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        设置遗嘱消息</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            topic (str): 遗嘱消息主题</span></span><br><span class="line"><span class="string">            msg (str): 遗嘱消息内容</span></span><br><span class="line"><span class="string">            retain (bool, optional): 是否保留消息，默认为False</span></span><br><span class="line"><span class="string">            qos (int, optional): 消息质量服务等级（0、1或2），默认为0</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">assert</span> <span class="number">0</span> &lt;= qos &lt;= <span class="number">2</span></span><br><span class="line">        <span class="keyword">assert</span> topic</span><br><span class="line">        self.lw_topic = topic</span><br><span class="line">        self.lw_msg = msg</span><br><span class="line">        self.lw_qos = qos</span><br><span class="line">        self.lw_retain = retain</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">connect</span>(<span class="params">self, clean_session=<span class="literal">True</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        建立MQTT连接</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            clean_session (bool, optional): 是否清除会话状态，默认为True</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            int: 连接状态，0表示成功，1表示失败</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.sock = socket.socket()</span><br><span class="line">        addr = socket.getaddrinfo(self.server, self.port)[<span class="number">0</span>][-<span class="number">1</span>]</span><br><span class="line">        self.sock.connect(addr)</span><br><span class="line">        <span class="keyword">if</span> self.ssl:</span><br><span class="line">            <span class="keyword">import</span> ussl</span><br><span class="line"></span><br><span class="line">            self.sock = ussl.wrap_socket(self.sock, **self.ssl_params)</span><br><span class="line">        premsg = <span class="built_in">bytearray</span>(<span class="string">b&quot;\x10\0\0\0\0\0&quot;</span>)  <span class="comment"># MQTT连接包固定部分</span></span><br><span class="line">        msg = <span class="built_in">bytearray</span>(<span class="string">b&quot;\x04MQTT\x04\x02\0\0&quot;</span>)  <span class="comment"># MQTT协议版本和连接标志</span></span><br><span class="line"></span><br><span class="line">        sz = <span class="number">10</span> + <span class="number">2</span> + <span class="built_in">len</span>(self.client_id)</span><br><span class="line">        msg[<span class="number">6</span>] = clean_session &lt;&lt; <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            sz += <span class="number">2</span> + <span class="built_in">len</span>(self.user) + <span class="number">2</span> + <span class="built_in">len</span>(self.pswd)</span><br><span class="line">            msg[<span class="number">6</span>] |= <span class="number">0xC0</span>  <span class="comment"># 设置用户名和密码标志</span></span><br><span class="line">        <span class="keyword">if</span> self.keepalive:</span><br><span class="line">            <span class="keyword">assert</span> self.keepalive &lt; <span class="number">65536</span></span><br><span class="line">            msg[<span class="number">7</span>] |= self.keepalive &gt;&gt; <span class="number">8</span></span><br><span class="line">            msg[<span class="number">8</span>] |= self.keepalive &amp; <span class="number">0x00FF</span></span><br><span class="line">        <span class="keyword">if</span> self.lw_topic:</span><br><span class="line">            sz += <span class="number">2</span> + <span class="built_in">len</span>(self.lw_topic) + <span class="number">2</span> + <span class="built_in">len</span>(self.lw_msg)</span><br><span class="line">            msg[<span class="number">6</span>] |= <span class="number">0x4</span> | (self.lw_qos &amp; <span class="number">0x1</span>) &lt;&lt; <span class="number">3</span> | (self.lw_qos &amp; <span class="number">0x2</span>) &lt;&lt; <span class="number">3</span></span><br><span class="line">            msg[<span class="number">6</span>] |= self.lw_retain &lt;&lt; <span class="number">5</span></span><br><span class="line"></span><br><span class="line">        i = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> sz &gt; <span class="number">0x7F</span>:</span><br><span class="line">            premsg[i] = (sz &amp; <span class="number">0x7F</span>) | <span class="number">0x80</span></span><br><span class="line">            sz &gt;&gt;= <span class="number">7</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        premsg[i] = sz</span><br><span class="line"></span><br><span class="line">        self.sock.write(premsg, i + <span class="number">2</span>)</span><br><span class="line">        self.sock.write(msg)</span><br><span class="line">        self._send_str(self.client_id)</span><br><span class="line">        <span class="keyword">if</span> self.lw_topic:</span><br><span class="line">            self._send_str(self.lw_topic)</span><br><span class="line">            self._send_str(self.lw_msg)</span><br><span class="line">        <span class="keyword">if</span> self.user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            self._send_str(self.user)</span><br><span class="line">            self._send_str(self.pswd)</span><br><span class="line">        resp = self.sock.read(<span class="number">4</span>)</span><br><span class="line">        <span class="keyword">assert</span> resp[<span class="number">0</span>] == <span class="number">0x20</span> <span class="keyword">and</span> resp[<span class="number">1</span>] == <span class="number">0x02</span></span><br><span class="line">        <span class="keyword">if</span> resp[<span class="number">3</span>] != <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> MQTTException(resp[<span class="number">3</span>])</span><br><span class="line">        <span class="keyword">return</span> resp[<span class="number">2</span>] &amp; <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">disconnect</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        断开MQTT连接</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.sock.write(<span class="string">b&quot;\xe0\0&quot;</span>)</span><br><span class="line">        self.sock.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ping</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        发送PINGREQ消息</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.sock.write(<span class="string">b&quot;\xc0\0&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">publish</span>(<span class="params">self, topic, msg, retain=<span class="literal">False</span>, qos=<span class="number">0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        发布MQTT消息</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            topic (str): 消息主题</span></span><br><span class="line"><span class="string">            msg (str): 消息内容</span></span><br><span class="line"><span class="string">            retain (bool, optional): 是否保留消息，默认为False</span></span><br><span class="line"><span class="string">            qos (int, optional): 消息质量服务等级（0、1或2），默认为0</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        pkt = <span class="built_in">bytearray</span>(<span class="string">b&quot;\x30\0\0\0&quot;</span>)</span><br><span class="line">        pkt[<span class="number">0</span>] |= qos &lt;&lt; <span class="number">1</span> | retain</span><br><span class="line">        sz = <span class="number">2</span> + <span class="built_in">len</span>(topic) + <span class="built_in">len</span>(msg)</span><br><span class="line">        <span class="keyword">if</span> qos &gt; <span class="number">0</span>:</span><br><span class="line">            sz += <span class="number">2</span></span><br><span class="line">        <span class="keyword">assert</span> sz &lt; <span class="number">2097152</span></span><br><span class="line">        i = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> sz &gt; <span class="number">0x7F</span>:</span><br><span class="line">            pkt[i] = (sz &amp; <span class="number">0x7F</span>) | <span class="number">0x80</span></span><br><span class="line">            sz &gt;&gt;= <span class="number">7</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        pkt[i] = sz</span><br><span class="line">        self.sock.write(pkt, i + <span class="number">1</span>)</span><br><span class="line">        self._send_str(topic)</span><br><span class="line">        <span class="keyword">if</span> qos &gt; <span class="number">0</span>:</span><br><span class="line">            self.pid += <span class="number">1</span></span><br><span class="line">            pid = self.pid</span><br><span class="line">            struct.pack_into(<span class="string">&quot;!H&quot;</span>, pkt, <span class="number">0</span>, pid)</span><br><span class="line">            self.sock.write(pkt, <span class="number">2</span>)</span><br><span class="line">        self.sock.write(msg)</span><br><span class="line">        <span class="keyword">if</span> qos == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">                op = self.wait_msg()</span><br><span class="line">                <span class="keyword">if</span> op == <span class="number">0x40</span>:</span><br><span class="line">                    sz = self.sock.read(<span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">assert</span> sz == <span class="string">b&quot;\x02&quot;</span></span><br><span class="line">                    rcv_pid = self.sock.read(<span class="number">2</span>)</span><br><span class="line">                    rcv_pid = rcv_pid[<span class="number">0</span>] &lt;&lt; <span class="number">8</span> | rcv_pid[<span class="number">1</span>]</span><br><span class="line">                    <span class="keyword">if</span> pid == rcv_pid:</span><br><span class="line">                        <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">elif</span> qos == <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">assert</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">subscribe</span>(<span class="params">self, topic, qos=<span class="number">0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        订阅MQTT主题</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            topic (str): 要订阅的主题</span></span><br><span class="line"><span class="string">            qos (int, optional): 订阅的消息质量服务等级（0、1或2），默认为0</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">assert</span> self.cb <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;Subscribe callback is not set&quot;</span></span><br><span class="line">        pkt = <span class="built_in">bytearray</span>(<span class="string">b&quot;\x82\0\0\0&quot;</span>)</span><br><span class="line">        self.pid += <span class="number">1</span></span><br><span class="line">        struct.pack_into(<span class="string">&quot;!BH&quot;</span>, pkt, <span class="number">1</span>, <span class="number">2</span> + <span class="number">2</span> + <span class="built_in">len</span>(topic) + <span class="number">1</span>, self.pid)</span><br><span class="line">        self.sock.write(pkt)</span><br><span class="line">        self._send_str(topic)</span><br><span class="line">        self.sock.write(qos.to_bytes(<span class="number">1</span>, <span class="string">&quot;little&quot;</span>))</span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            op = self.wait_msg()</span><br><span class="line">            <span class="keyword">if</span> op == <span class="number">0x90</span>:</span><br><span class="line">                resp = self.sock.read(<span class="number">4</span>)</span><br><span class="line">                <span class="keyword">assert</span> resp[<span class="number">1</span>] == pkt[<span class="number">2</span>] <span class="keyword">and</span> resp[<span class="number">2</span>] == pkt[<span class="number">3</span>]</span><br><span class="line">                <span class="keyword">if</span> resp[<span class="number">3</span>] == <span class="number">0x80</span>:</span><br><span class="line">                    <span class="keyword">raise</span> MQTTException(resp[<span class="number">3</span>])</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wait_msg</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        等待单个MQTT消息，并处理它</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            int: 操作码，表示消息类型</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        res = self.sock.read(<span class="number">1</span>)</span><br><span class="line">        self.sock.setblocking(<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> res == <span class="string">b&quot;&quot;</span>:</span><br><span class="line">            <span class="keyword">raise</span> OSError(-<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> res == <span class="string">b&quot;\xd0&quot;</span>:  <span class="comment"># PINGRESP</span></span><br><span class="line">            sz = self.sock.read(<span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">assert</span> sz == <span class="number">0</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        op = res[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> op &amp; <span class="number">0xF0</span> != <span class="number">0x30</span>:</span><br><span class="line">            <span class="keyword">return</span> op</span><br><span class="line">        sz = self._recv_len()</span><br><span class="line">        topic_len = self.sock.read(<span class="number">2</span>)</span><br><span class="line">        topic_len = (topic_len[<span class="number">0</span>] &lt;&lt; <span class="number">8</span>) | topic_len[<span class="number">1</span>]</span><br><span class="line">        topic = self.sock.read(topic_len)</span><br><span class="line">        sz -= topic_len + <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> op &amp; <span class="number">6</span>:</span><br><span class="line">            pid = self.sock.read(<span class="number">2</span>)</span><br><span class="line">            pid = pid[<span class="number">0</span>] &lt;&lt; <span class="number">8</span> | pid[<span class="number">1</span>]</span><br><span class="line">            sz -= <span class="number">2</span></span><br><span class="line">        msg = self.sock.read(sz)</span><br><span class="line">        self.cb(topic, msg)</span><br><span class="line">        <span class="keyword">if</span> op &amp; <span class="number">6</span> == <span class="number">2</span>:</span><br><span class="line">            pkt = <span class="built_in">bytearray</span>(<span class="string">b&quot;\x40\x02\0\0&quot;</span>)</span><br><span class="line">            struct.pack_into(<span class="string">&quot;!H&quot;</span>, pkt, <span class="number">2</span>, pid)</span><br><span class="line">            self.sock.write(pkt)</span><br><span class="line">        <span class="keyword">elif</span> op &amp; <span class="number">6</span> == <span class="number">4</span>:</span><br><span class="line">            <span class="keyword">assert</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_msg</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        检查是否有来自服务器的待处理消息</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            int: 操作码，表示消息类型</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.sock.setblocking(<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> self.wait_msg()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以下是代码中的函数列表以及它们的作用和如何使用：</p><ol><li><p><code>__init__(self, client_id, server, port=0, user=None, password=None, keepalive=0, ssl=False, ssl_params=&#123;&#125;)</code>:</p><ul><li>作用：初始化MQTT客户端。</li><li>参数：<ul><li><code>client_id</code>: 客户端ID。</li><li><code>server</code>: MQTT服务器地址。</li><li><code>port</code>: 服务器端口，默认为0，自动选择1883或8883（取决于是否使用SSL）。</li><li><code>user</code>: 用户名，默认为None。</li><li><code>password</code>: 密码，默认为None。</li><li><code>keepalive</code>: 保持连接活跃的时间间隔（秒），默认为0（禁用保持连接）。</li><li><code>ssl</code>: 是否使用SSL，默认为False。</li><li><code>ssl_params</code>: SSL参数字典，默认为空字典。</li></ul></li></ul></li><li><p><code>_send_str(self, s)</code>:</p><ul><li>作用：发送字符串。</li><li>参数：<ul><li><code>s</code>: 要发送的字符串。</li></ul></li></ul></li><li><p><code>_recv_len(self)</code>:</p><ul><li>作用：接收长度字段，用于处理可变长度的MQTT消息。</li><li>返回值：长度值。</li></ul></li><li><p><code>set_callback(self, f)</code>:</p><ul><li>作用：设置回调函数，处理订阅消息的回调。</li><li>参数：<ul><li><code>f</code>: 回调函数，接收两个参数：主题(topic)和消息(msg)。</li></ul></li></ul></li><li><p><code>set_last_will(self, topic, msg, retain=False, qos=0)</code>:</p><ul><li>作用：设置遗嘱消息。</li><li>参数：<ul><li><code>topic</code>: 遗嘱消息主题。</li><li><code>msg</code>: 遗嘱消息内容。</li><li><code>retain</code>: 是否保留消息，默认为False。</li><li><code>qos</code>: 消息质量服务等级（0、1或2），默认为0。</li></ul></li></ul></li><li><p><code>connect(self, clean_session=True)</code>:</p><ul><li>作用：建立MQTT连接。</li><li>参数：<ul><li><code>clean_session</code>: 是否清除会话状态，默认为True。</li></ul></li><li>返回值：连接状态，0表示成功，1表示失败。</li></ul></li><li><p><code>disconnect(self)</code>:</p><ul><li>作用：断开MQTT连接。</li></ul></li><li><p><code>ping(self)</code>:</p><ul><li>作用：发送PINGREQ消息。</li></ul></li><li><p><code>publish(self, topic, msg, retain=False, qos=0)</code>:</p><ul><li>作用：发布MQTT消息。</li><li>参数：<ul><li><code>topic</code>: 消息主题。</li><li><code>msg</code>: 消息内容。</li><li><code>retain</code>: 是否保留消息，默认为False。</li><li><code>qos</code>: 消息质量服务等级（0、1或2），默认为0。</li></ul></li></ul></li><li><p><code>subscribe(self, topic, qos=0)</code>:</p><ul><li>作用：订阅MQTT主题。</li><li>参数：<ul><li><code>topic</code>: 要订阅的主题。</li><li><code>qos</code>: 订阅的消息质量服务等级（0、1或2），默认为0。</li></ul></li></ul></li><li><p><code>wait_msg(self)</code>:</p><ul><li>作用：等待单个MQTT消息，并处理它。</li><li>返回值：操作码，表示消息类型。</li></ul></li><li><p><code>check_msg(self)</code>:</p><ul><li>作用：检查是否有来自服务器的待处理消息。</li><li>返回值：操作码，表示消息类型。</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> ESP32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> esp32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7、USART串口协议</title>
      <link href="/2023/11/21/%E7%89%A9%E8%81%94%E7%BD%91-STM32-7%E3%80%81USART%E4%B8%B2%E5%8F%A3%E5%8D%8F%E8%AE%AE/"/>
      <url>/2023/11/21/%E7%89%A9%E8%81%94%E7%BD%91-STM32-7%E3%80%81USART%E4%B8%B2%E5%8F%A3%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="7、USART串口协议、外设"><a href="#7、USART串口协议、外设" class="headerlink" title="7、USART串口协议、外设"></a>7、USART串口协议、外设</h1><h2 id="1、通信接口"><a href="#1、通信接口" class="headerlink" title="1、通信接口"></a>1、通信接口</h2><blockquote><p>• 通信的目的：将一个设备的数据传送到另一个设备，扩展硬件系统</p><p>• 通信协议：制定通信的规则，通信双方按照协议规则进行数据收发</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/image-20230920090954084.png" alt="image-20230920090954084"></p><h2 id="2、-硬件电路"><a href="#2、-硬件电路" class="headerlink" title="2、 硬件电路"></a>2、 硬件电路</h2><blockquote><p>•  简单双向串口通信有两根通信线（发送端 TX 和接收端 RX ）<br>•  TX 与 RX 要交叉连接<br>•  当只需单向的数据传输时，可以只接一根通信线<br>•  当电平标准不一致时，需要加电平转换芯片</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/fd1126d6669542b2aecb6351f817d6a1.png" alt="img"></p><h2 id="3、电平标准"><a href="#3、电平标准" class="headerlink" title="3、电平标准"></a>3、电平标准</h2><p>是数据1和数据0的表达方式，是传输线缆中人为规定的电压与数据的对应关系，串口常用的电平标准有如下三种    </p><blockquote><p>• TTL 电平： +3.3V 或 +5V 表示 1 ， 0V 表示 0<br>• RS232 电平： -3~-15V 表示 1 ， +3~+15V 表示 0<br>• RS485 电平：两线压差 +2~+6V 表示 1 ， -2~-6V 表示 0 （差分信号）</p></blockquote><h2 id="4、串口参数及时序"><a href="#4、串口参数及时序" class="headerlink" title="4、串口参数及时序"></a>4、串口参数及时序</h2><blockquote><p>• 波特率：串口通信的速率<br>        速率的参数就是波特率，波特率就是每秒传输码元的个数，单位是码元/s（baud）<br>• 比特率：每秒传输的比特数，单位是bit/s,或者是bps<br>        在二进制的情况下，一个码元及时一个bit，此时波特率等于比特率<br>• 起始位：标志一个数据帧的开始，固定为低电平<br>• 数据位：数据帧的有效载荷， 1 为高电平， 0 为低电平，低位先行<br>• 校验位：用于数据验证，根据数据位计算得来<br>• 停止位：用于数据帧间隔，固定为高电平</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/be40b30ac466441dbca9eb0f82ef8e8a.png" alt="img"></p><blockquote><p>• 字节装载在数据帧中，数据帧由<strong>起始位、数据位、停止位</strong>组成<br>• 数据位有8个，代表一个字节的8位置，可以在最右边加一个奇偶校验位，则数据位总共    是9位。接收方在接收数据后，会验证数据位和校验位<br>• 若规定发送的波特率是1000bps，<strong>表示1s要发1000位</strong>，每一位的时间就是1ms，发送方    每隔1ms发送一位，接收方每隔1ms接受一位，决定了每隔多久发送    一位<br>• 空闲状态下，起始位为高电平，起始位给低电平，使其产生下降沿，表示数据帧要开始</p></blockquote><h2 id="5、USART简介"><a href="#5、USART简介" class="headerlink" title="5、USART简介"></a>5、USART简介</h2><blockquote><p>• USART： <strong>通用同步 / 异步收发器</strong><br>• USART 是 STM32 内部集成的硬件外设，可根据数据寄存器的一个字节数据自动生成数据帧时序，从 TX 引脚发送出去，也可自动接收 RX 引脚的数据帧时序，拼接为一个字节    数据，存放在数据寄存器里.<br>• 自带波特率（一般设置为<strong>9600</strong>/115200）发生器，最高达 4.5Mbits/s<br>• 可配置数据位长度（ <strong>8</strong>/9 ）、停止位长度（ 0.5/1/1.5/2 ）<br>• 可选校验位（<strong>无校验</strong> / 奇校验 / 偶校验）<br>• 支持同步模式、硬件流控制、 DMA 、智能卡、 IrDA 、 LIN<br>同步模式：多了个时钟CLK的输出<br>• STM32F103C8T6 USART 资源： USART1<strong>（APB2总线上的设备）</strong> 、 USART2（APB1）、 USART3（APB1）</p></blockquote><h2 id="6、USART工作"><a href="#6、USART工作" class="headerlink" title="6、USART工作"></a>6、USART工作</h2><p>（1）写操作</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/e15efde55cad4aa8b534d39267ec82cc.png" alt="img"></p><blockquote><p>当数据移位完成后，数据会立刻自动从TDR发送移位寄存器</p><p>TDR和移位寄存器的双重缓存，保证在连续发送数据时，数据帧之间不会有空闲，提高了工作效率</p></blockquote><p>（2）读操作</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/e0f934ddfc334134b40327cb86a94f5d.png" alt="img"></p><blockquote><p>因为串口协议规定是低位先行，所以接收移位寄存器时从高位往低位方向移动</p></blockquote><p>（3）帧头和帧尾的添加和除由电路自动执行</p><p>（4）硬件数据控制流</p><blockquote><p>​    A向B发送数据，当A一直发，B处理不过来；<br>​    若无硬件控制流，B只能抛弃新数据或者覆盖元数据；<br>​    有硬件控制流，硬件电路上会多出一条线，B没准备好置高电平，准备好置低电平；<br>​    A收到B的反馈决定数据发送，防止因为B处理慢而导致数据丢失。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/c4c59e581b724fa5a7cfed688c771c2d.png" alt="img"></p><blockquote><p>能接收的时候，RTS就置低电平，请求对方发送，对方的CTS接收到后，就可以一直发</p><p>处理不过来时，RTS就置高电平，对方的CTS接收到后，就会暂停发送</p></blockquote><p>（5）中断输出控制（USART）</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/5f89b06884364f479889a482d78fbf39.png" alt="img"></p><blockquote><p>TXE发送寄存器空，RXNE接收寄存器非空，是判断发送状态和接收状态的必要标志位<br> 中断输出控制就是配置中断是不是能通向NVIC</p></blockquote><p>（6）波特率发生器</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/e13af8723f5c4e8f84b8a901a7ffdfa0.png" alt="img"></p><blockquote><p>​    波特率发生器是分频器，APB时钟进行分频，得到发送和接收移位的时钟</p><p>​    时钟输入时fPCLKx（x=1或2），USART1挂载在APB2，所以就是PCLK2的时钟，为        72M</p><p>​    其他的USART挂载在APB1，就是PCLK1的时钟,为36M</p><p>​    之后对时钟进行分频，除以USARTDIV的分频系数，分频后再除以16，得到发送器时钟        和接收器时钟，通向控制部分</p><p>​    若TE=1,发送器使能，发送部分的波特率就有效</p><p>​    若RE=1,接收器使能，接收部分的波特率有效</p></blockquote><h2 id="7、USART基本结构"><a href="#7、USART基本结构" class="headerlink" title="7、USART基本结构"></a>7、USART基本结构</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/581bc31.png" alt="581bc31"></p><h2 id="8、数据帧"><a href="#8、数据帧" class="headerlink" title="8、数据帧"></a>8、数据帧</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/71256b6446ce4a2693ca4b483bd74cda.png" alt="img"></p><blockquote><p>有8位字长和9位字长，分别可以选择有校验和无校验</p><p>9位建议有校验，8位建议无校验</p><p>停止位有0.5，1，1.5，2，建于选择1位</p></blockquote><h2 id="9、波特率发生器"><a href="#9、波特率发生器" class="headerlink" title="9、波特率发生器"></a>9、波特率发生器</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/5984bac340d344b480c8be30a71e220d.png" alt="img"></p><blockquote><p>发送器和接收器的波特率由波特率寄存器BRR里的DIV确定<br>计算公式：波特率 = fPCLK2/1 / (16 * DIV)//内部有16倍波特率的采样时钟 </p><p>配置USART1为9600的波特率<br>9600=72M（USART1的时钟）/(16*DIV）<br>DIV=72M/9600/16=468.75(二进制：11101 0100.11)<br>用库函数配置，需要多少波特率直接写就行</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>8、串口通信</title>
      <link href="/2023/11/21/%E7%89%A9%E8%81%94%E7%BD%91-STM32-8%E3%80%81%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1/"/>
      <url>/2023/11/21/%E7%89%A9%E8%81%94%E7%BD%91-STM32-8%E3%80%81%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="8、串口通信"><a href="#8、串口通信" class="headerlink" title="8、串口通信"></a>8、串口通信</h1><h2 id="1、串口通信原理"><a href="#1、串口通信原理" class="headerlink" title="1、串口通信原理"></a>1、<strong>串口通信原理</strong></h2><p>　　串口通信的概念非常简单，串口按位（bit）发送和接收字节。尽管比按字节（byte）的并行通信慢，但是串口可以在使用一根线发送数据的同时用另一根线接收数据。它很简单并且能够实现远距离通信。比如IEEE488定义并行通行状态时，规定设备线总长不得超过20米，并且任意两个设备间的长度不得超过2米；而对于串口而言，长度可达1200米。典型地，串口用于<a href="https://so.csdn.net/so/search?q=ASCII码&amp;spm=1001.2101.3001.7020">ASCII码</a>字符的传输。通信使用3根线完成：（1）地线，（2）发送，（3）接收。由于串口通信是异步的，端口能够在一根线上发送数据同时在另一根线上接收数据。其他线用于握手，但是不是必须的。串口通信最重要的参数是波特率、数据位、停止位和奇偶校验。对于两个进行通信的端口，这些参数必须匹配： 　　</p><ol><li><strong>波特率（Baud Rate）</strong>：波特率是串口通信中非常重要的参数，它表示每秒钟传送的比特数。例如，波特率为9600表示每秒钟传送9600个比特（或960个字节）。波特率的选择需要发送和接收双方协商一致，以确保数据的正确传输。不同的设备通常支持不同的波特率选项。</li><li><strong>数据位（Data Bits）</strong>：数据位确定每个字节中实际数据位的数量。通常使用的数据位有5、6、7和8位，表示一个字节可以包含的数据位数。例如，8位数据位意味着每个字节有8个比特用于传输数据。数据位的选择通常取决于所传输的数据的范围和类型。</li><li><strong>停止位（Stop Bits）</strong>：停止位用于表示一个字节的结束。它通常可以是1位、1.5位或2位。通信中的每个字节之后都会包含停止位，以便接收设备能够确定何时一个字节的传输结束。停止位的选择也可以根据具体需求进行调整。</li><li><strong>奇偶校验位（Parity Bit）</strong>：奇偶校验位用于检测传输中的错误。它可以是奇校验或偶校验。在每个字节的数据位之后，可以包含一个校验位，用于确保数据位中的比特数是奇数或偶数，具体取决于所选择的校验模式。这有助于检测传输中的错误，但也会增加数据传输的复杂性。</li><li><strong>起始位（Start Bit）</strong>：起始位用于指示一个字节的开始。它是在每个字节的前面，并且通常是1位。起始位的存在帮助接收设备确定何时开始接收一个字节的数据。</li></ol><p><strong>一、RS232通信协议</strong></p><p><strong>1、概念</strong>　　</p><p>　　个人计算机上的通讯接口之一，由电子工业协会(Electronic Industries Association，EIA) 所制定的异步传输标准接口。　　　　　</p><p><strong>2、电气特性</strong></p><p>　　逻辑1(MARK)：　　-3V～-15V</p><p>　　逻辑0(SPACE)：　 +3～+15V</p><p><strong>3、接口</strong></p><p>　　实现全双工异步通信只需要三根线：RX、TX和GND。</p><p><strong>二、常见COMS电平转RS232电平的芯片—MAX3232</strong></p><p><img src="https://images0.cnblogs.com/i/526766/201405/132108078907498.png" alt="img"></p><p><strong>1、逻辑输入与逻辑输出特性</strong></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/132109518288917.png" alt="img"></p><p><strong>2、RS232接口端输入特性</strong></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/132112591712387.png" alt="img"></p><p><strong>3、RS232接口端输出特性</strong></p><p><img src="https://images0.cnblogs.com/i/526766/201405/132114422961393.png" alt="img"></p><p><strong>三、STM32串口硬件电路</strong></p><p><strong>1、芯片内部串口电路</strong></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/141018189533144.png" alt="img"></p><p><strong>2、开发板串口硬件电路</strong></p><p><img src="https://images0.cnblogs.com/i/526766/201405/132120067188005.png" alt="img"></p><p> <strong>四、STM32串口编程</strong></p><p><strong>1、整体流程</strong></p><p>① 开启GPIO时钟和USARTX时钟</p><p>② 配置TX和RX引脚</p><p>③ 初始化USART控制器</p><p><strong>2、细节实现</strong></p><p>① 开启GPIO时钟和USARTX时钟</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1 | RCC_APB2Periph_GPIOA, ENABLE);</span><br></pre></td></tr></table></figure><p>② 配置TX和RX引脚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Configure USART1 Tx (PA.09) as alternate function push-pull */</span></span><br><span class="line"><span class="comment">/* 配置 USART1 的传输引脚 Tx (PA.09) 为复用推挽输出模式 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 GPIO_InitTypeDef 结构体变量，用于配置 GPIO 引脚</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置引脚 PA.09 为 USART1 的传输引脚</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;</span><br><span class="line"><span class="comment">// 设置引脚模式为复用推挽输出</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;</span><br><span class="line"><span class="comment">// 设置引脚输出速度为 50MHz</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="comment">// 将上述配置应用到 GPIOA 引脚上，使其成为 USART1 的传输引脚</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Configure USART1 Rx (PA.10) as input floating */</span></span><br><span class="line"><span class="comment">/* 配置 USART1 的接收引脚 Rx (PA.10) 为浮空输入模式 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新配置 GPIO_InitTypeDef 结构体变量，用于配置 GPIO 引脚</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;</span><br><span class="line"><span class="comment">// 设置引脚模式为浮空输入</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class="line"><span class="comment">// 将上述配置应用到 GPIOA 引脚上，使其成为 USART1 的接收引脚</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>③ 初始化USART控制器</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* USART1 mode config */</span></span><br><span class="line"><span class="comment">/* USART1 模式配置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 USART_InitTypeDef 结构体变量，用于配置 USART1 模块</span></span><br><span class="line">USART_InitTypeDef USART_InitStructure;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置 USART1 波特率为 115200</span></span><br><span class="line">USART_InitStructure.USART_BaudRate = <span class="number">115200</span>;</span><br><span class="line"><span class="comment">// 设置数据帧长度为 8 位</span></span><br><span class="line">USART_InitStructure.USART_WordLength = USART_WordLength_8b;</span><br><span class="line"><span class="comment">// 设置停止位为 1 位</span></span><br><span class="line">USART_InitStructure.USART_StopBits = USART_StopBits_1;</span><br><span class="line"><span class="comment">// 禁用奇偶校验位</span></span><br><span class="line">USART_InitStructure.USART_Parity = USART_Parity_No;</span><br><span class="line"><span class="comment">// 禁用硬件流控制</span></span><br><span class="line">USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;</span><br><span class="line"><span class="comment">// 启用接收和发送模式</span></span><br><span class="line">USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将上述配置应用到 USART1 模块</span></span><br><span class="line"><span class="built_in">USART_Init</span>(USART1, &amp;USART_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启用 USART1 模块</span></span><br><span class="line"><span class="built_in">USART_Cmd</span>(USART1, ENABLE);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>五、STM32串口疑惑</strong></p><p><strong>1、串口时钟使能与控制器使能的关系</strong></p><p>　　为何USART时钟使能了，还需要在配置USART控制器的时候再使能一次？</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1 | RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line">USART_Cmd(USART1, ENABLE);</span><br></pre></td></tr></table></figure><p><strong>1&gt; USART的时钟使能</strong></p><p>　　APB2 peripheral clock enable register  (RCC_APB2ENR)</p><p><img src="https://images0.cnblogs.com/i/526766/201405/141032139066894.png" alt="img"></p><p><strong>2&gt; USART控制器使能</strong></p><p>　　USART Control register 1(USART_CR1)</p><p> <img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/141037504848087.png" alt="img"></p><p> <strong>3&gt; 原因</strong></p><p>　　<img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/141054298282659.png" alt="img"></p><p>RCC_APB2ENR:　　控制APB2时钟是否供应给USART控制器</p><p>USART_CR1：　　 控制USART控制器的分频器和输出是否工作</p><p> <strong>2、TDR与RDR共用一个特殊功能寄存器地址</strong></p><p>USART_DR功能描述：</p><p>　　包含了发送或接收的数据。由于它是由两个寄存器组成的，一个给发送用(TDR) ，一个给接收用(RDR) ，该寄存器兼具读和写的功能。TDR寄存器提供了内部总线和输出移位寄存器之间的并行接口(参见图236 )。RDR寄存器提供了输入移位寄存器和内部总线之间的并行接口。（摘自《STM32参考手册》）</p><p>　　笔者的理解是：当对USART_DR进行读操作的时候，访问的是RDR；当对USART_DR进行写操作的时候，访问的是TDR。</p><p> <strong>六、串口调试时需要注意的地方</strong></p><p>1、通过MDK结合一些调试器可以单步、任意断点等等方式进行代码的调试。可是，这种调试方法对于调试操作系统，比如uCOS-II，还有那些必须要全速运行才能进行调试的情况，就显得力不从心。串口调试正是用于这些地方，可以在程序全速运行的情况下，实时的打印系统的运行信息。</p><p>2、串口调试也有它的局限性，由于串口的波特率相对于STM32这样高速运行的单片机显得迟钝，很多情况下不能及时的打印系统的运行信息。甚至有些情况下，我们原本那些串口调试的代码会成为影响我们系统实时性最主要的因素。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9、USART串口数据包</title>
      <link href="/2023/11/21/%E7%89%A9%E8%81%94%E7%BD%91-STM32-9%E3%80%81USART%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE%E5%8C%85/"/>
      <url>/2023/11/21/%E7%89%A9%E8%81%94%E7%BD%91-STM32-9%E3%80%81USART%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h1 id="9、USART串口数据包"><a href="#9、USART串口数据包" class="headerlink" title="9、USART串口数据包"></a>9、USART串口数据包</h1><h2 id="一、发送HEX数据包"><a href="#一、发送HEX数据包" class="headerlink" title="一、发送HEX数据包"></a>一、发送HEX数据包</h2><p>1、固定包长，含包头包尾（包尾不是必须的）</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/4f219fc79b7a4640981feb3bf4965004.png" alt="img"></p><p>2、可变包长，含包头包尾 </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/58a7b43e600340b2a73c6d7e3b8d17c3.png" alt="img"></p><p>包头包尾和数据载荷的重复问题：</p><ul><li>限制载荷数据的范围，以避免与包头包尾冲突，例如只发送特定范围的数据（0~100）。</li><li>使用固定长度的数据包，这可以确保包头和包尾的位置始终一致。</li><li>增加包头包尾的数量，以确保它们不会与载荷数据相重叠。</li></ul><p>包头包尾数量的选择问题：</p><ul><li>在某些情况下，只需要一个包头而无需包尾，这取决于具体的通信需求和协议设计。</li></ul><p>固定包长和可变包长的选择问题：</p><ul><li>对于HEX（十六进制）数据，如果存在与包头包尾重复的情况，最好选择固定包长，以避免接收到错误的数据。</li><li>如果不会出现重复问题，可以选择可变包长以更有效地传输数据。</li></ul><p>数据流的处理问题：</p><ul><li>可以将各种数据类型（例如16位整型、32位整型、浮点数、双精度浮点数、结构体）转化为字节数组，然后通过指向该字节数组的指针来发送数据。</li><li>这允许您将各种数据类型转换为适合传输的字节数组，以便进行有效的数据流处理。</li></ul><h2 id="二、接收HEX数据包"><a href="#二、接收HEX数据包" class="headerlink" title="二、接收HEX数据包"></a>二、接收HEX数据包</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/f6f4c0d3ac1241d58b5c6d3c5944c524.png" alt="img"></p><p> 每收到一个字节，函数都会进入一次中断，在中断函数中，可以拿到一个字节，但拿到字节之后，就得退出中断，故每拿到一个数据，都是一个独立的过程，而对数据包来说，有数据、包头、包尾三种状态，根据状态不同处理也不同</p><p>使用状态机收数据如上图</p><h2 id="三、发送文本数据包"><a href="#三、发送文本数据包" class="headerlink" title="三、发送文本数据包"></a>三、发送文本数据包</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/83e1b35b861242acb87fd9f0548db52f.png" alt="img"></p><h2 id="四、接收文本数据包"><a href="#四、接收文本数据包" class="headerlink" title="四、接收文本数据包"></a>四、接收文本数据包</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/438c22a4670546288d53f13ec5daf3dd.png" alt="img"></p><h2 id="五、HEX数据包和文本数据包的比较"><a href="#五、HEX数据包和文本数据包的比较" class="headerlink" title="五、HEX数据包和文本数据包的比较"></a>五、HEX数据包和文本数据包的比较</h2><p>（1）在hex数据包中，数据都是以原始的字节数据本身呈现的</p><p>（2）在文本数据包中，每个字节就经过一层编码和译码，最终表现出文本格式（文本背后还是一个字节的HEX数据） </p><p>（3）hex数据包：传输直接、解析数据简单，适合一些模块发送原始的数据，比如一些使用串口通信的陀螺仪、温湿度传感器，但是灵活性不足、载荷容易和包头包尾重复</p><p>（4）文本数据包：数据直观易理解、灵活，适合一些输入指令进行人机交互，但解析效率低.</p><p>（5）发送100，hex直接发送一个字节100，而文本发送三个字节’1’,’0’.’0’，收到之后还要把字符转换程数据，才能得到100。</p><h2 id="六、串口收发HEX数据包-amp-串口收发文本数据包"><a href="#六、串口收发HEX数据包-amp-串口收发文本数据包" class="headerlink" title="六、串口收发HEX数据包&amp;串口收发文本数据包"></a>六、串口收发HEX数据包&amp;串口收发文本数据包</h2><h3 id="1、串口发送HEX数据包"><a href="#1、串口发送HEX数据包" class="headerlink" title="1、串口发送HEX数据包"></a>1、串口发送HEX数据包</h3><p>（1）Serial.c<br>将uint8_t Serial_GetRxData(void)替换成void Serial_SendPacket(void)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">uint8_t Serial_TxPacket[4];  </span><br><span class="line"></span><br><span class="line">void Serial_SendPacket(void)</span><br><span class="line">&#123;</span><br><span class="line">Serial_SendByte(0xFF);</span><br><span class="line">Serial_SendArray(Serial_TxPacket, 4);</span><br><span class="line">Serial_SendByte(0xFE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（2）主函数中添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Serial_TxPacket[0] = 0x01;</span><br><span class="line">Serial_TxPacket[1] = 0x02;</span><br><span class="line">Serial_TxPacket[2] = 0x03;</span><br><span class="line">Serial_TxPacket[3] = 0x04;</span><br><span class="line">Serial_SendPacket();</span><br></pre></td></tr></table></figure><p> 将程序下载到开发板中，按下复位键盘，在串口调试助手中显示FF 01 02 03 04 FE</p><p>（3）Serial.h<br>extern uint8_t Serial_TxPacket[];</p><h3 id="2、串口发送HEX数据包"><a href="#2、串口发送HEX数据包" class="headerlink" title="2、串口发送HEX数据包"></a>2、串口发送HEX数据包</h3><p>(1) Serial.c<br>在接收中断函数中，需要用状态机来执行接收逻辑，接收数据包，然后把载荷数据存在RxPacket数组里</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/f6f4c0d3ac1241d58b5c6d3c5944c524.png" alt="img"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f4xx.h&quot;</span> <span class="comment">// Include appropriate STM32 library</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RX_STATE_WAITING_HEADER 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RX_STATE_RECEIVING_DATA 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RX_STATE_WAITING_TRAILER 2</span></span><br><span class="line"></span><br><span class="line"><span class="type">uint8_t</span> Serial_RxPacket[<span class="number">4</span>];</span><br><span class="line"><span class="type">uint8_t</span> Serial_RxFlag = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">USART1_IRQHandler</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">uint8_t</span> RxState = RX_STATE_WAITING_HEADER;</span><br><span class="line">    <span class="type">static</span> <span class="type">uint8_t</span> pRxPacket = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (USART_GetITStatus(USART1, USART_IT_RXNE) == SET) &#123;</span><br><span class="line">        <span class="type">uint8_t</span> RxData = USART_ReceiveData(USART1);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">switch</span> (RxState) &#123;</span><br><span class="line">            <span class="keyword">case</span> RX_STATE_WAITING_HEADER:</span><br><span class="line">                <span class="keyword">if</span> (RxData == <span class="number">0xFF</span>) &#123;</span><br><span class="line">                    RxState = RX_STATE_RECEIVING_DATA;</span><br><span class="line">                    pRxPacket = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> RX_STATE_RECEIVING_DATA:</span><br><span class="line">                Serial_RxPacket[pRxPacket] = RxData;</span><br><span class="line">                pRxPacket++;</span><br><span class="line">                <span class="keyword">if</span> (pRxPacket &gt;= <span class="number">4</span>) &#123;</span><br><span class="line">                    RxState = RX_STATE_WAITING_TRAILER;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> RX_STATE_WAITING_TRAILER:</span><br><span class="line">                <span class="keyword">if</span> (RxData == <span class="number">0xFE</span>) &#123;</span><br><span class="line">                    RxState = RX_STATE_WAITING_HEADER;</span><br><span class="line">                    Serial_RxFlag = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        USART_ClearITPendingBit(USART1, USART_IT_RXNE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>（2）主函数显示发送数据<br>将单片机接收到的数据（即串口调试助手发送的数据）显示在OLED显示屏上</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (Serial_GetRxFlag() == 1)//接收到了数据包</span><br><span class="line">&#123;</span><br><span class="line">    //接收到的数据放在第四行</span><br><span class="line">OLED_ShowHexNum(4, 1, Serial_RxPacket[0], 2);</span><br><span class="line">OLED_ShowHexNum(4, 4, Serial_RxPacket[1], 2);</span><br><span class="line">OLED_ShowHexNum(4, 7, Serial_RxPacket[2], 2);</span><br><span class="line">OLED_ShowHexNum(4, 10, Serial_RxPacket[3], 2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（3）主函数添加key<br>添加了key按键，将数据发送出去的数据显示在OLED，按一次健，发送数据都＋1</p><pre><code>    KeyNum = Key_GetNum();    if (KeyNum == 1)    &#123;        Serial_TxPacket[0] ++;        Serial_TxPacket[1] ++;        Serial_TxPacket[2] ++;        Serial_TxPacket[3] ++;        Serial_SendPacket();        OLED_ShowHexNum(2, 1, Serial_TxPacket[0], 2);        OLED_ShowHexNum(2, 4, Serial_TxPacket[1], 2);        OLED_ShowHexNum(2, 7, Serial_TxPacket[2], 2);        OLED_ShowHexNum(2, 10, Serial_TxPacket[3], 2);    &#125;</code></pre><p>3、串口收发文本数据包<br>(1) Serial.c </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/438c22a4670546288d53f13ec5daf3dd.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">char Serial_RxPacket[100];</span><br><span class="line"></span><br><span class="line">void USART1_IRQHandler(void)</span><br><span class="line">&#123;</span><br><span class="line">static uint8_t RxState = 0;</span><br><span class="line">static uint8_t pRxPacket = 0;</span><br><span class="line">if (USART_GetITStatus(USART1, USART_IT_RXNE) == SET)</span><br><span class="line">&#123;</span><br><span class="line">uint8_t RxData = USART_ReceiveData(USART1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​if (RxState == 0)</span><br><span class="line">​&#123;</span><br><span class="line">​if (RxData == &#x27;@&#x27; &amp;&amp; Serial_RxFlag == 0)</span><br><span class="line">​&#123;</span><br><span class="line">​RxState = 1;</span><br><span class="line">​pRxPacket = 0;</span><br><span class="line">​&#125;</span><br><span class="line">​&#125;</span><br><span class="line">​else if (RxState == 1)</span><br><span class="line">​&#123;</span><br><span class="line">​if (RxData == &#x27;\r&#x27;)</span><br><span class="line">​&#123;</span><br><span class="line">​RxState = 2;</span><br><span class="line">​&#125;</span><br><span class="line">​else</span><br><span class="line">​&#123;</span><br><span class="line">​Serial_RxPacket[pRxPacket] = RxData;</span><br><span class="line">​pRxPacket ++;</span><br><span class="line">​&#125;</span><br><span class="line">​&#125;</span><br><span class="line">​else if (RxState == 2)</span><br><span class="line">​&#123;</span><br><span class="line">​if (RxData == &#x27;\n&#x27;)</span><br><span class="line">​&#123;</span><br><span class="line">​RxState = 0;</span><br></pre></td></tr></table></figure><p>把读取标志位然后立即清0的函数删掉，在主函数中，判断Serial_RxFlag == 1，表示接收到数据包，等操作完成之后，再清0，在中断函数中，只有Flag=0了，才会继续接收到下一个数据包。这样数据的读写就是严格分开，不会混淆，但是这样发送数据包的频率不能太快，否则会被丢弃。或者定义一个指令缓存区，把接受好的字符串放在这个指令缓存区进行排队</p><h2 id="七、静态变量"><a href="#七、静态变量" class="headerlink" title="七、静态变量"></a>七、静态变量</h2><p>函数进入只会初始化一次0，在函数退出后，数据仍然有效，与全局变量不同的是，静态变量只能在本函数使用。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FastGPT部署</title>
      <link href="/2023/09/25/fastgpt-FastGPT%E9%83%A8%E7%BD%B2/"/>
      <url>/2023/09/25/fastgpt-FastGPT%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="Fast-GPT"><a href="#Fast-GPT" class="headerlink" title="Fast GPT"></a>Fast GPT</h1><p>Fast GPT 允许你使用自己的 openai API KEY 来快速的调用 openai 接口，目前集成了 Gpt35, Gpt4 和 embedding. 可构建自己的知识库。并且 OpenAPI Chat 接口兼容 OpenAI 接口，意味着你只需修改 BaseUrl 和 Authorization 即可在已有项目基础上接入 FastGpt！</p><h2 id="🛸-在线体验"><a href="#🛸-在线体验" class="headerlink" title="🛸 在线体验"></a>🛸 在线体验</h2><p>🎉 <a href="https://fastgpt.run/">fastgpt.run</a><br>🎉 <a href="https://ai.fastgpt.run/">ai.fastgpt.run</a></p><h4 id="知识库原理图"><a href="#知识库原理图" class="headerlink" title="知识库原理图"></a>知识库原理图</h4><h2 id="👨‍💻-开发"><a href="#👨‍💻-开发" class="headerlink" title="👨‍💻 开发"></a>👨‍💻 开发</h2><p>项目技术栈: NextJs + TS + ChakraUI + Mongo + Postgres（Vector 插件）<br>这是一个平台项目，非单机项目，除了模型调用外还涉及非常多用户的内容。<br><a href="docs/dev/README.md">本地开发 Quick Start</a></p><h2 id="🚀-私有化部署"><a href="#🚀-私有化部署" class="headerlink" title="🚀 私有化部署"></a>🚀 私有化部署</h2><ul><li><a href="https://sealos.io/docs/examples/ai-applications/install-fastgpt-on-desktop">官方推荐 Sealos 部署</a> 无需服务器，代理和域名，高可用。</li><li><a href="https://www.ahoilc.cn/2023/09/25/fastgpt-docker/">docker-compose 部署</a> 单机版。</li><li><a href="https://www.bilibili.com/video/BV1tV4y1y7Mj/?vd_source=92041a1a395f852f9d89158eaa3f61b4">由社区贡献的宝塔部署和本地运行教程</a> 单机版。</li></ul><h2 id="point-right-RoadMap"><a href="#point-right-RoadMap" class="headerlink" title=":point_right: RoadMap"></a>:point_right: RoadMap</h2><ul><li><a href="https://kjqvjse66l.feishu.cn/docx/RVUxdqE2WolDYyxEKATcM0XXnte">FastGpt RoadMap</a></li></ul><h2 id="Powered-by"><a href="#Powered-by" class="headerlink" title="Powered by"></a>Powered by</h2><ul><li><a href="https://github.com/msgbyte/tushan">TuShan: 5 分钟搭建后台管理系统</a></li><li><a href="https://github.com/labring/laf">Laf: 3 分钟快速接入三方应用</a></li><li><a href="https://github.com/labring/sealos">Sealos: 快速部署集群应用</a></li><li><a href="https://github.com/songquanpeng/one-api">One API: 令牌管理 &amp; 二次分发，支持 Azure</a></li></ul><h2 id="👀-其他"><a href="#👀-其他" class="headerlink" title="👀 其他"></a>👀 其他</h2><ul><li><a href="https://kjqvjse66l.feishu.cn/docx/HtrgdT0pkonP4kxGx8qcu6XDnGh">FastGpt 常见问题</a></li><li><a href="https://www.bilibili.com/video/BV1jo4y147fT/">docker 部署教程视频</a></li><li><a href="https://www.bilibili.com/video/BV1xh4y1t7fy/">公众号接入视频教程</a></li><li><a href="https://www.bilibili.com/video/BV1Wo4y1p7i1/">FastGpt 知识库演示</a></li></ul><h2 id="第三方生态"><a href="#第三方生态" class="headerlink" title="第三方生态"></a>第三方生态</h2><ul><li><a href="https://github.com/luolin-ai/FastGPT-Enterprise-WeChatbot">luolinAI: 企微机器人，开箱即用</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> FastGPT项目部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>clash代理配置</title>
      <link href="/2023/09/25/fastgpt-clash/"/>
      <url>/2023/09/25/fastgpt-clash/</url>
      
        <content type="html"><![CDATA[<h1 id="安装-clash"><a href="#安装-clash" class="headerlink" title="安装 clash"></a>安装 clash</h1><p>clash 会在本机启动代理。对应的，你需要配置项目的两个环境变量：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AXIOS_PROXY_HOST=127.0.0.1</span><br><span class="line">AXIOS_PROXY_PORT=7890</span><br></pre></td></tr></table></figure><p>需要注的是，在你的 config.yaml 文件中，最好仅指定 api.openai.com 走代理，其他请求都直连。</p><p><strong>安装clash</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载包</span></span><br><span class="line">curl https://glados.rocks/tools/clash-linux.zip -o clash.zip </span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">unzip clash.zip</span><br><span class="line"><span class="comment"># 下载终端配置⽂件（改成自己配置文件路径）</span></span><br><span class="line">curl https://update.glados-config.com/clash/98980/8f30944/70870/glados-terminal.yaml &gt; config.yaml</span><br><span class="line"><span class="comment"># 赋予运行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x ./clash-linux-amd64-v1.10.0 </span><br></pre></td></tr></table></figure></p><p><strong>runClash.sh</strong><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 记得配置端口变量：</span></span><br><span class="line"><span class="built_in">export</span> ALL_PROXY=socks5://127.0.0.1:7891</span><br><span class="line"><span class="built_in">export</span> http_proxy=http://127.0.0.1:7890</span><br><span class="line"><span class="built_in">export</span> https_proxy=http://127.0.0.1:7890</span><br><span class="line"><span class="built_in">export</span> HTTP_PROXY=http://127.0.0.1:7890</span><br><span class="line"><span class="built_in">export</span> HTTPS_PROXY=http://127.0.0.1:7890</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行脚本: 删除clash - 到 clash 目录 - 删除缓存 - 执行运行. 会生成一个 nohup.out 文件，可以看到 clash 的 logs</span></span><br><span class="line">OLD_PROCESS=$(pgrep clash)</span><br><span class="line"><span class="keyword">if</span> [ ! -z <span class="string">&quot;<span class="variable">$OLD_PROCESS</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Killing old process: <span class="variable">$OLD_PROCESS</span>&quot;</span></span><br><span class="line">  <span class="built_in">kill</span> <span class="variable">$OLD_PROCESS</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">sleep</span> 2</span><br><span class="line"><span class="built_in">cd</span>  **/clash</span><br><span class="line"><span class="built_in">rm</span> -f ./nohup.out || <span class="literal">true</span></span><br><span class="line"><span class="built_in">rm</span> -f ./cache.db || <span class="literal">true</span></span><br><span class="line"><span class="built_in">nohup</span> ./clash-linux-amd64-v1.10.0  -d ./ &amp;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Restart clash&quot;</span></span><br></pre></td></tr></table></figure></p><p><strong>config.yaml配置例子</strong><br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mixed-port:</span> <span class="number">7890</span></span><br><span class="line"><span class="attr">allow-lan:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">bind-address:</span> <span class="string">&#x27;*&#x27;</span></span><br><span class="line"><span class="attr">mode:</span> <span class="string">rule</span></span><br><span class="line"><span class="attr">log-level:</span> <span class="string">warning</span></span><br><span class="line"><span class="attr">dns:</span>  </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  </span><br><span class="line">  <span class="attr">ipv6:</span> <span class="literal">false</span>  </span><br><span class="line">  <span class="attr">nameserver:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">8.8</span><span class="number">.4</span><span class="number">.4</span> </span><br><span class="line">  <span class="attr">cache-size:</span> <span class="number">400</span></span><br><span class="line"><span class="attr">proxies:</span></span><br><span class="line">    <span class="bullet">-</span> </span><br><span class="line"><span class="attr">proxy-groups:</span></span><br><span class="line">  <span class="bullet">-</span> &#123; <span class="attr">name:</span> <span class="string">&#x27;♻️ 自动选择&#x27;</span>, <span class="attr">type:</span> <span class="string">url-test</span>,  <span class="attr">proxies:</span> [<span class="string">香港V01×1.5</span>], <span class="attr">url:</span> <span class="string">&#x27;https://api.openai.com&#x27;</span>, <span class="attr">interval:</span> <span class="number">3600</span>&#125;</span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN-SUFFIX,api.openai.com,♻️ 自动选择&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;MATCH,DIRECT&#x27;</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> FastGPT项目部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker 部署 FastGpt</title>
      <link href="/2023/09/25/fastgpt-docker/"/>
      <url>/2023/09/25/fastgpt-docker/</url>
      
        <content type="html"><![CDATA[<h1 id="Docker-部署-FastGpt"><a href="#Docker-部署-FastGpt" class="headerlink" title="Docker 部署 FastGpt"></a>Docker 部署 FastGpt</h1><h2 id="代理环境（国外服务器可忽略）"><a href="#代理环境（国外服务器可忽略）" class="headerlink" title="代理环境（国外服务器可忽略）"></a>代理环境（国外服务器可忽略）</h2><p>选择一个即可。这只是代理！！！不是项目。</p><ol><li><a href="https://www.ahoilc.cn/2023/09/25/fastgpt-sealos-oneapi/">sealos nginx 方案</a> - 推荐。约等于不用钱，不需要额外准备任何东西。</li><li><a href="https://www.ahoilc.cn/2023/09/25/fastgpt-clash/">clash 方案</a> - 仅需一台服务器（需要有 clash）</li><li><a href="https://www.ahoilc.cn/2023/09/25/fastgpt-nginx/">nginx 方案</a> - 需要一台国外服务器</li><li><a href="https://www.ahoilc.cn/2023/09/25/fastgpt-cloudflare/">cloudflare 方案</a> - 需要有域名（每日免费 10w 次代理请求）</li><li><a href="https://github.com/easychen/openai-api-proxy/blob/master/FUNC.md">腾讯云函数代理方案</a> - 仅需一台服务器</li></ol><h2 id="openai-key-池管理方案"><a href="#openai-key-池管理方案" class="headerlink" title="openai key 池管理方案"></a>openai key 池管理方案</h2><p>推荐使用 <a href="https://github.com/songquanpeng/one-api">one-api</a> 项目来管理 key 池，兼容 openai 和微软等多渠道。部署可以看该项目的 README.md，也可以看 <a href="./one-api/sealos.md">在 Sealos 1 分钟部署 one-api</a></p><h3 id="1-准备一些内容"><a href="#1-准备一些内容" class="headerlink" title="1. 准备一些内容"></a>1. 准备一些内容</h3><blockquote><ol><li>服务器开通 80 端口。用代理的话，对应的代理端口也需要打开。</li><li>QQ 邮箱 Code：进入 QQ 邮箱 -&gt; 账号 -&gt; 申请 SMTP 账号</li><li>有域名的准备好 SSL 证书</li></ol></blockquote><h3 id="2-安装-docker-和-docker-compose"><a href="#2-安装-docker-和-docker-compose" class="headerlink" title="2. 安装 docker 和 docker-compose"></a>2. 安装 docker 和 docker-compose</h3><p>这个不同系统略有区别，百度安装下。验证安装成功后进行下一步。下面给出一个例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装docker</span></span><br><span class="line">curl -L https://get.daocloud.io/docker | sh</span><br><span class="line">sudo systemctl start docker</span><br><span class="line"><span class="comment"># 安装 docker-compose</span></span><br><span class="line">curl -L https://github.com/docker/compose/releases/download/1.23.2/docker-compose-`<span class="built_in">uname</span> -s`-`<span class="built_in">uname</span> -m` -o /usr/local/bin/docker-compose</span><br><span class="line">sudo <span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br><span class="line"><span class="comment"># 验证安装</span></span><br><span class="line">docker -v</span><br><span class="line">docker-compose -v</span><br><span class="line"><span class="comment"># 如果docker-compose运行不了，可以把 deploy/fastgpt/docker-compose 文件复制到服务器，然后在 docker-compose 文件夹里执行 sh init.sh。会把docker-compose文件复制到对应目录。</span></span><br></pre></td></tr></table></figure><h3 id="2-创建-3-个初始化文件"><a href="#2-创建-3-个初始化文件" class="headerlink" title="2. 创建 3 个初始化文件"></a>2. 创建 3 个初始化文件</h3><p>fastgpt 文件夹。分别为：fastgpt/docker-compose.yaml, fastgpt/pg/init.sql, fastgpt/nginx/nginx.conf</p><p>手动创建或者直接把 fastgpt 文件夹复制过去。</p><h3 id="3-运行-docker-compose"><a href="#3-运行-docker-compose" class="headerlink" title="3. 运行 docker-compose"></a>3. 运行 docker-compose</h3><p>下面是一个辅助脚本，也可以直接 docker-compose up -d</p><p><strong>run.sh 运行文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">docker-compose pull</span><br><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Docker Compose 重新拉取镜像完成！&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除本地旧镜像</span></span><br><span class="line">images=$(docker images --format <span class="string">&quot;&#123;&#123;.ID&#125;&#125; &#123;&#123;.Repository&#125;&#125;&quot;</span> | grep fastgpt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将镜像 ID 和名称放入数组中</span></span><br><span class="line">IFS=$<span class="string">&#x27;\n&#x27;</span> <span class="built_in">read</span> -rd <span class="string">&#x27;&#x27;</span> -a image_array &lt;&lt;&lt;<span class="string">&quot;<span class="variable">$images</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历数组并删除所有旧的镜像</span></span><br><span class="line"><span class="keyword">for</span> ((i=<span class="number">1</span>; i&lt;<span class="variable">$&#123;#image_array[@]&#125;</span>; i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    image=<span class="variable">$&#123;image_array[$i]&#125;</span></span><br><span class="line">    image_id=<span class="variable">$&#123;image%% *&#125;</span></span><br><span class="line">    docker rmi <span class="variable">$image_id</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="FastGpt-Admin"><a href="#FastGpt-Admin" class="headerlink" title="FastGpt Admin"></a>FastGpt Admin</h2><p>参考 admin 里的 README.md</p><h2 id="其他优化点"><a href="#其他优化点" class="headerlink" title="其他优化点"></a>其他优化点</h2><h1 id="Git-Action-自动打包镜像"><a href="#Git-Action-自动打包镜像" class="headerlink" title="Git Action 自动打包镜像"></a>Git Action 自动打包镜像</h1><p>.github 里拥有一个 git 提交到 main 分支时自动打包 amd64 和 arm64 镜像的 actions。你仅需要提前在 git 配置好 session。</p><ol><li>创建账号 session: 头像 -&gt; settings -&gt; 最底部 Developer settings -&gt; Personal access tokens -&gt; tokens(classic) -&gt; 创建新 session，把一些看起来需要的权限勾上。</li><li>添加 session 到仓库: 仓库 -&gt; settings -&gt; Secrets and variables -&gt; Actions -&gt; 创建 secret</li><li>填写 secret: Name-GH_PAT, Secret-第一步的 tokens</li></ol><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><h3 id="Mac-可能的问题"><a href="#Mac-可能的问题" class="headerlink" title="Mac 可能的问题"></a>Mac 可能的问题</h3><blockquote><p>因为教程有部分镜像不兼容 arm64，所以写个文档指导新手如何快速在 mac 上面搭建 fast-gpt<a href="./mac.md">在 mac 上面部署 fastgpt 可能存在的问题</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> FastGPT项目部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginx 反向代理 openai 接口</title>
      <link href="/2023/09/25/fastgpt-nginx/"/>
      <url>/2023/09/25/fastgpt-nginx/</url>
      
        <content type="html"><![CDATA[<h1 id="nginx-反向代理-openai-接口"><a href="#nginx-反向代理-openai-接口" class="headerlink" title="nginx 反向代理 openai 接口"></a>nginx 反向代理 openai 接口</h1><p>如果你有国外的服务器，可以通过配置 nginx 反向代理，转发 openai 相关的请求，从而让国内的服务器可以通过访问该 nginx 去访问 openai 接口。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">worker_rlimit_nofile 51200;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    resolver 8.8.8.8;</span><br><span class="line">    proxy_ssl_server_name on;</span><br><span class="line"></span><br><span class="line">    access_log off;</span><br><span class="line">    server_names_hash_bucket_size 512;</span><br><span class="line">    client_header_buffer_size 32k;</span><br><span class="line">    large_client_header_buffers 4 32k;</span><br><span class="line">    client_max_body_size 50M;</span><br><span class="line"></span><br><span class="line">    gzip  on;</span><br><span class="line">    gzip_min_length   1k;</span><br><span class="line">    gzip_buffers  4 8k;</span><br><span class="line">    gzip_http_version 1.1;</span><br><span class="line">    gzip_comp_level 6;</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    gzip_types  text/plain application/x-javascript text/css application/javascript application/json application/xml;</span><br><span class="line">    gzip_disable &quot;MSIE [1-6]\.&quot;;</span><br><span class="line"></span><br><span class="line">    open_file_cache max=1000 inactive=1d;</span><br><span class="line">    open_file_cache_valid 30s;</span><br><span class="line">    open_file_cache_min_uses 8;</span><br><span class="line">    open_file_cache_errors off;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 443 ssl;</span><br><span class="line">        server_name your_host;</span><br><span class="line">        ssl_certificate /ssl/your_host.pem;</span><br><span class="line">        ssl_certificate_key /ssl/your_host.key;</span><br><span class="line">        ssl_session_timeout 5m;</span><br><span class="line"></span><br><span class="line">        location ~ /openai/(.*) &#123;</span><br><span class="line">            # auth check</span><br><span class="line">            if ($auth != &quot;xxxxxx&quot;) &#123;</span><br><span class="line">                return 403;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            proxy_pass https://api.openai.com/$1$is_args$args;</span><br><span class="line">            proxy_set_header Host api.openai.com;</span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            # 流式响应</span><br><span class="line">            proxy_set_header Connection &#x27;&#x27;;</span><br><span class="line">            proxy_http_version 1.1;</span><br><span class="line">            chunked_transfer_encoding off;</span><br><span class="line">            proxy_buffering off;</span><br><span class="line">            proxy_cache off;</span><br><span class="line">            # 一般响应</span><br><span class="line">            proxy_buffer_size 128k;</span><br><span class="line">            proxy_buffers 4 256k;</span><br><span class="line">            proxy_busy_buffers_size 256k;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name ai.fastgpt.run;</span><br><span class="line">        rewrite ^(.*) https://$server_name$1 permanent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> FastGPT项目部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sealos 部署 one-api</title>
      <link href="/2023/09/25/fastgpt-sealos-oneapi/"/>
      <url>/2023/09/25/fastgpt-sealos-oneapi/</url>
      
        <content type="html"><![CDATA[<h1 id="在-Sealos-1-分钟部署-one-api"><a href="#在-Sealos-1-分钟部署-one-api" class="headerlink" title="在 Sealos 1 分钟部署 one-api"></a>在 Sealos 1 分钟部署 one-api</h1><h2 id="1-进入-Sealos-公有云"><a href="#1-进入-Sealos-公有云" class="headerlink" title="1. 进入 Sealos 公有云"></a>1. 进入 Sealos 公有云</h2><p><a href="https://cloud.sealos.io/">https://cloud.sealos.io/</a></p><h2 id="2-打开-AppLaunchpad-应用管理-工具"><a href="#2-打开-AppLaunchpad-应用管理-工具" class="headerlink" title="2. 打开 AppLaunchpad(应用管理) 工具"></a>2. 打开 AppLaunchpad(应用管理) 工具</h2><p><img src="https://github.com/ahoilcming/FastGPT/raw/main/docs/deploy/one-api/sealosImg/step1.png" alt="step1"></p><h2 id="3-点击创建新应用"><a href="#3-点击创建新应用" class="headerlink" title="3. 点击创建新应用"></a>3. 点击创建新应用</h2><h2 id="4-填写对应参数"><a href="#4-填写对应参数" class="headerlink" title="4. 填写对应参数"></a>4. 填写对应参数</h2><p>镜像：ghcr.io/songquanpeng/one-api:latest</p><p><img src="https://github.com/ahoilcming/FastGPT/raw/main/docs/deploy/one-api/sealosImg/step2.png" alt="step2"><br>打开外网访问开关后，Sealos 会自动分配一个可访问的地址，不需要自己配置。</p><p><img src="https://github.com/ahoilcming/FastGPT/raw/main/docs/deploy/one-api/sealosImg/step3.png" alt="step3"><br>填写完参数后，点击右上角部署即可。</p><h2 id="5-访问"><a href="#5-访问" class="headerlink" title="5. 访问"></a>5. 访问</h2><p>点击 Sealos 提供的外网访问地址，即可访问 one-api 项目。<br><img src="https://github.com/ahoilcming/FastGPT/raw/main/docs/deploy/one-api/sealosImg/step4.png" alt="step3"><br><img src="https://github.com/ahoilcming/FastGPT/raw/main/docs/deploy/one-api/sealosImg/step5.png" alt="step3"></p><h2 id="6-替换-FastGpt-的环境变量"><a href="#6-替换-FastGpt-的环境变量" class="headerlink" title="6. 替换 FastGpt 的环境变量"></a>6. 替换 FastGpt 的环境变量</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 下面的地址是 Sealos 提供的，务必写上 v1</span><br><span class="line">ONEAPI_URL=https://xxxx.cloud.sealos.io/v1</span><br><span class="line"># 下面的 key 由 one-api 提供</span><br><span class="line">ONEAPI_KEY=sk-xxxxxx</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> FastGPT项目部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cloudflare 代理配置</title>
      <link href="/2023/09/25/fastgpt-cloudflare/"/>
      <url>/2023/09/25/fastgpt-cloudflare/</url>
      
        <content type="html"><![CDATA[<h1 id="cloudflare-代理配置"><a href="#cloudflare-代理配置" class="headerlink" title="cloudflare 代理配置"></a>cloudflare 代理配置</h1><p><a href="https://gravel-twister-d32.notion.site/FastGPT-API-ba7bb261d5fd4fd9bbb2f0607dacdc9e">来自 “不做了睡觉” 教程</a></p><p><strong>workers 配置文件</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">TELEGRAPH_URL</span> = <span class="string">&#x27;https://api.openai.com&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">respondWith</span>(<span class="title function_">handleRequest</span>(event.<span class="property">request</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="comment">// 安全校验</span></span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;auth&#x27;</span>) !== <span class="string">&#x27;auth_code&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;UnAuthorization&#x27;</span>, &#123; <span class="attr">status</span>: <span class="number">403</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">  url.<span class="property">host</span> = <span class="variable constant_">TELEGRAPH_URL</span>.<span class="title function_">replace</span>(<span class="regexp">/^https?:\/\//</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> modifiedRequest = <span class="keyword">new</span> <span class="title class_">Request</span>(url.<span class="title function_">toString</span>(), &#123;</span><br><span class="line">    <span class="attr">headers</span>: request.<span class="property">headers</span>,</span><br><span class="line">    <span class="attr">method</span>: request.<span class="property">method</span>,</span><br><span class="line">    <span class="attr">body</span>: request.<span class="property">body</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;follow&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(modifiedRequest);</span><br><span class="line">  <span class="keyword">const</span> modifiedResponse = <span class="keyword">new</span> <span class="title class_">Response</span>(response.<span class="property">body</span>, response);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加允许跨域访问的响应头</span></span><br><span class="line">  modifiedResponse.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> modifiedResponse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>对应的环境变量</strong><br>务必别忘了填 v1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OPENAI_BASE_URL=https://xxxxxx/v1</span><br><span class="line">OPENAI_BASE_URL_AUTH=auth_code</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> FastGPT项目部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快速了解FastGPT</title>
      <link href="/2023/09/25/fastgpt-%E5%BF%AB%E9%80%9F%E4%BA%86%E8%A7%A3-FastGPT/"/>
      <url>/2023/09/25/fastgpt-%E5%BF%AB%E9%80%9F%E4%BA%86%E8%A7%A3-FastGPT/</url>
      
        <content type="html"><![CDATA[<h1 id="快速了解-FastGPT"><a href="#快速了解-FastGPT" class="headerlink" title="快速了解 FastGPT"></a>快速了解 FastGPT</h1><p>FastGPT 的能力与优势</p><p>FastGPT 是一个基于 LLM 大语言模型的知识库问答系统，提供开箱即用的数据处理、模型调用等能力。同时可以通过 Flow 可视化进行工作流编排，从而实现复杂的问答场景！</p><p>🤖</p><p>FastGPT 在线体验：<a href="https://fastgpt.run/">https://fastgpt.run</a></p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/intro1.png" alt="img"></td><td><img src="https://doc.fastgpt.run/imgs/intro2.png" alt="img"></td></tr><tr><td><img src="https://doc.fastgpt.run/imgs/intro3.png" alt="img"></td><td><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/intro4.png" alt="img"></td></tr></tbody></table></div><h2 id="FastGPT-能力"><a href="#FastGPT-能力" class="headerlink" title="FastGPT 能力"></a>FastGPT 能力</h2><h3 id="1-专属-AI-客服"><a href="#1-专属-AI-客服" class="headerlink" title="1. 专属 AI 客服"></a>1. 专属 AI 客服</h3><p>通过导入文档或已有问答对进行训练，让 AI 模型能根据你的文档以交互式对话方式回答问题。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/ability1.png" alt="img"></p><h3 id="2-简单易用的可视化界面"><a href="#2-简单易用的可视化界面" class="headerlink" title="2. 简单易用的可视化界面"></a>2. 简单易用的可视化界面</h3><p>FastGPT 采用直观的可视化界面设计，为各种应用场景提供了丰富实用的功能。通过简洁易懂的操作步骤，可以轻松完成 AI 客服的创建和训练流程。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/ability5.png" alt="img"></p><h3 id="3-自动数据预处理"><a href="#3-自动数据预处理" class="headerlink" title="3. 自动数据预处理"></a>3. 自动数据预处理</h3><p>提供手动输入、直接分段、LLM 自动处理和 CSV 等多种数据导入途径，其中“直接分段”支持通过 PDF、WORD、Markdown 和 CSV 文档内容作为上下文。FastGPT 会自动对文本数据进行预处理、向量化和 QA 分割，节省手动训练时间，提升效能。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/ability2.png" alt="img"></p><h3 id="4-工作流编排"><a href="#4-工作流编排" class="headerlink" title="4. 工作流编排"></a>4. 工作流编排</h3><p>基于 Flow 模块的工作流编排，可以帮助你设计更加复杂的问答流程。例如查询数据库、查询库存、预约实验室等。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/ability3.png" alt="img"></p><h3 id="5-强大的-API-集成"><a href="#5-强大的-API-集成" class="headerlink" title="5. 强大的 API 集成"></a>5. 强大的 API 集成</h3><p>FastGPT 对外的 API 接口对齐了 OpenAI 官方接口，可以直接接入现有的 GPT 应用，也可以轻松集成到企业微信、公众号、飞书等平台。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/ability4.png" alt="img"></p><h2 id="FastGPT-特点"><a href="#FastGPT-特点" class="headerlink" title="FastGPT 特点"></a>FastGPT 特点</h2><ol><li><p><strong>项目完全开源</strong></p><p>FastGPT 遵循 Apache License 2.0 开源协议，你可以 <a href="https://github.com/labring/FastGPT/fork">Fork</a> 之后进行二次开发和发布。FastGPT 社区版将保留核心功能，商业版仅在社区版基础上使用 API 的形式进行扩展，不影响学习使用。</p></li><li><p><strong>独特的 QA 结构</strong></p><p>针对客服问答场景设计的 QA 结构，提高在大量数据场景中的问答准确性。</p></li><li><p><strong>可视化工作流</strong></p><p>通过 Flow 模块展示了从问题输入到模型输出的完整流程，便于调试和设计复杂流程。</p></li><li><p><strong>无限扩展</strong></p><p>基于 API 进行扩展，无需修改 FastGPT 源码，也可快速接入现有的程序中。</p></li><li><p><strong>便于调试</strong></p><p>提供搜索测试、引用修改、完整对话预览等多种调试途径。</p></li><li><p><strong>支持多种模型</strong></p><p>支持 GPT、Claude、文心一言等多种 LLM 模型，未来也将支持自定义的向量模型。</p></li></ol><h2 id="知识库核心流程图"><a href="#知识库核心流程图" class="headerlink" title="知识库核心流程图"></a>知识库核心流程图</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/functional-arch.webp" alt="img"></p><h2 id="免责声明"><a href="#免责声明" class="headerlink" title="免责声明"></a>免责声明</h2><p>由于生成式 AI 的特性，其在不同国家的管控措施也会有所不同。请所有使用者务必遵守所在地的相关法律。</p><p>免责声明：以任何违反 FastGPT 可接受使用政策的方式使用，包括但不限于法律、法规、政府命令或法令禁止的任何用途，或任何侵犯他人权利的使用；由使用者自行承担。我们对由客户使用产生的问题概不负责。</p><p>下面是各国对生成式AI的管控条例的链接：</p><p><a href="http://www.cac.gov.cn/2023-04/11/c_1682854275475410.htm">中国生成式人工智能服务管理办法（征求意见稿）</a></p><h3 id="内容要求"><a href="#内容要求" class="headerlink" title="内容要求"></a>内容要求</h3><p>我们禁止使用我们对接的模型服务生成可能对个人或社会造成伤害的内容。保障平台的安全性，是长期稳定运营的关键。如发现任何利用平台接入模型能力进行违规内容生成和使用，将立即封号，账号余额不退。</p><ul><li>剥削和虐待<ul><li>禁止描述、展示或宣扬儿童性剥削或性虐待的内容，无论法律是否禁止。这包括涉及儿童或使儿童色情的内容。</li><li>禁止描述或用于培养儿童的内容。修饰是成年人以剥削，特别是性剥削为目的与儿童建立关系的行为。这包括以性剥削、贩运或其他形式剥削为目的与儿童交流。</li></ul></li><li>未经同意的私密内容<ul><li>服务禁止描述、提供或宣传未经同意的亲密活动的内容。</li></ul></li><li>禁止描述、提供特征或宣传或用于招揽商业性活动和性服务的内容。这包括鼓励和协调真正的性活动。</li><li>禁止描述或用于人口贩运目的的内容。这包括招募人员、便利交通、支付和助长对人的剥削，如强迫劳动、家庭奴役、役、强迫婚姻和强迫医疗程序。</li><li>自杀和自残，禁止描述、赞美、支持、促进、美化、鼓励和/或指导个人自残或自杀的内容。</li><li>暴力内容和行为<ul><li>禁止描述、展示或宣扬血腥暴力或血腥的内容。</li><li>禁止描绘恐怖主义行为的内容；赞扬或支持恐怖组织、恐怖行为者或暴力恐怖意识形态；鼓励恐怖活动；向恐怖组织或恐怖事业提供援助；或协助恐怖组织招募成员。</li><li>禁止通过暴力威胁或煽动来鼓吹或宣扬对他人的暴力行为的内容。</li></ul></li><li>仇恨言论和歧视<ul><li>禁止基于实际或感知的种族、民族、国籍、性别、性别认同、性取向、宗教信仰、年龄、残疾状况、种姓或与系统性偏见或边缘化相关的任何其他特征等特征攻击、诋毁、恐吓、降级、针对或排斥个人或群体的内容。</li><li>禁止针对个人或群体进行威胁、恐吓、侮辱、贬低或贬低的语言或图像、宣扬身体伤害或其他虐待行为（如跟踪）的内容。</li></ul></li><li>禁止故意欺骗并可能对公共利益产生不利影响的内容，包括与健康、安全、选举诚信或公民参与相关的欺骗性或不真实内容。</li><li>直接支持非法主动攻击或造成技术危害的恶意软件活动的内容，例如提供恶意可执行文件、组织拒绝服务攻击或管理命令和控制服务器。</li></ul>]]></content>
      
      
      <categories>
          
          <category> FastGPT项目部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用案例</title>
      <link href="/2023/09/25/fastgpt-%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/"/>
      <url>/2023/09/25/fastgpt-%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="使用案例"><a href="#使用案例" class="headerlink" title="使用案例"></a>使用案例</h1><h1 id="1、提示词-amp-引用提示词"><a href="#1、提示词-amp-引用提示词" class="headerlink" title="1、提示词 &amp; 引用提示词"></a>1、提示词 &amp; 引用提示词</h1><p>FastGPT 提示词 &amp; 引用提示词说明</p><p>限定词从 V4.4.3 版本后去除，被“引用提示词”和“引用模板”替代。</p><h2 id="1-1-AI-对话消息组成"><a href="#1-1-AI-对话消息组成" class="headerlink" title="1.1 AI 对话消息组成"></a>1.1 AI 对话消息组成</h2><p>传递给 AI 模型的消息是一个数组，FastGPT 中这个数组的组成形式为：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    内置提示词（config.json 配置，一般为空）</span><br><span class="line">    提示词 （用户输入的提示词）</span><br><span class="line">    历史记录</span><br><span class="line">    问题（会由输入的问题、引用提示词和引用模板来决定）</span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>Tips: 可以通过点击上下文按键查看完整的</p><h2 id="1-2-引用模板和提示词设计"><a href="#1-2-引用模板和提示词设计" class="headerlink" title="1.2 引用模板和提示词设计"></a>1.2 引用模板和提示词设计</h2><p>知识库采用 QA 对的格式存储，在转义成字符串时候会根据<strong>引用模板</strong>来进行格式化。知识库包含 3 个变量： q,a 和 source，可以通过   _posts/fastgpt/使用案例.md 按需引入。下面一个模板例子：</p><p><strong>引用模板</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;instruction:&quot;&#123;&#123;q&#125;&#125;&quot;,output:&quot;&#123;&#123;a&#125;&#125;&quot;,source:&quot;&#123;&#123;source&#125;&#125;&quot;&#125;</span><br></pre></td></tr></table></figure><p>搜索到的知识库，会自动将 q,a,source 替换成对应的内容。每条搜索到的内容，会通过 <code>\n</code> 隔开。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;instruction:&quot;电影《铃芽之旅》的导演是谁？&quot;,output:&quot;电影《铃芽之旅》的导演是新海诚。&quot;,source:&quot;手动输入&quot;&#125;</span><br><span class="line">&#123;instruction:&quot;本作的主人公是谁？&quot;,output:&quot;本作的主人公是名叫铃芽的少女。&quot;,source:&quot;&quot;&#125;</span><br><span class="line">&#123;instruction:&quot;电影《铃芽之旅》男主角是谁？&quot;,output:&quot;电影《铃芽之旅》男主角是宗像草太，由松村北斗配音。&quot;,source:&quot;&quot;&#125;</span><br><span class="line">&#123;instruction:&quot;电影《铃芽之旅》的编剧是谁？22&quot;,output:&quot;新海诚是本片的编剧。&quot;,source:&quot;手动输入&quot;&#125;</span><br></pre></td></tr></table></figure><h2 id="1-3-引用提示词"><a href="#1-3-引用提示词" class="headerlink" title="1.3 引用提示词"></a>1.3 <strong>引用提示词</strong></h2><p>引用模板需要和引用提示词一起使用，提示词中可以写引用模板的格式说明以及对话的要求等。可以使用  来使用 <strong>引用模板</strong>，使用  来引入问题。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">你的背景知识:</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">&#123;&#123;quote&#125;&#125;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">对话要求：</span><br><span class="line">1. 背景知识是最新的，其中 instruction 是相关介绍，output 是预期回答或补充。</span><br><span class="line">2. 使用背景知识回答问题。</span><br><span class="line">3. 背景知识无法回答问题时，你可以礼貌的的回答用户问题。</span><br><span class="line">我的问题是:&quot;&#123;&#123;question&#125;&#125;&quot;</span><br></pre></td></tr></table></figure><h1 id="2、提示词案例"><a href="#2、提示词案例" class="headerlink" title="2、提示词案例"></a>2、提示词案例</h1><h2 id="2-1-仅回复知识库里的内容"><a href="#2-1-仅回复知识库里的内容" class="headerlink" title="2.1 仅回复知识库里的内容"></a>2.1 仅回复知识库里的内容</h2><p><strong>引用提示词</strong>里添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">你的背景知识:</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">&#123;&#123;quote&#125;&#125;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">对话要求：</span><br><span class="line">1. 回答前，请先判断背景知识是否足够回答问题，如果无法回答，请直接回复：“对不起，我无法回答你的问题~”。</span><br><span class="line">2. 背景知识是最新的，其中 instruction 是相关介绍，output 是预期回答或补充。</span><br><span class="line">3. 使用背景知识回答问题。</span><br><span class="line">我的问题是:&quot;&#123;&#123;question&#125;&#125;&quot;</span><br></pre></td></tr></table></figure><h2 id="2-2-说明引用来源"><a href="#2-2-说明引用来源" class="headerlink" title="2.2 说明引用来源"></a>2.2 说明引用来源</h2><p><strong>引用模板:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;instruction:&quot;&#123;&#123;q&#125;&#125;&quot;,output:&quot;&#123;&#123;a&#125;&#125;&quot;,source:&quot;&#123;&#123;source&#125;&#125;&quot;&#125;</span><br></pre></td></tr></table></figure><p><strong>引用提示词：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">你的背景知识:</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">&#123;&#123;quote&#125;&#125;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">对话要求：</span><br><span class="line">1. 背景知识是最新的，其中 instruction 是相关介绍，output 是预期回答或补充，source是背景来源。</span><br><span class="line">2. 使用背景知识回答问题。</span><br><span class="line">3. 在回答问题后，你需要给出本次回答对应的背景来源，来源展示格式如下：</span><br><span class="line"></span><br><span class="line">“</span><br><span class="line">这是AI作答。本次知识来源：</span><br><span class="line">1. source1</span><br><span class="line">2. source2</span><br><span class="line">......</span><br><span class="line">”</span><br><span class="line"></span><br><span class="line">我的问题是:&quot;&#123;&#123;question&#125;&#125;&quot;</span><br></pre></td></tr></table></figure><h1 id="3、对接第三方-GPT-应用"><a href="#3、对接第三方-GPT-应用" class="headerlink" title="3、对接第三方 GPT 应用"></a>3、对接第三方 GPT 应用</h1><p>通过与 OpenAI 兼容的 API 对接第三方应用</p><h2 id="3-1-获取-API-秘钥"><a href="#3-1-获取-API-秘钥" class="headerlink" title="3.1 获取 API 秘钥"></a>3.1 获取 API 秘钥</h2><p>依次选择应用 -&gt; 「API访问」，然后点击「API 密钥」来创建密钥。</p><p>warning</p><p>密钥需要自己保管好，一旦关闭就无法再复制密钥，只能创建新密钥再复制。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/fastgpt-api.png" alt="img"></p><p>🍅</p><p>Tips: 安全起见，你可以设置一个额度或者过期时间，放置 key 被滥用。</p><h2 id="3-2-替换三方应用的变量"><a href="#3-2-替换三方应用的变量" class="headerlink" title="3.2 替换三方应用的变量"></a>3.2 替换三方应用的变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OPENAI_API_BASE_URL: https://fastgpt.run/api/openapi (改成自己部署的域名)</span><br><span class="line">OPENAI_API_KEY = 上一步获取到的秘钥</span><br></pre></td></tr></table></figure><p><strong><a href="https://github.com/Yidadaa/ChatGPT-Next-Web">ChatGPT Next Web</a> 示例：</strong></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/chatgptnext.png" alt="img"></p><p><strong><a href="https://github.com/Chanzhaoyu/chatgpt-web">ChatGPT Web</a> 示例：</strong></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/chatgptweb.png" alt="img"></p><h2 id="3-3-对接-chatgpt-on-wechat"><a href="#3-3-对接-chatgpt-on-wechat" class="headerlink" title="3.3 对接 chatgpt-on-wechat"></a>3.3 对接 chatgpt-on-wechat</h2><p>FastGPT 对接 chatgpt-on-wechat</p><h3 id="3-4-1-分钟对接-chatgpt-on-wechat"><a href="#3-4-1-分钟对接-chatgpt-on-wechat" class="headerlink" title="3.4 1 分钟对接 chatgpt-on-wechat"></a>3.4 1 分钟对接 chatgpt-on-wechat</h3><p><a href="https://github.com/zhayujie/chatgpt-on-wechat">chatgpt-on-wechat GitHub 地址</a></p><p>由于 FastGPT 的 API 接口和 OpenAI 的规范一致，可以无需变更原来的应用即可使用 FastGPT 上编排好的应用。API 使用可参考 <a href="https://doc.fastgpt.run/docs/use-cases/openapi/">这篇文章</a>。编排示例，可参考 <a href="https://doc.fastgpt.run/docs/workflow/intro/">高级编排介绍</a></p><h4 id="1-获取-OpenAPI-秘钥"><a href="#1-获取-OpenAPI-秘钥" class="headerlink" title="1. 获取 OpenAPI 秘钥"></a>1. 获取 OpenAPI 秘钥</h4><p>依次选择应用 -&gt; 「API访问」，然后点击「API 密钥」来创建密钥。</p><p>密钥需要自己保管好，一旦关闭就无法再复制密钥，只能创建新密钥再复制。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/fastgpt-api.png" alt="img"></p><h4 id="3-创建-docker-compose-yml-文件"><a href="#3-创建-docker-compose-yml-文件" class="headerlink" title="3. 创建 docker-compose.yml 文件"></a>3. 创建 docker-compose.yml 文件</h4><p>只需要修改 <code>OPEN_AI_API_KEY</code> 和 <code>OPEN_AI_API_BASE</code> 两个环境变量即可。其中 <code>OPEN_AI_API_KEY</code> 为第一步获取的秘钥，<code>OPEN_AI_API_BASE</code> 为 FastGPT 的 OpenAPI 地址，例如：<code>https://fastgpt.run/api/openapi/v1</code>。</p><p>随便找一个目录，创建一个 docker-compose.yml 文件，将下面的代码复制进去。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2.0&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">chatgpt-on-wechat:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">zhayujie/chatgpt-on-wechat</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">chatgpt-on-wechat</span></span><br><span class="line">    <span class="attr">security_opt:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">seccomp:unconfined</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">OPEN_AI_API_KEY:</span> <span class="string">&#x27;fastgpt-z51pkjqm9nrk03a1rx2funoy&#x27;</span></span><br><span class="line">      <span class="attr">OPEN_AI_API_BASE:</span> <span class="string">&#x27;https://fastgpt.run/api/openapi/v1&#x27;</span></span><br><span class="line">      <span class="attr">MODEL:</span> <span class="string">&#x27;gpt-3.5-turbo&#x27;</span></span><br><span class="line">      <span class="attr">CHANNEL_TYPE:</span> <span class="string">&#x27;wx&#x27;</span></span><br><span class="line">      <span class="attr">PROXY:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="attr">HOT_RELOAD:</span> <span class="string">&#x27;False&#x27;</span></span><br><span class="line">      <span class="attr">SINGLE_CHAT_PREFIX:</span> <span class="string">&#x27;[&quot;bot&quot;, &quot;@bot&quot;]&#x27;</span></span><br><span class="line">      <span class="attr">SINGLE_CHAT_REPLY_PREFIX:</span> <span class="string">&#x27;&quot;[bot] &quot;&#x27;</span></span><br><span class="line">      <span class="attr">GROUP_CHAT_PREFIX:</span> <span class="string">&#x27;[&quot;@bot&quot;]&#x27;</span></span><br><span class="line">      <span class="attr">GROUP_NAME_WHITE_LIST:</span> <span class="string">&#x27;[&quot;ChatGPT测试群&quot;, &quot;ChatGPT测试群2&quot;]&#x27;</span></span><br><span class="line">      <span class="attr">IMAGE_CREATE_PREFIX:</span> <span class="string">&#x27;[&quot;画&quot;, &quot;看&quot;, &quot;找&quot;]&#x27;</span></span><br><span class="line">      <span class="attr">CONVERSATION_MAX_TOKENS:</span> <span class="number">1000</span></span><br><span class="line">      <span class="attr">SPEECH_RECOGNITION:</span> <span class="string">&#x27;False&#x27;</span></span><br><span class="line">      <span class="attr">CHARACTER_DESC:</span> <span class="string">&#x27;你是ChatGPT, 一个由OpenAI训练的大型语言模型, 你旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。&#x27;</span></span><br><span class="line">      <span class="attr">SUBSCRIBE_MSG:</span> <span class="string">&#x27;感谢您的关注！\n这里是ChatGPT，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入&#123;trigger_prefix&#125;#help 查看详细指令。&#x27;</span></span><br><span class="line">      <span class="attr">EXPIRES_IN_SECONDS:</span> <span class="number">3600</span></span><br><span class="line">      <span class="attr">USE_GLOBAL_PLUGIN_CONFIG:</span> <span class="string">&#x27;True&#x27;</span></span><br><span class="line">      <span class="attr">USE_LINKAI:</span> <span class="string">&#x27;False&#x27;</span></span><br><span class="line">      <span class="attr">LINKAI_API_KEY:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="attr">LINKAI_APP_CODE:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="4-运行-chatgpt-on-wechat"><a href="#4-运行-chatgpt-on-wechat" class="headerlink" title="4. 运行 chatgpt-on-wechat"></a>4. 运行 chatgpt-on-wechat</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose pull</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><ul><li>运行成功后会提示扫码登录</li><li>随便找个账号，私信发送: bot问题 会将 问题 传到 FastGPT 进行回答。</li></ul><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/fastgpt-api.png" alt=""></p><h2 id="3-5-接入飞书"><a href="#3-5-接入飞书" class="headerlink" title="3.5 接入飞书"></a>3.5 接入飞书</h2><p>FastGPT 接入飞书机器人</p><h1 id="4、FastGPT-一分钟接入飞书"><a href="#4、FastGPT-一分钟接入飞书" class="headerlink" title="4、FastGPT 一分钟接入飞书"></a>4、FastGPT 一分钟接入飞书</h1><p><a href="https://github.com/ConnectAI-E/Feishu-OpenAI">Feishu OpenAI GitHub 地址</a></p><p>由于 FastGPT 的 API 接口和 OpenAI 的规范一致，可以无需变更第三方应用即可使用 FastGPT 上编排好的应用。API 使用可参考 <a href="https://doc.fastgpt.run/docs/use-cases/openapi/">这篇文章</a>。编排示例，可参考 <a href="https://doc.fastgpt.run/docs/workflow/intro/">高级编排介绍</a></p><h2 id="1-获取-FastGPT-的-OpenAPI-秘钥"><a href="#1-获取-FastGPT-的-OpenAPI-秘钥" class="headerlink" title="1. 获取 FastGPT 的 OpenAPI 秘钥"></a>1. 获取 FastGPT 的 OpenAPI 秘钥</h2><p>依次选择应用 -&gt; 「API 访问」，然后点击「API 密钥」来创建密钥。 <a href="https://doc.fastgpt.run/docs/use-cases/openapi/">参考这篇文章</a></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/fastgpt-api.png" alt="img"></p><h2 id="2-部署飞书服务"><a href="#2-部署飞书服务" class="headerlink" title="2. 部署飞书服务"></a>2. 部署飞书服务</h2><p>推荐使用 Railway 一键部署</p><p>参考环境变量配置：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/feishu-env.png" alt="img"></p><p>FastGPT 集成<strong>重点参数：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#上一步FastGPT的OpenAPI 秘钥</span></span><br><span class="line">OPENAI_KEY=fastgpt-z51pkjqm9nrk03a1rx2funoy</span><br><span class="line"><span class="comment">#调用OpenAI的BaseUrl要换成FastGPT的</span></span><br><span class="line">API_URL=https://fastgpt.run/api/openapi</span><br></pre></td></tr></table></figure><h2 id="3-创建飞书机器人"><a href="#3-创建飞书机器人" class="headerlink" title="3. 创建飞书机器人"></a>3. 创建飞书机器人</h2><ol><li><p>前往 <a href="https://open.feishu.cn/app?lang=zh-CN">开发者平台</a> 创建应用 , 并获取到 APPID 和 Secret</p></li><li><p>前往<code>应用功能-机器人</code>, 创建机器人</p></li><li><p>从 cpolar、serverless 或 Railway 获得公网地址，在飞书机器人后台的 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">事件订阅</span><br></pre></td></tr></table></figure><p> 板块填写。例如，</p><ul><li><code>http://xxxx.r6.cpolar.top</code> 为 cpolar 暴露的公网地址</li><li><code>/webhook/event</code> 为统一的应用路由</li><li>最终的回调地址为 <code>http://xxxx.r6.cpolar.top/webhook/event</code></li></ul></li><li><p>在飞书机器人后台的 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">机器人</span><br></pre></td></tr></table></figure><p> 板块，填写消息卡片请求网址。例如，</p><ul><li><code>http://xxxx.r6.cpolar.top</code> 为 cpolar 暴露的公网地址</li><li><code>/webhook/card</code> 为统一的应用路由</li><li>最终的消息卡片请求网址为 <code>http://xxxx.r6.cpolar.top/webhook/card</code></li></ul></li><li><p>在事件订阅板块，搜索三个词</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">机器人进群</span><br></pre></td></tr></table></figure><p>、 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">接收消息</span><br></pre></td></tr></table></figure><p>、 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">消息已读</span><br></pre></td></tr></table></figure><p>, 把他们后面所有的权限全部勾选。 进入权限管理界面，搜索</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">图片</span><br></pre></td></tr></table></figure><p>, 勾选</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">获取与上传图片或文件资源</span><br></pre></td></tr></table></figure><p>。 最终会添加下列回调事件</p><ul><li>im:resource(获取与上传图片或文件资源)</li><li>im:message</li><li>im:message.group_at_msg(获取群组中所有消息)</li><li>im:message.group_at_msg:readonly(接收群聊中 @ 机器人消息事件)</li><li>im:message.p2p_msg(获取用户发给机器人的单聊消息)</li><li>im:message.p2p_msg:readonly(读取用户发给机器人的单聊消息)</li><li>im:message:send_as_bot(获取用户在群组中 @ 机器人的消息)</li><li>im:chat:readonly(获取群组信息)</li><li>im:chat(获取与更新群组信息)</li></ul></li></ol><h2 id="4-测试飞书机器人"><a href="#4-测试飞书机器人" class="headerlink" title="4. 测试飞书机器人"></a>4. 测试飞书机器人</h2><p>私聊机器人，或者群里艾特它，就可以基于 FastGPT 的应用进行回答啦</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/feishu-res.png" alt="img"></p><h1 id="5、打造高质量-AI-知识库"><a href="#5、打造高质量-AI-知识库" class="headerlink" title="5、打造高质量 AI 知识库"></a>5、打造高质量 AI 知识库</h1><p>利用 FastGPT 打造高质量 AI 知识库</p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>自从去年 12 月 ChatGPT 发布后，带动了新的一轮应用交互革命。尤其是 GPT-3.5 接口全面放开后，LLM 应用雨后春笋般快速涌现，但因为 GPT 的可控性、随机性和合规性等问题，很多应用场景都没法落地。</p><p>3 月时候，在 Twitter 上刷到一个老哥使用 GPT 训练自己的博客记录，并且成本非常低（比起 FT）。他给出了一个完整的流程图：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/1.png" alt="向量搜索 GPT 流程图"></p><p>看到这个推文后，我灵机一动，应用场景就十分清晰了。直接上手开干，在经过不到 1 个月时间，FastGPT 在原来多助手管理基础上，加入了向量搜索。于是便有了最早的一期视频：</p><p>3 个月过去了，FastGPT 延续着早期的思路去完善和扩展，目前在向量搜索 + LLM 线性问答方面的功能基本上完成了。不过我们始终没有出一期关于如何构建知识库的教程，趁着 V4 在开发中，我们计划介绍一期《如何在 FastGPT 上构建高质量知识库》，以便大家更好的使用。</p><h2 id="5-1-FastGPT-知识库完整逻辑"><a href="#5-1-FastGPT-知识库完整逻辑" class="headerlink" title="5.1 FastGPT 知识库完整逻辑"></a>5.1 FastGPT 知识库完整逻辑</h2><p>在正式构建知识库前，我们先来了解下 FastGPT 是如何进行知识库检索的。首先了解几个基本概念：</p><ol><li>向量：将人类直观的语言（文字、图片、视频等）转成计算机可识别的语言（数组）。</li><li>向量相似度：两个向量之间可以进行计算，得到一个相似度，即代表：两个语言相似的程度。</li><li>语言大模型的一些特点：上下文理解、总结和推理。</li></ol><p>结合上述 3 个概念，便有了 “向量搜索 + 大模型 = 知识库问答” 的公式。下图是 FastGPT V3 中知识库问答功能的完整逻辑：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/2.png" alt="向量搜索 GPT 流程图"></p><p>与大部分其他知识库问答产品不一样的是， FastGPT 采用了 QA 问答对进行存储，而不是仅进行 chunk（文本分块）处理。目的是为了减少向量化内容的长度，让向量能更好的表达文本的含义，从而提高搜索精准度。 此外 FastGPT 还提供了搜索测试和对话测试两种途径对数据进行调整，从而方便用户调整自己的数据。根据上述流程和方式，我们以构建一个 FastGPT 常见问题机器人为例，展示如何构建一个高质量的 AI 知识库。</p><h2 id="5-2-构建知识库应用"><a href="#5-2-构建知识库应用" class="headerlink" title="5.2 构建知识库应用"></a>5.2 构建知识库应用</h2><p>首先，先创建一个 FastGPT 常见问题知识库</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/3.png" alt="创建知识库应用"></p><h3 id="5-3-通过-QA-拆分，获取基础知识"><a href="#5-3-通过-QA-拆分，获取基础知识" class="headerlink" title="5.3 通过 QA 拆分，获取基础知识"></a>5.3 通过 QA 拆分，获取基础知识</h3><p>我们先直接把 FastGPT Git 上一些已有文档，进行 QA 拆分，从而获取一些 FastGPT 基础的知识。下面是 README 例子。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/4.png" alt="QA 拆分示意图"></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/5.png" alt="img"></p><h3 id="5-4-修正-QA"><a href="#5-4-修正-QA" class="headerlink" title="5.4 修正 QA"></a>5.4 修正 QA</h3><p>通过 README 我们一共得到了 11 组数据，整体的质量还是不错的，图片和链接都提取出来了。不过最后一个知识点出现了一些截断，我们需要手动的修正一下。</p><p>此外，我们观察到第一列第三个知识点。这个知识点是介绍了 FastGPT 一些资源链接，但是 QA 拆分将答案放置在了 A 中，但通常来说用户的提问并不会直接问“有哪些链接”，通常会问：“部署教程”，“问题文档”之类的。因此，我们需要将这个知识点进行简单的一个处理，如下图：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/6.png" alt="手动修改知识库数据"></p><p>我们先来创建一个应用，看看效果如何。 首先需要去创建一个应用，并且在知识库中关联相关的知识库。另外还需要在配置页的提示词中，告诉 GPT：“知识库的范围”。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/7.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/8.png" alt="README QA 拆分后效果"></p><p>整体的效果还是不错的，链接和对应的图片都可以顺利的展示。</p><h3 id="5-5-录入社区常见问题"><a href="#5-5-录入社区常见问题" class="headerlink" title="5.5 录入社区常见问题"></a>5.5 录入社区常见问题</h3><p>接着，我们再把 FastGPT 常见问题的文档导入，由于平时整理不当，我们只能手动的录入对应的问答。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/9.png" alt="手动录入知识库结果"></p><p>导入结果如上图。可以看到，我们均采用的是问答对的格式，而不是粗略的直接导入。目的就是为了模拟用户问题，进一步的提高向量搜索的匹配效果。可以为同一个问题设置多种问法，效果更佳。 FastGPT 还提供了 openapi 功能，你可以在本地对特殊格式的文件进行处理后，再上传到 FastGPT，具体可以参考：<a href="https://kjqvjse66l.feishu.cn/docx/DmLedTWtUoNGX8xui9ocdUEjnNh">FastGPT Api Docs</a></p><h3 id="5-6-知识库微调和参数调整"><a href="#5-6-知识库微调和参数调整" class="headerlink" title="5.6 知识库微调和参数调整"></a>5.6 知识库微调和参数调整</h3><p>FastGPT 提供了搜索测试和对话测试两种途径对知识库进行微调，我们先来使用搜索测试对知识库进行调整。我们建议你提前收集一些用户问题进行测试，根据预期效果进行跳转。可以先进行搜索测试调整，判断知识点是否合理。</p><h4 id="搜索测试"><a href="#搜索测试" class="headerlink" title="搜索测试"></a>搜索测试</h4><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/10.png" alt="搜索测试作用"></p><p>你可能会遇到下面这种情况，由于“知识库”这个关键词导致一些无关内容的相似度也被搜索进去，此时就需要给第四条记录也增加一个“知识库”关键词，从而去提高它的相似度。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/11.png" alt="搜索测试结果"></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/12.png" alt="优化后的搜索测试结果"></p><h4 id="提示词设置"><a href="#提示词设置" class="headerlink" title="提示词设置"></a>提示词设置</h4><p>提示词的作用是引导模型对话的方向。在设置提示词时，遵守 2 个原则：</p><ol><li>告诉 Gpt 回答什么方面内容。</li><li>给知识库一个基本描述，从而让 Gpt 更好的判断用户的问题是否属于知识库范围。</li></ol><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/13.png" alt="提示词设置"></p><h4 id="更好的限定模型聊天范围"><a href="#更好的限定模型聊天范围" class="headerlink" title="更好的限定模型聊天范围"></a>更好的限定模型聊天范围</h4><p>首先，你可以通过调整知识库搜索时的相似度和最大搜索数量，实现从知识库层面限制聊天范围。通常我们可以设置相似度为 0.82，并设置空搜索回复内容。这意味着，如果用户的问题无法在知识库中匹配时，会直接回复预设的内容。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/14.png" alt="搜索参数设置"></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/15.png" alt="空搜索控制效果"></p><p>由于 openai 向量模型并不是针对中文，所以当问题中有一些知识库内容的关键词时，相似度 会较高，此时无法从知识库层面进行限定。需要通过限定词进行调整，例如：</p><blockquote><p>我的问题如果不是关于 FastGPT 的，请直接回复：“我不确定”。你仅需要回答知识库中的内容，不在其中的内容，不需要回答。</p></blockquote><p>效果如下：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/16.png" alt="限定词效果"></p><p>当然，gpt35 在一定情况下依然是不可控的。</p><h4 id="通过对话调整知识库"><a href="#通过对话调整知识库" class="headerlink" title="通过对话调整知识库"></a>通过对话调整知识库</h4><p>与搜索测试类似，你可以直接在对话页里，点击“引用”，来随时修改知识库内容。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/17.png" alt="查看答案引用"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>向量搜索是一种可以比较文本相似度的技术。</li><li>大模型具有总结和推理能力，可以从给定的文本中回答问题。</li><li>最有效的知识库构建方式是 QA 和手动构建。</li><li>Q 的长度不宜过长。</li><li>需要调整提示词，来引导模型回答知识库内容。</li><li>可以通过调整搜索相似度、最大搜索数量和限定词来控制模型回复的范围。</li></ol>]]></content>
      
      
      <categories>
          
          <category> FastGPT项目部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FastGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站性能优化</title>
      <link href="/2023/09/25/%E5%89%8D%E7%AB%AF-%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2023/09/25/%E5%89%8D%E7%AB%AF-%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="一、理论部分"><a href="#一、理论部分" class="headerlink" title="一、理论部分"></a>一、理论部分</h1><h2 id="1-浏览器渲染原理"><a href="#1-浏览器渲染原理" class="headerlink" title="1.浏览器渲染原理"></a>1.浏览器渲染原理</h2><p>我们需要知道浏览器是如何渲染一个页面的，我们才能知道如何对页面进行性能优化，所以这里我们对一些基础知识进行讲解。</p><h3 id="1-1-进程与线程"><a href="#1-1-进程与线程" class="headerlink" title="1.1 进程与线程"></a>1.1 进程与线程</h3><p>浏览器有多种进程，其中最主要的5种进程如下：</p><p><a href="https://bu.dusays.com/2022/05/23/628b96c2e0bec.webp"><img src="https://bu.dusays.com/2022/05/23/628b96c2e0bec.webp" alt="p1"></a></p><ol><li>浏览器进程 负责界面展示、用户交互、子进程管理、提供存储等</li><li>渲染进程 每个页面都有一个单独的渲染进程，用于渲染页面，包含webworker线程</li><li>网络进程 主要处理网络资源加载（HTML、CSS、JS、IMAGE、AJAX等）</li><li>GPU进程 3D绘制，提高性能</li><li>插件进程 chrome插件，每个插件占用一个进程</li></ol><h3 id="1-2-输入url到页面展示完整过程"><a href="#1-2-输入url到页面展示完整过程" class="headerlink" title="1.2 输入url到页面展示完整过程"></a>1.2 输入url到页面展示完整过程</h3><p><a href="https://bu.dusays.com/2022/05/23/628b9dcaedcbd.jpg"><img src="https://bu.dusays.com/2022/05/23/628b9dcaedcbd.jpg" alt="p2"></a></p><h4 id="1-2-1-用户输入"><a href="#1-2-1-用户输入" class="headerlink" title="1.2.1 用户输入"></a>1.2.1 用户输入</h4><p>用户在浏览器进程输入并按下回车健后，浏览器判断用户输入的url是否为正确的url，如果不是，则使用默认的搜索引擎将该关键字拼接成url。</p><h4 id="1-2-2-卸载原页面并重定向到新页面"><a href="#1-2-2-卸载原页面并重定向到新页面" class="headerlink" title="1.2.2 卸载原页面并重定向到新页面"></a>1.2.2 卸载原页面并重定向到新页面</h4><p>然后浏览器会将现有页面卸载掉并重定向到用户新输入的url页面，也就是图中【Process Unload Event】和【Redirect】流程。</p><p>此时浏览器会准备一个渲染进程用于渲染即将到来的页面，和一个网络进程用于发送网络请求。</p><h4 id="1-2-3-处理Service-Worker"><a href="#1-2-3-处理Service-Worker" class="headerlink" title="1.2.3 处理Service Worker"></a>1.2.3 处理Service Worker</h4><p>如果当前页面注册了Service Worker那么它可以拦截当前网站所有的请求，进行判断是否需要向远程发送网络请求。也就是图中【Service Worker Init】与【Service Worker Fecth Event 】步骤</p><p>如果不需要发送网络请求，则取本地文件。如果需要则进行下一步。</p><h4 id="1-2-4-网络请求"><a href="#1-2-4-网络请求" class="headerlink" title="1.2.4 网络请求"></a>1.2.4 网络请求</h4><p><a href="https://bu.dusays.com/2022/05/23/628b99a83152f.webp"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/628b99a83152f.webp" alt="p3"></a></p><ol><li>根据url查询本地是否已经有强制缓存，如果有则判断缓存是否过期，如果没过期则直接返回缓存内容，也就是图1中【HTTP Cache】步骤</li><li>如果没有强制缓存或者缓存已过期，则将该请求加入队列进行排队准备发送网络请求，也就是图2中【正在排队】，然后进入DNS解析阶段，也就是图1中【DNS】以及图2中的【DNS查找】，DNS根据域名解析出对应的IP地址。(DNS基于UDP)。</li><li>使用IP寻址找到对方，然后根据IP地址+端口号创建一个TCP连接(三次握手)，也就是图1中【TCP】以及图2中的【初始连接】创建完成后利用TCP连接来传输数据。(TCP会将数据拆分为多个数据包，进行有序传输，如果丢包会重发，TCP的特点是可靠、有序)</li><li>判断当前协议是否为https，如果为https，则进行SSL协商，将数据进行加密，如果为http协议则不进行加密(明文传输)，也就是图2中的【SSL】。</li><li>开始发送http请求(请求行/请求头/请求体)，也就是图1中【Request】以及图2中的【已发送请求】。HTTP协议有多个版本，目前使用最多的版本为HTTP/1.1，HTTP/1.1发送完成后默认不会断开。keep-alive 默认打开，为了下次传输数据时复用上次创建的连接。每个域名最多同时建立6个TCP连接，所以同一时间最多发生6个请求。</li><li>服务器收到数据后解析HTTP请求(请求行/请求头/请求体)，处理完成后生成状态码和HTTP响应(响应行/响应头/响应体)后返回给客户端，也就是图2的【等待中】在做的事情。</li><li>客户端接收到HTTP响应后根据状态码进行对应的处理，如果状态码为304则直接代表协商缓存生效，直接取本地的缓存文件。如果不是则下载内容。也就是图1中【Response】以及图2中的【下载内容】步骤。</li></ol><h4 id="1-2-5-服务端响应"><a href="#1-2-5-服务端响应" class="headerlink" title="1.2.5 服务端响应"></a>1.2.5 服务端响应</h4><p>在网络请求第6步中，服务器收到HTTP请求后需要根据请求信息来进行解析，并返回给客户端想要的数据，这也就服务端响应。</p><p>服务端可以响应并返回给客户端很多种类型的资源，这里主要介绍html类型。</p><p>目前前端处理服务端响应html请求主要分为SSR服务端渲染与CSR客户端渲染，CSR就是返回一个空的HTML模版，然后浏览器加载js后通过js动态渲染页面。SSR是服务端在接受到请求时事先在服务端渲染好html返回给客户端后，客户端再进行客户端激活。</p><p>在打开一个站点的首屏页的完整链路中，使用SSR服务端渲染时的速度要远大于CSR客户端渲染，并且SSR对SEO友好。所以对于首屏加载速度比较敏感或者需要优化SEO的站点来说，使用SSR是更好的选择。</p><h4 id="1-2-6-浏览器渲染详细流程"><a href="#1-2-6-浏览器渲染详细流程" class="headerlink" title="1.2.6 浏览器渲染详细流程"></a>1.2.6 浏览器渲染详细流程</h4><p>浏览器渲染详细流程主要在网络请求中的地7步。浏览器下载完html内容后进行解析何渲染页面的流程。<br><a href="https://bu.dusays.com/2022/05/23/628ba7881b1a8.webp"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/628ba7881b1a8.webp" alt="p4"></a><br>渲染流程分为4种情况：</p><ol><li>HTML中无任何CSS相关标签</li><li>CSS相关标签在HTML最顶部，且在解析到内容标签<code>（&lt;div /&gt;）</code>时已经解析完CSS相关标签</li><li>CSS相关标签在HTML最顶部，但在解析到内容标签<code>（&lt;div /&gt;）</code>时CSS相关标签尚未解析完</li><li>CSS相关标签在HTML最底部<br>（略）</li></ol><h3 id="1-3-浏览器处理每一帧的流程"><a href="#1-3-浏览器处理每一帧的流程" class="headerlink" title="1.3 浏览器处理每一帧的流程"></a>1.3 浏览器处理每一帧的流程</h3><p>浏览器在渲染完页面之后还需要不间断的处理很多内容的，比如动画、用户事件、定时器等。因此当浏览器渲染完页面后，还会在之后的每一帧到来时执行以下的流程。<br><a href="https://bu.dusays.com/2022/05/24/628bb016bb39b.webp"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/628bb016bb39b.webp" alt="p5"></a></p><ol><li>【Input events】处理用户事件，先处理【阻塞事件Blocking】包括touch和wheel事件，后处理【非阻塞事件Non-blocking】包括click和keypress。</li><li>【JS】处理完用户事件后执行【定时器Timers】</li><li>【Begin frame】处理完定时器后开始进行【每帧事件Per frame events】的处理，包括窗口大小改变、滚动、媒体查询的更改、动画事件。</li><li>【rAF】处理完帧事件后执行requestAnimationFrame回调函数和IntersectionObserver回调函数。</li><li>【Layout】然后【重新计算样式Recalc style】、【更新布局Update layout】、【调整Observer回调的大小Resize Observer callbacks】</li><li>【Paint】然后【合成更新Compositing update】、【Paint invalidation】、【Record】</li></ol><h2 id="2-Chrome性能优化相关工具"><a href="#2-Chrome性能优化相关工具" class="headerlink" title="2.Chrome性能优化相关工具"></a>2.Chrome性能优化相关工具</h2><p>了解完浏览器渲染原理，我们还需要知道根据哪些指标才能判断一个页面性能的好坏，在Chrome中这些指标应该怎么获取。以及Chrome都为我们提供了哪些性能相关的工具，如何使用。</p><h3 id="2-1-Chrome-Performance-性能"><a href="#2-1-Chrome-Performance-性能" class="headerlink" title="2.1 Chrome Performance(性能)"></a>2.1 Chrome Performance(性能)</h3><p>Performance既是一个Chrome工具，可用于性能检测。<br>同样又是一套JS API，可在Chrome中执行。</p><h4 id="2-1-1-Chrome-Performance-工具的使用"><a href="#2-1-1-Chrome-Performance-工具的使用" class="headerlink" title="2.1.1 Chrome Performance 工具的使用"></a>2.1.1 Chrome Performance 工具的使用</h4><p>打开Chrome调试面板选择Performance，中文版为性能，点击刷新按钮，Performance会刷新并录制当前页面，然后我们就可以在面板中看到如下的各种性能相关细节。<br><a href="https://bu.dusays.com/2022/05/24/628bb12aad445.webp"><img src="https://bu.dusays.com/2022/05/24/628bb12aad445.webp" alt="p6"></a></p><h4 id="2-1-2-使用Performance-API获取性能相关指标"><a href="#2-1-2-使用Performance-API获取性能相关指标" class="headerlink" title="2.1.2 使用Performance API获取性能相关指标"></a>2.1.2 使用Performance API获取性能相关指标</h4><p>接下来我们来了解一下目前常用的性能指标，并且我们需要知道其中一些关键指标如何用Performance API获取。</p><ol><li>TTFB（Time To First Byte）首字节时间：从发送请求到数据返回第一个字节所消耗的时间。</li><li>FP (First Paint) 首次绘制: 第一个像素绘制到页面上的时间。</li><li>FCP (First Contentful Paint) 首次内容绘制: 标记浏览器渲染来自 DOM 第一位内容的时间点，该内容可能是文本、图像、SVG 甚至 元素。</li><li>FMP(First Meaningful Paint) 首次有效绘制: 例如，在 YouTube 观看页面上，主视频就是主角元素。<br>图片可以没加载完成，但整体的骨架已经加载完成了。<br>1秒内完成FMP的概率超过80%，那就代表这个网站是一个性能较好的网站。</li><li>TTI (Time to Interactive) 可交互时间 : DOM树构建完毕，可以绑定事件的时间</li><li>LCP (Largest Contentful Paint) 最大内容渲染: 代表在viewport中最大的页面元素加载的时间。LCP的数据会通过PerformanceEntry对象记录, 每次出现更大的内容渲染, 则会产生一个新的PerformanceEntry对象(2019年11月新增)。</li><li>DCL (DomContentloaded): 当 HTML 文档被完全加载和解析完成之后，DOMContentLoaded 事件被触发，无需等待样式表、图像和子框架的完成加载。</li><li>L (onLoad), 当依赖的资源(图片、文件等), 全部加载完毕之后才会触发。</li><li>L (onLoad), 当依赖的资源(图片、文件等), 全部加载完毕之后才会触发。</li><li>TBT (Total Blocking Time) 页面阻塞总时长: TBT汇总所有加载过程中阻塞用户操作的时长，在FCP和TTI之间任何long task中阻塞部分都会被汇总。</li><li>CLS (Cumulative Layout Shift) 累积布局偏移: 总结起来就是一个元素初始时和其hidden之间的任何时间如果元素偏移了, 则会被计算进去, 具体的计算方法可看这篇文章 <a href="https://web.dev/cls/">https://web.dev/cls/</a></li><li>SI (Speed Index): 指标用于显示页面可见部分的显示速度, 单位是时间。</li></ol><h3 id="2-2-Coverage-覆盖率"><a href="#2-2-Coverage-覆盖率" class="headerlink" title="2.2 Coverage(覆盖率)"></a>2.2 Coverage(覆盖率)</h3><p>获取代码未使用占比。获取代码未使用占比<br><a href="https://bu.dusays.com/2022/05/24/628bb981db5c8.webp"><img src="https://bu.dusays.com/2022/05/24/628bb981db5c8.webp" alt="p7"></a></p><h3 id="2-3-Lighthouse"><a href="#2-3-Lighthouse" class="headerlink" title="2.3 Lighthouse"></a>2.3 Lighthouse</h3><p>获取性能报告并查看推荐优化项。可以在本地安装命令行工具来使用，也可以通过Chrome来使用。<br><a href="https://bu.dusays.com/2022/05/24/628cf77e139ff.webp"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/628cf77e139ff.webp" alt="p8"></a></p><h3 id="2-4-Network-网络"><a href="#2-4-Network-网络" class="headerlink" title="2.4 Network(网络)"></a>2.4 Network(网络)</h3><h4 id="2-4-1-网络请求中的Timing-时间"><a href="#2-4-1-网络请求中的Timing-时间" class="headerlink" title="2.4.1 网络请求中的Timing(时间)"></a>2.4.1 网络请求中的Timing(时间)</h4><p>能获取网络请求的时间消耗细节，可以根据耗时来决定优化策略。优先优化耗时最长的。<br><a href="https://bu.dusays.com/2022/05/24/628cf966b69da.webp"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/628cf966b69da.webp" alt="p9"></a></p><ul><li>正在排队：网络请求队列的排队时间</li><li>已停止：阻塞住用于处理其他事情的时间</li><li>DNS查找：用于DNS解析IP地址的时间</li><li>初始连接：创建TCP连接时间</li><li>SSL：用于SSL协商的时间</li><li>已发送请求：用于发送请求的时间</li><li>等待中：请求发出至接收响应的时间也可以理解为服务端处理请求的时间</li><li>下载内容：下载响应的时间</li></ul><h4 id="2-4-2-网络请求的优先级"><a href="#2-4-2-网络请求的优先级" class="headerlink" title="2.4.2 网络请求的优先级"></a>2.4.2 网络请求的优先级</h4><p>浏览器会根据资源的类型决定优先请求哪些资源，优先级高的请求能够优先被加载。<br><a href="https://bu.dusays.com/2022/05/24/628cf9efddd7f.webp"><img src="https://bu.dusays.com/2022/05/24/628cf9efddd7f.webp" alt="p10"></a><br>不同资源类型的优先级排序如下：</p><ul><li>最高：html、style</li><li>高：font、fetch、script</li><li>低：image、track</li></ul><h4 id="2-4-3-网页总资源信息"><a href="#2-4-3-网页总资源信息" class="headerlink" title="2.4.3 网页总资源信息"></a>2.4.3 网页总资源信息</h4><p><a href="https://bu.dusays.com/2022/05/24/628cfb20c1315.webp"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/628cfb20c1315.webp" alt="p11"></a></p><ul><li>58个请求：网页一共多少个请求</li><li>6.9 MB 项资源：网页资源一共6.9MB大小</li><li>DOMContentLoaded 454 毫秒：DOM加载完毕的时长</li><li>加载时间 1.02 秒：onload完毕的时长</li></ul><h4 id="2-4-4-Network配置"><a href="#2-4-4-Network配置" class="headerlink" title="2.4.4 Network配置"></a>2.4.4 Network配置</h4><p><a href="https://bu.dusays.com/2022/05/24/628cfcbe97759.webp"><img src="https://bu.dusays.com/2022/05/24/628cfcbe97759.webp" alt="p12"></a></p><h2 id="3-网页性能优化"><a href="#3-网页性能优化" class="headerlink" title="3.网页性能优化"></a>3.网页性能优化</h2><p>上面我们分别讲解了进程与线程、浏览器打开一个页面的完整过程、浏览器处理每一帧时的流程、Chrome性能相关的各种工具以及性能相关的各种指标。以上内容都掌握之后我们再考虑性能优化遍有了思路，我们在页面展示的任意一个步骤中对其进行优化都能对整个网页的展示性能产生影响。</p><p>下面列出了一个页面能优化的所有内容，读者可根据自己的业务情况结合性能工具来做适合自己的优化方式。</p><h3 id="3-1-网络优化策略"><a href="#3-1-网络优化策略" class="headerlink" title="3.1 网络优化策略"></a>3.1 网络优化策略</h3><h4 id="3-1-1-减少HTTP请求数"><a href="#3-1-1-减少HTTP请求数" class="headerlink" title="3.1.1 减少HTTP请求数"></a>3.1.1 减少HTTP请求数</h4><p>合并JS、合并CSS、合理内嵌JS和CSS、使用雪碧图。</p><h4 id="3-1-2-使用HTTP缓存"><a href="#3-1-2-使用HTTP缓存" class="headerlink" title="3.1.2 使用HTTP缓存"></a>3.1.2 使用HTTP缓存</h4><p>使用强制缓存可以不走网络请求，直接走本地缓存数据来加载资源。</p><p>使用协商缓存可以减少数据传输，当不需要更新数据时可通知客户端直接使用本地缓存。</p><h4 id="3-1-3-使用-HTTP-2-0"><a href="#3-1-3-使用-HTTP-2-0" class="headerlink" title="3.1.3 使用 HTTP/2.0"></a>3.1.3 使用 HTTP/2.0</h4><p>HTTP/2.0使用同一个TCP连接来发送数据，他把多个请求通过二进制分贞层实现了分贞，然后把数据传输给服务器。也叫多路复用，多个请求复用同一个TCP连接。</p><p>HTTP/2.0会将所有以:开头的请求头做一个映射表，然后使用hpack进行压缩，使用这种方式会使请求头更小。</p><p>服务器可主动推送数据给客户端。</p><h4 id="3-1-4-避免重定向"><a href="#3-1-4-避免重定向" class="headerlink" title="3.1.4 避免重定向"></a>3.1.4 避免重定向</h4><p>301、302 重定向会降低响应速度。</p><h4 id="3-1-5-使用-dns-prefetch"><a href="#3-1-5-使用-dns-prefetch" class="headerlink" title="3.1.5 使用 dns-prefetch"></a>3.1.5 使用 dns-prefetch</h4><p>DNS请求虽然占用的带宽较少，但会有很高的延迟，由其在移动端网络会更加明显。</p><p>使用 dns-prefetch 可以对网站中使用到的域名提前进行解析。提高资源加载速度。</p><p>通过DNS预解析技术可以很好的降低延迟，在访问以图片为主的移动端网站时，使用DNS预解析的情意中下页面加载时间可以减少5%。</p><h4 id="3-1-6-使用域名分片"><a href="#3-1-6-使用域名分片" class="headerlink" title="3.1.6 使用域名分片"></a>3.1.6 使用域名分片</h4><p>在HTTP/1.1中，一个域名同时最多创建6个TCP连接，将资源放在多个域名下可提高请求的并发数。</p><h4 id="3-1-7-CDN"><a href="#3-1-7-CDN" class="headerlink" title="3.1.7 CDN"></a>3.1.7 CDN</h4><p>静态资源全上CDN，CDN能非常有效的加快网站静态资源的访问速度。</p><h4 id="3-1-8-压缩"><a href="#3-1-8-压缩" class="headerlink" title="3.1.8 压缩"></a>3.1.8 压缩</h4><p>gzip压缩、html压缩、js压缩、css压缩、图片压缩。</p><h4 id="3-1-9-使用contenthash"><a href="#3-1-9-使用contenthash" class="headerlink" title="3.1.9 使用contenthash"></a>3.1.9 使用contenthash</h4><p>contenthash可以根据文件内容在文件名中加hash，可用于浏览器缓存文件，当文件没有改变时便直接取本地缓存数据。</p><h4 id="3-1-10-合理使用preload、prefetch"><a href="#3-1-10-合理使用preload、prefetch" class="headerlink" title="3.1.10 合理使用preload、prefetch"></a>3.1.10 合理使用preload、prefetch</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">&lt;link rel=&quot;preload&quot; as=&quot;style&quot; href=&quot;/static/style.css&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;preload&quot; as=&quot;font&quot; href=&quot;/static/font.woff&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;preload&quot; as=&quot;script&quot; href=&quot;/static/script.js&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;link rel=&quot;prefetch&quot; as=&quot;style&quot; href=&quot;/static/style.css&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;prefetch&quot; as=&quot;font&quot; href=&quot;/static/font.woff&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;prefetch&quot; as=&quot;script&quot; href=&quot;/static/script.js&quot;&gt;</span><br></pre></td></tr></table></figure><p>两者都不会阻塞<code>onload</code>事件，<code>prefetch</code>会在页面空闲时候再进行加载，是提前预加载之后可能要用到的资源，不一定是当前页面使用的，<code>preload</code>预加载的是当前页面的资源。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HTML</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;link rel=&quot;preload&quot; as=&quot;style&quot; href=&quot;./preload.css&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;article&gt;&lt;/article&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>如上代码，预加载了css但并没有使用。浏览器在页面<code>onload</code>完成一段时间后，发现还没有引用预加载的资源时，浏览器会在控制台输出下图的提示信息。<br><a href="https://bu.dusays.com/2022/05/24/628cfd2d0b279.webp"><img src="https://bu.dusays.com/2022/05/24/628cfd2d0b279.webp" alt="p13"></a></p><p>preload和prefetch可根据资源类型决定资源加载的优先级，详细优先级如代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">HTML</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;!-- 最高 --&gt;</span><br><span class="line">  &lt;link rel=&quot;preload&quot; as=&quot;style&quot; href=&quot;./file.xxx&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 高 --&gt;</span><br><span class="line">  &lt;link rel=&quot;preload&quot; as=&quot;font&quot; href=&quot;./file.xxx&quot;&gt;</span><br><span class="line">  &lt;link rel=&quot;preload&quot; as=&quot;fetch&quot; href=&quot;./file.xxx&quot;&gt;</span><br><span class="line">  &lt;link rel=&quot;preload&quot; as=&quot;script&quot; href=&quot;./file.xxx&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 低 --&gt;</span><br><span class="line">  &lt;link rel=&quot;preload&quot; as=&quot;image&quot; href=&quot;./file.xxx&quot;&gt;</span><br><span class="line">  &lt;link rel=&quot;preload&quot; as=&quot;track&quot; href=&quot;./file.xxx&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;article&gt;&lt;/article&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><a href="https://bu.dusays.com/2022/05/24/628cfd767a1b3.webp"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/628cfd767a1b3.webp" alt="p14"></a></p><h3 id="3-2-浏览器渲染优化策略"><a href="#3-2-浏览器渲染优化策略" class="headerlink" title="3.2 浏览器渲染优化策略"></a>3.2 浏览器渲染优化策略</h3><h4 id="3-2-1-关键渲染路径"><a href="#3-2-1-关键渲染路径" class="headerlink" title="3.2.1 关键渲染路径"></a>3.2.1 关键渲染路径</h4><p>当通过JS或者其他任意方式修改DOM后，浏览器会进入如下流程。</p><p>【JS通过API修改DOM】&gt;【计算样式】&gt;【布局(重排)】&gt;【绘制(重绘)】&gt;【合成】。</p><p><code>Reflow 重排</code>：重排在Chrome Performance中叫做布局，通常添加或删除元素、修改元素大小、移动元素位置、获取位置信息都会触发页面的重排，因为重排可能会改变元素的大小位置等信息，这样的改变会影响到页面大量其它元素的大小位置信息，会耗费掉大量的性能，所以在实际应用中我们应该尽可能的减少重排。</p><p><code>Repaint 重绘</code>：重绘在Chrome Performance中叫做绘制，通常样式改变但没有影响位置时会触发重绘操作，重绘性能还好，但我们也需要尽量减少重绘，如果需要做一些动画，我们尽量使用CSS3动画，CSS3动画只需要在初始化时绘制一次，之后的动画都不会触发重绘操作。</p><h4 id="3-2-2-强制同步布局问题"><a href="#3-2-2-强制同步布局问题" class="headerlink" title="3.2.2 强制同步布局问题"></a>3.2.2 强制同步布局问题</h4><p>在同一个函数内，修改元素后又获取元素的位置时会触发强制同步布局，影响渲染性能。</p><p>强制同步布局会使js强制将【计算样式】和【布局(重排)】操作提前到当前函数任务中，这样会导致每次运行时执行一次【计算样式】和【重排】，这样一定会影响页面渲染性能，而正常情况下【计算样式】和【重排】操作会在函数结束后统一执行。</p><h4 id="3-2-3-如何减少重排与重绘"><a href="#3-2-3-如何减少重排与重绘" class="headerlink" title="3.2.3 如何减少重排与重绘"></a>3.2.3 如何减少重排与重绘</h4><ol><li>脱离文档流(绝对定位、固定定位)，脱离文档流的元素进行重排不会影响到其他元素。</li><li>图片渲染时增加宽高属性，宽高固定后，图片不会根据内容动态改变高度，便不会触发重排。</li><li>尽量用CSS3动画，CSS3动画能最大程度减少重排与重绘。</li><li>使用will-change: transform;将元素独立为一个单独的图层。（定位、透明、transform、clip都会产生独立图层）。</li></ol><h3 id="3-3-静态文件优化策略"><a href="#3-3-静态文件优化策略" class="headerlink" title="3.3 静态文件优化策略"></a>3.3 静态文件优化策略</h3><h4 id="3-3-1-图片优化"><a href="#3-3-1-图片优化" class="headerlink" title="3.3.1 图片优化"></a>3.3.1 图片优化</h4><h5 id="3-3-1-1-图片格式"><a href="#3-3-1-1-图片格式" class="headerlink" title="3.3.1.1 图片格式"></a>3.3.1.1 图片格式</h5><ol><li><code>jpg(jpeg)</code>：适合色彩丰富的图、Banner图。不适合：图形文字、图标、不支持透明度。</li><li><code>png</code>：适合纯色、透明、图标，支持纯透明和半透明。不适合色彩丰富图片，因为无损储存会导致储存体积大于jpeg。</li><li><code>gif</code>：适合动画、可以动的图标。支持纯透明但不支持半透明，不适合色彩丰富的图片。埋点信息通常也会使用gif发送，因为1x1的gif图发送的网络请求比普通的get请求要小一些。</li><li><code>webp</code>：支持纯透明和半透明，可以保证图片质量和较小的体积，适合Chrome和移动端浏览器。不适合其他浏览器。</li><li><code>svg</code>：矢量格式，大小非常小，但渲染成本过高，适合小且色彩单一的图标。</li></ol><h5 id="3-3-1-2-优化策略"><a href="#3-3-1-2-优化策略" class="headerlink" title="3.3.1.2 优化策略"></a>3.3.1.2 优化策略</h5><ul><li>减少图片资源的尺寸和大小，节约用户流量。</li><li>设置<code>alt=”xxx”</code>属性，图像无法显示时会显示alt内容。</li><li>图片懒加载， <code>loading=”lazy”</code>为原生，建议使用<code>IntersectionObserver</code>自己做懒加载。</li><li>不同环境加载不同尺寸和像素的图片srcset与sizes的使用。</li><li>采用渐进式加载 先加载占位图，然后加载模糊小图，最后加载真正清晰的图。</li><li>使用Base64URL 减少图片请求数。</li><li>采用雪碧图合并图片，减少请求数。</li></ul><h4 id="3-3-2-HTML优化"><a href="#3-3-2-HTML优化" class="headerlink" title="3.3.2 HTML优化"></a>3.3.2 HTML优化</h4><ul><li>语义化HTML，代码简洁清晰，利于SEO，便于开发维护。</li><li>减少HTML嵌套关系，减少DOM节点数量。</li><li>提前声明字符编码，让浏览器快速确定如何渲染网页内容<code>&lt;html lang=&quot;en&quot;&gt; &lt;meta charset=&quot;UTF-8&quot;&gt;</code>。</li><li>删除多余空格、空行、注释、无用属性。</li><li>减少iframe，子iframe会阻塞父级的onload事件。可以使用js动态给iframe赋值，就能解决这个问题。</li><li>避免table布局。</li></ul><h4 id="3-3-3-CSS优化"><a href="#3-3-3-CSS优化" class="headerlink" title="3.3.3 CSS优化"></a>3.3.3 CSS优化</h4><ul><li>减少伪类选择器，减少选择器层数、减少通配符选择器、减少正则选择器。</li><li>避免css表达式<code>background-color: expression(...)</code>。</li><li>删除空格、空行、注释、减少无意义的单位、css压缩。</li><li>css外链，能走缓存。</li><li>添加媒体字段，只加载有效的css文件。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;./small.css&quot; media=&quot;screen and (max-width:600px)&quot; /&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;./big.css&quot; media=&quot;screen and (min-width:601px)&quot;/&gt;</span><br></pre></td></tr></table></figure><ul><li>使用<code>css contain</code>属性，能控制对应元素是否根据子集元素的改变进行重排。</li><li>减少<code>@import</code>使用，因为它使用串行加载。</li></ul><h4 id="3-3-4-JS优化"><a href="#3-3-4-JS优化" class="headerlink" title="3.3.4 JS优化"></a>3.3.4 JS优化</h4><ul><li>通过script的<code>async</code>、<code>defer</code>属性异步加载，不阻塞DOM渲染。</li><li>减少DOM操作，缓存访问过的元素。</li><li>不直接操作真实DOM，可以先修改，然后一次性应用到DOM上。（虚拟DOM、DOM碎片节点）。</li><li>使用webworker解决复杂运算，避免复杂运算阻塞主线程，webworker线程位于渲染进程。</li><li>图片懒加载，使用<code>IntersectionObserver</code>实现。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">HTML</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      img &#123;</span><br><span class="line">        height: 200px;</span><br><span class="line">        display: block;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./01.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./02.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./03.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./04.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./05.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./06.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./07.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./08.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./09.jpg&quot; /&gt;</span><br><span class="line">    &lt;img src=&quot;./loading.gif&quot; data-src=&quot;./10.jpg&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">      const intersectionObserver = new IntersectionObserver((changes) =&gt; &#123;</span><br><span class="line">        changes.forEach((item, index) =&gt; &#123;</span><br><span class="line">          if (item.intersectionRatio &gt; 0) &#123;</span><br><span class="line">            intersectionObserver.unobserve(item.target)</span><br><span class="line">            item.target.src = item.target.dataset.src</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      const domImgList = document.querySelectorAll(&quot;img&quot;);</span><br><span class="line">      domImgList.forEach((domImg) =&gt; intersectionObserver.observe(domImg));</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><ul><li>虚拟滚动</li><li>使用<code>requestAnimationFrame</code>来做动画，使用<code>requestIdleCallback</code>来进行空闲时的任务处理。</li><li>尽量避免使用eval，性能差。</li><li>使用事件委托，能减少事件绑定个数。事件越多性能越差。</li><li>尽量使用<code>canvas</code>、<code>css3</code>动画。</li><li>通过chrome覆盖率（Coverage）工具排查代码中未使用过的代码并将其删除。</li><li>通过chrome性能（Performance）工具查看每个函数的执行性能并优化。</li></ul><h4 id="3-3-5-字体优化"><a href="#3-3-5-字体优化" class="headerlink" title="3.3.5 字体优化"></a>3.3.5 字体优化</h4><p><code>FOUT</code>(Flash of Unstyled Text）等待一段时间，如果没加载完成，先显示默认。加载 后再进行切换。</p><p><code>FOIT</code>(F1ash of Invisib1e Text） 字体加载完毕后显示，加载超时降级系统字体（白屏）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">HTML</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    @font-face &#123;</span><br><span class="line">      font-family: &#x27;hagan&#x27;;</span><br><span class="line">      src: url(&#x27;./font.ttc&#x27;);</span><br><span class="line">      font-display: swap;</span><br><span class="line">      /* b1ock 35 内不显示，如果没加载完毕用默认的 */</span><br><span class="line">      /* swap 显示老字体 在替换*/</span><br><span class="line">      /* fa11back 缩短不显示时间，如果没加载完毕用默认的，和b1ock类似*</span><br><span class="line">      /* optional 替换可能用字体 可能不替换*/</span><br><span class="line">    &#125;</span><br><span class="line">    article &#123;</span><br><span class="line">      font-family: hagan;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;article&gt;ABC abc&lt;/article&gt;  </span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="3-4-浏览器储存优化策略"><a href="#3-4-浏览器储存优化策略" class="headerlink" title="3.4 浏览器储存优化策略"></a>3.4 浏览器储存优化策略</h3><h4 id="3-4-1-Cookie"><a href="#3-4-1-Cookie" class="headerlink" title="3.4.1 Cookie"></a>3.4.1 Cookie</h4><p><code>cookie</code>在过期之前一直有效，最大储存大小为4k，限制字段个数，不适合大量的数据储存，每次请求会携带<code>cookie</code>，主要用来做身份校验。<br>优化方式：</p><ol><li>需要合理设置cookie有效期。</li><li>根据不同子域划分cookie来减少cookie传输。</li><li>静态资源域名和cookie域名采用不同域名，避免静态资源请求携带cookie。</li></ol><h4 id="3-4-2-LocalStorage"><a href="#3-4-2-LocalStorage" class="headerlink" title="3.4.2 LocalStorage"></a>3.4.2 LocalStorage</h4><p>Chrome下最多储存5M，除非手动清除，否则一直存在。可以利用<code>localStorage</code>储存静态资源。比如储存网页的<code>.js</code>、<code>.css</code>，这样会使页面打开速度非常快。例如 <a href="https://m.baidu.com/">百度</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line">// index.js</span><br><span class="line">const name = &#x27;hagan&#x27;</span><br><span class="line">function showName () &#123;</span><br><span class="line">  console.log(name)</span><br><span class="line">&#125;</span><br><span class="line">showName()</span><br><span class="line">HTML</span><br><span class="line"></span><br><span class="line">&lt;!-- index.html --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;script src=&quot;https://lib.baomitu.com/axios/0.26.1/axios.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    cacheFile(&#x27;/index.js&#x27;)</span><br><span class="line"></span><br><span class="line">    async function cacheFile (url) &#123;</span><br><span class="line">      const fileContent = localStorage.getItem(url)</span><br><span class="line">      if (fileContent) &#123;</span><br><span class="line">        eval(fileContent)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        const &#123; data &#125; = await axios.get(url)</span><br><span class="line">        eval(data)</span><br><span class="line">        localStorage.setItem(url, data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h4 id="3-4-3-SessionStorage"><a href="#3-4-3-SessionStorage" class="headerlink" title="3.4.3 SessionStorage"></a>3.4.3 SessionStorage</h4><p>会话级别储存，可用于页面间的传值。</p><h4 id="3-4-4-IndexDB"><a href="#3-4-4-IndexDB" class="headerlink" title="3.4.4 IndexDB"></a>3.4.4 IndexDB</h4><p>浏览器的本地数据库，大小几乎无上限。</p><h3 id="3-5-其他优化策略"><a href="#3-5-其他优化策略" class="headerlink" title="3.5 其他优化策略"></a>3.5 其他优化策略</h3><ul><li>关键资源个数越多，首次页面加载时间就会越长。</li><li>关键资源的大小，内容越小下载时间越短。</li><li>优化白屏，合理使用内联css、js。</li><li>预渲染，打包时进行预渲染，生成静态HTML文件，用户访问时直接返回静态HTML。</li><li>服务端渲染同构，加速首屏速度（耗费服务端资源），有利于SEO优化。首屏使用服务端渲染，后续交互使用客户端渲染。</li></ul><h3 id="3-6-使用PWA提高用户体验"><a href="#3-6-使用PWA提高用户体验" class="headerlink" title="3.6 使用PWA提高用户体验"></a>3.6 使用PWA提高用户体验</h3><p>webapp用户体验差的一大原因是不能离线访问。用户粘性低的一大原因是无法保存入口，PWA就是为了解决webapp的用户体验问题而诞生的。使用PWA能令站点拥有快速、可靠、安全等特性。</p><ol><li><code>Web App Manifest</code> 将网站添加到电脑桌面、手机桌面，类似Native的体验。</li><li><code>Service Worker</code> 配合<code>Cache API</code>，能做到离线缓存各种内容。</li><li><code>Push API</code> 配合 <code>Notification API</code>，能做到类似Native的消息推送与实时提醒。</li><li><code>App Shell</code> 配合 <code>App Skeleton</code>，能做App壳与骨架屏。</li></ol><h1 id="二、优化小技巧实操"><a href="#二、优化小技巧实操" class="headerlink" title="二、优化小技巧实操"></a>二、优化小技巧实操</h1><h2 id="1-图片压缩"><a href="#1-图片压缩" class="headerlink" title="1.图片压缩"></a>1.图片压缩</h2><h3 id="1-1-图片多级压缩"><a href="#1-1-图片多级压缩" class="headerlink" title="1.1 图片多级压缩"></a>1.1 图片多级压缩</h3><p>目前从网上下载的图片主流格式是<code>JPG</code>或者<code>PNG</code>，当分辨率比较高的时候体积往往比较大，因此要想提高网站的速度就有必要将图片体积压缩，这里参考店长的推荐，无损压缩推荐<a href="https://tinypng.com/">Tinypng</a>，有损压缩推荐<a href="https://github.com/meowtec/Imagine/releases">imagine</a>。</p><div class="table-container"><table><thead><tr><th style="text-align:left"></th><th style="text-align:center">TinyPNG</th><th>Imagine</th></tr></thead><tbody><tr><td style="text-align:left">特点</td><td style="text-align:center">无损压缩</td><td>有损压缩，以牺牲图像质量， 降低图像色彩来达到缩减图像大小的目的。</td></tr><tr><td style="text-align:left">优点</td><td style="text-align:center">能够完全保留图像色彩，不损伤图像质量</td><td>1. 压缩程度高，支持转<code>png</code>为<code>jpg</code>或<code>webp</code>，进一步减少图片大小 2. 软件支持一次处理多张图片，无上限，处理完成支持直接批量覆盖原文件或重命名</td></tr><tr><td style="text-align:left">缺点</td><td style="text-align:center">单次仅能上传20张图片，每张限制大小为5MB，无法处理更大图片。</td><td>PNG转其他格式为不可逆操作（指覆盖保存后），且可能反而会增加图片大小。</td></tr></tbody></table></div><p>在这里还给大家推荐一个非常实用的网站：<a href="https://imagestool.com/zh_CN/index.html">imagesTool</a></p><p><a href="https://source.fomal.cc/siteshot/imagestool.com.jpg"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/imagestool.com.jpg" alt="img"></a></p><p>这个网站不仅仅支持将<code>PNG</code>与<code>JPG</code>格式的图片批量（完全没有数量限制那种）转化为<code>webp</code>和<code>avif</code>（chrome推荐的一种压缩率更高的编码方式），而且还能改变图片的原始分辨率，甚至将图片压缩到指定的大小，下面演示了一张图压缩之路！</p><p><a href="https://s1.vika.cn/space/2022/10/25/c82f67799a524abc8cbaef90b8bf9131"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/c82f67799a524abc8cbaef90b8bf9131" alt="image-20221025131104569"></a></p><p>我们选择了将<code>PNG</code>转化为<code>webp</code>格式，画质为<code>High</code>，图片规模缩小为<code>80%</code>，压缩率达到94%；而选择将<code>PNG</code>转化为<code>avif</code>格式，画质为<code>High</code>，图片规模缩小为<code>80%</code>，压缩率达到95%，这样下来我们可以把所有图片几乎都可以控制在<code>500KB</code>以下，而且肉眼观察画质没有明显的不同。</p><p><a href="https://s1.vika.cn/space/2022/10/25/6e15b7e6ad79406b8320108aaa8e62a9"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/6e15b7e6ad79406b8320108aaa8e62a9" alt="image-20221025130942155"></a></p><p>使用建议:如果没有特别要求，直接使用Imagine进行有损压缩即可。虽然说是有损压缩，但是默认压缩会自主计算压缩程度，一般默认程度就能节省70%空间，且肉眼几乎发现不了图片压缩情况。同时我个人是比较推荐一步到位直接压缩成<code>webp</code>格式，虽然在一些未适配的浏览器（例如IE浏览器）上可能出现无法查看图片的情况，但是压缩率是真的高，图片一路下来压缩个<code>80%</code>毫无压力。如果对图片分辨率要求不太高或者图片分辨率原本就太高了，可以考虑缩小分辨率，结合上面几项，甚至可以压缩<code>90%</code>的大小！</p><h3 id="1-2-图片懒加载"><a href="#1-2-图片懒加载" class="headerlink" title="1.2 图片懒加载"></a>1.2 图片懒加载</h3><p>图片懒加载是指只加载目前能看到及其附近的页面上的图片，有节省流量与提高性能的作用。Butterfly主题内置了图片懒加载的选项，在<code>_config.butterfly.yml</code>文件下将对应项设置为如下即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line"># Lazyload (圖片懶加載)</span><br><span class="line"># https://github.com/verlok/vanilla-lazyload</span><br><span class="line">lazyload:</span><br><span class="line">  enable: true</span><br><span class="line">  field: site # site/post 选择在哪些地方启用图片懒加载</span><br><span class="line">  placeholder: # 你自己喜欢的图片</span><br><span class="line">  blur: true# 模糊效果</span><br></pre></td></tr></table></figure><h2 id="2-字体二级压缩"><a href="#2-字体二级压缩" class="headerlink" title="2.字体二级压缩"></a>2.字体二级压缩</h2><p>我们从网上下载的字体通常都是<code>TTF</code>格式，ttf(TrueTypeFont)是一种字库名称，是Apple公司和Microsoft公司共同推出的字体文件格式，也是最常用的格式之一，但是一些好看的字体往往体积都会很大，网站每次进去都要加载一个这么大的文件，速度肯定会很慢！例如下面这个筑紫A丸2.0的标准体ttf格式的字体文件，体积约为23MB。</p><p><a href="https://s1.vika.cn/space/2022/10/25/ca08a96314c5429b934b7ef977854650"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/ca08a96314c5429b934b7ef977854650" alt="image-20221025131822607"></a></p><p>这部分参考：<a href="https://blog.csdn.net/littleduo/article/details/124563106">有效的压缩字体方法</a></p><p>一个有效的压缩方法是：<code>fonttools编码压缩+转woff2格式</code>二级压缩</p><h3 id="2-1-使用-fonttools-压缩字体文件"><a href="#2-1-使用-fonttools-压缩字体文件" class="headerlink" title="2.1 使用 fonttools 压缩字体文件"></a>2.1 使用 fonttools 压缩字体文件</h3><p>需要 <code>Python</code> 环境，并已安装好 <code>pip</code>，使用 <code>pip</code> 来安装 <code>fonttools</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHELL</span><br><span class="line">pip install fonttools</span><br></pre></td></tr></table></figure><p>下载已经整理好的字体编码列表文件<code>sc_unicode.txt</code> <a href="https://gist.githubusercontent.com/imaegoo/d64e5088b723c2e02c40985f55ff12db/raw/5ebd2ce49418c73459a9dfe050483409306a6c1d/sc_unicode.txt">点这里进行下载</a>。</p><p>将你要压缩的字体ttf文件和刚刚下载的sc_unicode.txt编码文件放进去同一个文件夹，进入到该文件夹的控制台如下命令然后回车</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHELL</span><br><span class="line">pyftsubset ZhuZiAWan-3.ttf --unicodes-file=sc_unicode.txt</span><br></pre></td></tr></table></figure><p><a href="https://s1.vika.cn/space/2022/10/25/922e9871848443c1aa79f7ca01c9bfe7"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/922e9871848443c1aa79f7ca01c9bfe7" alt="image-20221025133032806"></a></p><p><a href="https://s1.vika.cn/space/2022/10/25/69bee2e71ec24c1eb6c4c9d6dd874f5a"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/69bee2e71ec24c1eb6c4c9d6dd874f5a" alt="image-20221025133103786"></a></p><p>然后就会得到图片所示的subset结尾的编码压缩后的ttf文件，体检体积已经从23MB下降到3MB。</p><h3 id="2-2-利用CloudConvert将TTF格式转换成woff2-格式"><a href="#2-2-利用CloudConvert将TTF格式转换成woff2-格式" class="headerlink" title="2.2 利用CloudConvert将TTF格式转换成woff2 格式"></a>2.2 利用CloudConvert将<code>TTF</code>格式转换成<code>woff2</code> 格式</h3><p>进去国外平台<a href="https://cloudconvert.com/">CloudConvert</a>（国内速度可能会慢一些），将TTF格式的字体文件转化为<code>woff2</code>格式</p><p><a href="https://s1.vika.cn/space/2022/10/25/10aa744585094dbf9914ac029500f51c"><img src="https://s1.vika.cn/space/2022/10/25/10aa744585094dbf9914ac029500f51c" alt="image-20221025133728970"></a></p><p>最后压缩成从<code>23MB</code>的文件压缩成<code>1.5MB</code>，足足压缩了十几倍，压缩率十分高！</p><h2 id="3-css和js文件优化"><a href="#3-css和js文件优化" class="headerlink" title="3.css和js文件优化"></a>3.css和js文件优化</h2><h3 id="3-1-压缩css与js文件"><a href="#3-1-压缩css与js文件" class="headerlink" title="3.1 压缩css与js文件"></a>3.1 压缩css与js文件</h3><ul><li>如果是用<code>VSCODE</code>进行网站搭建的小伙伴，可以下载插件<a href="https://github.com/olback/es6-css-minify/tree/3.0">JS &amp; CSS Minifier (Minify)</a></li><li>该插件支持将<code>js</code>和<code>css</code>文件的格式进行压缩，降低文件体积</li><li>使用方法：安装插件后，在<code>js</code>和<code>css</code>文件界面右键，选择<code>Minify Document</code>，插件会生成一个文件名为<code>xxx.min.css</code>或者<code>xxx.min.js</code>的文件，这就是压缩后的文件，在引入的时候直接引用这个压缩后的文件即可。</li></ul><p><a href="https://s1.vika.cn/space/2022/10/25/1e054153b72f4f429dc3a9a6086ccdb5"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/1e054153b72f4f429dc3a9a6086ccdb5" alt="image-20221025134609440"></a></p><h3 id="3-2-gulp批量压缩"><a href="#3-2-gulp批量压缩" class="headerlink" title="3.2 gulp批量压缩"></a>3.2 gulp批量压缩</h3><p>这是压缩全局静态资源的教程，可以参考店长的文章：</p><p><a href="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/favicon.ico" alt="img"></a></p><p>使用gulp压缩博客静态资源</p><p><a href="https://akilar.top/posts/49b73b87/">https://akilar.top/posts/49b73b87/</a></p><h3 id="3-3-减少加载项"><a href="#3-3-减少加载项" class="headerlink" title="3.3 减少加载项"></a>3.3 减少加载项</h3><p>当网站的东西多起来了之后，会越来越卡顿，这时候推荐以下几个优化方向：</p><ul><li>减少卡片的出场动画<code>wowjs</code>、<code>Live2D</code>、<code>canvas</code>元素等(其中Live2D是比较消耗资源的)</li><li>如果部分js和css文件只有部分页面需要引用，尽量不全局引用，同时删除空格、空行、注释、减少无意义的单位</li><li>css文件尽量添加media字段指定加载设备，js文件的引入可以加入 的 <code>async</code>、<code>defer</code> 属性异步加载，不阻塞 DOM 渲染</li></ul><h2 id="4-无服务器下的资源加速策略"><a href="#4-无服务器下的资源加速策略" class="headerlink" title="4.无服务器下的资源加速策略"></a>4.无服务器下的资源加速策略</h2><h3 id="4-1-可用的免费CDN选择"><a href="#4-1-可用的免费CDN选择" class="headerlink" title="4.1 可用的免费CDN选择"></a>4.1 可用的免费CDN选择</h3><p><strong>1.staticaly</strong></p><p>官网地址：<a href="https://www.staticaly.com/">https://www.staticaly.com</a><br>轻松地从GitHub / GitLab / Bitbucket等加载您的项目 没有流量限制或限制。</p><p>文件通过超快速全球CDN提供。 在URL（不是分支）中使用特定标记或提交哈希。<br>根据URL永久缓存文件。 除master分支外，文件在浏览器中缓存1年。 具体用法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line"># GitHub CDN</span><br><span class="line">https://cdn.staticaly.com/gh/:user/:repo/:tag/:file</span><br><span class="line">https://cdn.staticaly.com/gh/growvv/growvv.github.io/master/README.md</span><br><span class="line"></span><br><span class="line"># GitLab CDN</span><br><span class="line">https://cdn.staticaly.com/gl/:user/:repo/:tag/:file</span><br><span class="line"></span><br><span class="line"># Bitbucket CDN</span><br><span class="line">https://cdn.staticaly.com/bb/:user/:repo/:tag/:file</span><br><span class="line"></span><br><span class="line"># WordPress CDN</span><br><span class="line">https://cdn.staticaly.com/wp/c/:version/wp-includes/:file  </span><br><span class="line">https://cdn.staticaly.com/wp/p/:plugin_name/:version/:file  </span><br><span class="line">https://cdn.staticaly.com/wp/t/:theme_name/:version/:file</span><br><span class="line"></span><br><span class="line"># Imgpx CDN</span><br><span class="line">https://cdn.staticaly.com/img/:image_url</span><br><span class="line"></span><br><span class="line"># Favicons CDN</span><br><span class="line">https://cdn.staticaly.com/favicons/:favicon_url</span><br></pre></td></tr></table></figure><p><strong>2.githack</strong></p><p>直接从GitHub，Bitbucket或GitLab提供原始文件<br>官网地址：<a href="https://liubing.me/goto/http://raw.githack.com">http://raw.githack.com/</a> 具体用法和上面的<code>staticaly</code>很类似</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"># Github CDN</span><br><span class="line">//主分支</span><br><span class="line">https://rawcdn.githack.com/liub1934/LB-Blog/master/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png</span><br><span class="line"></span><br><span class="line">//版本分支</span><br><span class="line">https://rawcdn.githack.com/liub1934/LB-Blog/8806f440d3f9a7cc3e6125d7d75564e40262c6a8/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png</span><br></pre></td></tr></table></figure><p><strong>3.TianliCDN</strong></p><p><a href="https://tianli-blog.club/jsd/">https://tianli-blog.club/jsd/</a></p><p>轻量级私人CDN，申请见：<a href="https://tianli-blog.club/jsd/">https://tianli-blog.club/jsd/</a></p><p>4.UNPKG</p><p>见：<a href="https://unpkg.com/">https://unpkg.com/</a></p><h3 id="4-2-免费图床推荐"><a href="#4-2-免费图床推荐" class="headerlink" title="4.2 免费图床推荐"></a>4.2 免费图床推荐</h3><ol><li>目前我是用的Github公共仓库+Vercel部署加速，速度还可以，关键是支持增量更新和自动部署，不过前期的配置比较麻烦点，你也可以选用Github公共仓库+Cloudflare部署加速，速度和Vercel接近。</li><li>大概步骤就是建立一个公共仓库，把你本地的图片推上这个仓库，然后将这个仓库部署托管于Vercel，再用一个二级域名绑定这个部署，那就可以通过二级域名+路径的方式访问到图片与资源了。每次仓库更新导致指定分支更新，都会触发Vercel重新部署，实现自动化流程。（这部分教程以后有机会详细写）</li><li>如果不想折腾或者只想存少量不太重要的图片，那么完全可以用公共的免费图床，下面列举了一些免费的图床：<ul><li><a href="https://smms.app/">SMMS</a></li><li><a href="https://www.superbed.cn/">聚合图床</a></li><li><a href="https://www.hualigs.cn/">遇见图床</a></li><li><a href="https://postimages.org/">PostImage</a></li><li><a href="https://imgse.com/">路过图床</a></li><li><a href="https://www.imgurl.org/">imgURL</a></li><li><a href="https://dash.cloudflare.com/">Cloudflare Pages</a></li><li><a href="https://imgbox.com/">imgbox</a></li><li><a href="https://pic.iqy.ink/upload">Lsky Pro</a></li><li><a href="https://upload.cc/">Upload.cc</a></li><li><a href="https://imagelol.com/">imagelol</a></li></ul></li></ol><h3 id="4-3-域名绑定的好处"><a href="#4-3-域名绑定的好处" class="headerlink" title="4.3 域名绑定的好处"></a>4.3 域名绑定的好处</h3><p>目前Vercel的域已经被GFW墙了，如果想用Vercel托管网站又想在国内访问又不想科学上网，只能绑定国内域名，还有想用Vercel来进行资源加速也必须是有国内域名的，同时域名还可以拥有自己的域名邮箱与网站标识符，总之域名还是很有用的。对于静态网站来说你可以没有服务器，但是你不能没有域名。</p><h3 id="4-4-托管平台的选择"><a href="#4-4-托管平台的选择" class="headerlink" title="4.4 托管平台的选择"></a>4.4 托管平台的选择</h3><p>目前能够托管静态网站的平台有以下几个</p><ol><li><a href="https://vercel.com/">Vercel</a>（不限量、速度较快） 推荐指数：🌟🌟🌟🌟🌟</li><li><a href="https://www.cloudflare.com/">Cloudflare</a>（不限量、速度还可以） 推荐指数：🌟🌟🌟🌟</li><li><a href="https://www.4everland.org/">4EVERLAND</a>（流量限制100GB、速度还可以、适合做备用线路） 推荐指数：🌟🌟🌟</li><li><a href="https://www.netlify.com/">Netlify</a>（流量限制100GB、速度还可以、适合做备用线路） 推荐指数：🌟🌟🌟</li><li><a href="https://pages.github.com/">Github Pages</a>（不限量、速度较慢） 推荐指数：🌟🌟</li><li><a href="https://gitee.com/">Gitee Pages</a>（不限量、速度还可以、但是Gitee与国外平台兼容性差） 推荐指数：🌟🌟</li><li>还有其他的例如<a href="https://docs.gitlab.com/ee/user/project/pages/">GitLab Pages</a>等就不说了，估计没啥人用</li></ol><h2 id="5-实用工具"><a href="#5-实用工具" class="headerlink" title="5.实用工具"></a>5.实用工具</h2><h3 id="5-1-Lighthouse"><a href="#5-1-Lighthouse" class="headerlink" title="5.1 Lighthouse"></a>5.1 Lighthouse</h3><p>Lighthouse 是一个网站性能测评工具， 它是 Google Chrome 推出的一个开源自动化工具，能够对 PWA 和网页多方面的效果指标进行评测，并给出最佳实践的建议以帮助开发者改进网站的质量。它的使用方法也非常简单，我们只需要提供一个要测评的网址，它将针对此页面运行一系列的测试，然后生成一个有关页面性能的报告。通过报告我们就可以知道需要采取哪些措施来改进应用的性能和体验。</p><p>在高版本（应该是 &gt;= 60）的 Chrome 浏览器中，Lighthouse 已经直接集成到了调试工具 DevTools 中了，因此不需要进行任何安装或下载。按 F12 打开开发者工具，可以看到在 console、security 等选项后面有一个 Audits （安装了lighthouse插件或者是高版本的谷歌浏览器可能显示的是 lighthouse）选项，选择该选项，然后点击 generate report 即可。</p><p><a href="https://s1.vika.cn/space/2022/10/25/d278a76bbd774b1d9912e74aa15b22c5"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/d278a76bbd774b1d9912e74aa15b22c5" alt="image-20221025173341316"></a></p><p><a href="https://s1.vika.cn/space/2022/10/25/1d8b86f79de7449782b0c73e897edeb0"><img src="https://s1.vika.cn/space/2022/10/25/1d8b86f79de7449782b0c73e897edeb0" alt="image-20221025173705571"></a></p><p>使用 Lighthouse 对网站进行测评后，我们会得到一份评分报告，它包含了性能（Performance），访问无障碍（Accessibility），最佳实践（Best Practice），搜索引擎优化（SEO），PWA（Progressive Web App）五个部分：</p><h4 id="5-1-1-性能（Performance）"><a href="#5-1-1-性能（Performance）" class="headerlink" title="5.1.1 性能（Performance）"></a>5.1.1 性能（Performance）</h4><p>性能评分的分值区间是0到100，如果出现0分，通常是在运行 Lighthouse 时发生了错误，满分100分代表了网站已经达到了98分位值的数据，而50分则是75分位值的数据。</p><p>影响评分的性能指标：性能测试结果会分成 Metrics，Diagnostic，Opportunities 三部分，但只有 Metrics 部分的指标项会对分数产生直接影响。</p><p>Lighthouse 会衡量以下 Metrics 性能指标项：</p><ul><li>首次内容绘制（First Contentful Paint）。即浏览器首次将任意内容（如文字、图像、canvas 等）绘制到屏幕上的时间点。</li><li>首次有效绘制（First Meaningful Paint）。衡量了用户感知页面的主要内容（primary content）可见的时间。对于不同的站点，首要内容是不同的，例如：对于博客文章，标题及首屏文字是首要内容，而对于购物网站来说，图片也会变得很重要。</li><li>首次 CPU 空闲（First CPU Idle）。即页面首次能够对输入做出反应的时间点，其出现时机往往在首次有效绘制完成之后。该指标目前仍处于实验阶段。</li><li>可交互时间（Time to Interactive）。指的是所有的页面内容都已经成功加载，且能够快速地对用户的操作做出反应的时间点。该指标目前仍处于实验阶段。</li><li>速度指标（Speed Index）。衡量了首屏可见内容绘制在屏幕上的速度。在首次加载页面的过程中尽量展现更多的内容，往往能给用户带来更好的体验，所以速度指标的值约小越好。</li><li>输入延迟估值（Estimated Input Latency）。这个指标衡量了页面对用户输入行为的反应速度，其基准值应低于 50ms。</li></ul><p>Metrics 部分的指标项会直接影响分数，可以作为我们的主要参考点。</p><p>另外的两部分中， <strong>Opportunities</strong> 指的是优化机会，它提供了详细的建议和文档，来解释低分的原因，帮助我们具体进行实现和改进。<strong>Diagnostics</strong> 指的是现在存在的问题，为进一步改善性能的实验和调整给出了指导。这两者不会纳入分数的计算。</p><p>每一项性能指标对评分的贡献都有其计算逻辑，Lighthouse 会将原始的性能值映射成为 0-100 之间的数字。</p><p>例如，FMP（First Meaningful Paint）的原始值是从页面初始化开始到主要内容渲染成功的耗时，根据真实站点的数据，顶级性能的站点的 FMP 值约为 1220ms，这个值会被映射成 Lighthouse 的 99 分。</p><p>针对不同的评分，Lighthouse 用了不同的颜色进行标注，分值区间和颜色的对应关系如下：</p><ul><li>0 - 49（慢）：红色</li><li>50 - 89（平均值）： 橙色</li><li>90 - 100（快）： 绿色</li></ul><h4 id="5-1-2-访问无障碍（Accessibility）"><a href="#5-1-2-访问无障碍（Accessibility）" class="headerlink" title="5.1.2 访问无障碍（Accessibility）"></a>5.1.2 访问无障碍（Accessibility）</h4><p>访问无障碍评分的分值由相关指标的加权平均值计算而来。可以在<a href="https://www.cnblogs.com/ypSharing/p/15793767.html#gid=0">评分详情</a>查阅每项指标的具体权重。同理，较大权重的指标项对分数的影响较大。</p><p>无障碍性的每个指标项测试结果为pass或者fail，与性能指标项的计算方式不同，当页面只是部分通过某项指标时，页面的这项指标将不会得分。例如，如果页面中的一些元素有屏幕阅读器友好的命名，而其他的元素没有，那么这个页面的 screenreader-friendly-names 指标项得分为0。</p><h4 id="5-1-3-最佳实践（优化）（Best-Practice）"><a href="#5-1-3-最佳实践（优化）（Best-Practice）" class="headerlink" title="5.1.3 最佳实践（优化）（Best Practice）"></a>5.1.3 最佳实践（优化）（Best Practice）</h4><p>最佳实践评分的分数区间为0-100。影响这项评分的指标项的权重都是相同的。</p><p>比如：推荐使用 https，跨域的跳转链接需要使用 rel 标识，不能使用废弃的 API等等。</p><h4 id="5-1-4-搜索引擎优化（SEO）"><a href="#5-1-4-搜索引擎优化（SEO）" class="headerlink" title="5.1.4 搜索引擎优化（SEO）"></a>5.1.4 搜索引擎优化（SEO）</h4><p>比如：图片元素使用 alt 属性等等提高搜索引擎搜索排名，便于搜索引擎能找到你这个网站。</p><h4 id="5-1-5-PWA（Progressive-Web-App）"><a href="#5-1-5-PWA（Progressive-Web-App）" class="headerlink" title="5.1.5 PWA（Progressive Web App）"></a>5.1.5 PWA（Progressive Web App）</h4><p>Lighthouse 使用 PWA 基准检查项列表（Baseline PWA Checklist）进行测评，测评结果将这些指标项分成了四个类别，共包含12个自动测试项和3个手动测试项，其中各个自动测试项的评分权重是相同的。PWA 的评测指标对我们来说非常重要，我们可以从这四个类别详细了解一下基准指标项。</p><ul><li><strong>快速可靠：</strong><ol><li>页面在移动网络条件下能够快速加载。</li><li>在离线条件下页面能够返回状态码200。这里我们可以通过 Service Worker 来实现离线可用。</li><li>start_url 在离线条件下返回状态码200。start_url 是前面章节我们提到过的 manifest.json 中的一个属性，它指定了用户打开该 PWA 时加载的 URL。</li></ol></li><li><strong>可安装：</strong><ol><li>始终使用 HTTPS。</li><li>注册 Service Worker 来缓存页面以及 start_url。</li><li>使用 manifest 文件来实现安装 PWA 的需求，浏览器能够主动通知用户将应用添加到桌面，增加留存率。</li></ol></li><li><strong>PWA 优化：</strong><ol><li>将 HTTP 流量重定向到 HTTPS。</li><li>配置自定义启动画面。</li><li>设置地址栏主题颜色。</li><li>页面内容针对视口大小自适应，对移动用户的展示更友好。</li><li>使用了标签，并设置了 width 或 initial-scale 属性。</li><li>当 JavaScript 文件不可用时，提供降级措施，页面能显示基本内容而不出现白屏。</li></ol></li><li><strong>手动测试项：</strong><ol><li>站点跨浏览器可用，如主流浏览器 Chrome, Edge, Firefox 及 Safari 等。</li><li>页面间切换流畅，即使在较差的网络环境下，切换动画也应该简洁顺畅，这是提高用户感知体验的关键。</li><li>保证每个页面都有独一无二的 URL，能够在新的浏览器窗口打开，且方便在社交媒体上进行分享。</li></ol></li></ul><p>除了上述基准指标项之外，为了让 PWA 的体验更加完美，还有一些 Lighthouse 未实现检查的进阶指标，也就是可以作为示范性参考的 PWA 的指标，比如用户体验、缓存、推送通知等等。</p><h3 id="5-2-灵雀监控"><a href="#5-2-灵雀监控" class="headerlink" title="5.2 灵雀监控"></a>5.2 灵雀监控</h3><p>灵雀应用监控平台最国内老牌知名免费网站统计51LA网站统计旗下的一个 Web 性能与 bug 监控工具平台，发布后在站长圈内也有一些较好的评价，访问地址：<a href="https://perf.51.la/">https://perf.51.la</a>。51LA灵雀应用监控平台，专注于帮您及时发现异常问题，帮助运营人员发现网站风险，协助开发者修复网页 bug，从而提升用户体验。产品面向产品，运营以及开发人员作为网站性能及异常信息收集工具。开发人员可以通过页面统计获取用户平均的页面统计信息和网页 Performance 的各个性能指标进行分析，如DNS 解析时间，TTFB、服务器响应时间、白屏时间、页面完全加载时长等是否达标等判断。灵雀应用监控平台为开发人员提供了包含程序异常收集、性能分析、资源异常分析、页面外链跳转分析、可疑脚本/iframe 监控等网站优化和用户体验改进所需的信息。</p><p><strong>特点：</strong></p><ul><li>大家是否有遇到过下面这些情况：</li><li>网站打开速度慢找不到原因；</li><li>部分访客无法打开网站又不能及时得到反馈；</li><li>网站突然无流量或被k 却无从查起起因；</li></ul><p><strong>1.异常分析，精准定位</strong></p><p><a href="https://s1.vika.cn/space/2022/10/25/2b1d0d3c50394c688f8046819584f7d9"><img src="https://s1.vika.cn/space/2022/10/25/2b1d0d3c50394c688f8046819584f7d9" alt="image-20221025174453208"></a></p><p>实时监控网站发生的程序错误、网络请求异常、资源加载异常等潜在问题，精准采集错误上报的页面、错误发生时间、UA等详细的用户设备数据，帮您快速定位异常，提高debug效率。</p><p><strong>2.性能监测，定向优化</strong></p><p><a href="https://s1.vika.cn/space/2022/10/25/ca16cee5817742389e20d66a9f11df46"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/ca16cee5817742389e20d66a9f11df46" alt="image-20221025174556202"></a></p><p>采用51LA V6网站统计的多维分析技术，详细展示分析网站性能加载状况，确定网站体验优化方向。</p><p><strong>3.外链监控，规避暗链</strong></p><p><a href="https://s1.vika.cn/space/2022/10/25/52897c1a5b2042ef8bf27ae299b1ea0c"><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/52897c1a5b2042ef8bf27ae299b1ea0c" alt="image-20221025174628427"></a></p><p>提供24小时全方位监控站内外链的功能，定位异常跳转，助您快速识别暗链链接，降低网站被k风险，提升网站安全性。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5、ADC数模转换器</title>
      <link href="/2023/09/25/%E7%89%A9%E8%81%94%E7%BD%91-STM32-5%E3%80%81ADC%E6%95%B0%E6%A8%A1%E8%BD%AC%E6%8D%A2%E5%99%A8/"/>
      <url>/2023/09/25/%E7%89%A9%E8%81%94%E7%BD%91-STM32-5%E3%80%81ADC%E6%95%B0%E6%A8%A1%E8%BD%AC%E6%8D%A2%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="5-ADC数模转换器"><a href="#5-ADC数模转换器" class="headerlink" title="5. ADC数模转换器"></a>5. ADC数模转换器</h1><h2 id="1、ADC模拟-数字转换器"><a href="#1、ADC模拟-数字转换器" class="headerlink" title="1、ADC模拟-数字转换器"></a>1、ADC模拟-数字转换器</h2><p>ADC (Analog-Digital Converter) 可以将引脚上连续变化的模拟电压转换为内存中存储的数字变量，建立模拟电路到数字电路的桥梁</p><ol><li><p><strong>ADC位数和范围</strong>：STM32F103C8T6的ADC是12位的，这意味着它可以将输入电压范围（0到3.3V）分成4096个不同的数字值。最小的数字值是0，最大的数字值是4095。</p></li><li><p><strong>转换时间</strong>：ADC的最大转换时间为1微秒（1us），这对于需要高速采样的应用非常有用。1us的转换时间对应1MHz的采样速率。</p></li><li><p><strong>输入通道</strong>：该微控制器具有18个输入通道，其中16个用于外部信号源，2个用于内部信号源。这使得它可以同时测量多个不同的信号，适用于多通道数据采集应用。</p></li><li><p><strong>规则组和注入组</strong>：规则组用于常规的ADC转换，而注入组用于特殊要求的转换。这提供了更大的灵活性，以满足各种测量需求。</p></li><li><p><strong>模拟看门狗</strong>：ADC配备了模拟看门狗，可以自动监测输入电压范围，帮助您检测输入信号是否在预期的范围内。这有助于确保测量的准确性和安全性。</p></li></ol><p>STM32F103C8T6 ADC资源:ADC1、ADC2，10个外部输入通道</p><h2 id="2、逐次逼近型ADC："><a href="#2、逐次逼近型ADC：" class="headerlink" title="2、逐次逼近型ADC："></a>2、逐次逼近型ADC：</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps60.png" alt="img"> </p><p>逐次逼近型ADC（Successive Approximation ADC）是一种常见的模拟-数字转换器（ADC）类型，用于将模拟信号转换为数字形式。它的工作原理基于逐次逼近方法，二分对比</p><p>ADC基本结构：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps61.jpg" alt="img"> </p><p>双ADC模式：ADC1和ADC2一起工作，它俩可以配合组成同步模式、交叉模式等。</p><p>这些转换模式是ADC（模拟-数字转换器）的工作模式，它们决定了ADC如何执行模拟信号到数字数据的转换。以下是这些常见的转换模式的解释：</p><ol><li><p><strong>单次转换，非扫描模式</strong>：在这种模式下，ADC执行一次模拟信号到数字数据的转换，然后停止。这适用于需要定期获取模拟信号的应用，但不需要连续的数据流。一旦转换完成，您可以读取转换结果。</p></li><li><p><strong>单次转换，扫描模式</strong>：类似于单次转换，但与非扫描模式不同的是，扫描模式允许您在一次触发下依次转换多个通道。这对于需要依次测量多个传感器的应用非常有用。</p></li><li><p><strong>连续转换，非扫描模式</strong>：在这种模式下，ADC会不断执行连续的模拟信号到数字数据的转换，而不需要额外的触发。它会不断生成新的转换结果，适用于需要实时数据流的应用，例如音频处理。</p></li><li><p><strong>连续转换，扫描模式</strong>：与连续转换相似，但允许依次转换多个通道，类似于单次转换的扫描模式。这对于需要定期测量多个信号源的应用非常有用。</p></li></ol><p>您可以根据特定应用的需求选择适当的转换模式。不同的模式适用于不同的数据采集和处理场景。例如，如果您需要定期获取一个或多个传感器的数据，可以选择单次转换或单次扫描模式。如果需要连续获取模拟信号的数据流，可以选择连续转换模式。</p><p>数据对齐：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps62.jpg" alt="img"> </p><p>STM32的ADC是12位的，它的转换结果就是一个12位的数据。但是这个数据寄存器是16位的，所以就存在一个数据对齐的问题。</p><p>一般使用右对齐，这样读取这个16位寄存器，直接就是转换结果。</p><p>转换时间：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps63.jpg" alt="img"> </p><p>采样时间越大，越能避免一些毛刺信号的干扰。不过转换时间也会延长。</p><p>校准：</p><p>ADC有一个内置自校准模式。校准可大幅减小因内部电容器组的变化而造成的准精度误差。校准期间，在每个电容器上都会计算出一个误差修正码(数字值)，这个码用于消除在随后的转换中每个电容器上产生的误差</p><p>建议在每次上电后执行一次校准</p><p>启动校准前， ADC必须处于关电状态超过至少两个ADC时钟周期</p><h2 id="7-1-AD单通道"><a href="#7-1-AD单通道" class="headerlink" title="7.1 AD单通道"></a>7.1 AD单通道</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps64.jpg" alt="img"> </p><p> 这是一个用于配置ADC（模拟-数字转换器）进行单通道模式的基本步骤。这些步骤描述了如何在STM32微控制器上设置ADC以进行单通道的模拟信号转换。</p><ol><li><p><strong>开启RCC时钟</strong>：首先，您需要启用RCC（Reset and Clock Control）时钟来激活ADC和相关的GPIO外设。这确保了ADC的时钟正常运行。</p></li><li><p><strong>配置ADC的分频器</strong>：ADC有一个分频器，它可以将系统时钟分频以获得适当的时钟频率。这是为了确保ADC可以按照所需的速度进行转换。您需要配置分频器以满足应用的要求。</p></li><li><p><strong>配置GPIO</strong>：在ADC的输入通道引脚上，您需要将相应的GPIO配置为模拟输入模式。这告诉STM32微控制器将这些引脚视为模拟输入，并准备好接收模拟信号。</p></li><li><p><strong>配置多路开关</strong>：多路开关允许您选择要测量的模拟通道。您需要将要测量的通道连接到ADC的规则组中，以便进行转换。在图中，左边的通道被连接到右边的规则组列表中。</p></li><li><p><strong>配置ADC转换器</strong>：最后，您需要使用库函数或寄存器配置ADC转换器。这包括设置转换模式（单通道）、规则组、采样时间等参数。您还需要启动ADC转换以开始从所选通道获取模拟信号的数字表示。</p></li></ol><p>消除ADC返回结果的方法：</p><ol><li>迟滞比较：设置两个阈值，低于下阈值开灯，高于上阈值时关灯。</li><li>滤波：平滑数据(均值滤波)</li><li>裁剪分辨率：直接把数据的尾数去掉，也可以减小数据的波动</li></ol><h3 id="代码示例："><a href="#代码示例：" class="headerlink" title="代码示例："></a>代码示例：</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// 引入STM32标准外设库的头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">AD_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 启用ADC1和GPIOA的时钟</span></span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_ADC1, ENABLE);</span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置ADC时钟分频，这里将PCLK2分频为6</span></span><br><span class="line">    RCC_ADCCLKConfig(RCC_PCLK2_Div6);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置GPIOA的引脚0为模拟输入模式</span></span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AIN;</span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;</span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置ADC通道，使用通道0，采样时间为55.5个时钟周期</span></span><br><span class="line">    ADC_RegularChannelConfig(ADC1, ADC_Channel_0, <span class="number">1</span>, ADC_SampleTime_55Cycles5);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置ADC模式，数据右对齐，禁用连续转换，禁用扫描模式，只使用1个通道</span></span><br><span class="line">    ADC_InitTypeDef ADC_InitStructure;</span><br><span class="line">    ADC_InitStructure.ADC_Mode = ADC_Mode_Independent;</span><br><span class="line">    ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;</span><br><span class="line">    ADC_InitStructure.ADC_ExternalTrigConv = ADC_ExternalTrigConv_None;</span><br><span class="line">    ADC_InitStructure.ADC_ContinuousConvMode = DISABLE;</span><br><span class="line">    ADC_InitStructure.ADC_ScanConvMode = DISABLE;</span><br><span class="line">    ADC_InitStructure.ADC_NbrOfChannel = <span class="number">1</span>;</span><br><span class="line">    ADC_Init(ADC1, &amp;ADC_InitStructure);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 启用ADC1</span></span><br><span class="line">    ADC_Cmd(ADC1, ENABLE);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 重置ADC1的校准寄存器</span></span><br><span class="line">    ADC_ResetCalibration(ADC1);</span><br><span class="line">    <span class="keyword">while</span> (ADC_GetResetCalibrationStatus(ADC1) == SET);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 启动ADC1的校准</span></span><br><span class="line">    ADC_StartCalibration(ADC1);</span><br><span class="line">    <span class="keyword">while</span> (ADC_GetCalibrationStatus(ADC1) == SET);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">AD_GetValue</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 启动ADC转换</span></span><br><span class="line">    ADC_SoftwareStartConvCmd(ADC1, ENABLE);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 等待转换完成</span></span><br><span class="line">    <span class="keyword">while</span> (ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC) == RESET);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取转换结果</span></span><br><span class="line">    <span class="keyword">return</span> ADC_GetConversionValue(ADC1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码用于初始化和读取STM32F10x系列微控制器的ADC，以获取单通道（通道0）的模拟输入值。首先，它启用了所需的时钟，配置了GPIO引脚为模拟输入模式，然后设置了ADC的采样参数和模式。最后，通过调用<code>AD_GetValue</code>函数，您可以触发ADC转换并等待结果，然后读取转换的数字值。</p><h2 id="7-2-AD多通道"><a href="#7-2-AD多通道" class="headerlink" title="7.2 AD多通道"></a>7.2 AD多通道</h2><p>扫描模式：如果想要使用扫描模式实现多通道，最好要配合DMA来实现。因为：</p><p>l 问题1：在扫描模式下，启动列表之后，每一个单独的通道转换完成之后，不会产生任何的标志位，也不会触发中断，不知道某一个通道是不是转换完了。</p><p>l 问题2：AD的速度非常快，转换一个通道大概只有几us，如果不能在几us的时间内把数据转运走，那数据就会丢失。</p><p>如果不使用扫描模式，可以使用单次转换、非扫描的方式来实现多通道。只需要在每次触发转换之前，手动更改一下列表第一个位置的通道就行了。</p><p>扫描模式+DMA转运数据：DMA是转运多通道数据的最优解。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3、定时器中断</title>
      <link href="/2023/09/18/%E7%89%A9%E8%81%94%E7%BD%91-STM32-3%E3%80%81%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%AD%E6%96%AD/"/>
      <url>/2023/09/18/%E7%89%A9%E8%81%94%E7%BD%91-STM32-3%E3%80%81%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%AD%E6%96%AD/</url>
      
        <content type="html"><![CDATA[<h1 id="定时器中断"><a href="#定时器中断" class="headerlink" title="定时器中断"></a>定时器中断</h1><h2 id="1、-TIM简介"><a href="#1、-TIM简介" class="headerlink" title="1、 TIM简介"></a>1、 TIM简介</h2><p>定时器：可以对输入的时钟进行计数，并在计数值达到设定值时触发中断</p><p>STM32在72MHz计数时钟下可以实现最大59.65s的定时。</p><ol><li><p>16位计数器：执行计数定时的一个寄存器，每来一个时钟，计数器加1</p></li><li><p>预分频器：可以对计数器的时钟进行分频，让这个计数更加灵活</p></li><li><p>自动重装寄存器：计数的目标值(计多少个时钟申请中断)，这些寄存器构成了最核心的部分。</p></li></ol><p>这三部分组成了定时器的时基单元(计数器、自动重装寄存器、预分频器)</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps48.jpg" alt="img"> </p><p>STM32F103C8T6定时器资源：TIM1、TIM2、TIM3、TIM4</p><h2 id="2、-基本定时器"><a href="#2、-基本定时器" class="headerlink" title="2、 基本定时器"></a>2、 基本定时器</h2><p>可以完成定时中断，主模式触发DAC的功能。</p><p>DAC功能：数模转换</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps49.jpg" alt="img"> </p><p>内部时钟（CK_CNT）：一般就是系统的主频72MHz，通向时基单元的输入。</p><p>时基单元：16位预分频器 + 16位计数器 + 16位自动重装载寄存器。</p><ol><li><p>预分频器：对输入的72MHz时钟进行预分频，寄存器内存储的值是实际的分频系数减一。写0就是不分频，写1就是2分频，写2就是3分频……</p></li><li><p>计数器：对预分频后的计数时钟进行计数，每遇到上升沿就加一。</p></li><li><p>自动重装载寄存器：存储计数的最大值，到达此值后触发中断并清零计数器。</p></li></ol><p>折线UI：向上的折线箭头表示该位置会产生中断信号——“更新中断”（由计数值等于自动重装值产生的中断），这个中断信号会通向NVIC</p><p>折线U：向下的折线箭头表示该位置会产生事件——“更新事件”，这个更新事件不会触发中断，但可以触发内部其他电路的工作。比如将更新事件映射到触发输出TRGO，然后TRGO直接接到DAC的触发转换引脚上。</p><p>主模式触发DAC数模转换功能：</p><p>stm32的一大特色就是主从触发模式，可以让内部的硬件在不受程序的控制下自动运行，可以极大地减轻CPU的负担。</p><p>驱动DAC正常思路及其问题：每隔一段时间就产生一个定时中断，手动更新DAC的值。但这样子会频繁的产生中断，会影响主程序的运行和其他中断的响应。</p><p>解决方法：定时器设计了一个主模式，使用主模式可以将定时器的“更新事件”映射到“触发输出TRGO”，然后TRGO直接接到DAC的触发转换引脚上，于是定时器的更新就不需要中断来实现了。整个过程无需软件参与，实现了硬件的自动化。</p><h2 id="3、-通用定时器"><a href="#3、-通用定时器" class="headerlink" title="3、 通用定时器"></a>3、 通用定时器</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps50.jpg" alt="img"> </p><p>时基单元：PSC预分频器、CNT计数器、自动重装寄存器。通用定时器和高级定时器新增两个功能：向下计数模式、中央对齐计数模式。</p><ol><li><p>向上计数模式(常用)：从0开始累加，到自动重装值触发中断。</p></li><li><p>向下计数模式：从自动重装值递减，到0触发中断</p></li><li><p>中央对齐计数模式：从0开始累加，到自动重装载值触发中断，然后递减，到0再次触发中断。常用于电机控制的SVPWM算法中。</p></li></ol><p>内外时钟源选择和主从触发模式结构：上面的一大块。下面介绍各种各样的内外时钟源：</p><p>定时器中断基本结构：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps51.jpg" alt="img"> </p><p>时基单元：中间的粉色部分。</p><p>运行控制：控制寄存器的一些位，如启动停止、向上或向下计数等，操作这些寄存器就可以控制时基单元的运行了。</p><p>内部时钟模式、外部时钟模式2、外部时钟模式1：外部时钟源选择。这个选择器的输出就是为时基单元提供时钟。</p><p>编码器模式：编码器独有的模式，一般用不到。</p><p>中断申请控制：由于定时器内部有很多地方要申请中断，“中断申请控制”就用来使能控制这些中断是否使能。比如，中断信号会先在状态寄存器里置一个中断标志位，这个标志位会通过中断输出控制，到NVIC申请中断。</p><p>以下是对每个函数和参数的详细解释，使用代码注释的方式：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  将指定定时器模块的所有寄存器重置为默认值。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要重置的定时器模块，例如 TIM1、TIM2 等。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_DeInit</span><span class="params">(TIM_TypeDef* TIMx)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置指定定时器模块的时间基准参数。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_TimeBaseInitStruct: 包含时间基准配置信息的结构体指针。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_TimeBaseInit</span><span class="params">(TIM_TypeDef* TIMx, TIM_TimeBaseInitTypeDef* TIM_TimeBaseInitStruct)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***  初识化时钟  ***</span></span><br><span class="line"><span class="comment">  * @brief  初始化 TIM_TimeBaseInitStruct 结构体为默认值。</span></span><br><span class="line"><span class="comment">  * @param  TIM_TimeBaseInitStruct: 要初始化的时间基准配置结构体。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_TimeBaseStructInit</span><span class="params">(TIM_TimeBaseInitTypeDef* TIM_TimeBaseInitStruct)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***  启用或禁用指定定时器模块 ***</span></span><br><span class="line"><span class="comment">  * @brief  启用或禁用指定定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要启用或禁用的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  NewState: 期望的状态，可以是 ENABLE（启用）或 DISABLE（禁用）。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_Cmd</span><span class="params">(TIM_TypeDef* TIMx, FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***  中断功能  ***</span></span><br><span class="line"><span class="comment">  * @brief  配置指定定时器模块的中断功能。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_IT: 要配置的中断源，例如 TIM_IT_Update。</span></span><br><span class="line"><span class="comment">  * @param  NewState: 期望的状态，可以是 ENABLE（启用）或 DISABLE（禁用）。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ITConfig</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_IT, FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***  配置为内部时钟  ***</span></span><br><span class="line"><span class="comment">  * @brief  配置指定定时器模块的时钟源为内部时钟。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_InternalClockConfig</span><span class="params">(TIM_TypeDef* TIMx)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置外部时钟源作为指定定时器模块的时钟输入。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_InputTriggerSource: 外部时钟源的触发源，例如 TIM_TS_ITR0。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ITRxExternalClockConfig</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_InputTriggerSource)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置外部时钟源作为指定定时器模块的时钟输入，以及外部时钟源的极性和输入滤波器。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_TIxExternalCLKSource: 外部时钟源的触发源，例如 TIM_TIxExternalCLK1Source_TI1。</span></span><br><span class="line"><span class="comment">  * @param  TIM_ICPolarity: 外部时钟源的极性，可以是 TIM_ICPolarity_Rising（上升沿）或 TIM_ICPolarity_Falling（下降沿）。</span></span><br><span class="line"><span class="comment">  * @param  ICFilter: 外部时钟源的输入滤波器值。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_TIxExternalClockConfig</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_TIxExternalCLKSource, <span class="type">uint16_t</span> TIM_ICPolarity, <span class="type">uint16_t</span> ICFilter)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置 TIM 为外部时钟模式 1，设置外部触发源的预分频器、极性和输入滤波器。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_ExtTRGPrescaler: 外部触发源的预分频器，例如 TIM_ExtTRGPSC_OFF。</span></span><br><span class="line"><span class="comment">  * @param  TIM_ExtTRGPolarity: 外部触发源的极性，可以是 TIM_ExtTRGPolarity_Inverted（反相）或 TIM_ExtTRGPolarity_NonInverted（非反相）。</span></span><br><span class="line"><span class="comment">  * @param  ExtTRGFilter: 外部触发源的输入滤波器值。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ETRClockMode1Config</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_ExtTRGPrescaler, <span class="type">uint16_t</span> TIM_ExtTRGPolarity, <span class="type">uint16_t</span> ExtTRGFilter)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置定时器 TIM 为外部时钟模式 2，设置外部触发源的预分频器、极性和输入滤波器。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_ExtTRGPrescaler: 外部触发源的预分频器，例如 TIM_ExtTRGPSC_OFF。</span></span><br><span class="line"><span class="comment">  * @param  TIM_ExtTRGPolarity: 外部触发源的极性，可以是 TIM_ExtTRGPolarity_Inverted（反相）或 TIM_ExtTRGPolarity_NonInverted（非反相）。</span></span><br><span class="line"><span class="comment">  * @param  ExtTRGFilter: 外部触发源的输入滤波器值。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ETRClockMode2Config</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_ExtTRGPrescaler, <span class="type">uint16_t</span> TIM_ExtTRGPolarity, <span class="type">uint16_t</span> ExtTRGFilter)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置定时器 TIM 的外部触发输入 (ETR)。可以配置为外部时钟源或外部触发源。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_ExtTRGPrescaler: 外部触发源的预分频器，例如 TIM_ExtTRGPSC_OFF。</span></span><br><span class="line"><span class="comment">  * @param  TIM_ExtTRGPolarity: 外部触发源的极性，可以是 TIM_ExtTRGPolarity_Inverted（反相）或 TIM_ExtTRGPolarity_NonInverted（非反相）。</span></span><br><span class="line"><span class="comment">  * @param  ExtTRGFilter: 外部触发源的输入滤波器值。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ETRConfig</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_ExtTRGPrescaler, <span class="type">uint16_t</span> TIM_ExtTRGPolarity, <span class="type">uint16_t</span> ExtTRGFilter)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置定时器 TIM 的预分频器值，以减小时钟频率。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  Prescaler: 预分频器的值，用于减小输入时钟频率。</span></span><br><span class="line"><span class="comment">  * @param  TIM_PSCReloadMode: 指定何时重新加载预分频器值，可以是 TIM_PSCReloadMode_Immediate 或 TIM_PSCReloadMode_Update。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_PrescalerConfig</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> Prescaler, <span class="type">uint16_t</span> TIM_PSCReloadMode)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***  配置定时器 TIM 的计数模式  ***</span></span><br><span class="line"><span class="comment">  * @brief  配置定时器 TIM 的计数模式，例如向上计数、向下计数或中央对齐。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_CounterMode: 指定计数模式，可以是 TIM_CounterMode_Up、TIM_CounterMode_Down 或 TIM_CounterMode_CenterAligned1 等。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_CounterModeConfig</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_CounterMode)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置是否启用自动重载寄存器 (ARR) 预加载。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  NewState: 期望的状态，可以是 ENABLE（启用）或 DISABLE（禁用）。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ARRPreloadConfig</span><span class="params">(TIM_TypeDef* TIMx, FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  设置定时器 TIM 的计数器值。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要配置的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  Counter: 要设置的计数器值。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_SetCounter</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> Counter)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  获取指定定时器模块的当前计数器值。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要获取计数器值的定时器模块。</span></span><br><span class="line"><span class="comment">  * @retval 当前计数器值。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">TIM_GetCounter</span><span class="params">(TIM_TypeDef* TIMx)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  获取指定定时器模块的当前预分频器值。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要获取预分频器值的定时器模块。</span></span><br><span class="line"><span class="comment">  * @retval 当前预分频器值。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">TIM_GetPrescaler</span><span class="params">(TIM_TypeDef* TIMx)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  检查指定定时器模块标志位是否被设置。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要检查标志位的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_FLAG: 要检查的标志位，例如 TIM_FLAG_Update。</span></span><br><span class="line"><span class="comment">  * @retval 标志位的状态，可以是 RESET 或 SET。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">FlagStatus <span class="title function_">TIM_GetFlagStatus</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_FLAG)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  清除指定定时器模块的标志位。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要清除标志位的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_FLAG: 要清除的标志位，例如 TIM_FLAG_Update。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ClearFlag</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_FLAG)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  检查指定定时器模块的中断状态。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要检查中断状态的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_IT: 要检查的中断源，例如 TIM_IT_Update。</span></span><br><span class="line"><span class="comment">  * @retval 中断状态，可以是 RESET 或 SET。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">ITStatus <span class="title function_">TIM_GetITStatus</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_IT)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  清除指定定时器模块的中断挂起位。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要清除中断挂起位的定时器模块。</span></span><br><span class="line"><span class="comment">  * @param  TIM_IT: 要清除的中断源，例如 TIM_IT_Update。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ClearITPendingBit</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_IT)</span>;</span><br></pre></td></tr></table></figure><p>这些注释提供了对每个函数的功能和参数的清晰解释。如果有任何进一步的疑问，请随时提出。</p><h2 id="4、-定时器初始化步骤"><a href="#4、-定时器初始化步骤" class="headerlink" title="4、 定时器初始化步骤"></a>4、 定时器初始化步骤</h2><ol><li><p><strong>开启RCC内部时钟</strong>：首先，您需要启用与所选定时器相关的RCC (Reset and Clock Control) 时钟。这可以通过调用适当的RCC函数来实现，例如 <code>RCC_APB1PeriphClockCmd()</code> 或 <code>RCC_APB2PeriphClockCmd()</code>。</p></li><li><p><strong>选择时基单元的时钟源</strong>：定时器的时基单元需要一个时钟源来进行计数。您可以选择内部时钟源或外部时钟源，具体取决于您的应用。通常，对于定时中断，内部时钟源足够。您可以使用 <code>TIM_InternalClockConfig()</code> 函数来选择内部时钟源。</p></li><li><p><strong>配置时基单元</strong>：时基单元<code>TIM_TimeBaseInitTypeDef</code>由<code>TIM_ClockDivision</code>分频系数、<code>TIM_CounterMode</code>计数方向、<code>TIM_Period</code>自动重装载值、<code>TIM_Prescaler</code>预分频器、<code>TIM_RepetitionCounter</code>重复计数器的值，用于高级定时器</p></li><li><p><strong>配置输出中断控制</strong>：如果您需要在定时器溢出或到达某个特定值时触发中断，您需要配置输出中断控制。使用 <code>TIM_ITConfig()</code> 函数来启用或禁用定时器的特定中断。</p></li><li><p><strong>配置NVIC</strong>：在配置输出中断后，您需要在NVIC (Nested Vector Interrupt Controller) 中启用定时器中断通道，并为该中断通道分配一个优先级。使用 <code>NVIC_Init()</code> 函数来完成此操作。</p></li><li><p><strong>运行控制</strong>：最后，您可以使用 <code>TIM_Cmd()</code> 函数来启动或停止定时器的计数。如果您已正确配置了时基单元、中断和NVIC，则定时器将在满足特定条件时触发中断。</p><p>这段代码是一个示例，用于初始化和配置TIM2定时器，以实现定时中断功能。以下是对代码的详细解释：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Timer_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2, ENABLE);</span><br><span class="line"><span class="comment">// 开启TIM2的时钟</span></span><br><span class="line">    TIM_InternalClockConfig(TIM2);</span><br><span class="line"><span class="comment">// 配置TIM2的时钟源为内部时钟</span></span><br><span class="line">    TIM_TimeBaseInitTypeDef TIM_TimeBaseInitStructure;</span><br><span class="line">    <span class="comment">// 配置TIM2的时间基准参数</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_ClockDivision = TIM_CKD_DIV1; </span><br><span class="line">    <span class="comment">// 时钟分频因子</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_CounterMode =TIM_CounterMode_Up; </span><br><span class="line">    <span class="comment">// 计数模式为向上计数</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_Period = <span class="number">10000</span> - <span class="number">1</span>;  </span><br><span class="line">    <span class="comment">// 自动重装载寄存器的值，决定了定时器的周期</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_Prescaler = <span class="number">7200</span> - <span class="number">1</span>;  </span><br><span class="line">    <span class="comment">// 预分频器的值，决定了计数器时钟的频率</span></span><br><span class="line">    <span class="comment">//72M对7200分频，得到的就是10K的计数频率，在10的频率下计一万个数就是1s的时间</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_RepetitionCounter = <span class="number">0</span>;  </span><br><span class="line">    <span class="comment">// 重复计数器的值，用于高级定时器，TIM2为基本定时器，可以忽略</span></span><br><span class="line">    TIM_TimeBaseInit(TIM2, &amp;TIM_TimeBaseInitStructure);</span><br><span class="line"></span><br><span class="line">    TIM_ClearFlag(TIM2, TIM_FLAG_Update);</span><br><span class="line"><span class="comment">// 清除TIM2的更新标志位</span></span><br><span class="line">    TIM_ITConfig(TIM2, TIM_IT_Update, ENABLE);</span><br><span class="line">    <span class="comment">// 使能TIM2的更新中断</span></span><br><span class="line"></span><br><span class="line">    NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);</span><br><span class="line">    <span class="comment">// 配置NVIC，设置中断优先级</span></span><br><span class="line">    NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn;  </span><br><span class="line">    <span class="comment">// 中断通道为TIM2</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;  </span><br><span class="line">    <span class="comment">// 使能中断通道</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">2</span>;  </span><br><span class="line">    <span class="comment">// 抢占优先级</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">1</span>;  </span><br><span class="line">    <span class="comment">// 子优先级</span></span><br><span class="line">    NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 启动TIM2定时器</span></span><br><span class="line">    TIM_Cmd(TIM2, ENABLE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码完成了以下操作：</p><ol><li>打开TIM2的时钟，确保TIM2可以正常工作。</li><li>配置TIM2的时钟源为内部时钟，即使用内部时钟作为计数器的时钟源。</li><li>配置TIM2的时间基准参数，包括时钟分频因子、计数模式、周期和预分频器的值。这些参数决定了TIM2的工作频率和计数周期。</li><li>清除TIM2的更新标志位，以确保不会立即触发中断。</li><li>使能TIM2的更新中断，以便在计数器溢出时触发中断。</li><li>配置NVIC，为TIM2中断通道分配抢占优先级和子优先级。</li><li>启动TIM2定时器，开始计数。</li></ol><p>最终，TIM2将以预定的周期和预分频器配置工作，并在计数器溢出时触发TIM2_IRQn中断，执行与中断相关的处理程序。请根据您的应用需求和硬件配置进行必要的修改。</p></li></ol><h2 id="5、-TIM输出比较原理"><a href="#5、-TIM输出比较原理" class="headerlink" title="5、 TIM输出比较原理"></a>5、 TIM输出比较原理</h2><p>输出比较（Output Compare，简称OC）是STM32定时器功能中的一种重要特性，用于生成PWM（脉冲宽度调制）信号或其他需要定时控制的输出信号。下面是关于输出比较的一些要点：</p><ol><li><strong>用途</strong>：输出比较主要用于生成PWM信号，其中包括控制信号的占空比和频率。除了PWM之外，它还可以用于产生其他类型的定时控制信号，如脉冲信号、方波信号等。</li><li><strong>比较操作</strong>：输出比较的原理是将定时器的计数值（通常是CNT寄存器的值）与比较寄存器（通常是CCR寄存器）的值进行比较。根据比较的结果，可以执行以下操作：<ul><li>当计数器的值小于CCR寄存器的值时，输出置1。</li><li>当计数器的值等于CCR寄存器的值时，输出置0。</li><li>当计数器的值大于CCR寄存器的值时，输出保持不变（可以是1或0，取决于配置）。</li></ul></li><li><strong>通道数量</strong>：每个高级定时器和通用定时器都拥有多个输出比较通道，通常有4个。这意味着你可以同时控制多个不同的输出信号。</li><li><strong>PWM波形生成</strong>：通过适当配置输出比较通道的CCR寄存器值，你可以生成具有不同占空比的PWM波形。这对于驱动电机、LED灯和其他需要精确控制的应用非常有用。</li><li><strong>高级定时器功能</strong>：高级定时器（如TIM1和TIM8）的输出比较通道具有额外的功能，包括死区生成和互补输出。死区生成用于防止同一通道上的两个PWM信号同时处于高电平或低电平状态，以防止短路。互补输出用于产生互补的PWM信号，可用于驱动半桥或全桥电路。</li></ol><p>CCR：Capture Compare，捕获比较寄存器。</p><p>脉冲宽度调制（PWM，Pulse Width Modulation）是一种用于控制模拟信号的技术，通常用于模拟电子电路中，特别是用于控制电机速度、LED亮度和音频信号等应用。以下是一些关于PWM的重要概念：</p><ol><li><p><strong>频率（Frequency）</strong>：PWM信号的频率是指PWM周期的倒数，通常以赫兹（Hz）为单位表示。频率决定了PWM波形的周期，即PWM信号从低电平到高电平再到低电平的一个完整周期需要多少时间。频率一般在几千赫兹（kHz）到几十千赫兹（十几kHz或百kHz）之间。</p></li><li><p><strong>占空比（Duty Cycle）</strong>：占空比是PWM信号中高电平的持续时间与一个周期内的总时间之比。它表示了PWM信号中高电平的相对时间。占空比通常以百分比表示，例如，如果PWM的周期是10毫秒，而高电平持续时间是2毫秒，那么占空比为20%。</p></li><li><p><strong>分辨率（Resolution）</strong>：分辨率是指PWM信号占空比变化的精细程度，通常以位数表示。例如，8位分辨率的PWM可以将占空比分成256个不同的级别，每个级别之间的占空比差异是1/256，即约0.39%。分辨率越高，可以表示的占空比级别就越多，PWM信号的精度也就越高。</p></li><li><p><strong>定时中断</strong>：在STM32定时器中，PWM的频率由定时中断的频率决定。通过调整定时器的预分频器、自动重装载值和计数模式，可以控制定时中断的频率，从而影响PWM信号的频率。</p></li><li><p><strong>自动重装载值</strong>：自动重装载值（ARR，Auto-Reload Register）决定了PWM信号的周期。它表示PWM信号从低电平到高电平再到低电平的一个完整周期的时间。通过调整ARR的值，可以改变PWM信号的频率。</p></li></ol><p>总之，PWM是一种强大的信号调制技术，用于控制模拟电路中的各种设备。通过调整频率和占空比，可以实现对输出信号的精确控制，以满足不同应用的需求。在STM32等微控制器中，PWM通常由定时器模块生成，可以根据需要进行配置和调整。</p><h2 id="6、-通用定时器输出比较通道"><a href="#6、-通用定时器输出比较通道" class="headerlink" title="6、 通用定时器输出比较通道"></a>6、 通用定时器输出比较通道</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps52.jpg" alt="img"> </p><p>REF：reference，参考信号</p><p>输出比较模式：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps53.jpg" alt="img"> </p><p>置有效电平：置高电平</p><p>置无效电平：置低电平</p><p>PWM模式1：常用向上计数的方式</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4、PWM输出的基本结构</title>
      <link href="/2023/09/18/%E7%89%A9%E8%81%94%E7%BD%91-STM32-4%E3%80%81PWM%E8%BE%93%E5%87%BA%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84/"/>
      <url>/2023/09/18/%E7%89%A9%E8%81%94%E7%BD%91-STM32-4%E3%80%81PWM%E8%BE%93%E5%87%BA%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="1、PWM输出的基本结构"><a href="#1、PWM输出的基本结构" class="headerlink" title="1、PWM输出的基本结构"></a>1、PWM输出的基本结构</h1><h2 id="1-1、输出比较"><a href="#1-1、输出比较" class="headerlink" title="1.1、输出比较"></a>1.1、输出比较</h2><p>输出比较（Output Compare，简称OC）是微控制器中的一个重要功能，用于生成PWM信号、产生精确的时间延迟或者触发特定事件。以下是关于输出比较的一些基本概念：</p><ol><li><p><strong>Output Compare 寄存器（CCR）</strong>：输出比较功能通过比较定时器的计数值（CNT）与一个特定的比较值（CCR寄存器的值）来控制输出电平的变化。当计数值与CCR寄存器的值相等或满足特定的条件时，可以触发输出操作。</p></li><li><p><strong>PWM 生成</strong>：输出比较通常用于生成脉冲宽度调制（PWM）信号，用于控制电机速度、LED亮度等。通过设定CCR寄存器的值，可以确定PWM信号的占空比，即高电平的持续时间与一个周期的比例。</p></li><li><p><strong>死区控制</strong>：某些高级定时器的输出比较通道支持死区控制功能，用于防止同时开启两个输出通道导致短路或电流过大的情况。死区是两个输出通道之间的时间间隔，可以设置为一个固定值。</p></li><li><p><strong>互补输出</strong>：某些高级定时器的输出比较通道支持互补输出功能，即同时控制两个输出引脚的状态，一个输出高电平时，另一个输出低电平，反之亦然。</p></li><li><p><strong>事件触发</strong>：输出比较通道可以用于触发特定事件，例如捕获输入信号的边沿、生成精确的时间延迟等。</p></li><li><p><strong>定时器类型</strong>：不同型号的微控制器和定时器支持不同数量的输出比较通道，以及不同的功能。一些常见的定时器包括TIM1、TIM2、TIM3等，它们通常有多个输出比较通道。</p></li></ol><p>使用输出比较功能需要初始化定时器和相应的输出比较通道，并设置CCR寄存器的值来控制输出的行为。这在控制电机、LED调光、精确的时间控制等应用中非常有用。</p><h2 id="1-2、PWM简介"><a href="#1-2、PWM简介" class="headerlink" title="1.2、PWM简介"></a>1.2、PWM简介</h2><p>PWM（Pulse Width Modulation）脉冲宽度调制在具有惯性的系统中，可以通过对一系列脉冲的宽度进行调制，来等效地获得所需要的模拟参量，常应用于电机控速等领域</p><p>PWM参数：     频率 = 1 / TS            占空比 = TON / TS           分辨率 = 占空比变化步距</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/1695209171269.jpg" alt="1695209171269"></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/1695209212325.jpg" alt="1695209212325"></p><h2 id="1-3、输出比较模式"><a href="#1-3、输出比较模式" class="headerlink" title="1.3、输出比较模式"></a>1.3、输出比较模式</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/image-20230920194614012.png" alt="image-20230920194614012"></p><h2 id="1-4、PWM基本结构"><a href="#1-4、PWM基本结构" class="headerlink" title="1.4、PWM基本结构"></a>1.4、PWM基本结构</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps54.jpg" alt="img"> </p><p>在时基单元部分，输出PWM不需要中断。</p><ol><li><strong>黄色线 (ARR的值)</strong>: 自动重载寄存器（ARR）的值决定了PWM信号的周期。在这段代码中，ARR的值被设置为99，这意味着PWM信号的周期是100个计数周期。如果TIM2的时钟频率为72 MHz（由PSC设置），则PWM信号的频率将为72 MHz / 100 = 720 kHz。</li><li><strong>蓝色线 (CNT的值)</strong>: 计数器寄存器（CNT）的值代表当前的计数周期。在PWM运行期间，CNT的值会在0到ARR之间循环。这个计数值不断递增，然后重新从0开始。</li><li><strong>红色线 (CCR1)</strong>: 通道1比较寄存器（CCR1）的值决定了PWM信号的占空比。在这段代码中，CCR1的初始值被设置为0，这意味着PWM信号的占空比为0%。通过调用<code>PWM_SetCompare1</code>函数，您可以更改CCR1的值来调整PWM信号的占空比，使其变得不同。</li><li><strong>绿色线 (输出PWM)</strong>: PWM输出信号是TIM2根据CCR1和CNT的值生成的。占空比由CCR1的值控制，周期由ARR的值控制。通过不断改变CCR1的值，可以改变PWM信号的占空比。在周期开始时，输出被设置为高电平（在这种情况下，红色线所示），然后在CNT计数到CCR1时切换为低电平。</li></ol><p>CNT &lt; CCR：输出高电平</p><p>CNT ≥ CCR：输出低电平</p><p>CCR设置的高一些，输出的占空比就变大；CCR设置的低一些，输出的占空比就变小。</p><h2 id="1-5、参数计算："><a href="#1-5、参数计算：" class="headerlink" title="1.5、参数计算："></a>1.5、参数计算：</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps55.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps49.jpg" alt="img"></p><ol><li><p><strong>PWM频率 (Freg)</strong>：PWM信号的频率，通常以赫兹（Hz）为单位，可以使用以下公式计算：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Freg = CK_PSC / (PSC + 1) / (ARR + 1)</span><br></pre></td></tr></table></figure><ul><li><code>CK_PSC</code> 是TIMx的<strong>时钟频率</strong>。系统的主频72MHz（72,000,000Hz）</li><li><code>PSC</code> 是TIMx的<strong>预分频器（Prescaler）的值</strong>。</li><li><code>ARR</code> 是TIMx的<strong>自动重载寄存器（Auto Reload Register）的值</strong>。</li></ul></li><li><p><strong>PWM占空比 (Duty)</strong>：PWM信号的占空比表示高电平占据一个周期的比例，通常以百分比表示，可以使用以下公式计算：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Duty = CCR / (ARR + 1)</span><br></pre></td></tr></table></figure><ul><li><code>CCR</code> 是TIMx的比较寄存器（Capture/Compare Register）的值。</li><li><code>ARR</code> 是TIMx的自动重载寄存器的值。</li></ul></li><li><p><strong>PWM分辨率 (Reso)</strong>：PWM信号的分辨率表示可以实现的不同占空比的级别数量，通常是单位占空比所代表的大小，可以使用以下公式计算：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Reso = 1 / (ARR + 1)</span><br></pre></td></tr></table></figure><ul><li><code>ARR</code> 是TIMx的<strong>自动重载寄存器的值</strong>。</li></ul></li></ol><p>这些公式可以帮助您计算和调整PWM信号的特性，例如，根据所需的频率和占空比来设置TIMx的ARR、CCR和PSC的值。分辨率可以告诉您每个级别所代表的大小，这有助于您更好地控制PWM信号。</p><p><strong>问题</strong>：如何输出一个占空比频率为1Khz，占空比可任意调节，且分辨率为1%的PWM波形，相关参数应如何进行设置。</p><p>ARR = 99</p><p>PSC = 719</p><h1 id="2、引脚重映射"><a href="#2、引脚重映射" class="headerlink" title="2、引脚重映射"></a>2、引脚重映射</h1><p>引脚重定义(重映射)：当一个引脚有多个功能时，如果可以进行重定义功能，则可以通过重映射的功能把原来的引脚映射到新的引脚上。这样就可以避免两个外设引脚的冲突。</p><p>在STM32微控制器系列中，引脚重映射通常由AFIO（Alternate Function I/O）模块来控制。以下是使用引脚重映射的一般步骤：</p><ol><li><p><strong>启用AFIO时钟</strong>：在使用引脚重映射之前，需要启用AFIO外设的时钟。这通常涉及到使用<code>RCC_APB2PeriphClockCmd</code>函数来启用RCC（Reset and Clock Control）外设的时钟。</p></li><li><p><strong>配置引脚重映射</strong>：使用AFIO外设的寄存器来配置引脚的重映射。不同的STM32系列和型号可能有不同的寄存器和位字段用于配置重映射。您需要查阅特定型号的参考手册来了解详细信息。</p></li><li><p><strong>初始化GPIO引脚</strong>：在重新映射引脚之后，需要确保与外设相关的GPIO引脚被正确初始化，以适应新的引脚功能。通常，您需要将GPIO引脚配置为适当的模式和设置（例如，复用推挽输出）。</p></li><li><p><strong>使用重映射后的引脚</strong>：现在，您可以将重映射后的引脚用于所需的外设功能。这些引脚将按照重映射配置来执行相应的任务。</p></li></ol><p>以下是一个示例代码片段，演示了如何启用引脚重映射：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 启用AFIO时钟</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置引脚重映射（示例，具体配置根据您的需求）</span></span><br><span class="line">GPIO_PinRemapConfig(GPIO_Remap_SWJ_JTAGDisable, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化GPIO引脚</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP; <span class="comment">// 复用推挽输出模式</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;       <span class="comment">// 配置为新映射的引脚</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 现在可以将GPIOA的引脚0用于新的外设功能</span></span><br></pre></td></tr></table></figure><p>如果想要定时器来控制输出引脚，需要使用复用推挽输出的模式</p><h2 id="2-1、在什么情况下会用到"><a href="#2-1、在什么情况下会用到" class="headerlink" title="2.1、在什么情况下会用到"></a>2.1、在什么情况下会用到</h2><p>引脚重映射在以下几种情况下非常有用：</p><ol><li><strong>多功能引脚</strong>：某些微控制器引脚具有多个功能。例如，一个引脚可以用作GPIO、USART、SPI、PWM等等。在这种情况下，可以使用引脚重映射来选择一个功能并将其映射到特定引脚上，以满足您的应用需求。</li><li><strong>引脚冲突</strong>：有时，不同外设可能需要使用相同的引脚，这会导致冲突。通过使用引脚重映射，您可以将其中一个外设的引脚映射到另一个引脚，以解决冲突。</li><li><strong>电路板布局</strong>：在某些情况下，电路板的布局可能需要更改引脚的连接方式。引脚重映射允许您重新分配引脚的功能，而无需更改硬件布局。</li><li><strong>性能优化</strong>：有些引脚重映射的配置可以提高性能。例如，某些STM32系列允许将USART的引脚重映射到更高性能的引脚上，以获得更快的通信速度。</li><li><strong>适应外设需求</strong>：某些外设可能需要特定的引脚配置才能正常工作。通过引脚重映射，您可以满足外设的特定要求。</li><li><strong>降低功耗</strong>：在一些情况下，引脚重映射可以帮助降低功耗，例如选择更低功耗的引脚模式。</li></ol><p>总之，引脚重映射提供了一种在特定应用需求下重新配置引脚功能的灵活方法，以满足不同的硬件和应用要求。这使得微控制器更加适应各种不同的应用场景。</p><h1 id="3、设计PWM输出的基本步骤："><a href="#3、设计PWM输出的基本步骤：" class="headerlink" title="3、设计PWM输出的基本步骤："></a>3、设计PWM输出的基本步骤：</h1><ol><li><p>开启RCC时钟，把需要的TIM外设和GPIO外设的时钟打开</p></li><li><p>配置时基单元，包括前面的时钟源选择</p></li><li><p>配置输出比较单元：CCR的值，输出比较模式、极性选择、输出使能这些参数</p></li><li><p>配置GPIO，把PWM对应的GPIO口，初始化为复用推挽输出的配置。</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps56.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps57.jpg" alt="img"> </p><p>如果要使用TIM2的OC1也就是CH1通道输出PWM，只能使用PA0输出PWM</p><p>TIM2的OC2只能使用PA1输出PWM</p><p>TIM2的OC3使用PA2</p><p>TIM2的OC4使用PA3</p><h2 id="2-1、定时器输出比较通道函数"><a href="#2-1、定时器输出比较通道函数" class="headerlink" title="2.1、定时器输出比较通道函数"></a>2.1、定时器输出比较通道函数</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  初始化TIMx的输出比较通道1（OC1）。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要初始化的定时器（例如TIM1、TIM2等）。</span></span><br><span class="line"><span class="comment">  * @param  TIM_OCInitStruct: 指向TIM_OCInitTypeDef结构的指针，其中包含OC1通道的配置信息。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_OC1Init</span><span class="params">(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  初始化TIMx的输出比较通道2（OC2）。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要初始化的定时器（例如TIM1、TIM2等）。</span></span><br><span class="line"><span class="comment">  * @param  TIM_OCInitStruct: 指向TIM_OCInitTypeDef结构的指针，其中包含OC2通道的配置信息。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_OC2Init</span><span class="params">(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  初始化TIMx的输出比较通道3（OC3）。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要初始化的定时器（例如TIM1、TIM2等）。</span></span><br><span class="line"><span class="comment">  * @param  TIM_OCInitStruct: 指向TIM_OCInitTypeDef结构的指针，其中包含OC3通道的配置信息。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_OC3Init</span><span class="params">(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  初始化TIMx的输出比较通道4（OC4）。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要初始化的定时器（例如TIM1、TIM2等）。</span></span><br><span class="line"><span class="comment">  * @param  TIM_OCInitStruct: 指向TIM_OCInitTypeDef结构的指针，其中包含OC4通道的配置信息。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_OC4Init</span><span class="params">(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)</span>;</span><br></pre></td></tr></table></figure><p>这些函数用于初始化定时器的输出比较通道。下面是函数的主要作用和参数的含义：</p><ul><li><p><code>TIMx</code>: 要初始化的定时器，可以是 TIM1、TIM2 等 TIM_TypeDef 结构体的指针。</p></li><li><p><code>TIM_OCInitStruct</code>: 包含了配置输出比较通道所需参数的结构体指针，需要使用 TIM_OCInitTypeDef 类型的变量初始化。</p></li></ul><p>其中 <code>TIM_OCInitTypeDef</code> 结构体包含了配置输出比较通道的参数，主要包括以下字段：</p><ul><li><p><code>TIM_OCMode</code>: 用于设置比较通道的工作模式，可以选择 PWM 模式、脉冲模式等。</p></li><li><p><code>TIM_OutputState</code>: 用于启用或禁用比较通道的输出。</p></li><li><p><code>TIM_OCPolarity</code>: 用于设置比较输出的极性，可以选择正极性或负极性。</p></li><li><p><code>TIM_Pulse</code>: 用于设置比较值，决定了比较通道的触发时间或 PWM 的占空比。</p></li></ul><p>通过适当配置这些参数，可以实现不同输出比较通道的操作方式，例如生成 PWM 信号、测量脉冲宽度等。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">TIM_CtrlPWMOutputs</span><span class="params">(TIM_TypeDef* TIMx, FunctionalState NewState)</span>;</span><br><span class="line"><span class="comment">//仅高级定时器使用，在使用高级定时器输出PWM时，需要调用这个函数，使能主输出，否则PWM将不能正常输出</span></span><br></pre></td></tr></table></figure><h2 id="2-2、设置定时器的输出比较通道的比较值"><a href="#2-2、设置定时器的输出比较通道的比较值" class="headerlink" title="2.2、设置定时器的输出比较通道的比较值"></a>2.2、设置定时器的输出比较通道的比较值</h2><p>这些函数用于设置定时器的输出比较通道的比较值。以下是对这些函数的注释解释，包括函数的作用和参数的含义：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  设置TIMx的输出比较通道1（OC1）的比较值。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要设置的定时器（例如TIM1、TIM2等）。</span></span><br><span class="line"><span class="comment">  * @param  Compare1: 要设置的比较值，决定了OC1通道的触发时间或PWM的占空比。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_SetCompare1</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> Compare1)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  设置TIMx的输出比较通道2（OC2）的比较值。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要设置的定时器（例如TIM1、TIM2等）。</span></span><br><span class="line"><span class="comment">  * @param  Compare2: 要设置的比较值，决定了OC2通道的触发时间或PWM的占空比。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_SetCompare2</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> Compare2)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  设置TIMx的输出比较通道3（OC3）的比较值。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要设置的定时器（例如TIM1、TIM2等）。</span></span><br><span class="line"><span class="comment">  * @param  Compare3: 要设置的比较值，决定了OC3通道的触发时间或PWM的占空比。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_SetCompare3</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> Compare3)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  设置TIMx的输出比较通道4（OC4）的比较值。</span></span><br><span class="line"><span class="comment">  * @param  TIMx: 要设置的定时器（例如TIM1、TIM2等）。</span></span><br><span class="line"><span class="comment">  * @param  Compare4: 要设置的比较值，决定了OC4通道的触发时间或PWM的占空比。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_SetCompare4</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> Compare4)</span>;</span><br></pre></td></tr></table></figure><p>这些函数用于在定时器的输出比较通道中设置比较值，从而决定了通道的触发时间或 PWM 的占空比。下面是函数的主要作用和参数的含义：</p><ul><li><p><code>TIMx</code>: 要设置的定时器，可以是 TIM1、TIM2 等 TIM_TypeDef 结构体的指针。</p></li><li><p><code>Compare1</code>, <code>Compare2</code>, <code>Compare3</code>, <code>Compare4</code>: 要设置的比较值，这些值决定了对应输出比较通道的触发时间或 PWM 的占空比。这些值是一个16位的无符号整数，通常的范围是 0 到 TIM_Period 之间，其中 TIM_Period 是定时器的自动重装载值。不同的比较值将导致不同的输出效果，例如不同的 PWM 占空比。</p></li></ul><h1 id="4、配置和控制PWM输出"><a href="#4、配置和控制PWM输出" class="headerlink" title="4、配置和控制PWM输出"></a>4、配置和控制PWM输出</h1><p>这段代码是用来在STM32微控制器上配置和控制PWM（脉冲宽度调制）输出的，具体使用了TIM2外设和GPIO引脚PA0。下面是对代码的详细注释：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">PWM_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 启用TIM2和GPIOA的时钟</span></span><br><span class="line">    RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2, ENABLE);</span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// GPIO初始化结构体</span></span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP; <span class="comment">// 配置为复用推挽输出模式</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0; <span class="comment">// 配置为PA0引脚</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; <span class="comment">// 设置引脚速度</span></span><br><span class="line">    GPIO_Init(GPIOA, &amp;GPIO_InitStructure); <span class="comment">// 初始化GPIOA</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置TIM2使用内部时钟源</span></span><br><span class="line">    TIM_InternalClockConfig(TIM2);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// TIM2的时间基准初始化结构体</span></span><br><span class="line">    TIM_TimeBaseInitTypeDef TIM_TimeBaseInitStructure;</span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_ClockDivision = TIM_CKD_DIV1; <span class="comment">// 时钟分频为TIM_CKD_DIV1</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_CounterMode = TIM_CounterMode_Up; <span class="comment">// 向上计数模式</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_Period = <span class="number">100</span> - <span class="number">1</span>; <span class="comment">// 自动重载寄存器值，决定PWM频率（ARR）</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_Prescaler = <span class="number">720</span> - <span class="number">1</span>; <span class="comment">// 预分频值，决定时钟频率（PSC）</span></span><br><span class="line">    TIM_TimeBaseInitStructure.TIM_RepetitionCounter = <span class="number">0</span>; <span class="comment">// 重复计数器</span></span><br><span class="line">    TIM_TimeBaseInit(TIM2, &amp;TIM_TimeBaseInitStructure); <span class="comment">// 初始化TIM2的时间基准</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TIM2的输出比较初始化结构体</span></span><br><span class="line">    TIM_OCInitTypeDef TIM_OCInitStructure;</span><br><span class="line">    TIM_OCStructInit(&amp;TIM_OCInitStructure); <span class="comment">// 将结构体初始化为默认值</span></span><br><span class="line">    TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_PWM1; <span class="comment">// PWM模式1</span></span><br><span class="line">    TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High; <span class="comment">// 输出极性为高电平有效</span></span><br><span class="line">    TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Enable; <span class="comment">// 输出使能</span></span><br><span class="line">    TIM_OCInitStructure.TIM_Pulse = <span class="number">0</span>; <span class="comment">// CCR寄存器，决定PWM的占空比</span></span><br><span class="line">    TIM_OC1Init(TIM2, &amp;TIM_OCInitStructure); <span class="comment">// 初始化TIM2的通道1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 启用TIM2</span></span><br><span class="line">    TIM_Cmd(TIM2, ENABLE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PWM_SetCompare1</span><span class="params">(<span class="type">uint16_t</span> Compare)</span></span><br><span class="line">&#123;</span><br><span class="line">    TIM_SetCompare1(TIM2, Compare); <span class="comment">// 设置TIM2的通道1的占空比</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码的目的是初始化TIM2外设，配置它以生成PWM信号，并允许您使用<code>PWM_SetCompare1</code>函数来动态更改PWM信号的占空比。请注意，TIM2在此代码中被配置为以内部时钟为基准，PWM的频率和占空比由<code>TIM_TimeBaseInitStructure</code>和<code>TIM_OCInitStructure</code>中的参数值确定。您可以调整这些参数以满足您的具体需求。</p><h1 id="5、-PWM驱动舵机"><a href="#5、-PWM驱动舵机" class="headerlink" title="5、 PWM驱动舵机"></a>5、 PWM驱动舵机</h1><p>舵机是一种根据输入PWM信号占空比来控制输出角度的装置，</p><p>根据输入PWM信号的要求，周期为20ms，高电平宽度为0.5ms~2.5ms。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/1695210887577.jpg" alt="1695210887577"></p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps58.jpg" alt="img"> </p><p>PWM参数计算：</p><p>PWM频率：50hz</p><p>ARR = 20k - 1</p><p>PSC = 72 -1</p><p>注：20K对应20ms，那么CCR设置为500，就是0.5ms，参数很直观</p><p>注意PWM的VCC接到5V</p><h1 id="6、PWM驱动直流电机"><a href="#6、PWM驱动直流电机" class="headerlink" title="6、PWM驱动直流电机"></a>6、PWM驱动直流电机</h1><h2 id="1、直流电机及驱动简介"><a href="#1、直流电机及驱动简介" class="headerlink" title="1、直流电机及驱动简介"></a>1、直流电机及驱动简介</h2><ul><li>直流电机是一种将电能转换为机械能的装置，有两个电极，当电极正接时，电机正转，当电极反接时，电机反转</li><li>直流电机属于大功率器件，GPIO口无法直接驱动，需要配合电机驱动电路来操作</li><li>TB6612是一款双路H桥型的直流电机驱动芯片，可以驱动两个直流电机并且控制其转速和方向</li></ul><h2 id="2、tb6612硬件电路："><a href="#2、tb6612硬件电路：" class="headerlink" title="2、tb6612硬件电路："></a>2、tb6612硬件电路：</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/image-20230917131617127.png" alt="image-20230917131617127"></p><ul><li><strong>VCC</strong>：这是电源引脚，用于供电给TB6612芯片。通常，VCC引脚连接到一个电源电压，例如5V。</li><li><strong>GND</strong>：这是地引脚，连接到电源的地。</li><li><strong>IN1A</strong> 和 <strong>IN1B</strong>：这些是输入引脚，用于控制Motor A的方向。通过将它们连接到不同的电平（高或低），您可以控制电机的正转和反转。</li><li><strong>IN2A</strong> 和 <strong>IN2B</strong>：这些也是输入引脚，用于控制Motor B的方向。</li><li><strong>PWM</strong>：这是输入引脚，用于控制电机的速度。通过在此引脚上应用PWM信号，您可以调整电机的速度。</li><li><strong>Motor A</strong> 和 <strong>Motor B</strong>：这是两个直流电机的连接端口，您需要将电机的两个引脚分别连接到这两个端口。</li></ul><p>请注意，TB6612有多个型号和封装，实际的引脚和功能可能会有所不同。在使用TB6612时，请务必参考其数据手册以确保正确连接和配置。此外，还需要提供适当的电源电压以供电机驱动器和电机运行。</p><h1 id="7、IC输入捕获"><a href="#7、IC输入捕获" class="headerlink" title="7、IC输入捕获"></a>7、IC输入捕获</h1><p>IC（Input Capture）输入捕获是一种常见于微控制器（MCU）定时器/计数器模块的功能。它允许MCU测量外部事件的时间参数，如脉冲的宽度、周期、频率等。以下是关于IC输入捕获模式的一些重要信息：</p><ol><li><strong>捕获触发条件</strong>：在IC输入捕获模式下，定时器会监视一个特定的输入引脚。当该引脚上的信号出现指定电平的跳变（例如上升沿或下降沿）时，定时器将记录当前计数器（CNT）的值，并将其锁存到捕获比较寄存器（CCR）中。</li><li><strong>用途</strong>：IC输入捕获可用于测量各种参数，如PWM波形的频率、占空比、脉冲宽度、电平持续时间等。这对于需要精确测量外部信号特性的应用非常有用，如电机控制、编码器反馈、传感器输入等。</li><li><strong>通道数量</strong>：每个高级定时器和通用定时器通常都支持多个IC输入捕获通道，通常有4个。这意味着您可以同时测量多个外部事件的参数。</li><li><strong>PWMI模式</strong>：IC输入捕获模式可以配置为PWMI（PWM输入）模式，使其能够测量PWM信号的频率和占空比。这对于检测和控制PWM信号的特性非常有用。</li><li><strong>主从触发模式</strong>：定时器可以配置为主从触发模式，其中一个定时器可以触发另一个定时器的捕获操作。这允许硬件全自动测量，特别是在多个定时器之间协同工作时。<img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/image-20230918101049347.png" alt="image-20230918101049347"></li></ol><p>总之，IC输入捕获模式是一种非常有用的功能，可以帮助MCU测量和监视外部事件的时间参数，从而实现各种应用，包括控制和传感器接口。</p><h2 id="7-1、频率测量"><a href="#7-1、频率测量" class="headerlink" title="7.1、频率测量"></a>7.1、频率测量</h2><p>这是关于频率测量方法中的测频法、测周法和中界频率的一些重要概念和公式：</p><ol><li><p><strong>测频法（Frequency Counting Method）</strong>：在测频法中，您测量在一个固定的时间间隔T内上升沿的数量N。然后，通过以下公式计算频率f：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fx = N / T</span><br></pre></td></tr></table></figure><p>这个方法适用于测量频率的应用，其中您知道测量时间T，并且您想要知道信号的频率。</p></li><li><p><strong>测周法（Period Counting Method）</strong>：在测周法中，您测量两个连续上升沿之间的时间间隔T，并且您知道一个已知的标准频率f。然后，通过以下公式计算频率f：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fx = fc / N</span><br></pre></td></tr></table></figure><p>这个方法适用于测量周期的应用，其中您知道一个已知频率的标准信号，然后测量要研究的信号的周期。</p></li><li><p><strong>中界频率（Intermediate Frequency，fm）</strong>：中界频率是指测频法和测周法误差相等的频率点。它可以使用以下公式计算：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fm = √(fc / T)</span><br></pre></td></tr></table></figure><ul><li>fm：中界频率</li><li>fc：测频法和测周法的误差频率</li><li>T：测量时间间隔</li></ul><p>中界频率对于理解在不同测量方法下频率测量的误差行为非常有用。在中界频率以下，测周法可能更准确，而在中界频率以上，测频法可能更准确。</p></li></ol><p>这些概念和公式可以帮助您更好地理解频率和周期测量方法以及它们之间的误差。选择适当的测量方法和理解误差行为对于准确测量频率和周期非常重要。</p><h1 id="8、编码器接口"><a href="#8、编码器接口" class="headerlink" title="8、编码器接口"></a>8、编码器接口</h1><p>Encoder Interface编码器接口</p><p>编码器接口可接收增量（正交）编码器的信号，根据编码器旋转产生正交信号脉冲，自动控制CNT自增或自减，从而指示编码器的位置、旋转方向和旋转速度</p><p>每个高级定时器和通用定时器都拥有1个编码器接口</p><p>两个输入引脚借用了输入捕获的通道1和通道2</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6、DMA直接存储器存取</title>
      <link href="/2023/09/18/%E7%89%A9%E8%81%94%E7%BD%91-STM32-6%E3%80%81DMA%E7%9B%B4%E6%8E%A5%E5%AD%98%E5%82%A8%E5%99%A8%E5%AD%98%E5%8F%96/"/>
      <url>/2023/09/18/%E7%89%A9%E8%81%94%E7%BD%91-STM32-6%E3%80%81DMA%E7%9B%B4%E6%8E%A5%E5%AD%98%E5%82%A8%E5%99%A8%E5%AD%98%E5%8F%96/</url>
      
        <content type="html"><![CDATA[<p>1、DMA（Direct Memory Access）直接存储器存取</p><p>数据转运小助手，协助CPU完成数据转运工作，DMA可以提供外设和存储器或者存储器和存储器之间的高速数据传输，无须CPU干预，节省了CPU的资源<br>外设：一般指的是外设的数据计算器DR，data register，比如ADC的数据寄存器、串口的数据寄存器等等，<br>存储器：运行内存SRAM和程序存储器Flash，是存储变量数组和程序代码的地方<br>2、12个独立可配置的通道： DMA1（7个通道）， DMA2（5个通道）</p><p>从一个地方移动到另一个地方，需要占用一个通道，DMA多通道进行运转时候，之间可以各转各的互不干扰<br>3、每个通道都支持软件触发和特定的硬件触发</p><p>若是存储器到存储器的数据转运，比如把flash里的一批数据转运到SRAM中去，就需要软件触发，触发后，DMA就会一股脑的转运，以最快的速度全部转运好<br>若是外设到存储器的数据转运，不能一股脑的转运，因为外设的数据是有一定时机的，需要硬件触发。比如转运ADC的数据，就得ADC每个通道AD转换完成后，硬件触发一次DMA，之后DMA再转运，触发一次转运一次,才能保证数据正确<br>特定的硬件触发：每个DMA的通道，它的硬件出发源是不一样的，当使用某个外设的硬件出发源，就得使用它连接的那个通道，而不能任意选择通道<br>4、STM32F103C8T6 DMA资源：DMA1（7个通道）</p><p>5、存储器映像</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/a93a9bc746344afbbe6212e383ccc146.png" alt="img"></p><p>（1）ROM(只读存储器)</p><p>一种非易失性、掉电不丢失的存储器<br>程序存储器flash(主闪存)的用途：存储c语言编译后的程序代码，也是下载程序的位置，运行程序一般也是从主闪存里面开始运行的，数据地址以0800开头的，为主闪存地址<br>系统存储器：BootLoader程序是芯片出厂自动写入的，一般不允许我们修改<br>选项字节：用于存储一些独立于程序代码的配置参数，位置是在ROM区的最后面，下载程序可以不刷新选项字节的内容，这样选项字节的配置就可以保持不变，选项字节里，存的主要是flash的读保护、写保护，还有看门狗等等的配置<br>（2）RAM(随机存储器)</p><p>一种易失性、掉电丢失的存储器<br>内核外设寄存器：内核外设就是NVIC和SysTick，内核外设和其他外设不是同个厂家设计的，所以地址被分开<br>6、寄存器读写</p><p>CPU/DMA直接访问Flash，是可以读不可写<br>SRAM是运行内存，可以任意读写<br>外设寄存器：看数据手册（数据寄存器是可以读写的）<br>7、DMA基本结构</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/e2e6488416744ea9b6d6a2ee4c1407d5.png" alt="img"></p><p> （1）两个站点：</p><p>外设寄存器站点（也是存储器，但是一般被叫做外设）<br>flash和SRAM存储器站点（stm32中存储器一般指flash和SRAM，不包含外设寄存器）<br>由于flash是只读的，所以只能是flash到SRAM的运转<br>（2）外设和存储器的三个参数</p><p>第一个是起始地址，有外设端的起始地址和存储器端的起始地址，这两个参数决定了数据是从哪里来，到哪里去的<br>第二个参数是数据宽度，指定一次转运要按多大的数据宽度来进行<br>字节Byte（8位，uint8_t）<br>半字节HalfWord（16位，uint16_t）<br>字Wold（32位，uint32_t）<br>第三个参数:地址是否自增，指定一次转运完成后，下一次转运是不是要把地址移动到下一个位置去，相当于是指针p++<br>比如ADC扫描模式用DMA进行数据转运，外设地址是ADC_DR寄存器，<br>外设寄存器地址不用自增，若自增，下次转运就跑到别的寄存器里了<br>存储器地址需要自增，没转运一个数据后，就往后挪，否则会把上次的数据覆盖掉<br>（3）两个站点的使用</p><p>如果是存储器到存储器的数据转运，需要把其中一个存储器的地址放在外设寄存器站点<br>外设寄存器只是个名字而已，可以写寄存器，如果写flash的地址，它就会去flash里找,写SRAM就会去SRAM里找<br>甚至可以两个站点换过来使用<br>（4）传输计数器</p><p>指定总共需要转运几次的，自减，例如写5，<br>DMA就只能进行5次数据转运，每转运一次减1，为0时，不再转运，之前自增的地址，会恢复到起始位置<br>（5）自动重装器</p><p>传输计数器减到0之后，是否要自动恢复到最初的值<br>若不使用，5次后结束，若使用，5次后，数据等于0时，立马重装成5，决定了单次还是循环模式，即重装则为循环（扫描模式加连续转换），不重装为单次<br>（6）DMA的触发控制</p><p>触发就是决定DMA需要在什么时机进行转运的。触发源有硬件触发和软件触发，<br>由M2M参数决定，1为软件触发，0为硬件触发<br>软件触发<br>以最快的速度，连续不断地触发DMA,争取早日把传输计数清0，完成这一轮转换（和循环模式同时使用，因为软件触发是清0，循环模式是清0后自动重装，同时用，DMA停不下来）<br>适用于存储器到存储器的转运，因为存储器到存储器的触发时软件启动、不需要时机、并且想尽快完成任务<br>硬件触发<br>硬件触发源可以选择ADC、串口收到数据、定时时间到等等，所以需要硬件触发<br>硬件达到时机时，传一个信号，来触发DMA进行转运<br>开关控制，给DMA使能后，DMA就准备就绪，可以进行转运<br>（7）DMA进行转运的条件</p><p>1、开关控制，DMA_Cmd必须使能<br>2、传输计数器必须大于0<br>3、触发源必须有触发信号，触发一次转运一次，传输计数器自减一次。当传输计数器等于0，且没有自动重装时，这时无论是否触发，DMA都不会再进行转运了<br>此时就需要DMA_Cmd给DISABLE,关闭DMA,再为传输计数器写一个大于0的数，在DMA_Cmd给Elable开启DMA，DMA才能继续工作，注意下写传输计数器时<br>必须要先关闭DMA再进行，不能在DMA开启时写传输计数器，这是手册里的规定</p><p>（8）DMA选择映象</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/a99db1b377dc45f593eb9c9ec283c44a.png" alt="img"></p><p> <img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/3cbc101b001d44a2b6d16819d2a78748.png" alt="img"></p><p>（9） 数据传输</p><p><img src="https://img-blog.csdnimg.cn/b33e5db447f441cca1814a1ca0c7858a.png" alt="img"></p><p>小的写到大的，补0，大的写到小的，高位舍弃掉 </p><p>8、数据转运+DMA</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/676994b5a3ed433290fab1335d5c0e16.png" alt="img"></p><p> 转运时，两边都要自增，要转运7次，所以传输计数器给7，自动重装暂时不需要，是存储器到存储器，要软件触发</p><p>9、ADC扫描模式+DMA</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/c85651d9b3d54ebd857ade3668b9c62e.png" alt="img"></p><p>触发后，7个通道依次进行AD转换，转换后的结果放在DC_DR数据寄存器中，在每个单独的通道转换完成后，进行一次DMA数据转运，并且目的地址进行自增，这样数据才不会覆盖<br>此时DMA的配置：<br>外设地址写着ADC_DR这个寄存器的地址<br>存储器的地址可以在SRAM中定一个数组ADValue<br>然后把ADValue的地址当做存储器的地址，之后数据宽度<br>因为ADValue和SRAM数组要的是unit16_t的数据,所以数据宽度都是16位的,即半字传输<br>外设地址不自增，存储器地址自增，传输方向为外设站点到存储器站点<br>传输计数器：计次7次，因为由7个通道<br>计数器是否自动重装，取决ADC的配置，ADC如果是单次扫描,DMA不自动重装，连续扫描，DMA就自动重装<br>在ADC启动下一轮转换的时候，DMA也启动下一轮的转运，ADC和DMA同步工作<br>触发选择：这里ADValue的值是在ADC单个通道转换完成后才会有效，所以转运DMA时机，需要和ADC单个通道转换完成同步,故DMA的触发要选择ADC的硬件触发<br>硬件触发：在每个单独的通道转换完成后，没有任何标志位也不会触发中断，程序不太好判断某一个通道转换完成的时间<br>但虽然单个通道转换完成后，不产生任何标志位和中断。但是可能会产生DMA请求，去触发DMA转运</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2、EXIT外部中断</title>
      <link href="/2023/09/11/%E7%89%A9%E8%81%94%E7%BD%91-STM32-2%E3%80%81EXIT%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD/"/>
      <url>/2023/09/11/%E7%89%A9%E8%81%94%E7%BD%91-STM32-2%E3%80%81EXIT%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD/</url>
      
        <content type="html"><![CDATA[<h1 id="stm32中断系统"><a href="#stm32中断系统" class="headerlink" title="stm32中断系统"></a>stm32中断系统</h1><h2 id="1、EXIT外部中断"><a href="#1、EXIT外部中断" class="headerlink" title="1、EXIT外部中断"></a>1、EXIT外部中断</h2><p>使用中断系统可以加大的提高程序的运行效率，如果没有中断系统，为了防止外部中断被忽略或者串口数据被覆盖，主程序就只能不断地查询是否有这些事件发生。</p><p>比如如果没有定时器中断，主程序只能使用delay函数，才能实现定时的功能。</p><p>有了中断系统后，主程序就可以放心执行其他事情，有中断的时候再去处理。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps40.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps41.jpg" alt="img"> </p><h3 id="1、抢占优先级和响应优先级："><a href="#1、抢占优先级和响应优先级：" class="headerlink" title="1、抢占优先级和响应优先级："></a>1、<strong>抢占优先级和响应优先级</strong>：</h3><h3 id=""><a href="#" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/ef6eed71a0d94d9b9f33fa4462870540.png" alt="img"></h3><ul><li>抢占优先级用于<strong>确定中断的重要性</strong>，较高的抢占优先级意味着中断可以中断当前正在执行的较低优先级中断。   </li><li>-响应优先级用于确定多个中断<strong>同时触发时的执行顺序</strong>。响应优先级高的中断会先执行，而响应优先级相同的中断会按照中断号顺序排队执行。</li></ul><h3 id="2、中断触发方式："><a href="#2、中断触发方式：" class="headerlink" title="2、中断触发方式："></a>2、<strong>中断触发方式</strong>：</h3><ul><li>上升沿触发：中断在引脚电平由低到高变化时触发。   </li><li>下降沿触发：中断在引脚电平由高到低变化时触发。   </li><li>双边沿触发：中断在引脚电平由低到高或由高到低变化时触发。   </li><li>软件触发：通过执行一句特定的代码来触发中断，通常使用类似于 <code>NVIC_SetPendingIRQ()</code> 的函数。 </li></ul><h3 id="3、触发响应方式："><a href="#3、触发响应方式：" class="headerlink" title="3、触发响应方式："></a>3、<strong>触发响应方式</strong>：</h3><ul><li>中断响应：中断触发后，中断服务程序执行，通常用于需要立即响应的事件。   </li><li>事件响应：事件触发后，不会引发中断，而是触发其他外设操作，如启动ADC转换或启动DMA传输。</li></ul><h3 id="4、注意事项："><a href="#4、注意事项：" class="headerlink" title="4、注意事项："></a>4、<strong>注意事项</strong>：</h3><ul><li>进入中断函数时，务必检查中断标志位以确定中断的原因。</li><li>中断服务函数应该执行简短和高效的代码，以尽快释放中断，并允许更高优先级的中断执行。</li><li>在中断服务函数退出时，通常需要清除中断标志位，以允许下一次中断触发</li></ul><p>通道数：16个GPIO_PIN、外加PVD输出、RTC闹钟、USB唤醒、以太网唤醒</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps42.jpg" alt="img"> </p><p>NVIC用于统一管理中断和分配中断优先级，属于内核外设，是CPU的小助手，可以让CPU专注于运算。相当于医院里的叫号系统(给病人进行排号，CPU相当于医生，只负责看病)。</p><h2 id="2、-NVIC优先级分组"><a href="#2、-NVIC优先级分组" class="headerlink" title="2、 NVIC优先级分组"></a>2、 NVIC优先级分组</h2><p>优先级：抢占优先级、响应优先级。</p><p>NVIC的中断优先级由优先级寄存器的4位（0~15）决定，这4位可以进行切分，分为高n位的抢占优先级和低4-n位的响应优先级(插队)</p><p>抢占优先级高的可以中断嵌套，响应优先级高的可以优先排队，抢占优先级和响应优先级均相同的按中断号排队</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps43.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps44.jpg" alt="img"> </p><p>如果中断不多，很难导致中断冲突时，可以随意选择优先级分组，那个都行。</p><h2 id="3、-EXIT-Extern-Interrupt-外部中断"><a href="#3、-EXIT-Extern-Interrupt-外部中断" class="headerlink" title="3、 EXIT(Extern Interrupt)外部中断"></a>3、 EXIT(Extern Interrupt)外部中断</h2><h3 id="1、基本功能："><a href="#1、基本功能：" class="headerlink" title="1、基本功能："></a>1、<strong>基本功能</strong>：</h3><p>EXTI 的主要功能是检测连接到微控制器引脚的电平变化，并在特定条件下触发中断。它允许您实时响应外部事件，如按钮按下或传感器状态变化。 </p><h3 id="2、支持的GPIO口："><a href="#2、支持的GPIO口：" class="headerlink" title="2、支持的GPIO口："></a>2、<strong>支持的GPIO口</strong>：</h3><p>所有 GPIO 口，但相同的 Pin （例如 PA1 、 PB1 、 PC1 等 ）不能 同时触发中断</p><h3 id="3、通道数："><a href="#3、通道数：" class="headerlink" title="3、通道数："></a>3、<strong>通道数</strong>：</h3><p><strong>16个GPIO_Pin</strong> ，外加 PVD 输出、 RTC 闹钟、 USB 唤醒、以太网 唤醒（一共 20 个）</p><h3 id="4、EXTI-基本结构："><a href="#4、EXTI-基本结构：" class="headerlink" title="4、EXTI 基本结构："></a>4、<strong>EXTI 基本结构</strong>：</h3><p>您提供的示意图展示了 EXTI 的基本结构。它包括了多个通道，每个通道对应一个 GPIO 引脚。当引脚状态变化时，相应的 EXTI 通道会触发中断。 </p><h3 id="5、-AFIO-中断引脚选择："><a href="#5、-AFIO-中断引脚选择：" class="headerlink" title="5、 AFIO 中断引脚选择："></a>5、 <strong>AFIO 中断引脚选择</strong>：</h3><p>AFIO（Alternate Function Input Output）是用于配置微控制器引脚的外设。在配置 EXTI 时，您可以选择将特定的 GPIO 引脚连接到 EXTI 通道。这允许您灵活地选择要触发中断的引脚。</p><p>EXIT基本结构：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps45.jpg" alt="img"> </p><p>AFIO中断引脚选择：在GPIO(A~G)外设的16个GPIO_Pin中选择一个连接到后面的EXIT的通道里。</p><h2 id="4、-常用的触发外部中断的硬件模块"><a href="#4、-常用的触发外部中断的硬件模块" class="headerlink" title="4、 常用的触发外部中断的硬件模块"></a>4、 常用的触发外部中断的硬件模块</h2><p>对于STM32来说，想要获取的信号是外部驱动的很快的突发信号，但是又不需要一直进行检测。</p><p>不需要经常使用、不需要一直检测的模块：</p><ol><li><p>按键(注意抖动问题)，不推荐，可以使用定时器中断</p></li><li><p>旋转编码器</p></li><li><p>红外遥控接收器</p></li></ol><h2 id="5、-外部中断程序设计步骤"><a href="#5、-外部中断程序设计步骤" class="headerlink" title="5、 外部中断程序设计步骤"></a>5、 外部中断程序设计步骤</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps46.jpg" alt="img"> </p><p>涉及到的外设：RCC、GPIO、AFIO、EXTI、NVIC</p><h3 id="1、如何设置外部中断-EXTI"><a href="#1、如何设置外部中断-EXTI" class="headerlink" title="1、如何设置外部中断 (EXTI)"></a>1、如何设置外部中断 (EXTI)</h3><ol><li><p>打开RCC时钟： 在使用任何外设之前，需要确保相应的外设时钟已打开。在这种情况下，您打开了RCC (Reset and Clock Control) 时钟，它是控制各种外设时钟的关键。没有时钟，外设无法正常工作。</p></li><li><p>配置GPIO： 在使用外部中断之前，需要选择一个GPIO端口，并将其配置为输入模式。输入模式的配置可以是浮空（不连接到任何电平）、上拉（连接到高电平）或下拉（连接到低电平），具体取决于应用的要求。</p></li><li>配置AFIO： AFIO (Alternate Function I/O) 控制着GPIO引脚的复用功能。在这一步中，您选择了使用的GPIO并将其连接到后面的EXTI模块，以允许GPIO引脚触发外部中断。</li><li>配置EXTI： 外部中断线 (EXTI) 控制着外部中断的触发和响应方式。您需要选择外部中断触发的方式，例如上升沿、下降沿或双边沿触发。通常，中断触发方式应根据应用的需求来选择。此外，您还可以选择中断响应方式，一般选择中断响应以触发中断处理函数。</li><li>配置NVIC： NVIC (Nested Vectored Interrupt Controller) 用于配置中断优先级和中断的全局控制。在这一步中，您可以为外部中断选择一个合适的优先级，以确定它在中断处理器中的相对重要性。抢占优先级和响应优先级的选择可以确保在多个中断同时发生时，系统可以正确地处理它们。</li></ol><p><strong>配置完之后，写中断执行函数</strong>：</p><p>在STM32中，中断函数的名字都是固定的，每个中断通道都对应一个中断函数。</p><p>中断函数的名字可以参考启动文件中的“stratup_stm32f10x_md文件</p><p>配置AFIO相关函数</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps47.jpg" alt="img"> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void GPIO_PinRemapConfig(uint32_t GPIO_Remap, FunctionalState NewState);</span><br></pre></td></tr></table></figure><p>参数1：选择重映射方式</p><p>参数2：新的状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void GPIO_EXTILineConfig(uint8_t GPIO_PortSource, uint8_t GPIO_PinSource);</span><br></pre></td></tr></table></figure><p>配置AFIO的数据选择器，来选择想要的中断引脚</p><p>注意：主函数和中断函数不要操控同一个硬件(比如OLED显示)，避免不必要的冲突，中断函数只执行突发的事件，需要快速的执行，如操作变量、中断标志位。</p><h3 id="2、一般步骤："><a href="#2、一般步骤：" class="headerlink" title="2、一般步骤："></a>2、一般步骤：</h3><p>要使用 EXTI（External Interrupt，外部中断）来检测和响应外部事件，您需要遵循以下一般步骤：</p><ol><li><p><strong>配置引脚</strong>：</p><ul><li>首先，您需要选择要配置为 EXTI 中断触发源的 GPIO 引脚。这可以通过将引脚模式配置为输入和选择触发方式来实现。通常，上升沿或下降沿触发是常见的配置。</li><li>如果您使用的是 STM32 系列的微控制器，通常需要使用 GPIO 初始化函数来配置引脚，如 <code>GPIO_Init()</code>。</li></ul></li><li><p><strong>配置 EXTI</strong>：</p><ul><li>接下来，您需要配置 EXTI 外部中断。在 STM32 等微控制器中，这通常涉及到以下步骤：<ul><li>选择 EXTI 通道，通常与要配置的引脚对应。</li><li>配置触发方式，选择上升沿、下降沿或其他方式。</li><li>使能 EXTI 中断。</li></ul></li></ul></li><li><p><strong>编写中断处理程序</strong>：</p><ul><li>为了响应 EXTI 中断触发，您需要编写中断处理程序。这个程序会在外部事件触发时执行。</li><li>在中断处理程序中，您可以执行与事件相关的操作，例如读取传感器数据、处理按钮按下事件等。</li></ul></li><li><p><strong>配置中断优先级</strong>（可选）：</p><ul><li>如果系统中有多个中断源，您可能需要配置中断优先级以确定执行顺序。通常，您可以使用中断控制器（如 NVIC，在 STM32 中）来配置中断优先级。</li></ul></li><li><p><strong>清除中断标志位</strong>：</p><ul><li>在中断处理程序中，通常需要清除 EXTI 的中断标志位，以允许下一个触发。这可以通过写入特定的寄存器来实现。</li></ul></li><li><p><strong>启用全局中断</strong>：</p><ul><li>最后，在主程序的入口点，通常需要启用全局中断以允许所有中断触发。这可以通过使用 <code>__enable_irq()</code> 或类似的函数来实现。</li></ul></li></ol><p>以下是一个典型的 STM32 的 EXTI 配置示例，假设要配置 PA0 引脚上升沿触发的外部中断：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 步骤1: 配置引脚</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE); </span><br><span class="line"><span class="comment">// 使能 GPIOA 时钟</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING; </span><br><span class="line"><span class="comment">// 输入浮空模式</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;</span><br><span class="line"><span class="comment">// 配置 PA0 引脚</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤2: 配置 EXTI</span></span><br><span class="line">EXTI_InitTypeDef EXTI_InitStructure;</span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE); </span><br><span class="line"><span class="comment">// 使能 AFIO 时钟</span></span><br><span class="line">GPIO_EXTILineConfig(GPIO_PortSourceGPIOA, GPIO_PinSource0); </span><br><span class="line"><span class="comment">// 配置 EXTI 到 PA0</span></span><br><span class="line">EXTI_InitStructure.EXTI_Line = EXTI_Line0; </span><br><span class="line"><span class="comment">// EXTI0 通道</span></span><br><span class="line">EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt; </span><br><span class="line"><span class="comment">// 中断模式</span></span><br><span class="line">EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Rising; </span><br><span class="line"><span class="comment">// 上升沿触发</span></span><br><span class="line">EXTI_InitStructure.EXTI_LineCmd = ENABLE; </span><br><span class="line"><span class="comment">// 使能 EXTI0</span></span><br><span class="line">EXTI_Init(&amp;EXTI_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤3: 编写中断处理程序</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI0_IRQHandler</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 在此处编写中断处理程序，响应外部事件</span></span><br><span class="line">    <span class="comment">// 例如，您可以执行读取传感器数据的操作</span></span><br><span class="line"></span><br><span class="line">    EXTI_ClearITPendingBit(EXTI_Line0); </span><br><span class="line">    <span class="comment">// 清除中断标志位</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤4: 配置中断优先级 (可选)</span></span><br><span class="line">NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannel = EXTI0_IRQn; </span><br><span class="line"><span class="comment">// EXTI0 中断通道</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">0x00</span>; </span><br><span class="line"><span class="comment">// 抢占优先级</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">0x01</span>; </span><br><span class="line"><span class="comment">// 响应优先级</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; </span><br><span class="line"><span class="comment">// 使能中断通道</span></span><br><span class="line">NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤5: 启用全局中断</span></span><br><span class="line">__enable_irq();</span><br></pre></td></tr></table></figure><p>这个示例配置了 PA0 引脚上升沿触发的 EXTI 中断，当 PA0 引脚状态从低电平变为高电平时，将触发中断处理程序 <code>EXTI0_IRQHandler</code>。中断处理程序中的代码可根据外部事件的需要自定义。</p><h3 id="3、GPIO中断输入输出函数"><a href="#3、GPIO中断输入输出函数" class="headerlink" title="3、GPIO中断输入输出函数"></a>3、GPIO中断输入输出函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  锁定指定的GPIO引脚配置，防止进一步更改。</span></span><br><span class="line"><span class="comment">  * @param  GPIOx: 要锁定的GPIO端口。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_Pin: 要锁定的GPIO引脚。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_PinLockConfig</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置外部中断的事件输出功能，通常用于触发外部事件。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_PortSource: 事件输出的源GPIO端口。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_PinSource: 事件输出的源GPIO引脚。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_EventOutputConfig</span><span class="params">(<span class="type">uint8_t</span> GPIO_PortSource, <span class="type">uint8_t</span> GPIO_PinSource)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  启用或禁用外部中断的事件输出功能。</span></span><br><span class="line"><span class="comment">  * @param  NewState: 事件输出功能的新状态（ENABLE或DISABLE）。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_EventOutputCmd</span><span class="params">(FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置GPIO引脚重映射，允许将一个引脚映射到另一个引脚。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_Remap: GPIO引脚重映射配置。</span></span><br><span class="line"><span class="comment">  * @param  NewState: 重映射功能的新状态（ENABLE或DISABLE）。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_PinRemapConfig</span><span class="params">(<span class="type">uint32_t</span> GPIO_Remap, FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置外部中断线映射，将指定的GPIO引脚映射到外部中断线上。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_PortSource: 外部中断线映射的源GPIO端口。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_PinSource: 外部中断线映射的源GPIO引脚。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_EXTILineConfig</span><span class="params">(<span class="type">uint8_t</span> GPIO_PortSource, <span class="type">uint8_t</span> GPIO_PinSource)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置以太网接口的媒体类型（例如，RMII或MII）。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_ETH_MediaInterface: 以太网媒体接口类型配置。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_ETH_MediaInterfaceConfig</span><span class="params">(<span class="type">uint32_t</span> GPIO_ETH_MediaInterface)</span>;</span><br></pre></td></tr></table></figure><h3 id="4、配置AFIO外部中断引脚选择"><a href="#4、配置AFIO外部中断引脚选择" class="headerlink" title="4、配置AFIO外部中断引脚选择"></a>4、配置AFIO外部中断引脚选择</h3><p>这段代码是用于配置外部中断线映射的函数。外部中断线映射允许将特定的GPIO引脚映射到外部中断线上，从而使这些引脚能够触发外部中断。以下是对该函数的注释和解释：</p><p>调用这个函数，就可以配置AFIO的数据选择器，来选择我们想要的中断引脚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置外部中断线映射，将指定的GPIO引脚映射到外部中断线上。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_PortSource: 外部中断线映射的源GPIO端口。</span></span><br><span class="line"><span class="comment">  * @param  GPIO_PinSource: 外部中断线映射的源GPIO引脚。</span></span><br><span class="line"><span class="comment">  * @retval 无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_EXTILineConfig</span><span class="params">(<span class="type">uint8_t</span> GPIO_PortSource, <span class="type">uint8_t</span> GPIO_PinSource)</span>;</span><br></pre></td></tr></table></figure><ul><li><code>GPIO_PortSource</code> 参数用于指定外部中断线映射的源GPIO端口。这是一个数字，表示GPIO端口，例如，如果要映射的引脚属于GPIOA，则该参数为 <code>GPIO_PortSource = GPIO_PortSourceGPIOA</code>。</li><li><code>GPIO_PinSource</code> 参数用于指定外部中断线映射的源GPIO引脚。这是一个数字，表示要映射的GPIO引脚的位置，例如，如果要映射的引脚是GPIOA的第2号引脚，则该参数为 <code>GPIO_PinSource = GPIO_PinSource2</code>。</li></ul><p>通过调用此函数，您可以配置外部中断线映射，以便将特定GPIO引脚与外部中断相关联。这使得在满足外部中断触发条件时，可以触发相应的中断处理程序。在配置外部中断时，通常需要使用此函数来设置引脚到外部中断线的映射关系。</p><h2 id="6、配置EXTI"><a href="#6、配置EXTI" class="headerlink" title="6、配置EXTI"></a>6、配置EXTI</h2><h3 id="1、EXTI库函数"><a href="#1、EXTI库函数" class="headerlink" title="1、EXTI库函数"></a>1、EXTI库函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  将外部中断模块的配置恢复为默认值。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_DeInit</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  初始化外部中断模块。</span></span><br><span class="line"><span class="comment">  * @param  EXTI_InitStruct: 包含外部中断配置的结构体指针。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_Init</span><span class="params">(EXTI_InitTypeDef* EXTI_InitStruct)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  将外部中断配置结构体初始化为默认值。</span></span><br><span class="line"><span class="comment">  * @param  EXTI_InitStruct: 要初始化的外部中断配置结构体指针。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_StructInit</span><span class="params">(EXTI_InitTypeDef* EXTI_InitStruct)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  生成软件触发的外部中断。</span></span><br><span class="line"><span class="comment">  * @param  EXTI_Line: 要生成中断的外部中断线。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_GenerateSWInterrupt</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br><span class="line"><span class="comment">//主程序：</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  检查指定外部中断线的中断标志位是否已设置。</span></span><br><span class="line"><span class="comment">  * @param  EXTI_Line: 要检查的外部中断线。</span></span><br><span class="line"><span class="comment">  * @retval 设置标志位的状态 (SET或RESET)。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">FlagStatus <span class="title function_">EXTI_GetFlagStatus</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  清除指定外部中断线的中断标志位。</span></span><br><span class="line"><span class="comment">  * @param  EXTI_Line: 要清除标志位的外部中断线。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_ClearFlag</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br><span class="line"><span class="comment">//中断程序：</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  检查指定外部中断线的中断挂起位是否已设置。</span></span><br><span class="line"><span class="comment">  * @param  EXTI_Line: 要检查的外部中断线。</span></span><br><span class="line"><span class="comment">  * @retval 挂起位的状态 (SET或RESET)。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">ITStatus <span class="title function_">EXTI_GetITStatus</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  清除指定外部中断线的中断挂起位。</span></span><br><span class="line"><span class="comment">  * @param  EXTI_Line: 要清除挂起位的外部中断线。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_ClearITPendingBit</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br></pre></td></tr></table></figure><h2 id="7、配置NVIC"><a href="#7、配置NVIC" class="headerlink" title="7、配置NVIC"></a>7、配置NVIC</h2><p>以下是对这些函数的代码注释解释：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置中断优先级分组。</span></span><br><span class="line"><span class="comment">  * @param  NVIC_PriorityGroup: 中断优先级分组，可以是 NVIC_PriorityGroup_x 中的一个值。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">NVIC_PriorityGroupConfig</span><span class="params">(<span class="type">uint32_t</span> NVIC_PriorityGroup)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  初始化中断控制器 (NVIC) 寄存器。</span></span><br><span class="line"><span class="comment">  * @param  NVIC_InitStruct: 包含中断控制器配置信息的结构体指针。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">NVIC_Init</span><span class="params">(NVIC_InitTypeDef* NVIC_InitStruct)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置向量表的基地址和偏移量。</span></span><br><span class="line"><span class="comment">  * @param  NVIC_VectTab: 向量表的基地址，可以是 NVIC_VectTab_RAM 或 NVIC_VectTab_FLASH。</span></span><br><span class="line"><span class="comment">  * @param  Offset: 向量表偏移量。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">NVIC_SetVectorTable</span><span class="params">(<span class="type">uint32_t</span> NVIC_VectTab, <span class="type">uint32_t</span> Offset)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置系统低功耗模式。</span></span><br><span class="line"><span class="comment">  * @param  LowPowerMode: 低功耗模式，可以是 SysTick_CLKSource_HCLK_Div8 或 SysTick_CLKSource_HCLK。</span></span><br><span class="line"><span class="comment">  * @param  NewState: 新状态，可以是 ENABLE（启用）或 DISABLE（禁用）。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">NVIC_SystemLPConfig</span><span class="params">(<span class="type">uint8_t</span> LowPowerMode, FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  配置SysTick定时器的时钟源。</span></span><br><span class="line"><span class="comment">  * @param  SysTick_CLKSource: SysTick定时器的时钟源，可以是 SysTick_CLKSource_HCLK 或 SysTick_CLKSource_HCLK_Div8。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">SysTick_CLKSourceConfig</span><span class="params">(<span class="type">uint32_t</span> SysTick_CLKSource)</span>;</span><br></pre></td></tr></table></figure><p>这些函数用于配置和管理中断控制器 (NVIC) 和系统滴答定时器 (SysTick)。以下是它们的简要解释：</p><ul><li><code>NVIC_PriorityGroupConfig</code> 用于配置中断优先级分组，这是为了确定中断的优先级管理方式。</li><li><code>NVIC_Init</code> 用于初始化中断控制器的寄存器，配置中断的优先级和其他设置。</li><li><code>NVIC_SetVectorTable</code> 用于配置向量表的基地址和偏移量，这是中断处理程序的入口。</li><li><code>NVIC_SystemLPConfig</code> 用于配置系统低功耗模式，以降低系统功耗。</li><li><code>SysTick_CLKSourceConfig</code> 用于配置 SysTick 定时器的时钟源，以控制其工作时钟。</li></ul><p>这些函数通常在初始化阶段用于配置系统的中断和定时器设置，以满足应用程序的需求。确保查阅您使用的STM32系列的参考手册和文档，以获取详细的配置信息和示例代码。</p><h2 id="8、红外传感器中断计次"><a href="#8、红外传感器中断计次" class="headerlink" title="8、红外传感器中断计次"></a>8、红外传感器中断计次</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">uint16_t</span> CountSensor_Count; <span class="comment">// 存储传感器计数值的变量</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">CountSensor_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 使能GPIOB和AFIO时钟</span></span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置GPIOB引脚14为上拉输入模式</span></span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;</span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_14;</span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">    GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置外部中断线，将GPIOB引脚14与外部中断线14相关联</span></span><br><span class="line">    GPIO_EXTILineConfig(GPIO_PortSourceGPIOB, GPIO_PinSource14);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置外部中断线14，触发方式为下降沿触发</span></span><br><span class="line">    EXTI_InitTypeDef EXTI_InitStructure;</span><br><span class="line">    EXTI_InitStructure.EXTI_Line = EXTI_Line14;</span><br><span class="line">    EXTI_InitStructure.EXTI_LineCmd = ENABLE;</span><br><span class="line">    EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;</span><br><span class="line">    EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling;</span><br><span class="line">    EXTI_Init(&amp;EXTI_InitStructure);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置中断分组为优先级组2</span></span><br><span class="line">    NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置外部中断的中断处理函数和中断优先级</span></span><br><span class="line">    NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = EXTI15_10_IRQn; <span class="comment">// 对应外部中断线15-10</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">1</span>; <span class="comment">// 抢占优先级1</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">1</span>; <span class="comment">// 响应优先级1</span></span><br><span class="line">    NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">CountSensor_Get</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> CountSensor_Count; <span class="comment">// 返回传感器计数值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI15_10_IRQHandler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (EXTI_GetITStatus(EXTI_Line14) == SET)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 如果外部中断14触发（引脚电平下降）</span></span><br><span class="line">        <span class="keyword">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_14) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 如果引脚电平为低（确保不是抖动），增加计数值</span></span><br><span class="line">            CountSensor_Count++;</span><br><span class="line">        &#125;</span><br><span class="line">        EXTI_ClearITPendingBit(EXTI_Line14); <span class="comment">// 清除中断标志位</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1、实现逻辑"><a href="#1、实现逻辑" class="headerlink" title="1、实现逻辑"></a>1、实现逻辑</h3><p>这段代码初始化了一个外部传感器计数功能。具体注释如下：</p><ul><li><p><code>CountSensor_Count</code> 是用来存储传感器计数值的变量。</p></li><li><p><code>CountSensor_Init</code> 函数用于初始化外部传感器。它执行以下步骤：</p><ul><li>使能 <code>GPIOB</code> 和 <code>AFIO</code> 时钟。</li><li>配置 <code>GPIOB</code> 引脚14为上拉输入模式，这个引脚用于连接传感器。</li><li>配置外部中断线，将 <code>GPIOB</code> 引脚14与外部中断线14关联起来。</li><li>配置外部中断线14的触发方式为下降沿触发，表示当引脚电平从高变为低时触发中断。</li><li>配置中断分组为优先级组2，允许设置中断的抢占优先级和响应优先级。</li><li>配置外部中断的中断处理函数和中断优先级。</li></ul></li><li><p><code>CountSensor_Get</code> 函数用于获取传感器的计数值，并返回该值。</p></li><li><p><code>EXTI15_10_IRQHandler</code> 是外部中断的中断处理函数。当外部中断14触发时（引脚电平下降），该函数会被调用。在函数内部，它会检查引脚的电平，如果电平为低（确保不是抖动），则增加 <code>CountSensor_Count</code> 计数值。最后，它会清除中断标志位，以表示已经处理了中断。</p></li></ul><h2 id="9、旋转编码器计次"><a href="#9、旋转编码器计次" class="headerlink" title="9、旋转编码器计次"></a>9、旋转编码器计次</h2><p>这段代码是用于处理编码器的输入信号，并实时计算编码器的计数值。下面是对这段代码的详细注释：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span> <span class="comment">// 包含STM32的库文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int16_t</span> Encoder_Count; <span class="comment">// 定义一个16位整数用于存储编码器计数值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 编码器初始化函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Encoder_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE); </span><br><span class="line">    <span class="comment">// 打开GPIOB时钟</span></span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE); </span><br><span class="line">    <span class="comment">// 打开AFIO时钟</span></span><br><span class="line"></span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure; </span><br><span class="line">    <span class="comment">// 定义GPIO初始化结构体</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU; </span><br><span class="line">    <span class="comment">// 配置GPIO引脚为上拉输入模式</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_1; </span><br><span class="line">    <span class="comment">// 配置GPIO引脚0和1</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">    GPIO_Init(GPIOB, &amp;GPIO_InitStructure); </span><br><span class="line">    <span class="comment">// 初始化GPIOB</span></span><br><span class="line"></span><br><span class="line">    GPIO_EXTILineConfig(GPIO_PortSourceGPIOB, GPIO_PinSource0); </span><br><span class="line">    <span class="comment">// 配置GPIO引脚0连接到外部中断线</span></span><br><span class="line">    GPIO_EXTILineConfig(GPIO_PortSourceGPIOB, GPIO_PinSource1); </span><br><span class="line">    <span class="comment">// 配置GPIO引脚1连接到外部中断线</span></span><br><span class="line"></span><br><span class="line">    EXTI_InitTypeDef EXTI_InitStructure; </span><br><span class="line">    <span class="comment">// 定义外部中断初始化结构体</span></span><br><span class="line">    EXTI_InitStructure.EXTI_Line = EXTI_Line0 | EXTI_Line1; </span><br><span class="line">    <span class="comment">// 配置外部中断线0和1</span></span><br><span class="line">    EXTI_InitStructure.EXTI_LineCmd = ENABLE; </span><br><span class="line">    <span class="comment">// 使能外部中断线0和1</span></span><br><span class="line">    EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt; </span><br><span class="line">    <span class="comment">// 配置中断模式</span></span><br><span class="line">    EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling; </span><br><span class="line">    <span class="comment">// 配置下降沿触发</span></span><br><span class="line">    EXTI_Init(&amp;EXTI_InitStructure); </span><br><span class="line">    <span class="comment">// 初始化外部中断</span></span><br><span class="line"></span><br><span class="line">    NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2); </span><br><span class="line">    <span class="comment">// 配置中断优先级分组</span></span><br><span class="line"></span><br><span class="line">    NVIC_InitTypeDef NVIC_InitStructure; </span><br><span class="line">    <span class="comment">// 定义NVIC初始化结构体</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = EXTI0_IRQn; </span><br><span class="line">    <span class="comment">// 配置外部中断0通道</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; </span><br><span class="line">    <span class="comment">// 使能外部中断0通道</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">1</span>; </span><br><span class="line">    <span class="comment">// 设置抢占优先级</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">1</span>; </span><br><span class="line">    <span class="comment">// 设置响应优先级</span></span><br><span class="line">    NVIC_Init(&amp;NVIC_InitStructure); </span><br><span class="line">    <span class="comment">// 初始化NVIC</span></span><br><span class="line"></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = EXTI1_IRQn; </span><br><span class="line">    <span class="comment">// 配置外部中断1通道</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; </span><br><span class="line">    <span class="comment">// 使能外部中断1通道</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">1</span>; </span><br><span class="line">    <span class="comment">// 设置抢占优先级</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">2</span>; </span><br><span class="line">    <span class="comment">// 设置响应优先级</span></span><br><span class="line">    NVIC_Init(&amp;NVIC_InitStructure); </span><br><span class="line">    <span class="comment">// 初始化NVIC</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取编码器计数值的函数</span></span><br><span class="line"><span class="type">int16_t</span> <span class="title function_">Encoder_Get</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int16_t</span> Temp;</span><br><span class="line">    Temp = Encoder_Count;</span><br><span class="line">    Encoder_Count = <span class="number">0</span>; </span><br><span class="line">    <span class="comment">// 清零计数值并返回</span></span><br><span class="line">    <span class="keyword">return</span> Temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理外部中断0的中断服务函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI0_IRQHandler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (EXTI_GetITStatus(EXTI_Line0) == SET)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 如果外部中断0被触发</span></span><br><span class="line">        <span class="keyword">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_0) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_1) == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Encoder_Count--; <span class="comment">// 编码器逆时针旋转</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        EXTI_ClearITPendingBit(EXTI_Line0); <span class="comment">// 清除中断标志位</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理外部中断1的中断服务函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI1_IRQHandler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (EXTI_GetITStatus(EXTI_Line1) == SET)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 如果外部中断1被触发</span></span><br><span class="line">        <span class="keyword">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_1) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_0) == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Encoder_Count++; <span class="comment">// 编码器顺时针旋转</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        EXTI_ClearITPendingBit(EXTI_Line1); <span class="comment">// 清除中断标志位</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1、实现逻辑-1"><a href="#1、实现逻辑-1" class="headerlink" title="1、实现逻辑"></a>1、实现逻辑</h3><p>这段代码设置了两个外部中断线，用于处理编码器的输入信号。在外部中断触发时，会根据按钮的状态（旋转编码器的状态为双向滞后九十度的电平信号，通过判断高低电平分辨正负）递增或递减编码器的计数值。外部中断0用于逆时针旋转，而外部中断1用于顺时针旋转。每次中断触发后，计数值会被清零，以便进行下一轮计数。这个示例展示了如何使用外部中断来处理实际硬件输入，并在中断服务函数中更新相关的计数值。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python学习路线</title>
      <link href="/2023/09/10/%E5%90%8E%E7%AB%AF-Python%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"/>
      <url>/2023/09/10/%E5%90%8E%E7%AB%AF-Python%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="Python学习路线"><a href="#Python学习路线" class="headerlink" title="Python学习路线"></a>Python学习路线</h1><blockquote><p>这份学习路线并不完美，也不会有最终形态，正如 Python 不可预见、永无止境的未来。</p></blockquote><p>在看路线前，建议大家先通过以下视频了解几个问题：</p><ul><li>Python 为什么这么火？</li><li>为什么都在说学 Python 找不到工作？Python 真香么？</li><li>我要学 Python 么？</li><li>怎么快速学习？</li></ul><p>视频地址：<a href="https://www.bilibili.com/video/BV133411C7u5/">https://www.bilibili.com/video/BV133411C7u5/</a></p><h2 id="Python-为什么火了？"><a href="#Python-为什么火了？" class="headerlink" title="Python 为什么火了？"></a>Python 为什么火了？</h2><p>有很多原因，列举几点：</p><ol><li>语法简单易学，其他语言 5 行代码才能实现的东西，Python 一行搞定！可以少写很多代码，因此不少同学拿 Python 刷算法题（但注意要理解算法本身哦）。</li><li>类库生态丰富，想做什么功能基本都有现成的代码，拿来直接用就行，无比方便！</li><li>免费开源，感兴趣、有能力的同学可以自己去研究源码。</li><li>其他特性，比如跨平台、可扩展等。</li><li>作为数据科学、人工智能的首选语言，踩到了时代的风口。</li></ol><p>于是乎，Python 被推向了神坛，甚至在 2021 年 10 月的编程语言排行榜中，Python 登上了第一位！</p><p><a href="https://qiniuyun.code-nav.cn/image-20211009115608685.png"><img src="https://qiniuyun.code-nav.cn/image-20211009115608685.png" alt="TIOBE 编程语言排行榜"></a></p><p>但就是这样一门 “永远的神” 的编程语言，却在网上被口口相传说：学了 Python 找不到工作！</p><p>哎，为啥呢？</p><h2 id="为什么-Python-不适合找工作？"><a href="#为什么-Python-不适合找工作？" class="headerlink" title="为什么 Python 不适合找工作？"></a>为什么 Python 不适合找工作？</h2><p>一方面是，大多数的企业，都不用 Python 来开发应用。</p><p>因为 Python 的运行速度太慢了，别说跟底层的 C++ 比了，Java 都能甩它几条街！而且这和语言本身的设计实现有关，所以哪怕你再出什么技术去优化它的性能，也终究有个瓶颈，世界上最好的语言 PHP 也是一样。</p><p>而对企业来说，<strong>性能</strong> 会直接影响用户体验和机器成本，尤其是在这个信息爆炸、大家都在追求性能的时代，Python 在应用开发领域的地位就很尴尬，而开发岗又正好是程序员中占比极高的岗位。</p><p>另一方面，虽然 Python 的应用场景很多、相关岗位也不少，又是什么 AI、数据科学的主流语言是吧，未来很美好。但是，这些前沿技术的难点并不是 Python 语言的代码本身，而是算法和思想。Python 只是一个调包、把你思想表达出来的工具而已。所以这些前沿岗位的门槛远比你入门 Python、或者听培训机构画饼时要高的多，算法岗位、大厂的产品岗真就是神仙打架，而且研究生居多。</p><h2 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h2><p>既然这样，那我还要不要学 Python 呢？</p><p>我认为：<strong>必须要学！</strong></p><p>但是，一定要先思考自己的学习目标，目标不同，对 Python 的学习态度和投入的时间也不同。</p><p>如果想找开发岗位的工作，像上面说的，不建议把 Python 作为你的主语言，而是把它当做你的副武器。只需简单学学 Python 基础，就可以编写 Python 脚本来自动化办公、提高工作效率、做一些小工具了，性价比很高。</p><p><strong>如果说编程语言是工具，那 Python 是对这句话的完美诠释。</strong> 多会用一个神器，谁不爱呢？</p><p>如果你想找其他岗位的工作，比如运维、测试、数据分析、产品经理、大数据、爬虫、人工智能、图像处理、多媒体处理、算法研究，当然也可以，只是如果以这些岗位为目标，除了要打好 Python 基础外，更重要的是理解对应领域的思想、方法和实践，而不是只会引库调包。</p><p>如果你是初学编程或者出于好奇学编程，我也建议你学 Python，好玩、能学下去、能培养兴趣，这些对初学者非常重要，有了兴趣之后，再学别的语言就会如鱼得水。</p><h2 id="学习建议"><a href="#学习建议" class="headerlink" title="学习建议"></a>学习建议</h2><p>对于初学者和非 Python 岗位的从业者，就把 Python 当工具学，了解下基础语法和常用类库，需要写 Python 脚本时，能利用搜索引擎和文档写出（或者复制）代码就行。只要你学过其他编程语言，上手 Python 真的都很容易，3 - 7 天就能学会。</p><p>建议学习时多写些小例子，比如 Python 处理表格、Python 处理 PDF 等，感受 Python 类库的强大就完事儿~</p><h2 id="学习路线大纲"><a href="#学习路线大纲" class="headerlink" title="学习路线大纲"></a>学习路线大纲</h2><p>折叠了一部分，还是老长，<strong>思维导图获取见文末</strong> ：</p><p><a href="https://qiniuyun.code-nav.cn/img/鱼皮 - Python 学习路线.png"><img src="https://qiniuyun.code-nav.cn/img/%E9%B1%BC%E7%9A%AE%20-%20Python%20%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.png" alt="鱼皮 - Python 学习路线"></a></p><h2 id="学习路线"><a href="#学习路线" class="headerlink" title="学习路线"></a>学习路线</h2><h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><ul><li>Python 安装</li><li>开发工具<ul><li>PyCharm</li><li>Sublime</li><li>VS Code</li></ul></li><li>变量<ul><li>定义变量</li><li>关键字</li><li>命名规则</li><li>基本数据类型</li><li>类型转换</li></ul></li><li>运算符和表达式</li><li>流程控制<ul><li>条件分支</li><li>循环</li></ul></li><li>基本数据结构<ul><li>字符串</li><li>列表</li><li>元组</li><li>集合</li><li>字典</li></ul></li><li>函数<ul><li>定义</li><li>参数传递</li><li>作用域</li><li>lambda 表达式</li><li>常用内置函数</li></ul></li><li>⭐ 面向对象编程<ul><li>类和对象</li><li>三大特性<ul><li>封装<ul><li>self</li><li>属性</li><li>方法<ul><li>类方法</li><li>实例方法</li><li>静态方法</li></ul></li><li>访问控制</li></ul></li><li>继承<ul><li>单继承</li><li>多继承</li></ul></li><li>多态<ul><li>方法重写</li></ul></li></ul></li><li>运算符重载</li><li>装饰器</li><li>反射</li></ul></li><li>模块<ul><li>导入模块</li><li>常用模块<ul><li>文件处理</li><li>日期时间</li></ul></li></ul></li><li>包<ul><li>导入包</li><li>生成包</li></ul></li><li>异常处理<ul><li>捕获异常</li><li>try … else … finally 结构</li><li>自定义异常</li></ul></li><li>文件操作<ul><li>文件开闭</li><li>文件读写</li></ul></li></ul><h3 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h3><ul><li>函数进阶<ul><li>闭包</li><li>匿名函数</li><li>生成器函数</li><li>装饰器</li><li>高阶函数</li></ul></li><li>正则表达式</li><li>数据库编程<ul><li>数据库基础</li><li>SQL 编写</li><li>查询<ul><li>聚合</li><li>分组</li><li>关联</li><li>排序</li></ul></li><li>事务</li><li>数据库设计</li><li>数据库调优</li></ul></li><li>并发编程<ul><li>同步和异步</li><li>阻塞和非阻塞</li><li>多线程</li><li>多进程</li><li>协程</li><li>并发类库</li></ul></li><li>网络编程<ul><li>网络基础（七层模型、IP）</li><li>网络协议（TCP、UDP、HTTP、HTTPS、FTP、DNS）</li><li>WebSocket</li></ul></li></ul><h3 id="web-开发"><a href="#web-开发" class="headerlink" title="web 开发"></a>web 开发</h3><ul><li>Django 框架<ul><li>安装与 Demo</li><li>MVT 分层</li><li>模型<ul><li>数据库基础</li><li>ORM<ul><li>单表查询</li><li>多表查询</li><li>聚合查询</li></ul></li></ul></li><li>视图</li><li>模板<ul><li>模板语法</li><li>静态资源</li></ul></li><li>路由</li><li>Django Admin 管理工具</li><li>测试</li><li>会话</li><li>鉴权</li><li>文件上传</li><li>中间件</li><li>高级特性<ul><li>分页</li><li>缓存<ul><li>本地缓存</li><li>Redis 分布式缓存</li></ul></li><li>序列化</li><li>信号</li><li>celery 任务调度</li></ul></li><li>Restful API 开发<ul><li>概念</li><li>数据序列化</li><li>Django Rest Framework</li></ul></li><li>部署</li><li>项目实战</li></ul></li><li>前端基础<ul><li>HTML</li><li>CSS</li><li>JavaScript</li></ul></li><li>Flask 框架</li></ul><h3 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h3><ul><li>概念</li><li>合法性</li><li>数据抓取<ul><li>常用网络协议（http / https）概念</li><li>请求<ul><li>请求头</li><li>请求参数</li><li>请求类型</li></ul></li><li>响应<ul><li>响应头</li><li>响应参数</li></ul></li><li>requests 模块</li><li>urllib 模块</li><li>模拟登陆</li><li>静态 / 动态网站抓取</li><li>无头浏览器<ul><li>selenium</li><li>puppeteer</li></ul></li></ul></li><li>数据解析<ul><li>常用标签</li><li>BeautifulSoup</li><li>正则表达式</li><li>xpath</li></ul></li><li>数据导出<ul><li>文件<ul><li>Excel</li><li>CSV</li></ul></li><li>数据库<ul><li>MongoDB</li><li>MySQL</li></ul></li><li>中间件<ul><li>Redis</li></ul></li></ul></li><li>Scrapy 框架<ul><li>核心概念<ul><li>命令行工具</li><li>Spiders</li><li>Selectors</li><li>Items</li><li>Item Loaders</li><li>管道</li><li>Scrapy Shell</li><li>Link Extractors</li></ul></li><li>调度器</li><li>分布式爬虫</li><li>部署</li></ul></li><li>并发异步爬虫<ul><li>aioHttp</li><li>asyncio</li></ul></li><li>高级<ul><li>IP 代理</li><li>验证码识别</li><li>APP 抓取</li><li>增量式爬虫</li></ul></li><li>项目实战</li><li>反爬虫<ul><li>请求头限制</li><li>验证码</li><li>黑白名单</li><li>封禁 IP</li><li>数据加密</li><li>数据混淆</li><li>行为分析</li></ul></li></ul><h3 id="自动化运维"><a href="#自动化运维" class="headerlink" title="自动化运维"></a>自动化运维</h3><ul><li>Linux 环境</li><li>Shell 脚本编写</li><li>脚本管理</li><li>脚本发布</li><li>Python 运维库</li><li>常用运维工具</li></ul><h3 id="数据分析（数据科学）"><a href="#数据分析（数据科学）" class="headerlink" title="数据分析（数据科学）"></a>数据分析（数据科学）</h3><ul><li>环境搭建<ul><li>Anaconda</li><li>Conda</li><li>Miniconda</li><li>Jupyter Notebook</li></ul></li><li>常用数据结构</li><li>常用类库<ul><li>Numpy<ul><li>数组</li><li>索引</li><li>切片</li><li>多维数组</li><li>函数</li></ul></li><li>Pandas<ul><li>Series</li><li>DataFrame</li><li>索引</li><li>对齐</li><li>函数</li><li>统计</li></ul></li></ul></li><li>数据处理<ul><li>数据清洗</li><li>层次化索引</li><li>数据连接</li><li>数据合并</li><li>分组聚合</li><li>轴向旋转</li></ul></li><li>数据可视化<ul><li>matplotlib</li><li>seaborn</li><li>pyechart</li></ul></li></ul><h3 id="算法（人工智能）"><a href="#算法（人工智能）" class="headerlink" title="算法（人工智能）"></a>算法（人工智能）</h3><blockquote><p>鱼皮自己没怎么接触人工智能，结合网上很多大神的资料整理而成，也有一定参考意义。</p></blockquote><ul><li>数学基础<ul><li>高等数学</li><li>线性代数</li><li>概率论</li><li>统计分析</li></ul></li><li>机器学习<ul><li>特征工程</li><li>模型<ul><li>模型分类</li><li>模型评估</li><li>模型训练</li><li>模型调优</li></ul></li><li>常用算法<ul><li>监督与无监督学习</li><li>回归（有监督）<ul><li>线性回归</li><li>决策树</li><li>集成算法</li></ul></li><li>分类（有监督）<ul><li>逻辑回归</li><li>决策树</li><li>支持向量机</li><li>集成算法</li><li>贝叶斯算法</li></ul></li><li>聚类（无监督）<ul><li>k-means</li><li>dbscan</li></ul></li><li>降维<ul><li>主成分分析</li><li>线性判别分析</li></ul></li><li>进阶<ul><li>GBDT 提升算法</li><li>lightgbm</li><li>EM 算法</li><li>隐马尔科夫模型</li></ul></li></ul></li><li>多因子模型</li><li>常用库<ul><li>Scikit-learn</li></ul></li><li>量化交易策略</li></ul></li><li>深度学习<ul><li>数据预处理</li><li>算法<ul><li>神经网络</li><li>卷积神经网络</li><li>递归神经网络</li><li>对抗生成网络</li><li>序列网络模型</li></ul></li><li>常用算法</li><li>框架和平台<ul><li>Tenserflow2</li><li>Pytorch</li><li>Keras</li><li>Caffe</li></ul></li></ul></li><li>自然语言处理</li><li>图像处理</li><li>计算机视觉</li></ul><h2 id="常用类库"><a href="#常用类库" class="headerlink" title="常用类库"></a>常用类库</h2><p>Python 能被广泛应用，很大程度上是因为其丰富的类库，就是他人提前写好并封装的代码。基本你要做什么东西都能找到对应的类库，直接看文档用就行了，大大提高开发效率！</p><p>开源项目 <code>awesome-python-cn</code>（地址：<a href="https://github.com/jobbole/awesome-python-cn）">https://github.com/jobbole/awesome-python-cn）</a> 和 <code>awesome-python</code>（地址：<a href="https://github.com/vinta/awesome-python）已经帮大家整理了各方向的">https://github.com/vinta/awesome-python）已经帮大家整理了各方向的</a> Python 类库，数量非常多。鱼皮在此基础上筛选了一些相对优质的库，分享给大家。</p><h3 id="通用"><a href="#通用" class="headerlink" title="通用"></a>通用</h3><h4 id="日期处理"><a href="#日期处理" class="headerlink" title="日期处理"></a>日期处理</h4><ul><li>delorean：日期处理库</li><li>pendulum：日期时间操作库</li><li>dateutil：对标准 datetime 模块的强大扩展</li></ul><h4 id="终端优化"><a href="#终端优化" class="headerlink" title="终端优化"></a>终端优化</h4><ul><li>IPython：功能丰富的交互式 Python 解析器</li><li>Jupyter Notebook：基于网页的用于交互计算的应用程序</li><li>Prettytable：生成美观的 ASCII 格式的表格</li><li>Colorama：让终端具有颜色</li><li>bashplotlib：在终端中进行基本绘图</li><li>emoji：支持在 Python 终端输出表情</li><li>Ipyvolume：在 Jupyter notebook 中可视化 3d 体积和字形</li></ul><h4 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h4><ul><li>FlashText：高效的文本查找替换库</li><li>furl：url 处理库</li><li>pypinyin：汉字拼音转换工具</li><li>simplejson：JSON 编 / 解码器</li><li>JMESPath：JSON 查询语法库</li></ul><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul><li>Pipenv：Python 官方推荐的新一代包管理工具</li><li>threading：自带的线程库</li><li>multiprocessing：自带的多线程库</li><li>Chardet：字符编码检测器</li><li>logging：日志功能</li><li>PySnooper：Python 调试工具</li><li>sphinx：Python 文档生成器</li><li>pyttsx3：文字转语音库</li><li>PyWin32：提供和 windows 的交互</li><li>shortuuid：生成唯一 uuid 的库</li><li>more-itertools：支持迭代操作对象</li><li>cryptography：密码学工具包</li></ul><h3 id="网络请求-amp-解析"><a href="#网络请求-amp-解析" class="headerlink" title="网络请求 &amp; 解析"></a>网络请求 &amp; 解析</h3><ul><li>requests：HTTP 请求库</li><li>aiohttp：异步 HTTP 网络库</li><li>scrapy：分布式网页采集框架</li><li>pyspider：一个强大的爬虫系统</li><li>BeautifulSoup：从 HTML 或 XML 文件中提取数据的库</li><li>you-get：网页视频下载器</li><li>wget：网页文件下载</li><li>musicdl：Python 音乐下载器</li></ul><h3 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h3><ul><li>openpyxl：Excel 读写库</li><li>tablib：处理表格数据</li><li>csvkit：用于转换和操作 CSV 的工具</li><li>XlsxWriter：操作 Excel</li><li>python-docx：操作 office word 文档</li><li>PyPDF2：操作 PDF 文档</li><li>pdfminer：从 PDF 文档中抽取信息的工具</li><li>xhtml2pdf：HTML 转 PDF 工具</li><li>WeasyPrint：可视化网页，并支持导出为 PDF</li><li>html2text：将 HTML 转换为 Markdown 文档</li><li>xmltodict：像处理 JSON 一样处理 XML</li><li>moviepy：基于脚本的视频编辑模块</li><li>eyeD3：操作音频文件的工具</li><li>pyAudioAnalysis：音频特征提取分析</li></ul><h3 id="界面开发"><a href="#界面开发" class="headerlink" title="界面开发"></a>界面开发</h3><ul><li>pyQT：跨平台的用户界面开发框架</li><li>Turtle：交互式绘画库</li><li>pyglet：跨平台界面及多媒体框架</li><li>wxPython：Python 用户界面开发工具</li><li>Pygame：一组用来开发游戏的 Python 模块</li><li>Manim：Python 数学动画引擎</li><li>progressbar：一个滚动条函数库</li><li>progress：进度条输出</li><li>tqdm：快速、可扩展的进度条</li></ul><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><ul><li>nose：测试框架</li><li>faker：生成假数据</li><li>PyAutoGUI：跨平台 GUI 自动测试模块</li><li>coverage：代码覆盖率测量</li><li>sqlmap：自动 SQL 注入和渗透测试工具</li></ul><h3 id="Web-开发"><a href="#Web-开发" class="headerlink" title="Web 开发"></a>Web 开发</h3><ul><li>Django：Python 界最流行的 web 框架</li><li>Django REST framework：用于开发 web api 的框架</li><li>FastAPI：快速构建 web 应用程序</li><li>flask：Python 微型框架</li><li>Twisted：一个事件驱动的网络引擎</li></ul><h3 id="运维"><a href="#运维" class="headerlink" title="运维"></a>运维</h3><ul><li>psutil：跨平台的进程和系统工具模块</li><li>supervisor：进程控制管理系统</li><li>sh：让 Python 支持 shell 脚本</li><li>dnspython：DNS 工具包</li><li>scapy：数据包处理库</li><li>pexpect：在伪终端中控制交互程序</li><li>paramiko：远程连接服务</li><li>Ansible：IT 自动化平台</li><li>SaltStack：基础设施自动化和管理系统</li><li>watchdog：管理文件系统事件的 API 和 shell 工具</li></ul><h3 id="图像处理-amp-计算机视觉"><a href="#图像处理-amp-计算机视觉" class="headerlink" title="图像处理 &amp; 计算机视觉"></a>图像处理 &amp; 计算机视觉</h3><ul><li>Pillow：图像处理库</li><li>kornia：计算机视觉库</li><li>Opencv：开源计算机视觉库</li><li>Mahotas：计算机视觉和图像处理库</li><li>Luminoth：计算机视觉的深度学习工具集</li></ul><h3 id="数据分析-amp-数据科学"><a href="#数据分析-amp-数据科学" class="headerlink" title="数据分析 &amp; 数据科学"></a>数据分析 &amp; 数据科学</h3><ul><li>NumPy：数值计算工具包</li><li>Pandas：主流的数据分析工具</li><li>pyecharts：基于百度 Echarts 的数据可视化库</li><li>Dash：快速构建 Web 数据可视化应用</li><li>matplotlib：Python 2D 绘图库</li><li>Seaborn：使用 Matplotlib 进行统计数据可视化</li><li>python-recsys：实现推荐系统的库</li><li>vaex：高速大数据处理库</li><li>SciPy：算法和数学工具库</li><li>blaze：NumPy 和 Pandas 的大数据接口</li><li>statsmodels：统计建模和计量经济学</li></ul><h3 id="人工智能"><a href="#人工智能" class="headerlink" title="人工智能"></a>人工智能</h3><ul><li>Tensorflow：谷歌开源的最受欢迎的深度学习框架</li><li>keras：深度学习封装库，快速上手神经网络</li><li>Pytorch：具有张量和动态神经网络，并有强大 GPU 加速能力的深度学习框架</li><li>Caffe2：一个轻量、模块化、可扩展的深度学习框架</li><li>scikit-learn：基于 SciPy 构建的机器学习 Python 模块</li><li>PyMC：马尔科夫链蒙特卡洛采样工具</li><li>mmdetection：深度学习目标检测工具箱</li><li>imbalanced-learn：不平衡学习工具包</li><li>XGBoost：分布式梯度增强库</li><li>Gym：强化学习算法的工具包</li></ul><h3 id="自然语言处理"><a href="#自然语言处理" class="headerlink" title="自然语言处理"></a>自然语言处理</h3><ul><li>NLTK：自然语言处理工具包</li><li>Gensim：话题建模库</li><li>Pattern：自然语言处理工具</li><li>fuzzywuzzy：用于字符串模糊匹配、令牌匹配等</li><li>TextBlob：为进行普通自然语言处理任务提供一致的 API</li><li>PyFlux：时间序列处理库</li><li>jieba：中文分词工具</li></ul><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><p>（大纲图）</p><h2 id="岗位"><a href="#岗位" class="headerlink" title="岗位"></a>岗位</h2><ul><li>腾讯校招 Python 相关岗位：<a href="https://join.qq.com/post.html?keyword=python">https://join.qq.com/post.html?keyword=python</a></li><li>岗位薪资查询：OfferShow 小程序</li><li>运维工程师</li><li>Web 开发工程师（后端、全栈为主）</li><li>测试工程师</li><li>数据分析师</li><li>产品经理</li><li>算法工程师<ul><li>机器学习</li><li>计算机视觉</li><li>NLP</li><li>多媒体处理</li></ul></li><li>大数据工程师<ul><li>大数据开发</li><li>数据挖掘</li></ul></li><li>网络爬虫工程师</li><li>技术研究员</li></ul><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><h3 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h3><h4 id="零基础"><a href="#零基础" class="headerlink" title="零基础"></a>零基础</h4><ul><li>⭐ 千锋教育 700 集零基础 Python 教程：<a href="https://www.bilibili.com/video/BV1R7411F7JV（非常全面，基础、web">https://www.bilibili.com/video/BV1R7411F7JV（非常全面，基础、web</a> 开发、爬虫、数据分析、AI 基础都讲了，例子也很丰富）</li><li>⭐ 黑马程序员600集 Python 教程：<a href="https://www.bilibili.com/video/BV1ex411x7Em（比较全面，基于">https://www.bilibili.com/video/BV1ex411x7Em（比较全面，基于</a> Linux 环境学习，以 Python 基础 + 面向对象为重点，还包含一部分游戏开发）</li><li>⭐ Python 全栈开发教程：<a href="https://www.bilibili.com/video/BV1wD4y1o7AS（很纯粹的">https://www.bilibili.com/video/BV1wD4y1o7AS（很纯粹的</a> Python 基础教程，案例多，适合快速入门）</li><li>小甲鱼 -《零基础入门学习Python》最新版：<a href="https://www.bilibili.com/video/av52080698（可惜，更新到一半就没了。。）">https://www.bilibili.com/video/av52080698（可惜，更新到一半就没了。。）</a></li><li>【麻省理工学院-中文字幕版】Python 和计算机科学导论公开课：<a href="https://www.bilibili.com/video/BV1ty4y1x7xP（适合外语不错的同学课外看，感受国外教学氛围）">https://www.bilibili.com/video/BV1ty4y1x7xP（适合外语不错的同学课外看，感受国外教学氛围）</a></li><li>阿里云 python 工程师学习：<a href="https://developer.aliyun.com/graph/python（有在线编程体验）">https://developer.aliyun.com/graph/python（有在线编程体验）</a></li><li>鱼皮公众号【程序员鱼皮】后台回复 Python，也有一套视频课</li></ul><h4 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h4><ul><li>Web 开发<ul><li>Python Django 项目实战教程：<a href="https://www.bilibili.com/video/BV1pq4y1W7a1">https://www.bilibili.com/video/BV1pq4y1W7a1</a></li><li>Python + 微信小程序实战开发：<a href="https://www.bilibili.com/video/BV1Xy4y1s792（挺完整，后台用的">https://www.bilibili.com/video/BV1Xy4y1s792（挺完整，后台用的</a> Django 框架）</li></ul></li><li>数据结构与算法<ul><li>Python 数据结构与算法全套 100 节：<a href="https://www.bilibili.com/video/BV1uA411N7c5">https://www.bilibili.com/video/BV1uA411N7c5</a></li><li>【北京大学】数据结构与算法Python版（完整版）：<a href="https://www.bilibili.com/video/BV1VC4y1x7uv">https://www.bilibili.com/video/BV1VC4y1x7uv</a></li></ul></li><li>爬虫<ul><li>2020 年Python爬虫全套课程（学完可做项目）：<a href="https://www.bilibili.com/video/BV1Yh411o7Sz">https://www.bilibili.com/video/BV1Yh411o7Sz</a></li><li>Python 爬虫编程基础 5 天速成：<a href="https://www.bilibili.com/video/BV12E411A7ZQ（很短的爬虫实战入门课）">https://www.bilibili.com/video/BV12E411A7ZQ（很短的爬虫实战入门课）</a></li></ul></li><li>数据分析<ul><li>自学数据分析课程：<a href="https://www.bilibili.com/video/BV1ZM4y1u7uF（很纯粹的数据分析">https://www.bilibili.com/video/BV1ZM4y1u7uF（很纯粹的数据分析</a> + 可视化课程，适合办公党快速上手）</li><li>完整数据分析课程：<a href="https://www.bilibili.com/video/BV1vV411p7D6（数据分析">https://www.bilibili.com/video/BV1vV411p7D6（数据分析</a> + 机器学习，很全面）</li><li>Python 数据分析入门视频合集：<a href="https://shimowendang.com/docs/36pykCPH6XCjKJcv/read">https://shimowendang.com/docs/36pykCPH6XCjKJcv/read</a></li></ul></li><li>其他<ul><li>一天搞定人脸识别项目（python+opencv）：<a href="https://www.bilibili.com/video/BV1Lq4y1Z7dm">https://www.bilibili.com/video/BV1Lq4y1Z7dm</a></li><li>Python 自动化办公：<a href="https://www.bilibili.com/video/BV1uv411W7Fi（主要是处理">https://www.bilibili.com/video/BV1uv411W7Fi（主要是处理</a> Excel）</li></ul></li></ul><h3 id="书籍"><a href="#书籍" class="headerlink" title="书籍"></a>书籍</h3><ul><li>⭐《Python编程：从入门到实践》：<a href="https://www.code-nav.cn/rd/?rid=cbddf0af6064484f002658102cdbba17">https://www.code-nav.cn/rd/?rid=cbddf0af6064484f002658102cdbba17</a></li><li>《python学习手册》：<a href="https://www.code-nav.cn/rd/?rid=79550af260643c8e0ce47ab84633e200">https://www.code-nav.cn/rd/?rid=79550af260643c8e0ce47ab84633e200</a></li><li>《笨办法学Python3》：<a href="https://www.code-nav.cn/rd/?rid=b00064a760643bb90cbba72836995fd5">https://www.code-nav.cn/rd/?rid=b00064a760643bb90cbba72836995fd5</a></li><li>《Python编程快速上手》（第2版）：<a href="https://book.douban.com/subject/35387685/">https://book.douban.com/subject/35387685/</a></li><li>《Python Cookbook 中文版》（第3版）：<a href="https://book.douban.com/subject/26381341/">https://book.douban.com/subject/26381341/</a></li><li>《父与子的编程之旅》：<a href="https://www.code-nav.cn/rd/?rid=8937eaa9615519680ed81c0e3165ee65">https://www.code-nav.cn/rd/?rid=8937eaa9615519680ed81c0e3165ee65</a></li><li>⭐《Python 深度学习》<a href="https://www.code-nav.cn/rd/?rid=2d44d6c261624dd31224ed1b5841920c">https://www.code-nav.cn/rd/?rid=2d44d6c261624dd31224ed1b5841920c</a></li><li>《Python网络爬虫实战》第2版：<a href="https://www.code-nav.cn/rd/?rid=b00064a7606440d40cbc2fca19192e4f">https://www.code-nav.cn/rd/?rid=b00064a7606440d40cbc2fca19192e4f</a></li><li>《Python数据科学手册》：<a href="https://book.douban.com/subject/27667378/">https://book.douban.com/subject/27667378/</a></li><li>《利用Python进行数据分析》：<a href="https://book.douban.com/subject/25779298/">https://book.douban.com/subject/25779298/</a></li><li>《轻量级Django》：<a href="https://www.code-nav.cn/rd/?rid=28ee4e3e60641fd60d91fd2441418491">https://www.code-nav.cn/rd/?rid=28ee4e3e60641fd60d91fd2441418491</a></li><li>⭐ <strong>编程导航 - 超多 Python 书籍直接免费下载</strong> ：<a href="https://www.code-nav.cn/topic/Python（选择书籍标签）">https://www.code-nav.cn/topic/Python（选择书籍标签）</a></li><li>Python Guide（英文）：<a href="https://docs.python-guide.org/">https://docs.python-guide.org/</a></li></ul><h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><ul><li>⭐ Python 入门教程（菜鸟教程）：<a href="https://www.runoob.com/python3/python3-tutorial.html（可以在线写代码练习）">https://www.runoob.com/python3/python3-tutorial.html（可以在线写代码练习）</a></li><li>Python 入门教程（W3Cschool）：<a href="https://www.w3cschool.cn/python3/（支持手机阅读）">https://www.w3cschool.cn/python3/（支持手机阅读）</a></li><li>Python 中文学习大本营：<a href="http://www.pythondoc.com/（一系列文档教程的集合）">http://www.pythondoc.com/（一系列文档教程的集合）</a></li><li>Python 100 天：<a href="https://github.com/jackfrued/Python-100-Days">https://github.com/jackfrued/Python-100-Days</a></li><li>廖雪峰 Python 入门教程：<a href="https://www.liaoxuefeng.com/wiki/1016959663602400">https://www.liaoxuefeng.com/wiki/1016959663602400</a></li><li>莫烦 Python 教程：<a href="https://mofanpy.com/（包括基础、数据处理、机器学习等，部分内容有视频）">https://mofanpy.com/（包括基础、数据处理、机器学习等，部分内容有视频）</a></li><li>Django 官方教程：<a href="https://docs.djangoproject.com/zh-hans/3.2/intro/tutorial01/">https://docs.djangoproject.com/zh-hans/3.2/intro/tutorial01/</a></li><li>Manim 动画引擎教程：<a href="https://docs.manim.org.cn/shaders/">https://docs.manim.org.cn/shaders/</a></li><li>A Byte of Python：<a href="https://python.swaroopch.com/（Python">https://python.swaroopch.com/（Python</a> 英文入门教程）</li><li>⭐ 谷歌 Python 代码规范：<a href="https://google.github.io/styleguide/pyguide.html">https://google.github.io/styleguide/pyguide.html</a></li></ul><h3 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h3><ul><li>⭐ 蓝桥云课 Python 实战合集：<a href="https://www.lanqiao.cn/courses/?fee=free&amp;tag=Python">https://www.lanqiao.cn/courses/?fee=free&amp;tag=Python</a></li><li>腾讯云在线 Python 实验：<a href="https://cloud.tencent.com/developer/labs/gallery?tagId=23">https://cloud.tencent.com/developer/labs/gallery?tagId=23</a></li><li>阿里云 Python 入门实验：<a href="https://developer.aliyun.com/adc/scenario/e04fe73ad95d4782aef7aecca206196e">https://developer.aliyun.com/adc/scenario/e04fe73ad95d4782aef7aecca206196e</a></li><li>华为云沙箱实验室：<a href="https://lab.huaweicloud.com/testList.html">https://lab.huaweicloud.com/testList.html</a></li><li>Python123：<a href="https://python123.io/index（在线编程，部分课收费）">https://python123.io/index（在线编程，部分课收费）</a></li><li>CheckiO 游戏学 Python：<a href="https://py.checkio.org/">https://py.checkio.org/</a></li><li>通过测试交互式学 Python（英文）：<a href="https://github.com/gregmalcolm/python_koans">https://github.com/gregmalcolm/python_koans</a></li><li>交互式 Python 挑战（英文）：<a href="https://github.com/donnemartin/interactive-coding-challenges">https://github.com/donnemartin/interactive-coding-challenges</a></li><li>通过项目学 Python（英文）：<a href="https://github.com/practical-tutorials/project-based-learning#python">https://github.com/practical-tutorials/project-based-learning#python</a></li><li>通过示例交互式学 Python（英文）：<a href="https://github.com/jerry-git/learn-python3">https://github.com/jerry-git/learn-python3</a></li></ul><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><ul><li>数据结构和算法 Python 实现：<a href="https://github.com/keon/algorithms">https://github.com/keon/algorithms</a></li><li>《剑指 Offer》算法面试题 Python 实现：<a href="https://github.com/JushuangQiao/Python-Offer">https://github.com/JushuangQiao/Python-Offer</a></li><li>设计模式 Python 实现：<a href="http://www.pythontip.com/python-patterns/detail/abstract_factory">http://www.pythontip.com/python-patterns/detail/abstract_factory</a></li><li>Python Machine Learning 代码：<a href="https://github.com/rasbt/python-machine-learning-book-3rd-edition">https://github.com/rasbt/python-machine-learning-book-3rd-edition</a></li><li>Python 小脚本：<a href="https://github.com/RealHacker/python-gems">https://github.com/RealHacker/python-gems</a></li></ul><h3 id="合集"><a href="#合集" class="headerlink" title="合集"></a>合集</h3><ul><li>⭐ GitHub Python 专区：<a href="https://github.com/topics/python">https://github.com/topics/python</a></li><li>神经网络和深度学习相关框架：<a href="https://github.com/ChristosChristofidis/awesome-deep-learning">https://github.com/ChristosChristofidis/awesome-deep-learning</a></li><li>机器学习相关库：<a href="https://github.com/josephmisiti/awesome-machine-learning#python">https://github.com/josephmisiti/awesome-machine-learning#python</a></li><li>开源 Python 应用程序大全：<a href="https://github.com/mahmoud/awesome-python-applications">https://github.com/mahmoud/awesome-python-applications</a></li><li>Python 类库大全：<a href="https://github.com/vinta/awesome-python">https://github.com/vinta/awesome-python</a></li><li>Python 类库大全（中文版）：<a href="https://github.com/jobbole/awesome-python-cn">https://github.com/jobbole/awesome-python-cn</a></li><li>Python 异步大全：<a href="https://github.com/timofurrer/awesome-asyncio">https://github.com/timofurrer/awesome-asyncio</a></li><li>jupyter 相关：<a href="https://github.com/markusschanta/awesome-jupyter">https://github.com/markusschanta/awesome-jupyter</a></li><li>Python 书单：<a href="https://github.com/Junnplus/awesome-python-books">https://github.com/Junnplus/awesome-python-books</a></li><li>Python 书单（中文版）：<a href="https://github.com/jobbole/awesome-python-books">https://github.com/jobbole/awesome-python-books</a></li><li>StackOverflow Python 专区：<a href="https://stackoverflow.com/questions/tagged/python（解决问题必备）">https://stackoverflow.com/questions/tagged/python（解决问题必备）</a></li><li>⭐ 掘金 Python 专区：<a href="https://juejin.cn/tag/Python（看技术文章）">https://juejin.cn/tag/Python（看技术文章）</a></li></ul><h3 id="社区"><a href="#社区" class="headerlink" title="社区"></a>社区</h3><ul><li>⭐ PythonTab：<a href="https://www.pythontab.com/（中文">https://www.pythontab.com/（中文</a> Python 开发者社区）</li><li>Learnku Python 技术论坛：<a href="https://learnku.com/python">https://learnku.com/python</a></li><li>开源中国：<a href="https://www.oschina.net/（综合的开源社区）">https://www.oschina.net/（综合的开源社区）</a></li></ul><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ul><li>⭐ Python 在线编程（菜鸟教程）：<a href="https://c.runoob.com/compile/6/">https://c.runoob.com/compile/6/</a></li><li>腾讯云 Python 在线手册：<a href="https://cloud.tencent.com/developer/devdocs">https://cloud.tencent.com/developer/devdocs</a></li><li>Python 在线手册汇总：<a href="https://docs.pythontab.com/">https://docs.pythontab.com/</a></li></ul><h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3><ul><li>⭐ 牛客 Python 专项练习：<a href="https://www.nowcoder.com/intelligentTest">https://www.nowcoder.com/intelligentTest</a></li><li>牛客 Python 试题：<a href="https://www.nowcoder.com/search?query=python&amp;type=question">https://www.nowcoder.com/search?query=python&amp;type=question</a></li><li>牛客机器学习面试题：<a href="https://www.nowcoder.com/search?type=question&amp;query=机器学习">https://www.nowcoder.com/search?type=question&amp;query=%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0</a></li><li>牛客机器学习笔试：<a href="https://www.nowcoder.com/search?type=paper&amp;query=机器学习">https://www.nowcoder.com/search?type=paper&amp;query=%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0</a></li><li>Python 面试题整理：<a href="https://github.com/taizilongxu/interview_python（高星）">https://github.com/taizilongxu/interview_python（高星）</a></li><li>Python 面试题整理：<a href="https://github.com/kenwoodjw/python_interview_question">https://github.com/kenwoodjw/python_interview_question</a></li><li>机器学习面试题：<a href="https://geektutu.com/post/qa-ml.html">https://geektutu.com/post/qa-ml.html</a></li></ul><h3 id="其他-2"><a href="#其他-2" class="headerlink" title="其他"></a>其他</h3><ul><li>⭐ Python 常见问题：<a href="https://docs.python.org/zh-cn/3/faq/general.html（官方提供的">https://docs.python.org/zh-cn/3/faq/general.html（官方提供的</a> ）</li><li>GitHub Python 趋势：<a href="https://github.com/trending/python">https://github.com/trending/python</a></li><li>Python 模块推荐：<a href="https://pymotw.com/3/">https://pymotw.com/3/</a></li><li>Python 练习册：<a href="https://github.com/Yixiaohan/show-me-the-code（一些">https://github.com/Yixiaohan/show-me-the-code（一些</a> Python 练习题目）</li></ul>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装油猴Tampermonkey插件百度网盘不限速</title>
      <link href="/2023/09/10/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-%E6%B2%B9%E7%8C%B4%E6%8F%92%E4%BB%B6/"/>
      <url>/2023/09/10/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-%E6%B2%B9%E7%8C%B4%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="安装油猴-Tampermonkey-插件"><a href="#安装油猴-Tampermonkey-插件" class="headerlink" title="安装油猴[Tampermonkey]插件"></a>安装油猴[Tampermonkey]插件</h3><p>打开浏览器（我用的是Chrome），然后点击右上角【…】，在出来的菜单里，选择【更多工具】然后点击【扩展程序】。</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/b7c29a25d2d64507bc86dca31e3c5ed2.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/b7c29a25d2d64507bc86dca31e3c5ed2.png" alt="在这里插入图片描述"></a></p><p>然后点击左上角三条杠</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/08986c0a93844dfabd22a1730572161a.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/08986c0a93844dfabd22a1730572161a.png" alt="在这里插入图片描述"></a></p><p>点击下方打开Chrome网上应用商店</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/2e2467c9dc5047bd8e13fc245d6450a1.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/2e2467c9dc5047bd8e13fc245d6450a1.png" alt="在这里插入图片描述"></a></p><p>搜索【Tampermonkey】</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/80224c5368f247b886d374a9afe3f362.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/80224c5368f247b886d374a9afe3f362.png" alt="在这里插入图片描述"></a><br>装好了之后，此时你浏览器的上方，就有这个油猴插件的图标了。</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/7bded91d8ecc4be8a76ffc2ba3b06d32.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/7bded91d8ecc4be8a76ffc2ba3b06d32.png" alt="在这里插入图片描述"></a></p><h3 id="接下来我们安装脚本"><a href="#接下来我们安装脚本" class="headerlink" title="接下来我们安装脚本"></a>接下来我们安装脚本</h3><p>油猴脚本的安装方法单一，就是打开脚本的地址，便会出现安装选项。但寻找脚本是需要方法的。以安装百度下载助手为例，首先我们得先找到它。</p><p>打开Greasy Fork网站，网址是：<a href="https://greasyfork.org/zh-CN/scripts/463171-百度网盘千千下载助手">https://greasyfork.org/</a></p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/e14ae80721f142b9801adef3c0e58a20.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/e14ae80721f142b9801adef3c0e58a20.png" alt="在这里插入图片描述"></a><br>随后在跳转的界面中点击重新安装即可。此时，你在浏览器上方，点击油猴插件的图标，再点【管理面板】，此时你就可以看到你已经拥有了这个脚本了。</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/32b71cd2e1234de7b462227a07aa3875.gif"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/32b71cd2e1234de7b462227a07aa3875.gif" alt="在这里插入图片描述"></a><br>到这一步，已经完成了一大步了，air2不需要配置，这里就只演示air2的使用。在这个脚本的页面，可以找到air2的下载链接。</p><p>air2地址：<a href="https://wwp.lanzoub.com/izGse03y2kwh">https://wwp.lanzoub.com/izGse03y2kwh</a></p><p>下载后解压，双击【AriaNg启动器.exe】</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/c1502500bfaf4e5bbb0ca1653d0a3abd.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/c1502500bfaf4e5bbb0ca1653d0a3abd.png" alt="在这里插入图片描述"></a><br>此时浏览器就会打开一个新的页面，一定要看看【Aria2状态】是否显示的是【已链接】。</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/2b3605c1831140318157e5a38cc5fe20.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/2b3605c1831140318157e5a38cc5fe20.png" alt="在这里插入图片描述"></a></p><p>到这一步，所有准备工作已经完成了。下面，就进入下载演示了。需要注意的是，此脚本需要你把资源保存到自己网盘才能下载，如果是分享的页面，是不能下载的哦。</p><p>打开你的百度网盘（需要注意的是你打开的百度网盘需要是网页版：<a href="https://pan.baidu.com/">百度网盘网页版</a>），先勾选一个文件，然后在上方点击【简易下载助手】</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/d0b703dbfe9f4870982d1f4e0e0e0b70.gif#pic_center"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/d0b703dbfe9f4870982d1f4e0e0e0b70.gif#pic_center" alt="在这里插入图片描述"></a></p><p>此时会弹出一个页面，我们点击【点击获取直链地址】，第一次使用会让你关注公众号获取验证码，你只需要扫描左边的二维码，关注并发【验证码】就会给你回复一个验证码，你填进去之后，再点【点击获取直链地址】就好了。</p><p><a href="https://haiyong.site/img/img-blog.csdnimg.cn/0a837111237447a5a2ad21eccde0e74b.png"><img src="https://haiyong.site/img/img-blog.csdnimg.cn/0a837111237447a5a2ad21eccde0e74b.png" alt="在这里插入图片描述"></a></p><p>好了，这下就完全弄好了，可以去下载了。</p>]]></content>
      
      
      <categories>
          
          <category> 学习技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 油猴 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机操作系统</title>
      <link href="/2023/09/10/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/09/10/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<p>计算机操作系统<br>第一章 操作系统引论<br>操作系统是配置在计算机硬件上的第一层软件，是对硬件系统的首次扩充。<br>1.1 操作系统的目标和作用</p><p>操作系统的地位：紧贴于系统硬件之上，所有其他软件之下（是其他软件的共同环境）。<br>1.1.1 操作系统的目标<br>方便性：对用户方便，提供良好的，一致的用户接口<br>有效性：对系统管理人员方便<br>（1）提高了系统资源的利用率<br>（2）提高系统吞吐量<br>可扩充性：与OS结构相关，方便添加新的功能和模块<br>早期无结构→模块化结构→层次结构→微内核结构和客户服务器模式<br>开放性：开放系统互连OSI国际标准，实现应用的可移植性和互操作性<br>1.1.2 操作系统的作用<br>操作系统的非形式化定义（关键点）：系统软件，程序模块的集合，资源管理和用户接口功能</p><p>OS作为用户与计算机硬件系统之间的接口<br>通过三种方式使用计算机：命令方式，系统调用方式，图标—窗口方式<br>OS作为计算机系统资源的管理者<br>对这些资源：处理机，存储器，I/O设备以及文件（数据和程序）有效的管理。<br>OS实现了对计算机资源的抽象（OS是扩展机，是虚拟机器）<br>在裸机上添加：设备管理、文件管理、存储管理（针对内存和外存）、处理机管理（针对CPU）<br>合理组织工作流程：作业管理、进程管理。<br>1.1.3 推动操作系统发展的主要动力<br>不断提高计算机资源利用率和系统性能<br>方便用户<br>器件的不断更新换代<br>计算机体系结构的不断发展<br>不断提出新的应用需求<br>1.2 操作系统的发展过程<br>1.2.1 未配置操作系统的计算机系统<br>一， 人工操作方式：</p><p>计算机的工作特点<br>用户独占全机<br>（用户是程序元，计算机专业人员）<br>（编程语言是机器语言）<br>（输入/输出：纸带或卡片）<br>CPU等待人工操作：严重降低计算机资源的利用率，存在人机矛盾<br>主要矛盾（人机矛盾）：<br>计算机处理能力的提高，手工操作的低效率（造成浪费）<br>用户独占全机的所有资源<br>提高效率的途径：<br>专门的操作员，批处理<br>二，脱机输入/输出方式：</p><p>工作方式：<br>程序和数据的输入输出都是在外围机的控制下完成的，或者说，是在脱离主机的情况下进行的<br>优点：<br>减少了CPU空闲时间<br>提高了I/O速度<br>1.2.2 单道批处理系统<br>单道批处理系统的处理过程：<br>通过作业控制语言将磁带（或卡片）上的若干个作业编成作业执行序列，自动实现作业间的自动转换。每个批作业由一个专门的监督程序自动依次处理。<br>程序和数据虽然是成组成批提交，但是任一时间只有一个作业运行，因此称为单道批处理。<br>批处理中的作业的组成：包括用户程序、数据和作业说明书（作业控制语言）<br>单道批处理系统的特征：<br>自动性<br>顺序性<br>单道性<br>优点：<br>同一批内各作业的自动依次更替，改善了主机CPU和I/O设备的使用效率，提高了吞吐量。<br>缺点：<br>主要缺点：系统的资源得不到充分的利用。CPU和I/O设备使用忙闲不均<br>磁带或磁盘需要人工装卸，作业需要人工分类<br>监督程序易遭到用户程序的破坏（由人工干预才可恢复）。<br>I/O与CPU之间的速差造成的CPU空闲<br>1.2.3 多道批处理系统<br>多道批处理系统的概念：在系统中，用户所提交的作业先存放在外存上，并排列成一个队列，称为“后备队列”，然后由作业调度程序按一定的算法，从后备队列中选出若干个作业调入内存，使它们共享CPU和系统中的各种资源。在程序A因I/O操作而空闲CPU时，运行程序B，使多道程序交替运行。<br>内存中同时存放几个作业：<br>（1）宏观上并行运算<br>（2）微观上串行运算<br>特点：<br>（1）多道性：<br>多道程序驻留内存：提高了资源的利用率；<br>程序并发执行：提高了系统的吞吐量<br>（2）无序性：<br>作业进入内存先后顺序和完成的先后顺序无对应性<br>（3）调度性：<br>作业调度<br>进程调度<br>优点：<br>（1）资源利用率高：并发执行<br>（2）系统吞吐量大：①保持忙碌②系统开销小<br>缺点：<br>（1）平均周转时间长<br>（2）无交互能力<br>多道批处理系统需要解决的问题：<br>（1）处理机争用问题<br>（2）内存分配和保护问题<br>（3）I/O设备分配问题<br>（4）文件的组织和管理问题<br>（5）作业管理问题<br>（6）用户与系统的接口问题<br>操作系统是一组控制和管理计算机硬件和软件资源，合理地对各类作业进调度，以及方便用户使用的程序集合<br>单道与多道的区别：</p><p>1.2.4 分时系统<br>分时系统的引入，用户需求具体表现在：<br>（1）人机交互<br>（2）共享主机<br>（3）便于用户上机<br>分时系统实现中的关键问题：<br>（1）及时接收<br>（2）及时处理：<br>作业直接进入内存<br>采用轮转运行方式：引入时间片<br>分为抢先式和非抢先式的OS（CPU让出OS的方式是自动还是强迫）<br>分时系统的特征：<br>（1）多路性：共享主机<br>（2）独立性：感觉像是用户独占主机<br>（3）交互性<br>（4）及时性<br>1.2.5 实时系统<br>主要特征：将时间作为关键参数<br>特点：（1）可靠性强（2）响应时间短<br>实时系统的类型：<br>工业（武器）控制系统，信息查询系统，多媒体系统，嵌入式系统<br>实时任务的类型：<br>（1）周期性，非周期性：截至时间：①开始截止时间②完成截止时间<br>（2）硬实时，软实时：<br>硬实时：满足对截止时间的要求<br>软实时：不严格要求截止时间</p><p>1.2.6 *微机操作系统的发展<br>软件工程的出现：<br>操作系统在结构、规模、数量、接口等方面都得到了简化：结构从复杂到简单，规模从大到小，核心外移。<br>实际系统的数量由于通用、开放和标准化而大量减少。<br>小型化与网络：<br>微机操作系统和个人操作系统<br>网络操作系统：<br>（1）通过通信设施将物理上分散的具有自治功能的多个计算机系统互连起来的实现信息交换、资源共享、可互操作和协作处理的系统。<br>（2）在各种计算机操作系统上，按网络体系结构协议标准开发的软件<br>（3）包括网络管理、通信、安全、资源共享和各种网络应用<br>（4）目标：是相互通信及资源共享<br>分布式操作系统：<br>1）特征：<br>（1）是一个统一的操作系统<br>（2）资源进一步共享<br>（3）透明性：资源共享与分布对用户是透明的<br>（4）自治性：处于分布式系统的多个主机处于平等地位，无主从关系<br>（5）处理能力增强、速度更快、可靠性增强<br>2）网络和分布式的区别：<br>（1）分布式具有各个计算机间相互通讯，无主从关系；网络有主从关系<br>（2）分布式系统资源为所有用户共享；而网络有限制地共享<br>（3）分布式系统中若干个计算机可相互协作共同完成一项任务<br>嵌入式系统：<br>（1）在各种设备、装置或系统中，完成特定功能的软硬件系统。它们是一个大设备、装置或系统中的一部分，这个大设备、装置或系统可以不是“计算机”。由于它们被嵌入在各种设备、装置或系统中，因此称为嵌入式系统<br>（2）EOS（Embedded Operating System）在嵌入式系统中的OS，运行在嵌入式智能芯片环境中<br>（3）典型嵌入式操作系统的特性：<br>完成某一项或有限项功能；不是通用型的<br>在性能和实时性方面有严格的限制<br>能源、成本和可靠性通常是影响设计的重要因素<br>占有资源少、易于连接<br>系统功能可针对需求进行裁剪、调整和生成，以便满足最终产品的设计要求<br>单用户单任务操作系统：<br>只允许一个用户上机，且只允许用户程序作为一个任务运行<br>CP/M ， MS-DOS<br>单用户多任务操作系统：<br>只允许一个用户上机，但允许用户把程序分为若干个任务，并使他们并发执行<br>Windows<br>多用户多任务操作系统：<br>允许多个用户通过各自的终端，使用同一台机器，共享系统中的各种资源，而每个用户程序又可进一步分为几个任务，使它们能并发执行<br>UNIX OS<br>操作系统的发展规律:<br>操作系统的发展是由底层硬件、软件技术与上层应用需求的发展推动的。<br>操作系统的每一步发展都是权衡的结果：可能性与必要性的权衡，性能与代价的权衡，方便和效率的权衡。</p><p>项目    网络OS    分布式OS    多处理机OS<br>单处理机    不像    像    像<br>相同OS（同质）    不需要    需要    需要<br>有多少个OS    n个    n个    1个<br>通信    共享文件    通讯协议    共享存储器<br>网络协议    不需要    不需要    需要<br>运行队列    不需要    不需要    需要<br>文件共享是否有限制    没有    有，需要特殊文件说明    有限制，需特殊文件<br>1.3 操作系统的基本特性<br>四个基本特性：并发，共享，虚拟，异步<br>1.3.1 并发<br>并行与并发：<br>并行性：两个或多个时间在同一时刻发生<br>并发性：两个或多个时间在同一时间间隔内发生<br>引入进程<br>进程：在系统中能独立运行并作为资源分配的基本单位<br>引入线程是现代操作系统的重要标志<br>1.3.2 共享<br>OS环境下的资源共享或称资源复用，是指系统中的资源可供内存中多个并发执行的进程共同使用<br>互斥共享方式<br>资源可以提供给多个进程，但应规定在一段时间内，只允许访问一个进程访问该资源<br>资源分配后到释放之前，不能被其他进程所用<br>临界资源：一段时间内只允许一个进程访问的资源<br>同时访问方式<br>资源允许在一段时间内由多个进程“同时”对它们进行访问<br>可重入代码，磁盘文件<br>并发和共享是多用户OS的两个最基本的特征<br>资源分配难以达到最优化<br>1.3.3 虚拟<br>一个物理实体映射为若干个对应的逻辑实体<br>虚拟是操作系统管理系统资源的重要手段，可提高资源利用率。<br>CPU－－每个用户（进程）的“虚处理机”<br>存储器－－每个进程都占有的地址空间（指令＋数据＋堆栈）<br>显示设备－－多窗口或虚拟终端(virtual terminal)<br>时分复用技术：<br>（1）虚拟处理机技术<br>（2）虚拟设备技术<br>空分复用技术：<br>虚拟的实现：如果是采用分时复用的方法，即对某一物理设备进行分时使用，设N是某物理设备所对应的虚拟的逻辑设备数，则每台虚拟设备的平均速度必然等于或低于物理设备速度的1/N。类似的如果是采用空分复用技术，此时一台虚拟设备平均占用的空间必然也等于或小于物理设备所拥有的空间的1/N</p><p>1.3.4 异步<br>也称不确定性，指进程的执行顺序和执行时间的不确定性；<br>进程的运行速度不可预知：分时系统中，多个进程并发执行，“时走时停”，不可预知每个进程的运行推进快慢<br>判据：无论快慢，应该结果相同， 通过进程互斥和同步手段来保证<br>难以重现系统在某个时刻的状态（包括重现运行中的错误）<br>性能保证：实时系统与分时系统相似，但通过资源预留以保证性能<br>1.4 操作系统的主要功能<br>1.4.1 处理机管理功能<br>处理机管理的主要功能：创建和撤销进程，对诸进程的运行进行协调，实现进程之间的信息交换以及按照一定的算法把处理机分配给进程<br>进程控制：为作业创建进程，撤销（终止）已结束的进程以及控制进程在运行过程中的状态转换<br>进程同步：<br>重要功能<br>主要功能：为多个进程的运行进行协调<br>常用的协调方式：<br>（1）进程互斥方式<br>（2）进程同步方式：常用信号量机制<br>进程通信<br>调度：<br>（1）作业调度：从后备队列中按照一定的算法选择除若干个作业，为它们分配资源，将其调入内存后，为其建立进程，将它们插入就绪队列<br>（2）进程调度：从进程的就绪队列中按照一定的算法选出一个进程，将处理机分配給它，并为它设置运行现场，使其投入执行<br>1.4.2 存储器管理功能<br>为多道程序的运行提供良好的环境，提高存储器的利用率，方便用户使用，并能从逻辑上扩充内存<br>内存分配<br>（1）静态分配方式：每个作业的内存空间是在作业装入时确定的，在作业装入后的整个运行期间不允许作业再次申请新的内存空间，也不允许在内存中移动<br>（2）动态分配方式：允许作业在运行期间继续申请新的附加内存空间，以适应程序和数据的动态增长，也允许作业在内存中移动。<br>内存保护：保证进程间互不干扰、相互保密；如：访问合法性检查、甚至要防止从“垃圾”中窃取其他进程的信息<br>地址映射：<br>主要功能<br>进程逻辑地址到内存物理地址的映射；<br>内存扩充：<br>从逻辑上扩充内存容量<br>设置内存扩充机制，以实现请求调入功能和置换功能<br>1.4.3 设备管理功能<br>主要任务：<br>（1）完成用户进程提出的I/O请求<br>（2）提高CPU和I/O设备的利用率<br>缓冲管理：单缓冲机制，双缓冲机制，公用缓冲池机制<br>设备分配：<br>设备处理：<br>设备处理程序又叫：设备驱动程序，实现CPU和设备控制器之间的通信<br>根据中断请求的类型，调用相对应的中断处理程序<br>1.4.4 文件管理功能<br>主要任务：是对用户文件和系统文件进行管理以方便用户使用，并保证文件的安全性<br>文件存储空间的管理：为每一个文件分配必要的外存空间，提高外存的利用率，进而提高文件系统的存取速度<br>目录管理：方便存取，实现共享，提高文件检索的速度<br>文件的读/写管理和保护：<br>（1）文件的读写/管理<br>（2）文件保护：防止未经核准的用户存取文件，防止冒名顶替存取文件，防止以不正确的方式使用文件<br>软件管理：软件的版本、相互依赖关系、安装和拆除等<br>1.4.5 操作系统与用户之间的接口<br>用户接口：用户通过该接口直接或间接地控制自己的作业<br>（1）联机用户接口<br>（2）脱机用户接口<br>（3）图形用户接口<br>程序接口：为用户程序在执行中访问系统资源而设定的，是用户程序取得操作系统服务的唯一途径<br>1.4.6 现代操作系统的新功能<br>系统安全：<br>（1）认证技术<br>（2）密码技术<br>（3）访问技术<br>（4）反病毒技术<br>网络的功能和服务<br>（1）网络通信<br>（2）资源管理<br>（3）应用互操作<br>（4）支持多媒体<br>（1）接纳控制功能<br>（2）实施调度<br>（3）多媒体文件的存储<br>1.5 OS结构设计<br>1.5.1 传统操作系统结构<br>无结构操作系统<br>模块化结构OS<br>（1）基本概念：按功能精心地划分为若干个具有一定独立性和大小的模块，并仔细规定好各模块的间的接口，使各模块之间能通过接口实现交互。然后再细分为子模块，这种设计方法称为模块-接口法<br>（2）模块独立性：<br>内聚性：子模块内部各部分间联系的紧密程度，内聚性越高，模块独立性高<br>耦合度，指模块间相互联系和相互影响的程度，耦合度越低，模块独立性越好<br>（3） 模块接口法的优缺点：<br>优点：<br>①提高OS设计的正确性，可理解性，可维护性<br>②增强OS的可适应性<br>③加速OS的开发过程<br>缺点：<br>①接口很难满足实际需求<br>②无序模块法，无法寻找一个可靠的决定顺序<br>分层式结构OS<br>（1）基本概念：有序分层法，每一步设计都建立在可靠的基础上，高层仅依赖于紧邻它的底层<br>（2）优点：<br>①易保证系统的正确性<br>②易扩充和易维护性<br>（3）缺点：系统效率低<br>1.5.2 客户/服务器模式<br>客户/服务器模式的由来：<br>（1）客户机（2）服务器（3）网络系统<br>交互：<br>（1）客户发送请求消息<br>（2）服务器接受消息<br>（3）服务器回送消息<br>（4）客户机接受消息<br>优点：<br>（1）数据的分布式处理和存储<br>（2）便于集中管理<br>（3）灵活性和可扩充性<br>（4）易于改编应用软件<br>缺点：<br>不可靠性和瓶颈问题<br>1.5.3 面向对象的程序设计<br>基本概念：（1）对象（2）对象类（3）继承<br>优点：（1）通过“重用”提高质量和效率（2）易修改性和易扩展性<br>（3）易于保证正确性和可靠性<br>1.5.4 微内核OS结构<br>适用于分布式系统环境<br>基本概念：<br>（1）足够小的内核：最基本的部分：①与硬件处理紧密相关部分②较基本功能③C/S之间的通信<br>（2）基于C/S模式<br>（3）应用“机制和策略分离”原理：机制在低层，策略在系统高层<br>（4）采用面向对象编程<br>微内核的功能：<br>（1）进程（线程）管理：进程（线程）之间的通信是微内核OS最基本的功能<br>（2）低级存储器管理：实现用户空间的逻辑地址变换为内存空间的物理地址的页表机制和地址变换机制<br>（3）中断和陷入处理<br>微内核操作系统的优点：<br>（1）提高可扩展性<br>（2）增强系统可靠性<br>（3）可移植性增强<br>（4）支持分布式系统<br>（5）融入面向对象技术<br>微内核操作系统存在的问题<br>运行效率降低<br>第二章 进程的描述与控制<br>2.1 前趋图和程序执行<br>2.1.1 前趋图<br>有向无循环图，可记为DAG，用于描述进程之间的先后顺序。<br>图中结点：进程或程序段<br>有向边：结点之间的偏序或前趋关系<br>权值：每个结点的重量<br>2.1.2 程序的顺序执行<br>程序的顺序执行<br>程序的顺序执行时的特征：<br>（1）顺序性：每一个操作必须在下一个操作开始之前结束<br>（2）封闭性：程序运行时独占全机资源，程序一旦开始执行，其执行结果不受外界因素影响<br>（3）可再现性：只要程序执行时的环境和初始条件相同，当程序重复执行时。都可以得到相同的结果<br>2.1.3 程序并发执行<br>只有在不存在前驱关系的程序之间才有可能并发执行，否则无法并发执行<br>程序并发执行时的特征：<br>（1）间断性<br>（2）失去封闭性<br>（3）不可在现性<br>2.2 进程的描述<br>2.2.1 进程的定义和特征<br>进程的定义：<br>（1）进程是程序的一次执行<br>（2）进程是一个程序及其数据在处理机上顺序执行时所发生的活动<br>（3）进程是具有独立功能的程序在一个数据集合上运行的过程，它是系统进行资源分配和调度的一个独立单位。【数据集合说明：需要数据，运行的过程说明：有生命周期】<br>进程控制块（PCB）：描述进程的基本情况和活动过程，进而控制和管理进程<br>进程实体（进程映像）：包括：程序段，数据段，PCB<br>一个程序可能对应多个进程（程序的多次执行）<br>一个进程也可能对应多个程序（进程的多次调用）<br>进程的特征：<br>（1）动态性：进程动，程序静<br>（2）并发性<br>（3）独立性<br>（4）异步性：进程暂时的，程序永久的<br>（5）结构性：程序段，数据段，PCB<br>2.2.2 进程的基本状态和转换<br>进程的三种基本状态：<br>（1）就绪状态：n个进程最多n-1个，多个就绪状态的进程排成就绪队列<br>（2）执行状态：单处理机只有一个，多处理机多个<br>（3）阻塞状态：最多n个，正在执行的进程由于发生某事件（如I/O请求，申请缓冲区失败等）暂时无法继续执行时的状态<br>三种基本状态的转换：<br>创建状态和终止状态（1）创建状态：进程由创建而产生，创建一个进程的步骤：首先，进程申请一个空白PCB，并向PCB中填写用于控制和管理进程的信息；然后为进程分配运行时所必须的资源；最后，把该进程转入就绪状态并插入就绪队列之中。如果进程所需的资源得不到满足，比如系统尚无足够的内存使进程无法装入其中 ，此时创建工作尚未完成，进程不能被调度运行，此时进程所处的状态被称为创建状态<br>（2）终止状态<br>首先，等待操作系统进行善后处理，最后将其PCB清零，并将PCB空间返回系统。当一个进程到达了自然结束点，或是出现了无法克服的错误清零，或是被操作系统所终结，或是被其他有终止权的进程所终结，它将进入终止状态。进入终止态的进程以后不能再执行，但在操作系统中依然保留一个记录，其中保存状态码和一些计时统计数据，供其他进程收集。<br>2.2.3 挂起操作和进程状态的转换<br>当操作作用于某个进程时，该进程将被挂起，意味着此时此刻进程处于静止状态<br>挂起操作的引入：<br>（1）终端用户的需要<br>（2）父进程的请求<br>（3）负荷调节的需要<br>（4）操作系统的需要<br>引入挂起原语操作后三个进程状态的转换<br>（1）活动就绪→静止就绪<br>（2）活动阻塞→静止阻塞<br>（3）静止就绪→活动就绪<br>（4）静止阻塞→活动阻塞<br>引入挂起操作后五个进程状态的转换<br>（1）NULL→创建：<br>（2）创建→活动就绪<br>（3）创建→静止就绪<br>（4）执行→终止<br>2.2.4 进程管理中的数据结构<br>操作系统中用于管理控制的数据结构<br>内存表<br>设备表<br>文件表<br>进程表PCB，进程控制块。有总数限制，<br>进程控制块PCB的作用<br>在OS的核心为每一个进程专门定义了一个PCB，记录了操作系统所需的，用于描述进程的当前情况以及管理进程运行的全部信息，是操作系统中最重要的记录型数据结构。<br>PCB的作用是使一个在多道程序环境下不能独立运行的程序（含数据）成为一个能独立运行的基本单位，一个能与其他进程并发执行的进程<br>（1）作为独立运行的基本单位的标志：系统使通过PCB感知进程的存在的，PCB已成为进程存在的唯一标志<br>（2）能实现间断性运行方式：将CPU现场信息保存在中断进程的PCB中，供该进程再次被调度执行时恢复CPU现场时使用<br>（3）提供进程管理所需要的信息<br>（4）提供进程调度所需要的信息<br>（5）实现与其他进程的同步与通信<br>进程控制块中的信息：<br>（1）进程标识符：唯一地标识一个进程<br>①外部标识符：由数字，字母构成<br>②内部标识符：为每一个进程赋予唯一的数字标识符，是一个进程的序号<br>（2）处理机状态：<br>处理机状态信息：①通用寄存器②指令计数器③程序状态字PSW④用户栈指针<br>CPU现场保护结构：寄存器值，主要由CPU的各种寄存器组成<br>（3）进程调度信息：①进程状态②进程优先级③进程调度所需其他信息，与进程调度算法有关④事件，即阻塞原因<br>（4）进程控制信息：①程序和数据的地址②进程同步和通信机制③资源清单④链接指针<br>进程控制块的组织方式：<br>（1）线性方式<br>（2）链接方式<br>（3）索引方式<br>2.3 进程控制<br>进程控制一般是由OS内核中的原语来实现的<br>2.3.1 操作系统内核<br>OS内核：一般将OS划分为若干层次,将紧靠硬件的软件层次常驻内存<br>处理机的执行状态分为系统态和用户态：<br>系统态：又称管态，内核态，具有较高特权，能执行一切指令，访问所有的寄存器和存储区<br>用户态：又称目态，具有较低权限<br>支撑功能：<br>（1）中断处理：内核中最基本的功能，是整个操作系统赖以活动的基础<br>（2）时钟管理<br>（3）原语操作：原语：是由若干条指令组成的，用于完成一定功能的一个过程，是原子操作，即要么都做，要么都不做<br>资源管理功能：<br>（1）进程管理<br>（2）存储器管理<br>（3）设备管理<br>2.3.2 进程的创建<br>进程的层次结构<br>把创建进程的进程称为父进程，而把被创建的进程称为子进程，子进程还可以创建孙进程<br>进程图：描述进程间关系的一颗有向树<br>引起创建进程的事件：<br>（1）用户登陆<br>（2）作业调度<br>（3）提供服务<br>（4）应用请求<br>进程的创建：<br>步骤：<br>（1）申请空白PCB，为新进程获取唯一的数字标识符<br>（2）为其分配运行时所需的资源，包括物理和逻辑<br>（3）初始化进程控制块PCB：①初始化标识信息②初始化处理机状态信息③初始化处理机控制信息<br>（4）如果进程就绪队列能够接纳新进程，便将新进程插入就绪队列<br>2.3.3 进程的终止<br>引起进程终止的事件：<br>（1）正常结束：通常会在程序的最后安排一条Halt指令，用于向OS表示运行已结束<br>（2）异常结束：<br>越界错<br>保护错<br>非法指令<br>特权指令错<br>运行超时<br>等待超时<br>算术超时<br>I/O故障<br>（3）外界干预：<br>操作员或操作系统干预<br>父进程请求<br>因父进程终止<br>进程的终止过程：<br>（1）根据被终止进程的标识符，从PCB集合中检索该进程的PCB，从中读出该进程的状态<br>（2）若被终止进程正处于执行状态，应立即终止该进程的执行，并置调度标志为真，用于指示该进程被终止后应重新进行调度<br>（3）若该进程还有子孙进程，还应将其所有子孙进程也都给予终止，以防他们成为不可控进程<br>（4）将被终止进程所拥有的全部资源或者归还其父进程，或者归还系统<br>（5）将被终止进程（PCB）从所在队列（或链表）中移除，等待其他程序来搜集信息<br>2.3.4 进程的阻塞与唤醒<br>引起进程阻塞和唤醒的事件：<br>（1）向系统请求共享资源失败<br>（2）等待某种操作的完成<br>（3）新数据尚未到达<br>（4）等待新任务的到达<br>进程阻塞过程<br>进程主动调用阻塞原语block将自己阻塞<br>进程唤醒过程<br>当被阻塞进程所期待的事件已经发生时，有关程序调用唤醒原语wakeup<br>wakeup：首先从阻塞队列中移除，将其PCB中的现行状态改为就绪，然后将该PCB插入到就绪队列<br>2.3.5 进程的挂起与激活<br>进程的挂起：<br>原语suspend：检查被挂起进程的状态，若处于活动就绪状态→静止就绪，对于活动阻塞状态→静止阻塞，为方便用户或父进程考察进程的运行情况，把该进程PCB复制到某指定的内存区域，若被挂起的进程正在执行，则转向调度程序重新调度<br>进程的激活过程<br>OS利用激活原语active：将进程从外存调入内存，检查该进程的现行状态，若静止就绪→活动就绪，若静止阻塞→活动阻塞<br>2.4 进程同步<br>使程序的执行具有可再现性<br>2.4.1 进程同步的基本概念<br>两种形式的制约关系<br>（1）间接相互制约关系：多个进程互斥访问资源<br>（2）直接相互制约关系：多个进程相互合作<br>临界资源<br>硬件或软件，多个进程在对其访问时，必须互斥进行<br>临界区<br>临界区：每个进程中访问临界资源的那段代码<br>进入区：临界区前面增加一段用于进行检查的代码<br>退出区：临界区后面用于将临界区正在被访问的标志恢复为未被访问的标志<br>剩余区：除了上诉区外的其他部分代码<br>同步机制应遵循的规则<br>（1）空闲让进：临界资源空闲，应当允许一个请求进入临界区的进程立即进入自己的临界区，若有多个请求，必须挑一个<br>（2）忙则等待：若有临界资源正在被使用，其他进程需要等待。每次最多一个进程<br>（3）有限等待：每一个进程逗留有限时间<br>（4）让权等待：让出CPU竞争（不参与就绪，参与阻塞状态）<br>2.4.2 硬件同步机制<br>关中断：<br>实现互斥的最简单的方法之一<br>在进入锁测试之前关闭中断，直到完成锁测试并上锁之后才能打开中断<br>利用Test-and-Set指令实现互斥<br>该指令读出标志后设标志置为TRUE<br>PGSQL<br>1<br>2<br>3<br>4<br>5<br>6<br>boolean TS(boolean <em>lock) {<br>   boolean old;<br>   old = </em>lock;<br>   <em>lock = TRUE;<br>   return old;<br>}<br>lock表示资源的两种状态：TRUE表示正被占用，FALSE表示空闲<br>利用TS实现进程互斥：每个临界资源设置一个公共布尔变量lock，初值为FALSE<br>在进入区利用TS进行检查：有进程在临界区时，重复检查；直到其它进程退出时，检查通过；<br>SQF<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>do{<br>…<br>    while TS(&amp;lock);<br>    critical section;<br>    lock = FALSE;<br>    remainder section;<br>}while(TRUE);<br>利用Swap指令实现进程互斥<br>Swap指令（或Exchange指令）<br>交换两个字（字节）的内容<br>PGSQL<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>  void SWAP(int </em>a, int <em>b)<br>   {<br>       int temp;<br>       temp = </em>a;<br>       <em>a = </em>b;<br>       *b = temp;<br>}<br>利用Swap实现进程互斥：每个临界资源设置一个公共布尔变量lock，初值为FALSE。每个进程设置一个私有局部布尔变量key</p><p>SQF<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>do{<br>    key = TRUE；<br>    do{<br>        swap(&amp;lock,&amp;key);<br>    }while （key !=FALSE）;<br>    临界区操作；<br>    lock = FALSE；<br>    …<br>}while (TRUE);<br>2.4.3 信号量机制<br>整型信号量：<br>wait和signal操作可描述为： wait(int s)<br>{<br>  while(s&lt;=0);<br>  s—;<br>} signal(int s)<br>{<br>s++;<br>}<br>为临界资源设置一个互斥信号量mutex(MUTual Exclusion)，其初值为1；<br>在每个进程中将临界区代码置于wait(mutex)和signal(mutex)原语之间<br>必须成对使用wait和signal原语：遗漏wait原语则不能保证互斥访问，遗漏signal原语则不能在使用临界资源之后将其释放（给其他等待的进程）；<br>wait、signal原语不能次序错误、重复或遗漏:<br>记录型信号量机制<br>每个信号量s除一个整数值外s.count，还有一个进程等待队列s.queue，其中是阻塞在该信号量的各个进程的标识<br>信号量只能通过初始化和两个标准的原语来访问－－作为OS核心代码执行，不受进程调度的打断。<br>AND型信号量<br>信号量集<br>2.4.4 信号量的应用<br>利用信号量实现进程互斥：<br>利用整型信号量机制实现进程互斥时应注意，wait(mutex)和signal(mutex)必须成对出现<br>缺少wait(mutex)会导致系统混乱，不能保证对临界资源的互斥访问<br>缺少signal(mutex)将会使临界资源永远不被释放，从而使因等待该资源而阻塞的进程不再被唤醒<br>利用信号量实现前趋关系：<br>设有两个并发进程P1和P2。P1中有语句S1，P2中有语句S2，希望在执行完S1后执行S2<br>为实现这种前趋关系，可让进程P1和P2共享一个公用信号量S，并赋初值为0，将signal(S)操作放在语句S1后面；而在S2语句前插入wait(S)操作<br>进程P1， S1;signal(S);<br>进程P2， wati(S); S2;<br>由于S被初始化为0，若P2先执行，必定阻塞，只有在进程P1执行完使S增为1后，P2才能执行S2操作<br>2.4.5 管程机制<br>管程的定义：代表共享资源的数据结构以及由对该共享数据结构实施操作的一组过程所组成的资源管理程序共同构成了一个操作系统的资源管理模块<br>一个管程定义了一个数据结构和能为并发进程所执行（在该数据结构上）的一组操作，这组操作能同步进程和改变管程中的数据<br>管程的组成部分：<br>（1）管程的名字<br>（2）局部于管程的共享数据结构说明<br>（3）对该数据结构进行操作的一组过程<br>（4）对局部于管程的共享数据设置初始值的语句<br>所有进程要访问临界资源时，都只能通过管程间接访问，而管程每次只准许一个进程进入管程，执行管程内的过程，从而实现了进程互斥<br>管程的特性：<br>（1）模块化<br>（2）抽象数据结构<br>（3）信息掩蔽<br>进程与管程的区别：<br>（1）进程定义私有数据结构PCB，管程定义的是公共数据结构如消息队列<br>（2）进程是由顺序程序执行有关操作，管程主要是进行同步操作和初始化操作<br>（3）设置进程的目的在于实现系统的并发性，管程的设置是解决共享资源的互斥使用问题<br>（4）进程通过调用管程中的过程对共享数据结构实行操作，因而管程被动，进程主动<br>（5）进程之间能并发执行，管程不能<br>（6）进程具有动态性，管程是操作系统中的一个资源管理模块，供进程使用<br>条件变量<br>2.5 经典进程的同步问题<br>2.5.1 生产者-消费者问题<br>int in= 0,out= 0;<br>item buffer[n];<br>semaphore mutex = 1,empty = n,full = 0;<br>void producer(){<br>    do{<br>        producer an item nextp;<br>        …<br>        wait(empty);<br>        wait(mutex);<br>        buffer[in] = nextp;<br>        in = (in + 1) % n;<br>        signal(mutex);<br>        signal(full);<br>    }while(TRUE);<br> }<br> void consumer(){<br>    do{<br>    wait(full);<br>    wait(mutex);<br>    nextc = buffer[out];<br>    out = (out+1)%n;<br>    signal(mutex)<br>    signal(empty)<br>    consumer the item in nextc;<br>    …<br>    }while(TRUE);<br> }<br> void main(){<br>    cobegin<br>        producer();<br>        consumer();<br>    coend<br>}<br>2.5.2 哲学家进餐问题<br>略</p><p>2.5.3 读者-写者问题<br>略</p><p>2.6 进程通信<br>进程通信：进程间的信息交换<br>低级进程通信：进程的互斥和同步在进程间交换信息<br>（1）效率低（2）通信对用户不透明<br>高级通信：进程间传送大量数据<br>（1）使用方便（2）高效地传送大量数据<br>2.6.1 进程通信的类型<br>高级通信机制分为：共享存储器系统，管道通信系统，消息传递系统，客户机-服务器系统<br>共享存储器系统：<br>（1）基于共享数据结构的通信方式：仅适用于相对少量的数据，通信效率低，属于低级通信<br>（2）基于共享存储区的通信方式：在内存中划出一块共享存储区域，诸进程可通过对该区域的读或写交换信息，实现通信，数据的形式和位置甚至访问控制都是由进程负责，而不是OS，属于高级通信<br>管道通信系统<br>管道：指用于连接一个读进程和一个写进程以实现它们之间通信的一个共享文件，又名pipe文件。<br>提供互斥，同步，确定对方是否存在三个方面的协调能力<br>消息传递系统<br>以格式化的消息为单位，将通信的数据封装在消息中，并利用操作系统提供的一组通信命令（原语），在进程间传递消息，完成进程间的数据交换<br>（1）直接通信方式，如消息缓冲机制<br>（2）间接通信方式，如电子邮箱系统<br>客户机-服务器系统<br>实现的三种方法：套接字，远程过程调用，远程方法<br>（1）套接字：是一个通信标识类型的数据结构，包含了通信目的地址，端口号，协议等，是进程通信和网络通信的基本构件<br>分类：①基于文件型②基于网络型<br>（2）远程过程调用和远程方法调用：远程过程调用PRC，是一个通信协议，用于通过网络连接的系统。如果涉及的软件采用面向对象编程，那么远程过程调用亦可称做远程方法调用<br>2.6.2 消息传递通信的实现方式<br>直接消息传递系统：<br>（1）对称寻址原语：不足：一旦改变进程的名字，则可能需要检查所有其他进程的定义<br>（2）非对称寻址方式<br>（3） 消息的格式<br>（4） 进程的同步方式<br>（5）通信链路：为使在发送进程和接受进程之间能进行通信，必须在两者之间建立一条通信链路<br>分为：单向通信链路，双向通信链路<br>信箱通信：<br>信箱通信属于间接通信方式，即进程之间的通信，需要通过某种中间实体来完成。该实体建立在随机存储器的公用缓冲区上，用来暂存发送进程发送给目标进程的消息；接受进程可以从该实体中取出发送进程发送给自己的消息，通常把这种中间实体称为邮箱（或信箱），每个邮箱都有唯一的标识符。<br>（1）信箱的结构：信箱头，信箱体<br>（2）信箱通信原语<br>（3）信箱的类型：①私用信箱②公用信箱③共享信箱<br>2.7 线程的基本概念<br>线程：比进程更小的基本单位<br>线程目的：提高程序并发执行的程度<br>2.7.1 线程的引入<br>引入进程的目的：为了多个程序能并发执行，以提高资源利用率和系统吞吐量<br>引入线程的目的：减少程序在并发执行时所付出的时空开销，使OS具有更好的并发性<br>进程的两个基本属性：<br>（1）进程是一个可拥有资源的独立单位<br>（2）进程同时又是一个可独立调度和分派的基本单位<br>程序并发执行所需付出的时空开销<br>（1）创建进程，分配所需资源，建立PCB<br>（2）撤销进程，执行回收操作，撤销PCB<br>（3）进程切换，需保留当前CPU环境，建立新的CPU环境<br>线程 ——作为调度和而分派的基本单位<br>2.7.2 线程与进程的比较<br>传统进程：重型进程，线程：轻型进程/进程元<br>调度的基本单位：<br>线程间通信比进程更方便<br>同一进程的线程，计数器，堆栈资源不同<br>线程的切换，建立，撤销均快于进程<br>线程的切换不会引起进程的切换，但从一个进程中的线程切换到另一个进程的线程时，必然会引起进程的切换。<br>并发性：一个进程中的多个线程之间亦可以并发执行，甚至还允许在一个进程中所有线程都能并发执行<br>拥有资源：仅有一点必不可少的，能保证独立运行的资源，如：TCB等<br>独立性：同一进程中的不同线程之间的独立性要比不同进程之间的独立性低<br>系统开销：线程低于进程<br>支持多处理机系统<br>2.7.3 线程的状态和线程控制块<br>线程的三种状态：（1）执行（2）就绪（3）阻塞<br>线程控制块TCB：将所有用于控制和管理线程的信息记录其中<br>多线程OS中的进程属性：<br>（1）进程是一个可拥有资源的基本单位<br>（2）多个线程可以并发执行<br>（3）进程已不是可执行的实体，在多线程OS中，是把线程作为独立运行的基本单位<br>2.8 线程的实现<br>2.8.1 线程的实现方式<br>内核支持线程KST<br>优点：<br>（1）在多处理器系统中，内核能够同时调度同一进程中的多个线程并行执行<br>（2）如果进程中的一个线程被阻塞，内核可以调度该进程中的其他线程占用处理器运行，也可以运行其他进程中的线程<br>（3）内核支持线程具有很小的数据结构和堆栈，线程切换快，开销小<br>（4）内核本身采用多线程技术，可以提高系统的执行速度和效率<br>缺点：<br>系统开销大<br>用户级线程ULT<br>优点：<br>（1）线程切换不需要转换到内核空间<br>（2）调度算法可以是进程专用的<br>（3）用户级线程的实现与OS平台无关，因为对于线程管理的代码是属于用户程序的一部分<br>缺点：<br>（1）系统调用的阻塞问题<br>（2）进程中只有一个线程能执行<br>组合方式<br>2.8.2 线程的实现<br>内核支持线程的实现：<br>用户级线程的实现：（中间系统）<br>（1）运行时系统：实质上是用于管理和控制线程的函数的集合<br>（2）内核控制线程：轻型进程LWP，可看作是ULT和KLT之间的映射，它把一个或多个ULT映射到一个KLT上。LWP还是核心独立调度的单位，它可以在多个处理器上并行执行<br>注意：核心向用户程序提供的界面是LWP，不提供核心线程和用户级线程，用户程序接触不到核心线程，只能看到LWP和用户态线程。<br>把这些LWP做成一个线程池，只有连接到LWP上的线程才能与内核通信<br>LWP实现理内核和用户级线程之间的隔离<br>2.8.3 线程的创建和终止<br>线程具有生命周期<br>创建完成后返回一个线程标识符<br>线程被终止后并不立即释放它所占有的资源，只有当进程中的其他线程执行分离函数后，被终止线程才与资源分离<br>第三章 处理机调度与死锁<br>3.1 处理机调度的层次和调度算法的目标<br>调度的实质是一种资源分配，处理机调度是对处理机资源进行分配<br>3.1.1 处理机调度的层次<br>高级调度：又称长程调度或作业调度，调度对象是作业，高级调度主要用于多道批处理系统中，而在分时和实时系统中不设置<br>低级调度：又称进程调度或短程调度，调度对象是进程，最基本的调度<br>中级调度：又称内存调度，目的：提高内存利用率和系统吞吐量。将那些暂时不能运行的进程，调至外存等待，此时进程的状态称为挂起<br>其中进程调度的运行频率最高<br>作业调度周期最长<br>中级调度的运行频率介于两者之间<br>3.1.2 处理机调度算法的目标<br>处理机调度算法的共同目标<br>（1）资源利用率：<br>cpu的利用率=cpu有效工作时间/（cpu有效工作时间+cpu空闲等待时间）<br>（2）公平性<br>（3）平衡性<br>（4）策略强制转换<br>批处理系统的目标：<br>（1）平均周转时间短<br>（2）系统吞吐量高<br>（3）处理机利用率高<br>分时系统的目标<br>（1）响应时间快<br>（2）均衡性<br>实时系统的目标<br>（1）截至时间的保证<br>（2）可预测性<br>3.2 作业与作业调度<br>3.2.1 批处理系统中的作业<br>作业和作业步：<br>（1）作业：<br>作业是用户提交给系统的以向相对独立的工作<br>在批处理系统中是以作业为基本单位从外存调入内存的<br>（2）作业步：</p><p>在作业运行期间，每个作业都必须经过若干个相对独立的，又相互关联的顺序加工步骤才能得到结果。我们把其中的每一加工步骤叫做一个作业步<br>一个典型的作业可以分成：编译作业步，链接装配作业步，运行作业步</p><ol><li>作业运行的三个阶段和三种状态：<br>（1）收容阶段：操作员把用户提交的作业通过某种输入方式或SPOOLing系统输入到硬盘上，在为该作业建立JCB，并把它们放到作业后备队列中。此时作业的状态也叫“后备状态”<br>（2）运行阶段：“运行状态”<br>（3）完成阶段：“完成状态”</li></ol><p>3.2.2 作业调度的主要任务<br>主要任务：根据JCB中的信息，检查系统中的资源能否满足作业对资源的需求，以及按照一定算法，将作业调入内存，创建进程，分配资源，将新建立的进程排在就绪队列上等待调度，故作业调度也叫接纳调度。<br>接纳多少个作业<br>接纳那些作业<br>3.2.3 先来先服务（FCFS）和短作业有限（SJF）调度算法<br>先来先服务调度算法（FCFS）：<br>按照作业的到达的先后次序来调度，即优先考虑等待时间最长的作业<br>缺点：对于短进程而言，带权周转时间可能非常的大<br>适用于作业调度和进程调度<br>短作业有限的调度算法（SJF）：<br>按照作业的长短来计算优先级，作业越短，其优先级越高<br>缺点：<br>（1）必须预知作业的运行时间<br>（2）对长作业非常不利<br>（3）在采用SJF时，人机交互无法实现<br>（4）该调度算法完全未考虑作业的紧迫程度，故不能保证紧迫作业能得到及时处理<br>3.2.4 优先级调度算法和高响应比调度算法<br>优先级调度算法（PSA）<br>根据作业的优先级进行调度<br>高响应比优先调度算法：<br>优先权=（等待时间+要求服务时间）/要求服务时间=响应时间/要求服务时间</p><p>动态优先级<br>更公平但增加了系统开销<br>3.3 进程调度<br>3.3.1 进程调度的任务，机制和方式<br>进程调度的任务：<br>（1）保存处理机的现场信息<br>（2）按某种算法选取进程<br>（3）把处理器分配给进程<br>进程调度机制<br>三个部分<br>（1）排队器<br>（2）分派器<br>（3）上下文切换器<br>进程调度方式<br>（1）非抢占方式：<br>在采用非抢占调度方式时，可能引起进程调度的因素可归结为这样几个：① 正在执行的进程执行完毕， 或因发生某事件而不能再继续执行； ② 执行中的进程因提出I/O请求而暂停执行；③ 在进程通信或同步过程中执行了某种原语操作，如P操作(wait操作)、Block原语、Wakeup原语等。这种调度方式的优点是实现简单、系统开销小，适用于大多数的批处理系统环境。但它难以满足紧急任务的要求——立即执行。</p><p>（2）抢占方式<br>主要原则：<br>（1）优先权原则。<br>（2）短作业(进程)优先原则。<br>（3）时间片原则。</p><p>3.3.2 轮转调度算法（RR）<br>基于时间片的轮转，非常公平<br>每个进程每次大约可获得1/n的处理机时间<br>轮转法的基本原理：系统根据FCFS策略，将所有的就绪进程排成一个就绪队列，并每隔一段时间产生一次中断，激活系统中的进程调度，将CPU分配给队首进程，令其执行<br>进程切换时机：<br>（1）若一个时间片尚未用完，正在运行的进程便已经完成，就立即激活调度程序，将它从就绪队列中删除，再调度就绪队列队首的进程运行，并启动新的时间片<br>（2）在一个时间片用完时，计时器中断处理程序被激活，如果进程尚未运行完，调度程序把它送入就绪队列末尾<br>时间片大小的确定<br>小：频繁地执行进程调度和进程上下文切换，增加系统开销<br>大：每个进程都能在一个时间片内完成，算法退化为FCFS<br>3.3.3 优先级调度算法<br>优先级调度算法分类：<br>（1）非抢占式优先级调度算法：优先级低的正在运行时，优先级高的不能抢占CPU<br>（2）抢占式优先级调度算法<br>优先级的类型：<br>（1）静态优先级：<br>在创建进程时确定<br>依据：进程类型，进程对资源的需求，用户需求<br>简单易行，系统开销小，但不够精确<br>（2）动态优先级：<br>其值随进程的推进或时间的增加而改变，以获得更好的性能<br>3.3.4 多队列调度算法<br>该算法将系统中的进程就绪队列从一个拆分成若干个，将不同类型或性质的进程固定分配在不同的就绪队列，不同的就绪队列采用不同的调度算法，一个就绪队列中的进程可以设置不同的优先级，不同的就绪队列本身也可以设置不同优先级<br>3.3.5 多级反馈队列调度算法<br>调度机制：<br>（1）设置多个就绪队列。第一个队列优先高，时间片最短，其后依此降低优先级，增大时间片<br>（2）每个队列内采用FCFS算法<br>（3）调度算法的性能：<br>能较好的满足用户的需要<br>3.3.6 基于公平原则的调度算法<br>保证调度算法：n个相同类型的进程，每个都获得相同的处理机时间1/n<br>公平分享调度算法：分配给每个进程相同的处理机时间，公平性是针对用户而言，要考虑每一个用户的进程数目<br>3.4 实时调度<br>3.4.1 实现实时调度的基本条件<br>提供必要的信息：<br>（1）就绪时间<br>（2）开始截止时间和完成截止时间<br>（3）处理时间<br>（4）资源要求<br>（5）优先级<br>系统处理能力强<br>（1）单处理机，必须满足下面的限制条件：<br>c是处理机时间，p是周期时间<br>（2）多处理机，限制条件改为：</p><p>3.采用抢占式调度机制</p><p>在含有HRT任务的实时系统中，广泛采用抢占式机制，满足对截止时间的要求<br>具有快速切换机制<br>（1）对中断的快速响应<br>（2）快读的任务分派能力<br>3.4.2 实时调度算法的分类<br>非抢占式调度算法<br>（1）非抢占式轮转调度算法<br>（2）非抢占式优先调度算法<br>抢占式调度算法<br>（1）基于时钟中断的抢占式优先级调度算法<br>（2）立即抢占的优先级调度算法<br>3.4.3 最早截止时间优先EDF算法<br>任务的截止时间越早，其优先级越高，具有最早截止时间的任务排在队列的队首<br>非抢占式调度方式用于非周期实时任务<br>抢占式调度方式用于周期实时任务<br>3.4.4 最低松弛度优先LLF算法<br>任务紧急程度越高，赋予该任务的优先级就越高，以使之优先执行<br>松弛度=必须完成时间-其本身的运行时间-当前时间<br>3.4.5 优先级倒置<br>高优先级进程被低优先级进程延迟或阻塞<br>3.5 死锁<br>3.5.1 资源问题<br>可重用性资源和消耗性资源<br>（1）可重用性资源：用户可以重复使用多次的资源<br>性质：（1）每一个可重用资源中的单位只能分配给一个进程使用<br>（2）进程在使用时的顺序：①请求资源②使用资源③释放资源<br>（3）系统中每一类可重用资源的单元数目都是固定的，进程在运行期间既不能创建也不能删除<br>对资源的请求和释放都是利用系统调用来实现的<br>（2）可消耗性资源：又称临时资源<br>性质：（1）每一个可消耗性资源的单元数目在进程运行期间是可以不断变化的<br>可抢占性资源和不可抢占性资源：<br>（1）可抢占性资源：这类资源不会引起死锁<br>（2）不可抢占性资源：例如磁带机，打印机<br>3.5.2 计算机系统中的死锁<br>死锁：多个进程对资源的争夺，不仅对不可抢占性资源争夺会引起死锁，对可消耗性资源的争夺也会引起死锁<br>竞争不可抢占性资源引起死锁<br>竞争可消耗资源引起死锁<br>进程推进顺序不当引起死锁<br>3.5.3 死锁的定义，必要条件和处理方法<br>死锁的定义：如果一组进程中的每一个进程都在等待仅由该组进程中的其他进程才能引发的事件，那么该组进程是死锁的<br>产生死锁的必要条件：<br>（1）互斥条件<br>（2）请求和保持条件<br>（3）不可抢占条件<br>（4）循环等待条件<br>处理死锁的方法：<br>（1）预防死锁：设置某些限制条件，破坏产生死锁的四个必要条件<br>（2）避免死锁：在资源的动态分配过程中采取某种方法，使之保持安全状态<br>（3）检测死锁<br>（4）解除死锁：撤销进程，回收资源<br>3.6 预防死锁<br>互斥条件是非共享设备所必须的，不仅不能改变，还应加以保证，因此主要破坏产生死锁的后三个条件<br>3.6.1 破坏“请求和保持条件”<br>第一种协议：所有进程在开始运行钱，必须一次性申请所需全部资源<br>简单，易行且安全，但①资源被严重浪费，②进程经常发送饥饿现象<br>第二种协议：<br>允许进程只获取运行初期所需的资源，便可开始运行，在逐步释放已用毕的全部资源，再请求新的资源<br>更快，提高设备的利用率，减少饥饿机率<br>3.6.2 破坏“不可抢占”条件<br>一个已经保持了某些不可抢占资源的进程，提出新的资源请求而不能得到满足时，必须释放已经保持的多有资源，待以后再申请<br>实现复杂，延长了进程的周转事件，增加系统开销，降低系统吞吐量<br>3.6.3 破坏“循环等待” 条件<br>对系统所有资源类型进行线性排序，并赋予不同的序号，必须按照序号递增的顺序请求资源<br>如果需要多个同类资源单元，则必须一起请求<br>假如进程已请求到一些序号较高的资源后，后来它又想请求序号低的资源，必须先释放所有具有相同和更高序号的资源后才能申请<br>避免死锁<br>再资源的动态分配过程中，防止系统进入不安全状态，以避免发送死锁<br>3.7.1 系统安全状态<br>安全状态：是指系统能按某种顺序，来为每个进程分配其所需资源，直至最大需求，使每个进程都可顺利完成。<br>安全序列：<br>一个进程序列{P1，…，Pn}是安全的，如果对于每一个进程Pi(1≤i≤n），它以后需要的资源量不超过系统当前剩余资源量与所有进程Pj (j &lt; i )当前占有资源量之和，系统处于安全状态。<br>(安全状态一定是没有死锁发生的)<br>3.7.2 利用银行家算法避免死锁<br>银行家算法（Banker’s Algorithm）</p><p>概念<br>银行家算法是一个避免死锁产生的算法。以银行借贷分配策略为基础，判断并保证系统处于安全状态。<br>客户在第一次申请贷款时，声明所需最大资金量，在满足所有贷款要求并完成项目时，及时归还<br>在客户贷款数量不超过银行拥有的最大值时，银行家尽量满足客户需要<br>3.8 死锁的检测和解除<br>允许系统进入死锁状态<br>维护系统的资源分配图<br>定期调用死锁检测算法来搜索图中是否存在死锁<br>出现死锁时，用死锁恢复机制进行恢复</p><p>解除死锁：<br>（1）资源剥夺法：挂起某些死锁进程并抢夺它的资源，以便让其他进程继续推进<br>（2）撤销进程法：强制撤销部分、甚至全部死锁进程并剥夺这些进程的资源<br>（3）进程回退法：让进程回退到足以回避死锁的地步<br>算法：<br>(1)银行家算法为死锁避免算法；<br>(2)死锁检查算法和资源分配图化简法为死锁检测；<br>(3)资源有序分配算法为死锁预防策略；<br>所谓CPU繁忙型的作业，是指该类作业需要大量的CPU时间进行计算，而很少请求I/O操作。I/O繁忙型的作业是指CPU处理时，需频繁的请求I/O操作。<br>(1)周转时间 = 作业完成时间 - 作业提交时间；<br>(2)平均周转时间 = （作业1的周转时间 + … + 作业n的周转时间）/ n ；<br>(3)带权周转时间 = 作业周转时间 / 作业实际运行时间；<br>(4)平均带权周转时间 = （作业1的带权周转时间 + … + 作业n的带权周转时间）/ n；<br>(5)响应比Rp = (等待时间 + 要求服务时间) /要求服务时间；<br>第四章 存储器管理</p><p>内存管理：<br>引入目的：更好的支持多道程序并发执行，提升系统性能<br>-‘程序的编译’：由编译程序将用户源代码编译成若干个目标模块；<br>-‘程序的链接’：由链接程序将编译后形成的一组目标模块，以及所需库函数链接在一起，形成一个完整的装入模块；<br>（1）静态链接：在程序运行之前链接<br>（2）装入时动态链接：在装入内存时，采用边装入边链接的链接方式<br>（3）运行时动态链接：在程序执行中需要该目标模块时，才对它进行链接<br>-‘程序的装入’：由装入程序将装入模块装入内存运行；<br>（1）绝对装入：适合单道程序环境<br>（2）静态重定位：适合装入之后不再移动的情况<br>（3）动态重定位：适合装入之后还会移动的情况<br>‘地址空间’：<br>（1）逻辑地址空间：是指一个源程序在编译或者链接装配后指令和数据所用的所有相对地址的空间；<br>（2）物理地址空间：内存中物理单元的集合；<br>‘地址重定位’：通过地址转换将逻辑地址转换为物理地址。<br>‘内存保护’：<br>（1）上、下限寄存器：分别与上、下限寄存器比较<br>（2）基址、限长寄存器：与限长寄存器比较，与基址寄存器相加<br>管理方式：<br>（1）连续分配：产生内部碎片；用户进程（或作业）在主存中都是连续存放的<br>单一连续分配：分配到内存固定区域，只适合单任务系统；<br>固定分区分配：分配到内存中不同的固定区域，分区可以相等也可以不等；<br>产生内部碎片<br>动态分区分配：<br>产生外部碎片<br>基本概念：按照程序的需要进行动态的划分<br>分配算法：<br>（1）首次适应：空闲区按地址从小到大为序，分配第一个符合条件的分区；<br>（2）最佳适应：空闲区按空间大小从小到大排序，分配第一个符合条件的分区；<br>（3）最坏适应：空闲区按空间从大到小排序，分配第一个符合条件的分区；<br>（4）邻近适应：空闲区按地址地址递增的次序排列，分配内存时从上次查找结束的位置开始继续查找；<br>（2） 非连续分配：允许一个程序分散地装入到不相邻的内存分区中，需要额外的空间去存储分散区域的索引</p><p>基本分页：内存分为固定的块，按物理结构划分，会有内部碎片；<br>主存、进程都划分为大小固定的块，进程在执行时，以块为单位申请主存中的块空间；<br>进程中的块为页，内存中的块为页框。系统为每个进程建立一张页表，页表记录页面在内存中对应的物理块号，实现从页号到物理块号的地址映射；<br>页式管理中地址空间是一维的；<br>基本分段：内存块的大小不固定，按逻辑结构划分，会有外部碎片；<br>段式管理方式按照用户进程中的自然段划分逻辑空间。段内要求连续，段间不要求连续。段号和段内偏移量必须由用户显示提供。<br>方便编程、共享、保护、动态链接和增长。<br>段页式：基本分段和基本分页的结合，会有内部碎片；<br>作业的逻辑地址分为：段号、页号和页内偏移量；采用分段方法来分配和管理用户地址空间，采用分页方法来管理物理存储空间；开销大。<br>请求分页存储管理：采用虚拟技术，开始运行时不必将作业全部一次性装入内存；<br>多级页表：将页表的10页空间也进行地址映射，建立上一级页表，用于存储页表的映射关系；<br>多道程序下的内存扩充：<br>覆盖：预先设定覆盖段，覆盖掉暂时不用的内容，通常在同一个程序之中进行；<br>交换：把处于等待的程序暂时移到外存，通常在不同程序之间进行；<br>虚拟内存：只能基于非连续分配技术。<br>引入原因：在逻辑上扩充内存<br>时间局部性：程序中存在着大量的循环操作；<br>空间局部性：程序在一段时间内所访问的地址，可能集中在一定的范围内；<br>组成部分：<br>（1）页表机制：通过查表获取相关信息；<br>（2）中断机制：要访问页不在内存时产生缺页中断<br>（3）地址变换机构：把逻辑地址变换成物理地址<br>（4）内存和外存：需要一定容量的内存和外存支持<br>置换算法：<br>（1）最佳置换算法（OPT）：选择以后不用的页面<br>（2）先进先出（FIFO）：选择最先装入的页面<br>（3）最近最久未使用（LRU）：选择最近最近未使用的页面<br>（4）时钟置换算法（最近未用算法）：选择最近未用的页面<br>（5）改进型CLOCK：考虑页面修改问题<br>地址翻译：TLB-&gt;页表（TLB不命中）-&gt;Cache-&gt;主存-&gt;外存<br>页面分配策略：<br>固定分配局置换：每个进程分配一定数目的物理块，在整个运行期间不变，缺页时只在该进程在内存中的页面中进行置换；<br>可变分配全局置换：为每个进程分配一定数目的物理块，操作系统自身也保持一个空闲物理块队列；<br>可变分配局部置换：若进程在运行中频繁地缺页，系统再为该进程分配若干物理块；<br>抖动（颠簸）：刚换出的页面马上又要换入内存；刚换入的页面马上就要换出内存；<br>工作集（驻留级）：<br>指在某段时间间隔内，进程要访问的页面集合。<br>虚拟内存空间大小：<br>&lt;=内存容量和外存容量之和&lt;<br>&lt;=计算机的地址位数能容纳的最大容量<br>虚拟存储的页表项：<br>页号<br>物理块号<br>状态位P：用于指示该页是否已调入内存，供程序访问参考；<br>访问字段A：用于记录本页在一段时间内被访问的次数，或记录本页最近已有多长时间未被访问，供置换算法换出页面时参考；<br>修改位M：标识该页在调入内存后是否被修改过；<br>外存地址<br>Belady现象：进程的缺页次数随着分配给进程的页框个数的增加而增加，只有FIFO队列式页面置换算法才有。<br>快表（联想寄存器TLB）：用来存放当前访问的若干页表项，以加速地址变换的过程，若所需访问页号在快表中则可减少一次内存访问。<br>第五章 虚拟存储器<br>略</p><p>第六章 输入输出系统<br>I/O管理概述：状态跟踪、设备存取、设备分配、设备控制<br>设备分类：按传输速率分：<br>低速：如磁盘、鼠标中速：如行式打印机、激光打印机高速：如磁带机、磁盘机、光盘机按信息交换单位分：<br>块设备：如磁盘字符设备：如键盘、打印机<br>控制方式：程序直接控制：程序直接对设备特环测试中断驱动：引入中断机制，当设备准备完成时发生中断DMA：在I/O设备与主存之间开辟直接数据通路，彻底“解放”CPU。<br>基本数据单位是块；传送的数据从设备直接送入内存（或相反）仅在传送一个或多个数据块的开始和结束时，才需要CPU干预，整块数据的传送是在DMA控制器的控制下完成的；包含的四类控制器：<br>命令/状态寄存器（CR）内存地址寄存器（MAR）数据寄存器（DR）数据计数器（DC）<br>通道控制：引入专门的I/O处理机进行管理<br>I/O子系统层次：用户层I/O软件：实现与用户交互的接口设备独立性软件：实现用户程序与设备驱动器的统一接口、设备命令、设备保护以及设备分配与释放设备驱动程序：与硬件直接相关，负责具体实现系统对设备发出的操作指令中断处理程序：用于处理中断相关事项硬件设备：包括一个机械部件（设备本身）和一个电子邮件（控制器）<br>I/O核心子系统：<br>I/O调度：确定一个好的顺序来执行这些I/O请求<br>磁盘高速缓存：指利用内存中的存储空间来暂存从磁盘上读出的一系列盘块中的信息；逻辑上属于磁盘，物理上属于内存；1：在内存中开辟一个单独的存储空间作为磁盘高速缓存，大小固定2：把未利用的内存空间作为一个缓冲池，供请求分页系统和磁盘时I/O共享<br>缓冲区：位于内存区域<br>特点：当缓冲区的数据非空的时候，不能往缓冲区冲入数据，只能从缓冲区把数据传出；为空时，可以冲入数据，但必须充满遗憾才能再传出。<br>引入缓冲区的目的：缓和CPU与I/O设备间速度不匹配的矛盾减少对CPU的中断频率，放宽对CUP中断响应时间的限制解决基本数据单元大小不匹配的问题提高CPU和I/O设备之间的并行性<br>单缓冲<br>双缓冲<br>循环缓冲<br>缓冲池<br>比较    高度缓存    缓冲区<br>存放数据    存放的是低速设备上的某些数据的复制数据    存放的是低速设备传递给高速设备的数据（或相反）<br>目的    高速缓存存放的是高速设备经常要访问的数据    高速设备和低速设备的通信都要经过缓冲区，高速设备永远不会直接去访问低速设备<br>相同点    都是介于高速设备和低速设备之间    都是介于高速设备和低速设备之间<br>设备的分配与回收：<br>分类：<br>（1）独点式使用设备：设备被使用时不再允许其他进程使用设备<br>（2）分时共享式使用设备：设备没有独占使用的要求时，可以通过分时共享使用<br>（3）SPOOLing技术：将独占设备改造成共享设备,实现了虚拟设备的功能；以空间换时间，必须先有独占设备<br>设备分配的数据结构：<br>（1）设备控制表（DCT）：每个设备配置一张DCT，以记录本设备的情况；<br>（2）控制器控制表（COCT）：每个控制器有一张COCT；<br>（3）通道控制表（CHCT）：每个通道配置一张CHCT；<br>（4）系统设备表（SDT）整个系统只有一张SDT，记录已连接到系统中的所有物理设备的情况<br>（5）SDT中有一个DCT指针，DCT中有一个COCT指针，COCT中有一个CHCT指针，CHCT中有一个COCT指针。<br>分配原则：即要求充分发挥设备的使用效率，又要避免造成进程死锁，还要将用户程序和具体设备隔离开<br>分配方式：<br>（1）静态分配：在用户作业开始执行前，由系统一次性分配该作业所要求的全部设备<br>（2）动态分配：在进程执行过程中根据执行需要进行分配<br>设备分配的安全性：<br>（1）安全分配方式：每当进程发出I/O请求后便进入阻塞状态，直到其I/O操作完成时才被唤醒。<br>（2）不安全分配方式：进程发出多个I/O请求并继续运行，仅当进程所请求的设备已被另一进程占用时，才进入阻塞状态。<br>设备独立性是指应用程序独立于具体使用的物理设备<br>SPOOLing技术：主要包括输入井、输出井、输入缓冲区和输出缓冲区以及输入进程和输出进程。<br>输入井和输出井是在磁盘上开辟的两大存储空间；<br>（1）输入井是模拟脱机输入时的磁盘设备，用于暂存I/O设备输入的数据<br>（2）输出井是模拟脱机输出时的磁盘，用于暂存用户程序的输出数据<br>第七章 文件管理<br>文件控制块（FCB），类似进程管理的PCB，存放控制文件需要的各种信息的数据结构。<br>基本信息：包括文件物理位置<br>存取控制信息<br>使用信息<br>索引结点一个<br>文件对应一个FCB，而一个文件目录项就是一个FCB。<br>打开文件操作是讲该文件的FCB存入内存的活跃文件目录表，而不是将文件内容负责到主存，找到指定文件目录是打开文件之前的操作。<br>文件系统基础：<br>逻辑结构：<br>无结构文件（流式文件）：将数据按顺序组织成记录并积累保存，（流式文件）则被看成是一个字符流，以字节（Byte）为单位；<br>有结构文件：<br>（1）顺序文件：<br>串结构：记录之间的顺序与关键字无关<br>顺序结构：记录之间的顺序与关键字有关<br>（2）索引文件：为变长文件建立索引表，提高查找速度<br>（3）索引顺序文件：顺序文件和索引文件的结合，将顺序文件中的所有记录分为若干组，为顺序文件建立一张索引表，在索引中为每组的第一个记录建立一个索引项，其中含有该记录的关键字值和指向该记录的指针<br>（4）直接文件（查找文件）Hash File：通过哈希函数直接决定记录地址<br>目录结构：<br>单级：全部文件都放在一个目录下<br>两级：在目录下分出用户目录<br>多级：将两级结构加以推广，采用树形结构<br>无环图：在树形结构上加入一些有向边，便于共享<br>文件共享：<br>基于索引结点（硬链接）：共享文件指向同一个索引节点；链接计数count；<br>基于符号链（软链接）：有文件拥有者才拥有指向其索引结点的指针，共享该文件的其他用户则只有该文件的路径；<br>文件保护：<br>口令保护：通过口令访问文件<br>加密保护：对文件进行加密处理<br>访问控制：根据访问者的身份进行限制<br>文件系统实现：<br>目录实现：线性列表：<br>无序：查找文件较慢，新建文件较快<br>有序：查找文件较快，新建文件较慢<br>哈希表：查找、新建文件都较快，要处理冲突<br>文件实现：<br>连续分配：在磁盘上连续存放文件<br>链接分配：隐式：采用类似链表的结构，显式：把隐式文件中的指针单独抽离出来<br>索引分配：每个文件所有的盘块号都集中存放，建立索引表<br>存储空间管理：<br>空闲表：把所有空闲块组织成表<br>空闲链表法：把所有空闲块组织成链表<br>位示图：利用二进制的每位记录空闲块<br>成组链接：空闲表和空闲链表的结合，适合大的文件系统<br>第八章 磁盘存储器的管理<br>磁盘管理<br>磁盘地址结构：柱面号、盘面号、扇区号<br>读写时间：<br>（1）寻道时间：将磁头移动到指定磁道所需要的时间<br>（2）延迟时间：磁头定位到某一磁道的扇区所需要的时间<br>（3）传输时间：从磁盘读出或向磁盘写入数据所经历的时间<br>（4）启动时间（一般忽略）：控制器的启动时间<br>调度算法：<br>（1）先来先服务（FCFS）：根据进程请求访问磁盘的先后顺序进行调度<br>（2）最短寻找时间优先（SSTF）：选择当前磁头所在的磁道距离最近的磁道<br>（3）扫描（SCAN）算法（电梯算法）：在磁头当前移动方向上选择与当前磁头所在磁道距离最近的请求<br>（4）循环扫描（C-SCAN）：在扫描算法的基础上规定磁头单向移动来提供服务<br>磁盘管理：<br>初始化：对磁盘进行低级格式化和逻辑化<br>引导块：存放自举程序<br>坏块：对于损坏扇区的处理</p><p>作者: Justlovesmile<br>链接: <a href="https://blog.justlovesmile.top/posts/8398.html">https://blog.justlovesmile.top/posts/8398.html</a><br>来源: Justlovesmile’s BLOG<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>]]></content>
      
      
      <categories>
          
          <category> 学习技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32学习笔记</title>
      <link href="/2023/09/10/%E7%89%A9%E8%81%94%E7%BD%91-STM32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/09/10/%E7%89%A9%E8%81%94%E7%BD%91-STM32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="1-STM32简介"><a href="#1-STM32简介" class="headerlink" title="1. STM32简介"></a><strong>1. STM32简介</strong></h1><h2 id="1-1-STM32命名规范"><a href="#1-1-STM32命名规范" class="headerlink" title="1.1 STM32命名规范"></a><strong>1.1 STM32命名规范</strong></h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps1.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps2.png" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps3.png" alt="img"> </p><p>ARM既指ARM公司，也指ARM处理器内核。</p><ul><li><p>A：Application，主要偏向于应用</p></li><li><p>R：Realtime，偏向于实时性</p></li><li><p>M：Microcontroller，微控制器</p></li></ul><h2 id="1-2STM32F103C8T6特性"><a href="#1-2STM32F103C8T6特性" class="headerlink" title="1.2STM32F103C8T6特性"></a><strong>1.2STM32F103C8T6特性</strong></h2><ul><li><p>系列：主流系列STM32F1</p></li><li><p>内核：ARM Cortex-M3</p></li><li><p>主频：72MHz</p></li><li><p>RAM：20K（SRAM）</p></li><li><p>ROM：64K（Flash）</p></li><li><p>供电：2.0~3.6V（标准3.3V）</p></li><li><p>封装：LQFP48</p></li></ul><h2 id="1-3-片上资源外设"><a href="#1-3-片上资源外设" class="headerlink" title="1.3 片上资源外设"></a><strong>1.3 片上资源外设</strong></h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps4.jpg" alt="img"> </p><h2 id="1-4-系统架构"><a href="#1-4-系统架构" class="headerlink" title="1.4 系统架构"></a><strong>1.4 系统架构</strong></h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps5.jpg" alt="img"> </p><h2 id="1-5-引脚定义"><a href="#1-5-引脚定义" class="headerlink" title="1.5 引脚定义"></a><strong>1.5 引脚定义</strong></h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps6.jpg" alt="img"> </p><h2 id="1-6-启动配置"><a href="#1-6-启动配置" class="headerlink" title="1.6 启动配置"></a><strong>1.6 启动配置</strong></h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps7.jpg" alt="img"> </p><p><strong>(1)最常用配置</strong>：BOOT0设为0，正常的执行Flash闪存里面的程序，使用STLINK、DAPlink进行下载调试</p><p><strong>(2)串口下载模式</strong>：BOOT0设为1，BOOT1设为0，系统存储器(存放Bootloader程序，接收串口的数据，然后刷新到主闪存中)</p><p><strong>(3)最后一种模式</strong>，主要用于程序调试，用的比较少</p><h2 id="1-7-DAPLink烧录"><a href="#1-7-DAPLink烧录" class="headerlink" title="1.7  DAPLink烧录"></a><strong>1.7  DAPLink烧录</strong></h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps8.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps9.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps10.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps11.jpg" alt="img"> </p><p>每次下载程序，需要先rebuild编译，在下载！</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps12.jpg" alt="img"> </p><h1 id="2、STM32工程模版"><a href="#2、STM32工程模版" class="headerlink" title="2、STM32工程模版"></a><strong>2、STM32工程模版</strong></h1><h2 id="2-1-Keil配置工作模板"><a href="#2-1-Keil配置工作模板" class="headerlink" title="2.1 Keil配置工作模板"></a><strong>2.1 Keil配置工作模板</strong></h2><p>使用ST库函数的开发方式进行寄存器配置。</p><p>新建工程步骤：</p><ol><li><p>建立工程文件夹，Keil中新建工程，选择型号</p></li><li><p>工程文件夹里建立Start、Library、User等文件夹，复制固件库里面的文件到工程文件夹</p></li><li><p>工程里对应建立Start、Library、User等同名称的分组，然后将文件夹内的文件添加到工程分组里</p></li><li><p>工程选项，C/C++，Include Paths内声明所有包含头文件的文件夹</p></li><li><p>工程选项，C/C++，Define内定义USE_STDPERIPH_DRIVER  (标准外设驱动字符串，使用库函数开发时，这个是必须添加的)</p></li><li><p>工程选项，Debug，下拉列表选择对应调试器，Settings，Flash Download里勾选Reset and Run</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps13.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps14.jpg" alt="img"> </p><p><strong>工程架构</strong>：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps15.jpg" alt="img"> </p><p>根据不同的产品型号，选择不同的文件：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps16.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps17.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps18.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps19.jpg" alt="img"> </p><h2 id="2-2、创建工程步骤总结"><a href="#2-2、创建工程步骤总结" class="headerlink" title="2.2、创建工程步骤总结"></a><strong>2.2、创建工程步骤总结</strong></h2><ol><li>快速创建Start、Library、User组，添加相关的文件</li></ol><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps20.jpg" alt="img"> </p><p>2.点击魔术棒按钮，添加第一步文件的路径，并添加这句话USE_STDPERIPH_DRIVER</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps21.jpg" alt="img"> </p><ol><li>选择对应的调试器(DAPLink)</li></ol><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps22.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps23.jpg" alt="img"> </p><p>4.小工具：keilkill，是一个批处理文件，可以把工程编译产生的中间文件都删掉</p><p><img src="C:\Users\ahoilc\AppData\Local\Temp\ksohtml35920\wps24.jpg" alt="img"> </p><p>使用前后的对比：减小工程体积，之后可以添加到压缩包分享发送给别人</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps25.jpg" alt="img"> <img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps26.jpg" alt="img"></p><h1 id="3-GPIO配置及应用"><a href="#3-GPIO配置及应用" class="headerlink" title="3. GPIO配置及应用"></a><strong>3. GPIO配置及应用</strong></h1><h2 id="3-1-GPIO工作模式介绍"><a href="#3-1-GPIO工作模式介绍" class="headerlink" title="3.1 GPIO工作模式介绍"></a><strong>3.1 GPIO工作模式介绍</strong></h2><p>GPIO基本结构：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps27.jpg" alt="img"> </p><p><strong>GPIO位结构</strong>：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps28.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps29.jpg" alt="img"> </p><p>单片机的GPIO配置为输出模式时，会有两种模式：推挽模式、开漏模式。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps30.jpg" alt="img"> </p><p>上下MOS同时导通时，发生短路，这种状态需要避免。</p><p><strong>推挽输出模式理解</strong>：GPIO输出高低电平时，电流的一个动作而已</p><p>推：IO输出高电平时，把电流推出去</p><p>挽：IO输出低电平时，外界电流流进来，把电流挽回来。</p><p><strong>开漏模式</strong>：低电平和高阻态(被外接上拉电阻拉到高电平)的组合，称为开漏输出。</p><p>需要在外面接一个上拉电阻，常用于几个GPIO控制一个输入。</p><p>开漏模式输出高电平相当于高阻态，没有驱动能力；低电平有驱动能力。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps31.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps32.jpg" alt="img"> </p><p>只要有任意一个GPIO输出低电平，enable就是低电平</p><p>如果都处于高阻态，enable就是高电平</p><h2 id="3-2-LED闪烁"><a href="#3-2-LED闪烁" class="headerlink" title="3.2 LED闪烁"></a>3.2 LED闪烁</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps33.jpg" alt="img"> </p><p>操作STM32的GPIO共需要3个步骤：</p><p>1.使用RCC开启GPIO的时钟</p><p>2.使用GPIO_Init函数初始化GPIO</p><p>3.使用输出或者输入的函数控制GPIO口</p><p>1.RCC(Reset Clock Controller)，复位与时钟控制器，常用RCC AHB外设时钟控制、RCC APB2外设时钟控制、RCC APB1外设时钟控制</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps34.jpg" alt="img"> </p><p>2.GPIO常用库函数</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps35.jpg" alt="img"> </p><p>GPIO_Init()函数：用结构体的参数来初始化GPIO口，需要先定义一个结构体变量，然后给结构体赋值，最后调用这个函数。</p><p>GPIO工作模式：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps36.jpg" alt="img"> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">typedef enum</span><br><span class="line"></span><br><span class="line">&#123; GPIO_Mode_AIN = 0x0,  // Analog IN，模拟输入</span><br><span class="line"></span><br><span class="line"> GPIO_Mode_IN_FLOATING = 0x04, // 浮空输入 </span><br><span class="line"></span><br><span class="line"> GPIO_Mode_IPD = 0x28,// In Pull Down，下拉输入</span><br><span class="line"></span><br><span class="line"> GPIO_Mode_IPU = 0x48,// In Pull Up，上拉输入</span><br><span class="line"></span><br><span class="line"> GPIO_Mode_Out_OD = 0x14,// Out Open Drain，开漏输出</span><br><span class="line"></span><br><span class="line"> GPIO_Mode_Out_PP = 0x10,  // Out Push pull，推挽输出</span><br><span class="line"></span><br><span class="line"> GPIO_Mode_AF_OD = 0x1C,  // Atl Open Drain，复用开漏</span><br><span class="line"></span><br><span class="line"> GPIO_Mode_AF_PP = 0x18// Atl Push Pull，复用推挽</span><br><span class="line"></span><br><span class="line">&#125;GPIOMode_TypeDef;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps37.jpg" alt="img"> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void GPIO_SetBits(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin);  </span><br><span class="line">// 把指定的端口设置为高电平</span><br><span class="line">void GPIO_ResetBits(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin); </span><br><span class="line">//设置GPIO输出低电平</span><br></pre></td></tr></table></figure><h1 id="4-OLED显示屏使用"><a href="#4-OLED显示屏使用" class="headerlink" title="4. OLED显示屏使用"></a>4. OLED显示屏使用</h1><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps38.jpg" alt="img"> </p><p>参数1：指定起始行；</p><p>参数2：指定起始列</p><p>0.96寸OLED，分辨率：128<em>64，把分辨率设置为4行16列，字符大小8</em>8</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps39.jpg" alt="img"> </p><p>STM32的引脚上电后，如果不初始化，默认为浮空输入的模式。</p><p>SCL    —PB8</p><p>SDA    —PB9</p><h1 id="5-EXIT外部中断"><a href="#5-EXIT外部中断" class="headerlink" title="5. EXIT外部中断"></a>5. EXIT外部中断</h1><p>使用中断系统可以加大的提高程序的运行效率，如果没有中断系统，为了防止外部中断被忽略或者串口数据被覆盖，主程序就只能不断地查询是否有这些事件发生。</p><p>比如如果没有定时器中断，主程序只能使用delay函数，才能实现定时的功能。</p><p>有了中断系统后，主程序就可以放心执行其他事情，有中断的时候再去处理。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps40.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps41.jpg" alt="img"> </p><p>抢占优先级高的可以中断嵌套，响应优先级高的可以优先排队。</p><p>抢占优先级和响应优先级均相同的按<strong><em>\</em>中断号**</strong>排队。</p><p>中断触发方式：上升沿/下降沿/双边沿(上升沿和下降沿都可以触发)/软件触发(如何进行软件触发设计？程序里执行一句代码，就可以触发中断)</p><p>触发响应方式：中断响应/事件响应</p><p>通道数：16个GPIO_PIN、外加PVD输出、RTC闹钟、USB唤醒、以太网唤醒</p><p>中断响应：引脚电平变化触发中断</p><p>事件响应：不会触发中断，而是触发别的外设操作，属于外设之间的联合工作，比如触发ADC转换、DMA</p><p>注意：</p><ol><li><p>进入中断函数的时候要检查中断标志位，退出的时候清零中断标志位。</p></li><li><p>中断函数一般执行简短快速的代码，如操作中断标志位。</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps42.jpg" alt="img"> </p><p>NVIC用于统一管理中断和分配中断优先级，属于内核外设，是CPU的小助手，可以让CPU专注于运算。相当于医院里的叫号系统(给病人进行排号，CPU相当于医生，只负责看病)。</p><h2 id="5-1-NVIC优先级分组"><a href="#5-1-NVIC优先级分组" class="headerlink" title="5.1 NVIC优先级分组"></a>5.1 NVIC优先级分组</h2><p>优先级：抢占优先级、响应优先级。</p><p>NVIC的中断优先级由优先级寄存器的4位（0~15）决定，这4位可以进行切分，分为高n位的抢占优先级和低4-n位的响应优先级(插队)</p><p>抢占优先级高的可以中断嵌套，响应优先级高的可以优先排队，抢占优先级和响应优先级均相同的按中断号排队</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps43.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps44.jpg" alt="img"> </p><p>如果中断不多，很难导致中断冲突时，可以随意选择优先级分组，那个都行。</p><h2 id="5-2-EXIT-Extern-Interrupt-外部中断"><a href="#5-2-EXIT-Extern-Interrupt-外部中断" class="headerlink" title="5.2 EXIT(Extern Interrupt)外部中断"></a>5.2 EXIT(Extern Interrupt)外部中断</h2><p>EXIT的基本功能：检测引脚的电平变化，申请中断。</p><p>支持的GPIO口：所有的GPIO口，但相同的Pin不能同时触发中断。</p><p>比如PA0和PB0不能同时用，端口GPIO_Pin*只能选择一个作为中断引脚。</p><p>PA0和PA1可以同时触发中断。</p><p>通道数：16个GPIO_pin(也就是只能有16个引脚可以触发中断)，外加PVD输出(电源电压监测)、RTC闹钟、USB唤醒、以太网唤醒。</p><p>EXIT基本结构：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps45.jpg" alt="img"> </p><p>AFIO中断引脚选择：在GPIO(A~G)外设的16个GPIO_Pin中选择一个连接到后面的EXIT的通道里。</p><h2 id="5-3-常用的触发外部中断的硬件模块"><a href="#5-3-常用的触发外部中断的硬件模块" class="headerlink" title="5.3 常用的触发外部中断的硬件模块"></a>5.3 常用的触发外部中断的硬件模块</h2><p>对于STM32来说，想要获取的信号是外部驱动的很快的突发信号，但是又不需要一直进行检测。</p><p>不需要经常使用、不需要一直检测的模块：</p><ol><li><p>按键(注意抖动问题)，不推荐，可以使用定时器中断</p></li><li><p>旋转编码器</p></li><li><p>红外遥控接收器</p></li></ol><h2 id="5-4-外部中断程序设计步骤"><a href="#5-4-外部中断程序设计步骤" class="headerlink" title="5.4 外部中断程序设计步骤"></a>5.4 外部中断程序设计步骤</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps46.jpg" alt="img"> </p><p>涉及到的外设：RCC、GPIO、AFIO、EXTI、NVIC</p><ol><li><p>打开RCC时钟，不打开时钟，外设是无法进行工作的</p></li><li><p>配置GPIO，选择需要的端口，设为输入模式(推荐浮空、上拉、下拉)</p></li><li><p>配置AFIO，选择用的这一路GPIO，连接到后面的EXTI</p></li><li><p>配置EXTI，选择外部中断触发方式，选择触发响应方式(一般选择中断响应)</p></li><li><p>配置NVIC，给中断选择一个合适的优先级</p></li></ol><p>配置完之后，写中断执行函数：</p><p>在STM32中，中断函数的名字都是固定的，每个中断通道都对应一个中断函数。</p><p>中断函数的名字可以参考启动文件中的“stratup_stm32f10x_md文件</p><p>配置AFIO相关函数</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps47.jpg" alt="img"> </p><p>void GPIO_PinRemapConfig(uint32_t GPIO_Remap, FunctionalState NewState);</p><p>参数1：选择重映射方式</p><p>参数2：新的状态</p><p>void GPIO_EXTILineConfig(uint8_t GPIO_PortSource, uint8_t GPIO_PinSource);</p><p>配置AFIO的数据选择器，来选择想要的中断引脚</p><p>注意：主函数和中断函数不要操控同一个硬件(比如OLED显示)，避免不必要的冲突，中断函数只执行突发的事件，需要快速的执行，如操作变量、中断标志位。</p><h1 id="6-定时器中断"><a href="#6-定时器中断" class="headerlink" title="6.定时器中断"></a>6.定时器中断</h1><h2 id="6-1-TIM简介"><a href="#6-1-TIM简介" class="headerlink" title="6.1 TIM简介"></a>6.1 TIM简介</h2><p>定时器：可以对输入的时钟进行计数，并在计数值达到设定值时触发中断</p><p>STM32在72MHz计数时钟下可以实现最大59.65s的定时。</p><ol><li><p>16位计数器：执行计数定时的一个寄存器，每来一个时钟，计数器加1</p></li><li><p>预分频器：可以对计数器的时钟进行分频，让这个计数更加灵活</p></li><li><p>自动重装寄存器：计数的目标值(计多少个时钟申请中断)，这些寄存器构成了最核心的部分。</p></li></ol><p>这三部分组成了定时器的时基单元(计数器、自动重装寄存器、预分频器)</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps48.jpg" alt="img"> </p><p>STM32F103C8T6定时器资源：TIM1、TIM2、TIM3、TIM4</p><h2 id="6-2-基本定时器"><a href="#6-2-基本定时器" class="headerlink" title="6.2 基本定时器"></a>6.2 基本定时器</h2><p>可以完成定时中断，主模式触发DAC的功能。</p><p>DAC功能：数模转换</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps49.jpg" alt="img"> </p><p>内部时钟（CK_CNT）：一般就是系统的主频72MHz，通向时基单元的输入。</p><p>时基单元：16位预分频器 + 16位计数器 + 16位自动重装载寄存器。</p><ol><li><p>预分频器：对输入的72MHz时钟进行预分频，寄存器内存储的值是实际的分频系数减一。写0就是不分频，写1就是2分频，写2就是3分频……</p></li><li><p>计数器：对预分频后的计数时钟进行计数，每遇到上升沿就加一。</p></li><li><p>自动重装载寄存器：存储计数的最大值，到达此值后触发中断并清零计数器。</p></li></ol><p>折线UI：向上的折线箭头表示该位置会产生中断信号——“更新中断”（由计数值等于自动重装值产生的中断），这个中断信号会通向NVIC</p><p>折线U：向下的折线箭头表示该位置会产生事件——“更新事件”，这个更新事件不会触发中断，但可以触发内部其他电路的工作。比如将更新事件映射到触发输出TRGO，然后TRGO直接接到DAC的触发转换引脚上。</p><p>主模式触发DAC数模转换功能：</p><p>stm32的一大特色就是主从触发模式，可以让内部的硬件在不受程序的控制下自动运行，可以极大地减轻CPU的负担。</p><p>驱动DAC正常思路及其问题：每隔一段时间就产生一个定时中断，手动更新DAC的值。但这样子会频繁的产生中断，会影响主程序的运行和其他中断的响应。</p><p>解决方法：定时器设计了一个主模式，使用主模式可以将定时器的“更新事件”映射到“触发输出TRGO”，然后TRGO直接接到DAC的触发转换引脚上，于是定时器的更新就不需要中断来实现了。整个过程无需软件参与，实现了硬件的自动化。</p><h2 id="6-3-通用定时器"><a href="#6-3-通用定时器" class="headerlink" title="6.3 通用定时器"></a>6.3 通用定时器</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps50.jpg" alt="img"> </p><p>时基单元：PSC预分频器、CNT计数器、自动重装寄存器。通用定时器和高级定时器新增两个功能：向下计数模式、中央对齐计数模式。</p><ol><li><p>向上计数模式(常用)：从0开始累加，到自动重装值触发中断。</p></li><li><p>向下计数模式：从自动重装值递减，到0触发中断</p></li><li><p>中央对齐计数模式：从0开始累加，到自动重装载值触发中断，然后递减，到0再次触发中断。常用于电机控制的SVPWM算法中。</p></li></ol><p>内外时钟源选择和主从触发模式结构：上面的一大块。下面介绍各种各样的内外时钟源：</p><p>定时器中断基本结构：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps51.jpg" alt="img"> </p><p>时基单元：中间的粉色部分。</p><p>运行控制：控制寄存器的一些位，如启动停止、向上或向下计数等，操作这些寄存器就可以控制时基单元的运行了。</p><p>内部时钟模式、外部时钟模式2、外部时钟模式1：外部时钟源选择。这个选择器的输出就是为时基单元提供时钟。</p><p>编码器模式：编码器独有的模式，一般用不到。</p><p>中断申请控制：由于定时器内部有很多地方要申请中断，“中断申请控制”就用来使能控制这些中断是否使能。比如，中断信号会先在状态寄存器里置一个中断标志位，这个标志位会通过中断输出控制，到NVIC申请中断。</p><h2 id="6-4-定时器初始化步骤"><a href="#6-4-定时器初始化步骤" class="headerlink" title="6.4 定时器初始化步骤"></a>6.4 定时器初始化步骤</h2><ol><li><p>开启RCC内部时钟</p></li><li><p>选择时基单元的时钟源，对于定时中断，选择内部时钟源</p></li><li><p>配置时基单元(预分频器、自动重装寄存器、计数模式)</p></li><li><p>配置输出中断控制，允许更新中断输出到NVIC</p></li><li><p>配置NVIC，在NVIC中打开定时器中断的通道，并分配一个优先级</p></li><li><p>运行控制</p></li></ol><h2 id="6-5-TIM输出比较原理"><a href="#6-5-TIM输出比较原理" class="headerlink" title="6.5 TIM输出比较原理"></a>6.5 TIM输出比较原理</h2><p>OC（Output Compare）输出比较</p><p>输出比较可以通过比较CNT与CCR寄存器值的关系，来对输出电平进行置1、置0或翻转的操作，用于输出一定频率和占空比的PWM波形</p><p>每个高级定时器和通用定时器都拥有4个输出比较通道</p><p>高级定时器的前3个通道额外拥有死区生成和互补输出的功能</p><p>CCR：Capture Compare，捕获比较寄存器。</p><p>PWM（Pulse Width Modulation）脉冲宽度调制</p><p>频率 = 1 / TS，一般在 几kHz~几十kHz。</p><p>占空比 = TON / TS</p><p>分辨率 = 占空比变化步距，也就是占空比变化的精细程度。一般1%足够使用。</p><p>注：定时中断的频率就是PWM波的频率，只不过占空比的变化范围由自动重装载值决定。</p><h2 id="6-6-通用定时器输出比较通道"><a href="#6-6-通用定时器输出比较通道" class="headerlink" title="6.6 通用定时器输出比较通道"></a>6.6 通用定时器输出比较通道</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps52.jpg" alt="img"> </p><p>REF：reference，参考信号</p><p>输出比较模式：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps53.jpg" alt="img"> </p><p>置有效电平：置高电平</p><p>置无效电平：置低电平</p><p>PWM模式1：常用向上计数的方式</p><h2 id="6-7-PWM输出的基本结构"><a href="#6-7-PWM输出的基本结构" class="headerlink" title="6.7 PWM输出的基本结构"></a>6.7 PWM输出的基本结构</h2><p>在时基单元部分，输出PWM不需要中断。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps54.jpg" alt="img"> </p><p>黄色线：ARR的值</p><p>蓝色线：CNT的值</p><p>红色线：CCR</p><p>绿色线：输出PWM</p><p>CNT &lt; CCR：输出高电平</p><p>CNT ≥ CCR：输出低电平</p><p>CCR设置的高一些，输出的占空比就变大；CCR设置的低一些，输出的占空比就变小。</p><p>参数计算：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps55.jpg" alt="img"> </p><p>分辨率：占空比变化的步距离。</p><p>PWM频率：一秒钟PWM有多少个周期。</p><p>问题：如何输出一个占空比频率为1Khz，占空比可任意调节，且分辨率为1%的PWM波形，相关参数应如何进行设置。</p><p>ARR = 99</p><p>PSC = 719</p><p>设计PWM输出的基本步骤：</p><ol><li><p>开启RCC时钟，把需要的TIM外设和GPIO外设的时钟打开</p></li><li><p>配置时基单元，包括前面的时钟源选择</p></li><li><p>配置输出比较单元：CCR的值，输出比较模式、极性选择、输出使能这些参数</p></li><li><p>配置GPIO，把PWM对应的GPIO口，初始化为复用推挽输出的配置。</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps56.jpg" alt="img"> </p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps57.jpg" alt="img"> </p><p>如果要使用TIM2的OC1也就是CH1通道输出PWM，只能使用PA0输出PWM</p><p>TIM2的OC2只能使用PA1输出PWM</p><p>TIM2的OC3使用PA2</p><p>TIM2的OC4使用PA3</p><p>引脚重定义(重映射)：当一个引脚有多个功能时，如果可以进行重定义功能，则可以通过重映射的功能把原来的引脚映射到新的引脚上。这样就可以避免两个外设引脚的冲突。</p><p>如果想要定时器来控制输出引脚，需要使用复用推挽输出的模式</p><h2 id="6-8-PWM驱动舵机"><a href="#6-8-PWM驱动舵机" class="headerlink" title="6.8 PWM驱动舵机"></a>6.8 PWM驱动舵机</h2><p>舵机是一种根据输入PWM信号占空比来控制输出角度的装置，根据输入PWM信号的要求，周期为20ms，高电平宽度为0.5ms~2.5ms。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps58.jpg" alt="img"> </p><p>PWM参数计算：</p><p>PWM频率：50hz</p><p>ARR = 20k - 1</p><p>PSC = 72 -1</p><p>注：20K对应20ms，那么CCR设置为500，就是0.5ms，参数很直观</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps59.png" alt="img"> </p><p>注意PWM的VCC接到5V。</p><h1 id="7-ADC数模转换器"><a href="#7-ADC数模转换器" class="headerlink" title="7. ADC数模转换器"></a>7. ADC数模转换器</h1><p>STM32的ADC是12位的，AD结果最大值是4095，也就是2^12-1 = 4095，对应的电压为3.3V</p><p>STM32F103C8T6的ADC资源：ADC1、ADC2，10个外部输入通道。</p><p>12位逐次逼近型ADC，最大1us转换时间(1MHz)</p><p>18个输入通道，可测量16个外部和2个内部信号源</p><p>规则组和注入组两个转换单元</p><p>模拟看门狗自动监测输入电压范围</p><p>逐次逼近型ADC：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps60.png" alt="img"> </p><p>ADC基本结构：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps61.jpg" alt="img"> </p><p>双ADC模式：ADC1和ADC2一起工作，它俩可以配合组成同步模式、交叉模式等。</p><p>转换模式：</p><p>l 单次转换，非扫描模式</p><p>l 单次转换，扫描模式</p><p>l 连续转换，非扫描模式</p><p>l 连续转换，扫描模式</p><p>数据对齐：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps62.jpg" alt="img"> </p><p>STM32的ADC是12位的，它的转换结果就是一个12位的数据。但是这个数据寄存器是16位的，所以就存在一个数据对齐的问题。</p><p>一般使用右对齐，这样读取这个16位寄存器，直接就是转换结果。</p><p>转换时间：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps63.jpg" alt="img"> </p><p>采样时间越大，越能避免一些毛刺信号的干扰。不过转换时间也会延长。</p><p>校准：</p><p>l ADC有一个内置自校准模式。校准可大幅减小因内部电容器组的变化而造成的准精度误差。校准期间，在每个电容器上都会计算出一个误差修正码(数字值)，这个码用于消除在随后的转换中每个电容器上产生的误差</p><p>l 建议在每次上电后执行一次校准</p><p>l 启动校准前， ADC必须处于关电状态超过至少两个ADC时钟周期</p><h2 id="7-1-AD单通道"><a href="#7-1-AD单通道" class="headerlink" title="7.1 AD单通道"></a>7.1 AD单通道</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps64.jpg" alt="img"> </p><ol><li><p>开启RCC时钟，包括ADC和GPIO的时钟</p></li><li><p>配置ADC的分频器</p></li><li><p>配置GPIO，把需要用的GPIO配置成模拟输入的模式</p></li><li><p>配置多路开关，把左边的通道接入到右边的规则组列表里</p></li><li><p>配置ADC转换器，在库函数里使用结构体进行配置</p></li></ol><p>消除ADC返回结果的方法：</p><ol><li><p>迟滞比较：设置两个阈值，低于下阈值开灯，高于上阈值时关灯。</p></li><li><p>滤波：平滑数据(均值滤波)</p></li><li><p>裁剪分辨率：直接把数据的尾数去掉，也可以减小数据的波动</p></li></ol><h2 id="7-2-AD多通道"><a href="#7-2-AD多通道" class="headerlink" title="7.2 AD多通道"></a>7.2 AD多通道</h2><p>扫描模式：如果想要使用扫描模式实现多通道，最好要配合DMA来实现。因为：</p><p>l 问题1：在扫描模式下，启动列表之后，每一个单独的通道转换完成之后，不会产生任何的标志位，也不会触发中断，不知道某一个通道是不是转换完了。</p><p>l 问题2：AD的速度非常快，转换一个通道大概只有几us，如果不能在几us的时间内把数据转运走，那数据就会丢失。</p><p>如果不使用扫描模式，可以使用单次转换、非扫描的方式来实现多通道。只需要在每次触发转换之前，手动更改一下列表第一个位置的通道就行了。</p><p>扫描模式+DMA转运数据：DMA是转运多通道数据的最优解。</p><h1 id="8-DMA直接存取器存取"><a href="#8-DMA直接存取器存取" class="headerlink" title="8. DMA直接存取器存取"></a>8. DMA直接存取器存取</h1><p>DMA（Direct Memory Access）直接存储器存取</p><p>DMA可以提供外设和存储器或者存储器和存储器之间的高速数据传输，无须CPU干预，节省了CPU的资源</p><p>12个独立可配置的通道： DMA1（7个通道）， DMA2（5个通道）</p><p>每个通道都支持软件触发和特定的硬件触发</p><p>STM32F103C8T6 DMA资源：DMA1（7个通道）</p><p>DMA基本结构：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/wps65.jpg" alt="img"> </p><p>DMA最常见的用途：配合ADC的扫描模式。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> 嵌入式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown语法</title>
      <link href="/2023/09/07/%E5%89%8D%E7%AB%AF-Markdown%E8%AF%AD%E6%B3%95/"/>
      <url>/2023/09/07/%E5%89%8D%E7%AB%AF-Markdown%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="Markdown-应用"><a href="#Markdown-应用" class="headerlink" title="Markdown 应用"></a>Markdown 应用</h2><ul><li>Markdown 是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档。</li><li>Markdown 语言在 2004 由约翰·格鲁伯（英语：John Gruber）创建。</li><li>Markdown 编写的文档可以导出 HTML、Word、图像、PDF、Epub 等多种格式的文档。</li><li>Markdown 编写的文档后缀为 .md 或 .markdown。</li></ul><p>Markdown 能被使用来撰写电子书，如：Gitbook。</p><p>当前许多网站都广泛使用 Markdown 来撰写帮助文档或是用于论坛上发表消息。例如：GitHub、简书、reddit、Diaspora、Stack Exchange、OpenStreetMap 、SourceForge 等。</p><h2 id="Markdown-标题"><a href="#Markdown-标题" class="headerlink" title="Markdown 标题"></a>Markdown 标题</h2><p>Markdown 标题有两种格式。</p><ol><li><p>使用 <code>=</code> 和 <code>-</code> 标记一级和二级标题</p><p>= 和 - 标记语法格式如下：</p></li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">一级标题</span><br><span class="line">=======</span><br><span class="line"></span><br><span class="line">二级标题</span><br><span class="line">-------</span><br></pre></td></tr></table></figure><ol><li><p>使用 <code>#</code> 号标记</p><p>使用 <code>#</code> 号克表示 1-6 级标题，一级标题对应一个 <code>#</code> 号，二级标题对应两个 <code>#</code> 号，以此类推。</p></li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br></pre></td></tr></table></figure><h2 id="Markdown-段落"><a href="#Markdown-段落" class="headerlink" title="Markdown 段落"></a>Markdown 段落</h2><h3 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h3><p>Markdown 段落没有特殊的格式，直接编写文字就好，段落的换行是使用两个空格以上加上回车。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">Markdown[空格][空格][回车]</span><br><span class="line">Markdown</span><br></pre></td></tr></table></figure><p>当然也可以在段落后面使用一个空行表示重新开始一个段落</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">Markdown</span><br><span class="line">[空行]</span><br><span class="line">Markdown</span><br></pre></td></tr></table></figure><p>还可以使用 <code>&lt;br/&gt;</code> 实现强制换行</p><p>显示效果如下所示：</p><blockquote><p>Markdown<br>Markdown</p></blockquote><h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><p>Markdown 可以使用以下几种字体：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">*斜体文本*</span><br><span class="line">_斜体文本_</span><br><span class="line"></span><br><span class="line">**粗体文本**</span><br><span class="line">__粗体文本__</span><br><span class="line"></span><br><span class="line">***斜粗体文本***</span><br><span class="line">___斜粗体文本___</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p><em>斜体文本</em><br><em>斜体文本</em></p><p><strong>粗体文本</strong><br><strong>粗体文本</strong></p><p><strong><em>斜粗体文本\</em></strong><br><strong><em>斜粗体文本\</em></strong></p></blockquote><h3 id="分隔线"><a href="#分隔线" class="headerlink" title="分隔线"></a>分隔线</h3><p>可以在一行中使用三个以上的星号 <code>*</code>、减号 <code>-</code>、底线 <code>_</code> 来建立一个分隔线，行内不能有其他东西，也可以在星号 <code>*</code>、减号 <code>-</code>、底线 <code>_</code> 中间插入空格。下面每种写法都可以建立分隔线：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">---</span><br><span class="line">***</span><br><span class="line">___</span><br><span class="line">- - -</span><br><span class="line">* * *</span><br><span class="line">_ _ _</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><hr><hr><hr><hr><hr><hr></blockquote><h3 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h3><p>如果段落上的文字要添加删除线，只需要在文字的两端加上两个波浪线 <code>~~</code> 即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">正常文本</span><br><span class="line">~~删除文本~~</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>正常文本<br><del>删除文本</del></p></blockquote><h3 id="下划线"><a href="#下划线" class="headerlink" title="下划线"></a>下划线</h3><p>下划线可以通过 HTML 的 <code>&lt;u&gt;</code> 标签来实现：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">&lt;u&gt;下划线文本&lt;/u&gt;</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>下划线文本</p></blockquote><h3 id="脚注"><a href="#脚注" class="headerlink" title="脚注"></a>脚注</h3><p>脚注是对文本的补充说明，Markdown 脚注的格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">[^ 要脚注的文本]</span><br><span class="line">Markdown[^ Markdown]  </span><br><span class="line"></span><br><span class="line">[^ Markdown ]：一种轻量级标记语言</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>Markdown <a href="https://blog.eurkon.com/post/c894e39a.html#fn_ Markdown">Markdown</a>。</p><blockquote><p>Markdown. 一种轻量级标记语言 <a href="https://blog.eurkon.com/post/c894e39a.html#reffn_ Markdown">↩</a></p></blockquote></blockquote><h2 id="Markdown-列表"><a href="#Markdown-列表" class="headerlink" title="Markdown 列表"></a>Markdown 列表</h2><p>Markdown 支持有序列表和无序列表。</p><p>无序列表使用星号 <code>*</code>、加号 <code>+</code>、减号 <code>-</code> 作为列表标记，这些标记后面都要添加一个空格，然后再填写内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line"></span><br><span class="line">* 第一项</span><br><span class="line">* 第二项</span><br><span class="line">* 第三项</span><br><span class="line"></span><br><span class="line">+ 第一项</span><br><span class="line">+ 第二项</span><br><span class="line">+ 第三项</span><br><span class="line"></span><br><span class="line">- 第一项</span><br><span class="line">- 第二项</span><br><span class="line">- 第三项</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><ul><li>第一项</li><li>第二项</li><li><p>第三项</p></li><li><p>第一项</p></li><li>第二项</li><li><p>第三项</p></li><li><p>第一项</p></li><li>第二项</li><li>第三项</li></ul></blockquote><p>有序列表使用数字并加上 <code>.</code> 号来表示，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">1. 第一项</span><br><span class="line">2. 第二项</span><br><span class="line">3. 第三项</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><ol><li>第一项</li><li>第二项</li><li>第三项</li></ol></blockquote><p>列表嵌套只需要在子列表中的选项前面添加四个空格即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">1. 第一项：</span><br><span class="line">  - 第一项嵌套的第一个元素</span><br><span class="line">  - 第一项嵌套的第二个元素</span><br><span class="line">2. 第二项：</span><br><span class="line">  1. 第二项嵌套的第一个元素</span><br><span class="line">  2. 第二项嵌套的第二个元素</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><ol><li>第一项：<ul><li>第一项嵌套的第一个元素</li><li>第一项嵌套的第二个元素</li></ul></li><li>第二项：<ol><li>第二项嵌套的第一个元素</li><li>第二项嵌套的第二个元素</li></ol></li></ol></blockquote><h2 id="Markdown-区块"><a href="#Markdown-区块" class="headerlink" title="Markdown 区块"></a>Markdown 区块</h2><p>Markdown 区块引用是在段落开头使用 <code>&gt;</code> 符号，然后后面紧跟一个空格符号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">&gt; 区块引用</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>区块引用</p></blockquote><p>另外区块是可以嵌套的，一个 <code>&gt;</code> 符号是最外层，两个 <code>&gt;</code> 符号是第一层嵌套，以此类推：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">&gt; 最外层</span><br><span class="line">&gt; &gt; 第一层嵌套</span><br><span class="line">&gt; &gt; &gt; 第二层嵌套</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>最外层</p><blockquote><p>第一层嵌套</p><blockquote><p>第二层嵌套</p></blockquote></blockquote></blockquote><p><strong>区块中使用列表</strong></p><p>区块中使用列表实例如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">&gt; 区块中使用列表</span><br><span class="line">&gt; 1. 第一项</span><br><span class="line">&gt; 2. 第二项</span><br><span class="line">&gt; + 第一项</span><br><span class="line">&gt; + 第二项</span><br><span class="line">&gt; + 第三项</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>区块中使用列表</p><ol><li>第一项</li><li>第二项</li></ol><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul></blockquote><p><strong>列表中使用区块</strong></p><p>如果要在列表项目内放进区块，那么就需要在 <code>&gt;</code> 前添加四个空格的缩进。</p><p>区块中使用列表实例如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">* 第一项</span><br><span class="line">    &gt; 列表中使用区块</span><br><span class="line">* 第二项</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><ul><li><p>第一项</p><blockquote><p>列表中使用区块</p></blockquote></li><li><p>第二项</p></li></ul><h2 id="Markdown-代码"><a href="#Markdown-代码" class="headerlink" title="Markdown 代码"></a>Markdown 代码</h2><p>如果是段落上的一个函数或片段的代码可以用反引号 ``` 或用三个反引号 ````` 把它包起来例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">` print ` 函数</span><br><span class="line">``` print ``` 函数</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p><code>print</code> 函数<br><code>print</code> 函数</p></blockquote><p><strong>代码区块</strong></p><p>代码区块使用 4 个空格或者一个制表符（Tab 键）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">[空格][空格][空格][空格]print(&quot;Hello&quot;);</span><br><span class="line">[Tab]print(&quot;World&quot;);</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>print(“Hello”);<br>print(“World”);</p></blockquote><p>你也可以用 ````` 包裹一段代码，并指定一种语言（也可以不指定）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">[```][javascript]</span><br><span class="line">$(document).ready(function () &#123;</span><br><span class="line">    alert(&#x27;Hello World&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line">$(document).ready(function () &#123;</span><br><span class="line">    alert(&#x27;Hello World&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></blockquote><h2 id="Markdown-链接"><a href="#Markdown-链接" class="headerlink" title="Markdown 链接"></a>Markdown 链接</h2><p>链接语法格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">[链接名称](链接地址)</span><br><span class="line">或者</span><br><span class="line">&lt;链接地址&gt;</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p><a href="https://www.baidu.com/">Baidu</a><br>或者<br><a href="https://www.baidu.com/">https://www.baidu.com/</a></p></blockquote><p><strong>高级链接</strong></p><p>我们可以通过变量来设置一个链接，变量赋值在文档末尾进行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">这个链接用 Google 作为网址变量 [Google][Google]</span><br><span class="line">然后在文档的结尾为变量赋值（网址）</span><br><span class="line">[Google]: http://www.google.com/</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>这个链接用 Google 作为网址变量 [Google][Google]<br>然后在文档的结尾为变量赋值（网址）</p><p>[Google]: <a href="http://www.google.com/">http://www.google.com/</a></p></blockquote><h2 id="Markdown-图片"><a href="#Markdown-图片" class="headerlink" title="Markdown 图片"></a>Markdown 图片</h2><p>Markdown 图片语法格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">![alt 属性文本](图片地址)</span><br><span class="line">![alt 属性文本](图片地址 &quot;可选标题&quot;)</span><br></pre></td></tr></table></figure><ul><li>开头一个感叹号 <code>!</code></li><li>接着一个方括号，里面放上图片的替代文字</li><li>接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上选择性的 <code>title</code> 属性的文字。</li></ul><p>使用实例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">![图标](https://www.baidu.com/img/flexible/logo/pc/result.png)</span><br><span class="line">![图标](https://www.baidu.com/img/flexible/logo/pc/result.png &quot;Baidu&quot;)</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p><a href="https://www.baidu.com/img/flexible/logo/pc/result.png"><img src="https://www.baidu.com/img/flexible/logo/pc/result.png" alt="图标"></a><br><a href="https://www.baidu.com/img/flexible/logo/pc/result.png"><img src="https://www.baidu.com/img/flexible/logo/pc/result.png" alt="图标"></a></p></blockquote><p>当然，也可以像网址那样对图片网址使用变量:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">这个链接用 Baidu 作为网址变量 [Baidu][Baidu]。</span><br><span class="line">然后在文档的结尾为变量赋值（网址）</span><br><span class="line"></span><br><span class="line">[Baidu]: https://www.baidu.com/img/flexible/logo/pc/result.png</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>这个链接用 Baidu 作为网址变量 [Baidu][Baidu]。<br>然后在文档的结尾为变量赋值（网址）</p><p>[Baidu]: <a href="https://www.baidu.com/img/flexible/logo/pc/result.png">https://www.baidu.com/img/flexible/logo/pc/result.png</a></p></blockquote><p>Markdown 还没有办法指定图片的高度与宽度，如果你需要的话，你可以使用普通的 <code>&lt;img&gt;</code> 标签。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">&lt;img src=&quot;https://www.baidu.com/img/flexible/logo/pc/result.png&quot; width=&quot;30%&quot;&gt;</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p><a href="https://www.baidu.com/img/flexible/logo/pc/result.png"><img src="https://www.baidu.com/img/flexible/logo/pc/result.png" alt="img"></a></p></blockquote><h2 id="Markdown-表格"><a href="#Markdown-表格" class="headerlink" title="Markdown 表格"></a>Markdown 表格</h2><p>Markdown 制作表格使用 <code>|</code> 来分隔不同的单元格，使用 <code>-</code> 来分隔表头和其他行。</p><p>语法格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">| 表头 | 表头 |</span><br><span class="line">| ---- | ---- |</span><br><span class="line">| 单元格 | 单元格 |</span><br><span class="line">| 单元格 | 单元格 |</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><div class="table-container"><table><thead><tr><th>表头</th><th>表头</th></tr></thead><tbody><tr><td>单元格</td><td>单元格</td></tr><tr><td>单元格</td><td>单元格</td></tr></tbody></table></div></blockquote><p><strong>对齐方式</strong></p><p>我们可以设置表格的对齐方式：</p><ul><li><code>-:</code> 设置内容和标题栏居右对齐。</li><li><code>:-</code> 设置内容和标题栏居左对齐。</li><li><code>:-:</code> 设置内容和标题栏居中对齐。</li></ul><p>实例如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">| 左对齐 | 居中对齐 | 右对齐 |</span><br><span class="line">| :-----| :----: | ----: |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><div class="table-container"><table><thead><tr><th style="text-align:left">左对齐</th><th style="text-align:center">居中对齐</th><th style="text-align:right">右对齐</th></tr></thead><tbody><tr><td style="text-align:left">单元格</td><td style="text-align:center">单元格</td><td style="text-align:right">单元格</td></tr><tr><td style="text-align:left">单元格</td><td style="text-align:center">单元格</td><td style="text-align:right">单元格</td></tr></tbody></table></div></blockquote><h2 id="Markdown-高级技巧"><a href="#Markdown-高级技巧" class="headerlink" title="Markdown 高级技巧"></a>Markdown 高级技巧</h2><h3 id="支持的-HTML-元素"><a href="#支持的-HTML-元素" class="headerlink" title="支持的 HTML 元素"></a>支持的 HTML 元素</h3><p>不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。</p><p>目前支持的 HTML 元素有：<code>&lt;kbd&gt;</code> <code>&lt;b&gt;</code> <code>&lt;i&gt;</code> <code>&lt;em&gt;</code> <code>&lt;sup&gt;</code> <code>&lt;sub&gt;</code> <code>&lt;br&gt;</code> 等 ，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">普通文本：使用 Ctrl+Alt+Del 重启电脑</span><br><span class="line">HTML 文本：使用 &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Del&lt;/kbd&gt; 重启电脑</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p>普通文本：使用 Ctrl+Alt+Del 重启电脑<br>HTML 文本：使用 Ctrl+Alt+Del 重启电脑</p></blockquote><h3 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h3><p>Markdown 使用了很多特殊符号来表示特定的意义，如果需要显示特定的符号则需要使用转义字符，Markdown 使用反斜杠转义特殊字符：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">**文本加粗** </span><br><span class="line">\*\* 正常显示星号 \*\*</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote><p><strong>文本加粗</strong><br><strong> 正常显示星号 </strong></p></blockquote><p>Markdown 支持以下这些符号前面加上反斜杠来帮助插入普通的符号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line"></span><br><span class="line">\   反斜线</span><br><span class="line">`   反引号</span><br><span class="line">*   星号</span><br><span class="line">_   下划线</span><br><span class="line">&#123;&#125;  花括号</span><br><span class="line">[]  方括号</span><br><span class="line">()  小括号</span><br><span class="line">#   井字号</span><br><span class="line">+   加号</span><br><span class="line">-   减号</span><br><span class="line">.   英文句点</span><br><span class="line">!   感叹号</span><br></pre></td></tr></table></figure><h3 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h3><p>当你需要在编辑器中插入数学公式时，可以使用两个美元符号$$$$包裹 <code>TeX</code> 或 <code>LaTeX</code> 格式的数学公式来实现。提交后，问答和文章页会根据需要加载 <code>Mathjax</code> 对数学公式进行渲染。如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">$$</span><br><span class="line">\mathbf&#123;V&#125;_1 \times \mathbf&#123;V&#125;_2 =  \begin&#123;vmatrix&#125; </span><br><span class="line">\mathbf&#123;i&#125; &amp; \mathbf&#123;j&#125; &amp; \mathbf&#123;k&#125; \\</span><br><span class="line">\frac&#123;\partial X&#125;&#123;\partial u&#125; &amp;  \frac&#123;\partial Y&#125;&#123;\partial u&#125; &amp; 0 \\</span><br><span class="line">\frac&#123;\partial X&#125;&#123;\partial v&#125; &amp;  \frac&#123;\partial Y&#125;&#123;\partial v&#125; &amp; 0 \\</span><br><span class="line">\end&#123;vmatrix&#125;</span><br><span class="line">$&#123;$tep1&#125;&#123;\style&#123;visibility:hidden&#125;&#123;(x+1)(x+1)&#125;&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><blockquote></blockquote><h3 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h3><ol><li>横向流程图源码格式：</li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">[```][mermaid]</span><br><span class="line">graph LR</span><br><span class="line">A[方形] --&gt;B(圆角)</span><br><span class="line">    B --&gt; C&#123;条件 a&#125;</span><br><span class="line">    C --&gt;|a=1| D[结果 1]</span><br><span class="line">    C --&gt;|a=2| E[结果 2]</span><br><span class="line">    F[横向流程图]</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>   显示效果如下所示：</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  graph LR</span><br><span class="line">A[方形] --&gt;B(圆角)</span><br><span class="line">   B --&gt; C&#123;条件 a&#125;</span><br><span class="line">   C --&gt;|a=1| D[结果 1]</span><br><span class="line">   C --&gt;|a=2| E[结果 2]</span><br><span class="line">   F[横向流程图]</span><br></pre></td></tr></table></figure><ol><li>竖向流程图源码格式：</li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">[```][mermaid]</span><br><span class="line">graph TD</span><br><span class="line">A[方形] --&gt; B(圆角)</span><br><span class="line">    B --&gt; C&#123;条件 a&#125;</span><br><span class="line">    C --&gt; |a=1| D[结果 1]</span><br><span class="line">    C --&gt; |a=2| E[结果 2]</span><br><span class="line">    F[竖向流程图]</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>   显示效果如下所示：</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  graph TD</span><br><span class="line">A[方形] --&gt; B(圆角)</span><br><span class="line">   B --&gt; C&#123;条件 a&#125;</span><br><span class="line">   C --&gt; |a=1| D[结果 1]</span><br><span class="line">   C --&gt; |a=2| E[结果 2]</span><br><span class="line">   F[竖向流程图]</span><br></pre></td></tr></table></figure><ol><li>标准流程图源码格式：</li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line"></span><br><span class="line">[```][flow]</span><br><span class="line">st=&gt;start: 开始框</span><br><span class="line">op=&gt;operation: 处理框</span><br><span class="line">cond=&gt;condition: 判断框(是或否?)</span><br><span class="line">sub1=&gt;subroutine: 子流程</span><br><span class="line">io=&gt;inputoutput: 输入输出框</span><br><span class="line">e=&gt;end: 结束框</span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;io-&gt;e</span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>   显示效果如下所示：</p><ol><li>标准流程图源码格式（横向）：</li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line"></span><br><span class="line">[```][flow]</span><br><span class="line">st=&gt;start: 开始框</span><br><span class="line">op=&gt;operation: 处理框</span><br><span class="line">cond=&gt;condition: 判断框(是或否?)</span><br><span class="line">sub1=&gt;subroutine: 子流程</span><br><span class="line">io=&gt;inputoutput: 输入输出框</span><br><span class="line">e=&gt;end: 结束框</span><br><span class="line">st(right)-&gt;op(right)-&gt;cond</span><br><span class="line">cond(yes)-&gt;io(bottom)-&gt;e</span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>   显示效果如下所示：</p><h3 id="时序图-顺序图"><a href="#时序图-顺序图" class="headerlink" title="时序图(顺序图)"></a>时序图(顺序图)</h3><ol><li>UML 时序图源码样例：</li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line">[```][sequence]</span><br><span class="line">对象 A-&gt;对象 B: 对象 B 你好吗?（请求）</span><br><span class="line">Note right of 对象 B: 对象 B 的描述</span><br><span class="line">Note left of 对象 A: 对象 A 的描述(提示)</span><br><span class="line">对象 B--&gt;对象 A: 我很好(响应)</span><br><span class="line">对象 A-&gt;对象 B: 你真的好吗？</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>   显示效果如下所示：</p><ol><li>UML 时序图源码复杂样例：</li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line"></span><br><span class="line">[```][sequence]</span><br><span class="line">Title: 标题：复杂使用</span><br><span class="line">对象 A-&gt;对象 B: 对象 B 你好吗?（请求）</span><br><span class="line">Note right of 对象 B: 对象 B 的描述</span><br><span class="line">Note left of 对象 A: 对象 A 的描述(提示)</span><br><span class="line">对象 B--&gt;对象 A: 我很好(响应)</span><br><span class="line">对象 B-&gt;小三: 你好吗</span><br><span class="line">小三--&gt;&gt;对象 A: 对象 B 找我了</span><br><span class="line">对象 A-&gt;对象 B: 你真的好吗？</span><br><span class="line">Note over 小三, 对象 B: 我们是朋友</span><br><span class="line">participant C</span><br><span class="line">Note right of C: 没人陪我玩</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>   显示效果如下所示：</p><ol><li>UML 标准时序图样例：</li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line"></span><br><span class="line">[```][mermaid]</span><br><span class="line">%% 时序图例子，-&gt; 直线，--&gt;虚线，-&gt;&gt;实线箭头</span><br><span class="line">  sequenceDiagram</span><br><span class="line">    participant 张三</span><br><span class="line">    participant 李四</span><br><span class="line">    张三-&gt;王五: 王五你好吗？</span><br><span class="line">    loop 健康检查</span><br><span class="line">        王五-&gt;王五: 与疾病战斗</span><br><span class="line">    end</span><br><span class="line">    Note right of 王五: 合理 食物 &lt;br/&gt;看医生...</span><br><span class="line">    李四--&gt;&gt;张三: 很好!</span><br><span class="line">    王五-&gt;李四: 你怎么样?</span><br><span class="line">    李四--&gt;王五: 很好!</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>   显示效果如下所示：</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> %% 时序图例子，-&gt; 直线，--&gt;虚线，-&gt;&gt;实线箭头</span><br><span class="line">sequenceDiagram</span><br><span class="line">  participant 张三</span><br><span class="line">  participant 李四</span><br><span class="line">  张三-&gt;王五: 王五你好吗？</span><br><span class="line">  loop 健康检查</span><br><span class="line">      王五-&gt;王五: 与疾病战斗</span><br><span class="line">  end</span><br><span class="line">  Note right of 王五: 合理 食物 看医生...</span><br><span class="line">  李四--&gt;&gt;张三: 很好!</span><br><span class="line">  王五-&gt;李四: 你怎么样?</span><br><span class="line">  李四--&gt;王五: 很好!</span><br></pre></td></tr></table></figure><h3 id="甘特图"><a href="#甘特图" class="headerlink" title="甘特图"></a>甘特图</h3><p>甘特图样例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">MARKDOWN</span><br><span class="line"></span><br><span class="line">[```][mermaid]</span><br><span class="line">%% 语法示例</span><br><span class="line">  gantt</span><br><span class="line">  dateFormat YYYY-MM-DD</span><br><span class="line">  title 软件开发甘特图</span><br><span class="line">  section 设计</span><br><span class="line">    需求: done, des1, 2014-01-06, 2014-01-08</span><br><span class="line">    原型: active, des2, 2014-01-09, 3d</span><br><span class="line">    UI 设计: des3, after des2, 5d</span><br><span class="line">    未来任务: des4, after des3, 5d</span><br><span class="line">  section 开发</span><br><span class="line">    理解需求: crit, done, 2014-01-06, 24h</span><br><span class="line">    设计框架: crit, done, after des2, 2d</span><br><span class="line">    开发: crit, active, 3d</span><br><span class="line">    未来任务: crit, 5d</span><br><span class="line">    玩耍: 2d</span><br><span class="line">  section 测试</span><br><span class="line">    功能测试: active, a1, after des3, 3d</span><br><span class="line">    压力测试: after a1, 20h</span><br><span class="line">    测试报告: 48h</span><br><span class="line">[```]</span><br></pre></td></tr></table></figure><p>显示效果如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mermaid %% 语法示例 gantt dateFormat YYYY-MM-DD title 软件开发甘特图 section 设计 需求: done, des1, 2014-01-06, 2014-01-08 原型: active, des2, 2014-01-09, 3d UI 设计: des3, after des2, 5d 未来任务: des4, after des3, 5d section 开发 理解需求: crit, done, 2014-01-06, 24h 设计框架: crit, done, after des2, 2d 开发: crit, active, 3d 未来任务: crit, 5d 玩耍: 2d section 测试 功能测试: active, a1, after des3, 3d 压力测试: after a1, 20h 测试报告: 48h</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Markdown语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue基础内容</title>
      <link href="/2023/09/06/%E5%89%8D%E7%AB%AF-vue%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/"/>
      <url>/2023/09/06/%E5%89%8D%E7%AB%AF-vue%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="vue基础内容"><a href="#vue基础内容" class="headerlink" title="vue基础内容"></a>vue基础内容</h2><h3 id="初识Vue"><a href="#初识Vue" class="headerlink" title="初识Vue"></a>初识Vue</h3><ol><li><p>想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象；</p></li><li><p>root容器里的代码依然符合html规范，只不过混入了一些特殊的Vue语法；</p></li><li><p>root容器里的代码被称为【Vue模板】；</p></li><li><p>Vue实例和容器是一一对应的；</p></li><li><p>真实开发中只有一个Vue实例，并且会配合着组件一起使用；</p></li><li><p><code>&#123;&#123;xxx&#125;&#125;</code>中的xxx要写js表达式，且xxx可以自动读取到data中的所有属性；</p></li><li><p>一旦data中的数据发生改变，那么页面中用到该数据的地方也会自动更新；</p><p>注意区分：js表达式 和 js代码(语句)</p><ul><li>表达式：一个表达式会产生一个值，可以放在任何一个需要值的地方：<br>(1). a<br>(2). a+b<br>(3). demo(1)<br>(4). x === y ? ‘a’ : ‘b’</li><li>js代码(语句)<br>(1). if(){}<br>(2). for(){}</li></ul></li></ol><h3 id="Vue模版语法"><a href="#Vue模版语法" class="headerlink" title="Vue模版语法"></a>Vue模版语法</h3><p>Vue模板语法有2大类：</p><ol><li>插值语法：<br>功能：用于解析标签体内容。<br>写法：<code>&#123;&#123;xxx&#125;&#125;</code>，xxx是js表达式，且可以直接读取到data中的所有属性。</li><li>指令语法：<br>功能：用于解析标签（包括：标签属性、标签体内容、绑定事件…..）。<br>举例：v-bind:href=”xxx” 或 简写为 :href=”xxx”，xxx同样要写js表达式，<br>且可以直接读取到data中的所有属性。<br>备注：Vue中有很多的指令，且形式都是：v-????，此处我们只是拿v-bind举个例子。</li></ol><h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><p>Vue中有2种数据绑定的方式：</p><ol><li><p>单向绑定(v-bind)：数据只能从data流向页面。</p></li><li><p>双向绑定(v-model)：数据不仅能从data流向页面，还可以从页面流向data。</p><p>备注：</p><ul><li>双向绑定一般都应用在表单类元素上（如：input、select等）</li><li>v-model:value 可以简写为 v-model，因为v-model默认收集的就是value值。</li></ul></li></ol><h3 id="data与el的2种写法"><a href="#data与el的2种写法" class="headerlink" title="data与el的2种写法"></a>data与el的2种写法</h3><ol><li>el有2种写法<br>(1).new Vue时候配置el属性。<br>(2).先创建Vue实例，随后再通过vm.$mount(‘#root’)指定el的值。</li><li>data有2种写法<br>(1).对象式<br>(2).函数式<br>如何选择：目前哪种写法都可以，以后学习到组件时，data必须使用函数式，否则会报错。</li><li>一个重要的原则：<br>由Vue管理的函数，一定不要写箭头函数，一旦写了箭头函数，this就不再是Vue实例了。（最终目的是让this指向vm）</li></ol><h3 id="MVVM模型"><a href="#MVVM模型" class="headerlink" title="MVVM模型"></a>MVVM模型</h3><ol><li>M：模型(Model) ：data中的数据</li><li>V：视图(View) ：模板代码</li><li>VM：视图模型(ViewModel)：Vue实例<br>观察发现：</li><li>data中所有的属性，最后都出现在了vm身上。</li><li>vm身上所有的属性 及 Vue原型上所有属性，在Vue模板中都可以直接使用。<br>是因为data最后合并到了vm中。</li></ol><h3 id="数据代理"><a href="#数据代理" class="headerlink" title="数据代理"></a>数据代理</h3><ol><li>Vue中的数据代理：<br>通过vm对象来代理data对象中属性的操作（读/写）</li><li>Vue中数据代理的好处：<br>更加方便的操作data中的数据</li><li>基本原理：<br>通过Object.defineProperty()把data对象中所有属性添加到vm上。<br>为每一个添加到vm上的属性，都指定一个getter/setter。<br>在getter/setter内部去操作（读/写）data中对应的属性。</li></ol><h3 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h3><h4 id="事件的基本使用："><a href="#事件的基本使用：" class="headerlink" title="事件的基本使用："></a>事件的基本使用：</h4><ol><li>使用v-on:xxx 或 @xxx 绑定事件，其中xxx是事件名；</li><li>事件的回调需要配置在methods对象中，最终会在vm上；</li><li>methods中配置的函数，不要用箭头函数！否则this就不是vm了；</li><li>methods中配置的函数，都是被Vue所管理的函数，this的指向是vm 或 组件实例对象；</li><li>@click=”demo” 和 @click=”demo($event)” 效果一致，但后者可以传参；</li></ol><h4 id="Vue中的事件修饰符："><a href="#Vue中的事件修饰符：" class="headerlink" title="Vue中的事件修饰符："></a>Vue中的事件修饰符：</h4><ol><li>prevent：阻止默认事件（常用）；</li><li>stop：阻止事件冒泡（常用）；</li><li>once：事件只触发一次（常用）；</li><li>capture：使用事件的捕获模式；</li><li>self：只有event.target是当前操作的元素时才触发事件；</li><li>passive：事件的默认行为立即执行，无需等待事件回调执行完毕；（多用于优化，类似异步）</li></ol><h4 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h4><ol><li>Vue中常用的按键别名：<br>回车 =&gt; enter<br>删除 =&gt; delete (捕获“删除”和“退格”键)<br>退出 =&gt; esc<br>空格 =&gt; space<br>换行 =&gt; tab (特殊，必须配合keydown去使用，因为若keyup会先切走，这时候event就丢失了。)<br>上 =&gt; up<br>下 =&gt; down<br>左 =&gt; left<br>右 =&gt; right</li><li>Vue未提供别名的按键，可以使用按键原始的key值去绑定，但注意要转为kebab-case（短横线命名）</li><li>系统修饰键（用法特殊）：ctrl、alt、shift、meta<br>(1).配合keyup使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发。<br>(2).配合keydown使用：正常触发事件。</li><li>也可以使用keyCode去指定具体的按键（不推荐）</li><li>Vue.config.keyCodes.自定义键名 = 键码，可以去定制按键别名</li></ol><h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><ol><li>定义：要用的属性不存在，要通过已有属性计算得来。</li><li>原理：底层借助了Objcet.defineproperty方法提供的getter和setter。</li><li>get函数什么时候执行？<br>(1).初次读取时会执行一次。<br>(2).当依赖的数据发生改变时会被再次调用。</li><li>优势：与methods实现相比，内部有缓存机制（复用），效率更高，调试方便。</li><li>备注：<ul><li>计算属性最终会出现在vm上，直接读取使用即可。</li><li>如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生改变。</li></ul></li></ol><h3 id="监视属性watch："><a href="#监视属性watch：" class="headerlink" title="监视属性watch："></a>监视属性watch：</h3><ol><li>当被监视的属性变化时, 回调函数自动调用, 进行相关操作</li><li>监视的属性必须存在，才能进行监视！！</li><li>监视的两种写法：<br>(1).new Vue时传入watch配置<br>(2).通过vm.$watch监视</li><li>深度监视：<br>(1).Vue中的watch默认不监测对象内部值的改变（一层）。<br>(2).配置deep:true可以监测对象内部值改变（多层）。<br>备注：<br>(1).Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以！<br>(2).使用watch时根据数据的具体结构，决定是否采用深度监视。为了效率更高，简单结构无需开深度监视。</li><li>computed和watch之间的区别：<ul><li>computed能完成的功能，watch都可以完成。</li><li>watch能完成的功能，computed不一定能完成，例如：watch可以进行异步操作。</li></ul></li><li>两个重要的小原则：<ul><li>所被Vue管理的函数，最好写成普通函数，这样this的指向才是vm 或 组件实例对象。</li><li>所有不被Vue所管理的函数（定时器的回调函数、ajax的回调函数等、Promise的回调函数），最好写成箭头函数，<br>这样this的指向才是vm 或 组件实例对象。</li></ul></li></ol><h3 id="绑定样式"><a href="#绑定样式" class="headerlink" title="绑定样式"></a>绑定样式</h3><ol><li>class样式<br>写法:class=”xxx” xxx可以是字符串、对象、数组。<br>字符串写法适用于：类名不确定，要动态获取。<br>对象写法适用于：要绑定多个样式，个数不确定，名字也不确定。<br>数组写法适用于：要绑定多个样式，个数确定，名字也确定，但不确定用不用。</li><li>style样式<br>:style=”{fontSize: xxx}”其中xxx是动态值。<br>:style=”[a,b]”其中a、b是样式对象。</li></ol><h3 id="条件渲染："><a href="#条件渲染：" class="headerlink" title="条件渲染："></a>条件渲染：</h3><ol><li>v-if<br>写法：<br>(1).v-if=”表达式”<br>(2).v-else-if=”表达式”<br>(3).v-else=”表达式”<br>适用于：切换频率较低的场景。<br>特点：不展示的DOM元素直接被移除。<br>注意：v-if可以和:v-else-if、v-else一起使用，但要求结构不能被“打断”。</li><li>v-show<br>写法：v-show=”表达式”<br>适用于：切换频率较高的场景。<br>特点：不展示的DOM元素未被移除，仅仅是使用样式隐藏掉</li><li>备注：使用v-if的时，元素可能无法获取到，而使用v-show一定可以获取到。</li></ol><h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h3><h4 id="v-for指令"><a href="#v-for指令" class="headerlink" title="v-for指令:"></a>v-for指令:</h4><ol><li>用于展示列表数据</li><li>语法：v-for=”(item, index) in xxx” :key=”yyy”</li><li>可遍历：数组、对象、字符串（用的很少）、指定次数（用的很少）</li></ol><h4 id="面试题：react、vue中的key有什么作用？（key的内部原理）"><a href="#面试题：react、vue中的key有什么作用？（key的内部原理）" class="headerlink" title="面试题：react、vue中的key有什么作用？（key的内部原理）"></a>面试题：react、vue中的key有什么作用？（key的内部原理）</h4><ol><li><p>虚拟DOM中key的作用：<br>key是虚拟DOM对象的标识，当数据发生变化时，Vue会根据【新数据】生成【新的虚拟DOM】,<br>随后Vue进行【新虚拟DOM】与【旧虚拟DOM】的差异比较，比较规则如下：</p></li><li><p>对比规则：<br>(1).旧虚拟DOM中找到了与新虚拟DOM相同的key：<br>若虚拟DOM中内容没变, 直接使用之前的真实DOM！<br>若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM。</p><p>(2).旧虚拟DOM中未找到与新虚拟DOM相同的key<br>创建新的真实DOM，随后渲染到到页面。</p></li><li><p>用index作为key可能会引发的问题：</p><ul><li>若对数据进行：逆序添加、逆序删除等破坏顺序操作:<br>会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</li><li>如果结构中还包含输入类的DOM：<br>会产生错误DOM更新 ==&gt; 界面有问题。</li></ul></li><li><p>开发中如何选择key?:</p><ul><li>最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号、学号等唯一值。</li><li>如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，<br>使用index作为key是没有问题的。</li></ul></li></ol><h4 id="Vue监视数据的原理："><a href="#Vue监视数据的原理：" class="headerlink" title="Vue监视数据的原理："></a>Vue监视数据的原理：</h4><ol><li>vue会监视data中所有层次的数据。</li><li>如何监测对象中的数据？<br>通过setter实现监视，且要在new Vue时就传入要监测的数据。<br>(1).对象中后追加的属性，Vue默认不做响应式处理<br>(2).如需给后添加的属性做响应式，请使用如下API：<br>Vue.set(target，propertyName/index，value) 或<br>vm.$set(target，propertyName/index，value)</li><li>如何监测数组中的数据？<br>通过包裹数组更新元素的方法实现，本质就是做了两件事：<br>(1).调用原生对应的方法对数组进行更新。<br>(2).重新解析模板，进而更新页面。</li><li>在Vue修改数组中的某个元素一定要用如下方法：<br>1.使用这些API:push()、pop()、shift()、unshift()、splice()、sort()、reverse()<br>2.Vue.set() 或 vm.$set()</li></ol><p>特别注意：Vue.set() 和 vm.$set() 不能给vm 或 vm的根数据对象 添加属性！！！</p><h3 id="收集表单数据："><a href="#收集表单数据：" class="headerlink" title="收集表单数据："></a>收集表单数据：</h3><p>若：<code>&lt;input type=&quot;text&quot;/&gt;</code>，则v-model收集的是value值，用户输入的就是value值。<br>若：<code>&lt;input type=&quot;radio&quot;/&gt;</code>，则v-model收集的是value值，且要给标签配置value值。<br>若：<code>&lt;input type=&quot;checkbox&quot;/&gt;</code><br>1.没有配置input的value属性，那么收集的就是checked（勾选 or 未勾选，是布尔值）<br>2.配置input的value属性:<br>(1)v-model的初始值是非数组，那么收集的就是checked（勾选 or 未勾选，是布尔值）<br>(2)v-model的初始值是数组，那么收集的的就是value组成的数组<br>备注：v-model的三个修饰符：<br>lazy：失去焦点再收集数据<br>number：输入字符串转为有效的数字<br>trim：输入首尾空格过滤</p><h3 id="过滤器："><a href="#过滤器：" class="headerlink" title="过滤器："></a>过滤器：</h3><p>定义：对要显示的数据进行特定格式化后再显示（适用于一些简单逻辑的处理）。<br>语法：<br>1.注册过滤器：<code>Vue.filter(name,callback)</code> 或 <code>new Vue&#123;filters:&#123;&#125;&#125;</code><br>2.使用过滤器：<code>&#123;&#123; xxx | 过滤器名&#125;&#125;</code> 或 <code>v-bind:属性 = &quot;xxx | 过滤器名&quot;</code><br>备注：<br>1.过滤器也可以接收额外参数、多个过滤器也可以串联<br>2.并没有改变原本的数据, 是产生新的对应的数据</p><h3 id="内置指令"><a href="#内置指令" class="headerlink" title="内置指令"></a>内置指令</h3><ol><li>v-bind : 单向绑定解析表达式, 可简写为 :xxx</li><li>v-model : 双向数据绑定</li><li>v-for : 遍历数组/对象/字符串</li><li>v-on : 绑定事件监听, 可简写为@</li><li>v-if : 条件渲染（动态控制节点是否存存在）</li><li>v-else : 条件渲染（动态控制节点是否存存在）</li><li>v-show : 条件渲染 (动态控制节点是否展示)</li><li>v-text指令：<ul><li>作用：向其所在的节点中渲染文本内容。</li><li>与插值语法的区别：v-text会替换掉节点中的内容，<code>&#123;&#123;xx&#125;&#125;</code>则不会。</li></ul></li><li>v-html指令：<ul><li>作用：向指定节点中渲染包含html结构的内容。</li><li>与插值语法的区别：<br>(1).v-html会替换掉节点中所有的内容，<code>&#123;&#123;xx&#125;&#125;</code>则不会。<br>(2).v-html可以识别html结构。</li><li>严重注意：v-html有安全性问题！！！！<br>(1).在网站上动态渲染任意HTML是非常危险的，容易导致XSS攻击。<br>(2).一定要在可信的内容上使用v-html，永不要用在用户提交的内容上！</li></ul></li><li>v-cloak指令（没有值）：<ul><li>本质是一个特殊属性，Vue实例创建完毕并接管容器后，会删掉v-cloak属性。</li><li>使用css配合v-cloak可以解决网速慢时页面展示出<code>&#123;&#123;xxx&#125;&#125;</code>的问题。</li></ul></li><li>v-once指令：<ul><li>v-once所在节点在初次动态渲染后，就视为静态内容了。</li><li>以后数据的改变不会引起v-once所在结构的更新，可以用于优化性能。</li></ul></li><li>v-pre指令：<ul><li>跳过其所在节点的编译过程。</li><li>可利用它跳过：没有使用指令语法、没有使用插值语法的节点，会加快编译。</li></ul></li></ol><h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h3><p>需求1：定义一个v-big指令，和v-text功能类似，但会把绑定的数值放大10倍。<br>需求2：定义一个v-fbind指令，和v-bind功能类似，但可以让其所绑定的input元素默认获取焦点。<br>自定义指令总结：<br>一、定义语法：<br>(1).局部指令：<br>new Vue({ new Vue({<br>directives:{指令名:配置对象} 或 directives{指令名:回调函数}<br>}) })<br>(2).全局指令：<br>Vue.directive(指令名,配置对象) 或 Vue.directive(指令名,回调函数)</p><p>二、配置对象中常用的3个回调：<br>(1).bind：指令与元素成功绑定时调用。<br>(2).inserted：指令所在元素被插入页面时调用。<br>(3).update：指令所在模板结构被重新解析时调用。</p><p>三、备注：<br>(1).指令定义时不加v-，但使用时要加v-；<br>(2).指令名如果是多个单词，要使用kebab-case命名方式，不要用camelCase命名。</p><h3 id="Vue生命周期"><a href="#Vue生命周期" class="headerlink" title="Vue生命周期"></a>Vue生命周期</h3><ol><li><p>又名：生命周期回调函数、生命周期函数、生命周期钩子。</p></li><li><p>是什么：Vue在关键时刻帮我们调用的一些特殊名称的函数。</p></li><li><p>生命周期函数的名字不可更改，但函数的具体内容是程序员根据需求编写的。</p></li><li><p>生命周期函数中的this指向是vm 或 组件实例对象。</p><p>常用的生命周期钩子：</p><ol><li>mounted: 发送ajax请求、启动定时器、绑定自定义事件、订阅消息等【初始化操作】。</li><li>beforeDestroy: 清除定时器、解绑自定义事件、取消订阅消息等【收尾工作】。</li></ol></li></ol><p>关于销毁Vue实例</p><ol><li>销毁后借助Vue开发者工具看不到任何信息。</li><li>销毁后自定义事件会失效，但原生DOM事件依然有效。</li><li>一般不会在beforeDestroy操作数据，因为即便操作数据，也不会再触发更新流程了。</li></ol><h3 id="非单文件组件"><a href="#非单文件组件" class="headerlink" title="非单文件组件"></a>非单文件组件</h3><h4 id="Vue中使用组件的三大步骤："><a href="#Vue中使用组件的三大步骤：" class="headerlink" title="Vue中使用组件的三大步骤："></a>Vue中使用组件的三大步骤：</h4><p>一、定义组件(创建组件)<br>二、注册组件<br>三、使用组件(写组件标签)</p><p>一、如何定义一个组件？<br>使用Vue.extend(options)创建，其中options和new Vue(options)时传入的那个options几乎一样，但也有点区别；<br>区别如下：<br>1.el不要写，为什么？ ——— 最终所有的组件都要经过一个vm的管理，由vm中的el决定服务哪个容器。<br>2.data必须写成函数，为什么？ ———— 避免组件被复用时，数据存在引用关系。<br>备注：使用template可以配置组件结构。</p><p>二、如何注册组件？<br>1.局部注册：靠new Vue的时候传入components选项<br>2.全局注册：靠Vue.component(‘组件名’,组件)</p><p>三、编写组件标签：<br><code>&lt;school&gt;&lt;/school&gt;</code></p><h4 id="几个注意点："><a href="#几个注意点：" class="headerlink" title="几个注意点："></a>几个注意点：</h4><ol><li>关于组件名:<br>一个单词组成：<br>第一种写法(首字母小写)：school<br>第二种写法(首字母大写)：School<br>多个单词组成：<br>第一种写法(kebab-case命名)：my-school(配置项里要用引号包起来)<br>第二种写法(CamelCase命名)：MySchool (需要Vue脚手架支持)<br>备注：<br>(1).组件名尽可能回避HTML中已有的元素名称，例如：h2、H2都不行。<br>(2).可以使用name配置项指定组件在开发者工具中呈现的名字。</li><li>关于组件标签:<br>第一种写法：<br>第二种写法：<br>备注：不用使用脚手架时，会导致后续组件不能渲染。</li><li>一个简写方式：<br>const school = Vue.extend(options) 可简写为：const school = options</li></ol><h4 id="关于VueComponent："><a href="#关于VueComponent：" class="headerlink" title="关于VueComponent："></a>关于VueComponent：</h4><ol><li>school组件本质是一个名为VueComponent的构造函数，且不是程序员定义的，是Vue.extend生成的。</li><li>我们只需要写<code>&lt;school/&gt;</code>或<code>&lt;school&gt;&lt;/school&gt;</code>，Vue解析时会帮我们创建school组件的实例对象，<br>即Vue帮我们执行的：<code>new VueComponent(options)</code>。调用是解析时进行的，和简写时有没有Vue.extend无关。</li><li>特别注意：每次调用Vue.extend，返回的都是一个全新的VueComponent！！！！</li><li>关于this指向：<br>(1).组件配置中：<br>data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【VueComponent实例对象】。<br>(2).new Vue(options)配置中：<br>data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【Vue实例对象】。</li><li>VueComponent的实例对象，以后简称vc（也可称之为：组件实例对象）。<br>Vue的实例对象，以后简称vm。<br>差别就在于el这种根实例特有的选项。</li></ol><h3 id="单文件组件"><a href="#单文件组件" class="headerlink" title="单文件组件"></a>单文件组件</h3><ol><li>一个重要的内置关系：<code>VueComponent.prototype.__proto__ === Vue.prototype</code></li><li>为什么要有这个关系：让组件实例对象（vc）可以访问到 Vue原型上的属性、方法。</li></ol><h2 id="Vue脚手架（vue2）"><a href="#Vue脚手架（vue2）" class="headerlink" title="Vue脚手架（vue2）"></a>Vue脚手架（vue2）</h2><h3 id="脚手架文件结构"><a href="#脚手架文件结构" class="headerlink" title="脚手架文件结构"></a>脚手架文件结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">├── node_modules </span><br><span class="line">├── public</span><br><span class="line">│   ├── favicon.ico: 页签图标</span><br><span class="line">│   └── index.html: 主页面</span><br><span class="line">├── src</span><br><span class="line">│   ├── assets: 存放静态资源</span><br><span class="line">│   │   └── logo.png</span><br><span class="line">│   │── component: 存放组件</span><br><span class="line">│   │   └── HelloWorld.vue</span><br><span class="line">│   │── App.vue: 汇总所有组件</span><br><span class="line">│   │── main.js: 入口文件</span><br><span class="line">├── .gitignore: git版本管制忽略的配置</span><br><span class="line">├── babel.config.js: babel的配置文件</span><br><span class="line">├── package.json: 应用包配置文件 </span><br><span class="line">├── README.md: 应用描述文件</span><br><span class="line">├── package-lock.json：包版本控制文件</span><br></pre></td></tr></table></figure><h3 id="关于不同版本的Vue"><a href="#关于不同版本的Vue" class="headerlink" title="关于不同版本的Vue"></a>关于不同版本的Vue</h3><ol><li>vue.js与vue.runtime.xxx.js的区别：<ul><li>vue.js是完整版的Vue，包含：核心功能 + 模板解析器。</li><li>vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。</li></ul></li><li>因为vue.runtime.xxx.js没有模板解析器，所以不能使用template这个配置项，需要使用render函数接收到的createElement函数去指定具体内容。</li></ol><h3 id="vue-config-js配置文件"><a href="#vue-config-js配置文件" class="headerlink" title="vue.config.js配置文件"></a>vue.config.js配置文件</h3><ol><li>使用vue inspect &gt; output.js可以查看到Vue脚手架的默认配置。</li><li>使用vue.config.js可以对脚手架进行个性化定制，详情见：<a href="https://cli.vuejs.org/zh">https://cli.vuejs.org/zh</a></li></ol><h3 id="ref属性"><a href="#ref属性" class="headerlink" title="ref属性"></a>ref属性</h3><ol><li>被用来给元素或子组件注册引用信息（id的替代者）</li><li>应用在html标签上获取的是真实DOM元素，应用在组件标签上是组件实例对象（vc）</li><li>使用方式：<ul><li>打标识：<code>&lt;h1 ref=&quot;xxx&quot;&gt;.....&lt;/h1&gt;</code> 或 <code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></li><li>获取：<code>this.$refs.xxx</code></li></ul></li></ol><h3 id="props配置项"><a href="#props配置项" class="headerlink" title="props配置项"></a>props配置项</h3><ol><li><p>功能：让组件接收外部传过来的数据</p></li><li><p>传递数据：<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></p></li><li><p>接收数据：</p><ol><li><p>第一种方式（只接收）：<code>props:[&#39;name&#39;]</code></p></li><li><p>第二种方式（限制类型）：<code>props:&#123;name:String&#125;</code></p></li><li><p>第三种方式（限制类型、限制必要性、指定默认值）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">props:&#123;</span><br><span class="line">name:&#123;</span><br><span class="line">type:String, //类型</span><br><span class="line">required:true, //必要性</span><br><span class="line">default:&#x27;老王&#x27; //默认值</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>备注：props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。</p></blockquote></li></ol></li></ol><h3 id="mixin-混入"><a href="#mixin-混入" class="headerlink" title="mixin(混入)"></a>mixin(混入)</h3><ol><li><p>功能：可以把多个组件共用的配置提取成一个混入对象</p></li><li><p>使用方式：</p><p>第一步定义混合：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NIM</span><br><span class="line">&#123;</span><br><span class="line">    data()&#123;....&#125;,</span><br><span class="line">    methods:&#123;....&#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二步使用混入：</p><p> 全局混入：<code>Vue.mixin(xxx)</code><br>​ 局部混入：<code>mixins:[&#39;xxx&#39;]</code></p></li></ol><h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><ol><li><p>功能：用于增强Vue</p></li><li><p>本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据。</p></li><li><p>定义插件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">对象.install = function (Vue, options) &#123;</span><br><span class="line">    // 1. 添加全局过滤器</span><br><span class="line">    Vue.filter(....)</span><br><span class="line"></span><br><span class="line">    // 2. 添加全局指令</span><br><span class="line">    Vue.directive(....)</span><br><span class="line"></span><br><span class="line">    // 3. 配置全局混入(合)</span><br><span class="line">    Vue.mixin(....)</span><br><span class="line"></span><br><span class="line">    // 4. 添加实例方法</span><br><span class="line">    Vue.prototype.$myMethod = function () &#123;...&#125;</span><br><span class="line">    Vue.prototype.$myProperty = xxxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用插件：<code>Vue.use()</code></p></li></ol><h3 id="scoped样式"><a href="#scoped样式" class="headerlink" title="scoped样式"></a>scoped样式</h3><ol><li>作用：让样式在局部生效，防止冲突。</li><li>写法：<code>&lt;style scoped&gt;</code></li></ol><h3 id="总结TodoList案例"><a href="#总结TodoList案例" class="headerlink" title="总结TodoList案例"></a>总结TodoList案例</h3><ol><li><p>组件化编码流程：</p><p> (1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。</p><p> (2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：</p><p> 1).一个组件在用：放在组件自身即可。</p><p> 2). 一些组件在用：放在他们共同的父组件上（状态提升）。</p><p> (3).实现交互：从绑定事件开始。</p></li><li><p>props适用于：</p><p> (1).父组件 ==&gt; 子组件 通信</p><p> (2).子组件 ==&gt; 父组件 通信（要求父先给子一个函数）</p></li><li><p>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！</p></li><li><p>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。</p></li></ol><h3 id="webStorage"><a href="#webStorage" class="headerlink" title="webStorage"></a>webStorage</h3><ol><li>存储内容大小一般支持5MB左右（不同浏览器可能还不一样）</li><li>浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。</li><li>相关API：<ol><li><code>xxxxxStorage.setItem(&#39;key&#39;, &#39;value&#39;);</code><br>该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。</li><li><code>xxxxxStorage.getItem(&#39;person&#39;);</code><br>​该方法接受一个键名作为参数，返回键名对应的值。</li><li><code>xxxxxStorage.removeItem(&#39;key&#39;);</code><br>​该方法接受一个键名作为参数，并把该键名从存储中删除。</li><li><code>xxxxxStorage.clear()</code><br>​该方法会清空存储中的所有数据。</li></ol></li><li>备注：<ol><li>SessionStorage存储的内容会随着浏览器窗口关闭而消失。</li><li>LocalStorage存储的内容，需要手动清除才会消失。</li><li><code>xxxxxStorage.getItem(xxx)</code>如果xxx对应的value获取不到，那么getItem的返回值是null。</li><li><code>JSON.parse(null)</code>的结果依然是null。</li></ol></li></ol><h3 id="组件的自定义事件"><a href="#组件的自定义事件" class="headerlink" title="组件的自定义事件"></a>组件的自定义事件</h3><ol><li><p>一种组件间通信的方式，适用于：<strong>子组件 ===&gt; 父组件</strong></p></li><li><p>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（事件的回调在A中）。</p></li><li><p>绑定自定义事件：</p><ol><li><p>第一种方式，在父组件中：<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code> 或 <code>&lt;Demo v-on:atguigu=&quot;test&quot;/&gt;</code></p></li><li><p>第二种方式，在父组件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line">&lt;Demo ref=&quot;demo&quot;/&gt;</span><br><span class="line">......</span><br><span class="line">mounted()&#123;</span><br><span class="line">   this.$refs.xxx.$on(&#x27;atguigu&#x27;,this.test)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法。</p></li></ol></li><li><p>触发自定义事件：<code>this.$emit(&#39;atguigu&#39;,数据)</code></p></li><li><p>解绑自定义事件<code>this.$off(&#39;atguigu&#39;)</code></p></li><li><p>组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符。</p></li><li><p>注意：通过<code>this.$refs.xxx.$on(&#39;atguigu&#39;,回调)</code>绑定自定义事件时，回调要么配置在methods中，要么用箭头函数，否则this指向会出问题！</p></li></ol><h3 id="全局事件总线（GlobalEventBus）"><a href="#全局事件总线（GlobalEventBus）" class="headerlink" title="全局事件总线（GlobalEventBus）"></a>全局事件总线（GlobalEventBus）</h3><ol><li><p>一种组件间通信的方式，适用于任意组件间通信。</p></li><li><p>安装全局事件总线：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">......</span><br><span class="line">beforeCreate() &#123;</span><br><span class="line">Vue.prototype.$bus = this //安装全局事件总线，$bus就是当前应用的vm</span><br><span class="line">&#125;,</span><br><span class="line">    ......</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure></li><li><p>使用事件总线：</p><ol><li><p>接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的回调留在A组件自身。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">methods()&#123;</span><br><span class="line">  demo(data)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">mounted() &#123;</span><br><span class="line">  this.$bus.$on(&#x27;xxxx&#x27;,this.demo)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>提供数据：<code>this.$bus.$emit(&#39;xxxx&#39;,数据)</code></p></li></ol></li><li><p>最好在beforeDestroy钩子中，用$off去解绑当前组件所用到的事件。</p></li></ol><h3 id="消息订阅与发布（pubsub）"><a href="#消息订阅与发布（pubsub）" class="headerlink" title="消息订阅与发布（pubsub）"></a>消息订阅与发布（pubsub）</h3><ol><li><p>一种组件间通信的方式，适用于任意组件间通信。</p></li><li><p>使用步骤：</p><ol><li><p>安装pubsub：<code>npm i pubsub-js</code></p></li><li><p>引入: <code>import pubsub from &#39;pubsub-js&#39;</code></p></li><li><p>接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的回调留在A组件自身。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">methods()&#123;</span><br><span class="line">  demo(data)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">mounted() &#123;</span><br><span class="line">  this.pid = pubsub.subscribe(&#x27;xxx&#x27;,this.demo) //订阅消息</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>提供数据：<code>pubsub.publish(&#39;xxx&#39;,数据)</code></p></li><li><p>最好在beforeDestroy钩子中，用<code>PubSub.unsubscribe(pid)</code>去取消订阅。</p></li></ol></li></ol><h3 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h3><ol><li>语法：<code>this.$nextTick(回调函数)</code></li><li>作用：在下一次 DOM 更新结束后执行其指定的回调。</li><li>什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在nextTick所指定的回调函数中执行。</li></ol><h3 id="Vue封装的过度与动画"><a href="#Vue封装的过度与动画" class="headerlink" title="Vue封装的过度与动画"></a>Vue封装的过度与动画</h3><ol><li><p>作用：在插入、更新或移除 DOM元素时，在合适的时候给元素添加样式类名。</p></li><li><p>图示：<img src="https://img04.sogoucdn.com/app/a/100520146/5990c1dff7dc7a8fb3b34b4462bd0105" alt="img"></p></li><li><p>写法：</p><ol><li><p>准备好样式：</p><ul><li>元素进入的样式：<ol><li>v-enter：进入的起点</li><li>v-enter-active：进入过程中</li><li>v-enter-to：进入的终点</li></ol></li><li>元素离开的样式：<ol><li>v-leave：离开的起点</li><li>v-leave-active：离开过程中</li><li>v-leave-to：离开的终点</li></ol></li></ul></li><li><p>使用<code>&lt;transition&gt;</code>包裹要过度的元素，并配置name属性：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">&lt;transition name=&quot;hello&quot;&gt;</span><br><span class="line">&lt;h1 v-show=&quot;isShow&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure></li><li><p>备注：若有多个元素需要过度，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code>值。</p></li></ol></li></ol><h3 id="vue脚手架配置代理"><a href="#vue脚手架配置代理" class="headerlink" title="vue脚手架配置代理"></a>vue脚手架配置代理</h3><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><p> 在vue.config.js中添加如下配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line">devServer:&#123;</span><br><span class="line">  proxy:&quot;http://localhost:5000&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>说明：</p><ol><li>优点：配置简单，请求资源时直接发给前端（8080）即可。</li><li>缺点：不能配置多个代理，不能灵活的控制请求是否走代理。</li><li>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）</li></ol><h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><p> 编写vue.config.js配置具体代理规则：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">devServer: &#123;</span><br><span class="line">      proxy: &#123;</span><br><span class="line">      &#x27;/api1&#x27;: &#123;// 匹配所有以 &#x27;/api1&#x27;开头的请求路径</span><br><span class="line">        target: &#x27;http://localhost:5000&#x27;,// 代理目标的基础路径</span><br><span class="line">        changeOrigin: true,</span><br><span class="line">        pathRewrite: &#123;&#x27;^/api1&#x27;: &#x27;&#x27;&#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#x27;/api2&#x27;: &#123;// 匹配所有以 &#x27;/api2&#x27;开头的请求路径</span><br><span class="line">        target: &#x27;http://localhost:5001&#x27;,// 代理目标的基础路径</span><br><span class="line">        changeOrigin: true,</span><br><span class="line">        pathRewrite: &#123;&#x27;^/api2&#x27;: &#x27;&#x27;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span><br><span class="line">   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080</span><br><span class="line">   changeOrigin默认值为true</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><p>说明：</p><ol><li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理。</li><li>缺点：配置略微繁琐，请求资源时必须加前缀。</li></ol><h3 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h3><ol><li><p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 <strong>父组件 ===&gt; 子组件</strong> 。</p></li><li><p>分类：默认插槽、具名插槽、作用域插槽</p></li><li><p>使用方式：</p><ol><li><p>默认插槽：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">父组件中：</span><br><span class="line">        &lt;Category&gt;</span><br><span class="line">           &lt;div&gt;html结构1&lt;/div&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">               &lt;!-- 定义插槽 --&gt;</span><br><span class="line">               &lt;slot&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p>具名插槽：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">父组件中：</span><br><span class="line">        &lt;Category&gt;</span><br><span class="line">            &lt;template slot=&quot;center&quot;&gt;</span><br><span class="line">              &lt;div&gt;html结构1&lt;/div&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">            &lt;template v-slot:footer&gt;</span><br><span class="line">               &lt;div&gt;html结构2&lt;/div&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">               &lt;!-- 定义插槽 --&gt;</span><br><span class="line">               &lt;slot name=&quot;center&quot;&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class="line">               &lt;slot name=&quot;footer&quot;&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p>作用域插槽：</p><ol><li><p>理解：数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。（games数据在Category组件中，但使用数据所遍历出来的结构由App组件决定）</p></li><li><p>具体编码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">父组件中：</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;template scope=&quot;scopeData&quot;&gt;</span><br><span class="line">&lt;!-- 生成的是ul列表 --&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;/Category&gt;</span><br><span class="line"></span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;template slot-scope=&quot;scopeData&quot;&gt;</span><br><span class="line">&lt;!-- 生成的是h4标题 --&gt;</span><br><span class="line">&lt;h4 v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;slot :games=&quot;games&quot;&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">        &lt;script&gt;</span><br><span class="line">            export default &#123;</span><br><span class="line">                name:&#x27;Category&#x27;,</span><br><span class="line">                props:[&#x27;title&#x27;],</span><br><span class="line">                //数据在子组件自身</span><br><span class="line">                data() &#123;</span><br><span class="line">                    return &#123;</span><br><span class="line">                        games:[&#x27;红色警戒&#x27;,&#x27;穿越火线&#x27;,&#x27;劲舞团&#x27;,&#x27;超级玛丽&#x27;]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol></li></ol><h3 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h3><h4 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h4><p> 在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。</p><h4 id="2-何时使用？"><a href="#2-何时使用？" class="headerlink" title="2.何时使用？"></a>2.何时使用？</h4><p> 多个组件需要共享数据时</p><h4 id="3-搭建vuex环境"><a href="#3-搭建vuex环境" class="headerlink" title="3.搭建vuex环境"></a>3.搭建vuex环境</h4><ol><li><p>创建文件：<code>src/store/index.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">//引入Vue核心库</span><br><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">//引入Vuex</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">//应用Vuex插件</span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">//准备actions对象——响应组件中用户的动作</span><br><span class="line">const actions = &#123;&#125;</span><br><span class="line">//准备mutations对象——修改state中的数据</span><br><span class="line">const mutations = &#123;&#125;</span><br><span class="line">//准备state对象——保存具体的数据</span><br><span class="line">const state = &#123;&#125;</span><br><span class="line"></span><br><span class="line">//创建并暴露store</span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">actions,</span><br><span class="line">mutations,</span><br><span class="line">state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>在<code>main.js</code>中创建vm时传入<code>store</code>配置项</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">//引入store</span><br><span class="line">import store from &#x27;./store&#x27;</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">//创建vm</span><br><span class="line">new Vue(&#123;</span><br><span class="line">el:&#x27;#app&#x27;,</span><br><span class="line">render: h =&gt; h(App),</span><br><span class="line">store</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h4 id="4-基本使用"><a href="#4-基本使用" class="headerlink" title="4.基本使用"></a>4.基本使用</h4><ol><li><p>初始化数据、配置<code>actions</code>、配置<code>mutations</code>，操作文件<code>store.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">//引入Vue核心库</span><br><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">//引入Vuex</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">//引用Vuex</span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">const actions = &#123;</span><br><span class="line">    //响应组件中加的动作</span><br><span class="line">jia(context,value)&#123;</span><br><span class="line">// console.log(&#x27;actions中的jia被调用了&#x27;,miniStore,value)</span><br><span class="line">context.commit(&#x27;JIA&#x27;,value)</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const mutations = &#123;</span><br><span class="line">    //执行加</span><br><span class="line">JIA(state,value)&#123;</span><br><span class="line">// console.log(&#x27;mutations中的JIA被调用了&#x27;,state,value)</span><br><span class="line">state.sum += value</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//初始化数据</span><br><span class="line">const state = &#123;</span><br><span class="line">   sum:0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//创建并暴露store</span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">actions,</span><br><span class="line">mutations,</span><br><span class="line">state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中读取vuex中的数据：<code>$store.state.sum</code></p></li><li><p>组件中修改vuex中的数据：<code>$store.dispatch(&#39;action中的方法名&#39;,数据)</code> 或 <code>$store.commit(&#39;mutations中的方法名&#39;,数据)</code></p><blockquote><p>备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写<code>dispatch</code>，直接编写<code>commit</code></p></blockquote></li></ol><h4 id="5-getters的使用"><a href="#5-getters的使用" class="headerlink" title="5.getters的使用"></a>5.getters的使用</h4><ol><li><p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。</p></li><li><p>在<code>store.js</code>中追加<code>getters</code>配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">const getters = &#123;</span><br><span class="line">bigSum(state)&#123;</span><br><span class="line">return state.sum * 10</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//创建并暴露store</span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">......</span><br><span class="line">getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中读取数据：<code>$store.getters.bigSum</code></p></li></ol><h4 id="6-四个map方法的使用"><a href="#6-四个map方法的使用" class="headerlink" title="6.四个map方法的使用"></a>6.四个map方法的使用</h4><ol><li><p><strong>mapState方法：</strong>用于帮助我们映射<code>state</code>中的数据为计算属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">    //借助mapState生成计算属性：sum、school、subject（对象写法）</span><br><span class="line">     ...mapState(&#123;sum:&#x27;sum&#x27;,school:&#x27;school&#x27;,subject:&#x27;subject&#x27;&#125;),</span><br><span class="line">         </span><br><span class="line">    //借助mapState生成计算属性：sum、school、subject（数组写法）</span><br><span class="line">    ...mapState([&#x27;sum&#x27;,&#x27;school&#x27;,&#x27;subject&#x27;]),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p><strong>mapGetters方法：</strong>用于帮助我们映射<code>getters</code>中的数据为计算属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">    //借助mapGetters生成计算属性：bigSum（对象写法）</span><br><span class="line">    ...mapGetters(&#123;bigSum:&#x27;bigSum&#x27;&#125;),</span><br><span class="line"></span><br><span class="line">    //借助mapGetters生成计算属性：bigSum（数组写法）</span><br><span class="line">    ...mapGetters([&#x27;bigSum&#x27;])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p><strong>mapActions方法：</strong>用于帮助我们生成与<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>的函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">    //靠mapActions生成：incrementOdd、incrementWait（对象形式）</span><br><span class="line">    ...mapActions(&#123;incrementOdd:&#x27;jiaOdd&#x27;,incrementWait:&#x27;jiaWait&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">    //靠mapActions生成：incrementOdd、incrementWait（数组形式）</span><br><span class="line">    ...mapActions([&#x27;jiaOdd&#x27;,&#x27;jiaWait&#x27;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>mapMutations方法：</strong>用于帮助我们生成与<code>mutations</code>对话的方法，即：包含<code>$store.commit(xxx)</code>的函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">    //靠mapActions生成：increment、decrement（对象形式）</span><br><span class="line">    ...mapMutations(&#123;increment:&#x27;JIA&#x27;,decrement:&#x27;JIAN&#x27;&#125;),</span><br><span class="line">    </span><br><span class="line">    //靠mapMutations生成：JIA、JIAN（对象形式）</span><br><span class="line">    ...mapMutations([&#x27;JIA&#x27;,&#x27;JIAN&#x27;]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>备注：mapActions与mapMutations使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。</p></blockquote><h4 id="7-模块化-命名空间"><a href="#7-模块化-命名空间" class="headerlink" title="7.模块化+命名空间"></a>7.模块化+命名空间</h4><ol><li><p>目的：让代码更好维护，让多种数据分类更加明确。</p></li><li><p>修改<code>store.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line"></span><br><span class="line">const countAbout = &#123;</span><br><span class="line">  namespaced:true,//开启命名空间</span><br><span class="line">  state:&#123;x:1&#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    bigSum(state)&#123;</span><br><span class="line">       return state.sum * 10</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const personAbout = &#123;</span><br><span class="line">  namespaced:true,//开启命名空间</span><br><span class="line">  state:&#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    countAbout,</span><br><span class="line">    personAbout</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>开启命名空间后，组件中读取state数据：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line">//方式一：自己直接读取</span><br><span class="line">this.$store.state.personAbout.list</span><br><span class="line">//方式二：借助mapState读取：</span><br><span class="line">...mapState(&#x27;countAbout&#x27;,[&#x27;sum&#x27;,&#x27;school&#x27;,&#x27;subject&#x27;]),</span><br></pre></td></tr></table></figure></li><li><p>开启命名空间后，组件中读取getters数据：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line">//方式一：自己直接读取</span><br><span class="line">this.$store.getters[&#x27;personAbout/firstPersonName&#x27;]</span><br><span class="line">//方式二：借助mapGetters读取：</span><br><span class="line">...mapGetters(&#x27;countAbout&#x27;,[&#x27;bigSum&#x27;])</span><br></pre></td></tr></table></figure></li><li><p>开启命名空间后，组件中调用dispatch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line">//方式一：自己直接dispatch</span><br><span class="line">this.$store.dispatch(&#x27;personAbout/addPersonWang&#x27;,person)</span><br><span class="line">//方式二：借助mapActions：</span><br><span class="line">...mapActions(&#x27;countAbout&#x27;,&#123;incrementOdd:&#x27;jiaOdd&#x27;,incrementWait:&#x27;jiaWait&#x27;&#125;)</span><br></pre></td></tr></table></figure></li><li><p>开启命名空间后，组件中调用commit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line">//方式一：自己直接commit</span><br><span class="line">this.$store.commit(&#x27;personAbout/ADD_PERSON&#x27;,person)</span><br><span class="line">//方式二：借助mapMutations：</span><br><span class="line">...mapMutations(&#x27;countAbout&#x27;,&#123;increment:&#x27;JIA&#x27;,decrement:&#x27;JIAN&#x27;&#125;),</span><br></pre></td></tr></table></figure><h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3></li><li><p>理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。</p></li><li><p>前端路由：key是路径，value是组件。</p></li></ol><h4 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h4><ol><li><p>安装vue-router，命令：<code>npm i vue-router</code></p></li><li><p>应用插件：<code>Vue.use(VueRouter)</code></p></li><li><p>编写router配置项:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">//引入VueRouter</span><br><span class="line">import VueRouter from &#x27;vue-router&#x27;</span><br><span class="line">//引入Luyou 组件</span><br><span class="line">import About from &#x27;../components/About&#x27;</span><br><span class="line">import Home from &#x27;../components/Home&#x27;</span><br><span class="line"></span><br><span class="line">//创建router实例对象，去管理一组一组的路由规则</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">routes:[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/about&#x27;,</span><br><span class="line">component:About</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/home&#x27;,</span><br><span class="line">component:Home</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//暴露router</span><br><span class="line">export default router</span><br></pre></td></tr></table></figure></li><li><p>实现切换（active-class可配置高亮样式）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>指定展示位置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure></li></ol><h4 id="2-几个注意点"><a href="#2-几个注意点" class="headerlink" title="2.几个注意点"></a>2.几个注意点</h4><ol><li>路由组件通常存放在<code>pages</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</li><li>通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。</li><li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息。</li><li>整个应用只有一个router，可以通过组件的<code>$router</code>属性获取到。</li></ol><h4 id="3-多级路由（多级路由）"><a href="#3-多级路由（多级路由）" class="headerlink" title="3.多级路由（多级路由）"></a>3.多级路由（多级路由）</h4><ol><li><p>配置路由规则，使用children配置项：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">routes:[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/about&#x27;,</span><br><span class="line">component:About,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/home&#x27;,</span><br><span class="line">component:Home,</span><br><span class="line">children:[ //通过children配置子级路由</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;news&#x27;, //此处一定不要写：/news</span><br><span class="line">component:News</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;message&#x27;,//此处一定不要写：/message</span><br><span class="line">component:Message</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>跳转（要写完整路径）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">&lt;router-link to=&quot;/home/news&quot;&gt;News&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li></ol><h4 id="4-路由的query参数"><a href="#4-路由的query参数" class="headerlink" title="4.路由的query参数"></a>4.路由的query参数</h4><ol><li><p>传递参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带query参数，to的字符串写法 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;/home/message/detail?id=666&amp;title=你好&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带query参数，to的对象写法 --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">:to=&quot;&#123;</span><br><span class="line">path:&#x27;/home/message/detail&#x27;,</span><br><span class="line">query:&#123;</span><br><span class="line">   id:666,</span><br><span class="line">            title:&#x27;你好&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;&quot;</span><br><span class="line">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>接收参数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line">$route.query.id</span><br><span class="line">$route.query.title</span><br></pre></td></tr></table></figure></li></ol><h4 id="5-命名路由"><a href="#5-命名路由" class="headerlink" title="5.命名路由"></a>5.命名路由</h4><ol><li><p>作用：可以简化路由的跳转。</p></li><li><p>如何使用</p><ol><li><p>给路由命名：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/demo&#x27;,</span><br><span class="line">component:Demo,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;test&#x27;,</span><br><span class="line">component:Test,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">                      name:&#x27;hello&#x27; //给路由命名</span><br><span class="line">path:&#x27;welcome&#x27;,</span><br><span class="line">component:Hello,</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>简化跳转：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">&lt;!--简化前，需要写完整的路径 --&gt;</span><br><span class="line">&lt;router-link to=&quot;/demo/test/welcome&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--简化后，直接通过名字跳转 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;hello&#x27;&#125;&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--简化写法配合传递参数 --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">:to=&quot;&#123;</span><br><span class="line">name:&#x27;hello&#x27;,</span><br><span class="line">query:&#123;</span><br><span class="line">   id:666,</span><br><span class="line">            title:&#x27;你好&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;&quot;</span><br><span class="line">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h4 id="6-路由的params参数"><a href="#6-路由的params参数" class="headerlink" title="6.路由的params参数"></a>6.路由的params参数</h4><ol><li><p>配置路由，声明接收params参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/home&#x27;,</span><br><span class="line">component:Home,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;news&#x27;,</span><br><span class="line">component:News</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">component:Message,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;xiangqing&#x27;,</span><br><span class="line">path:&#x27;detail/:id/:title&#x27;, //使用占位符声明接收params参数</span><br><span class="line">component:Detail</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>传递参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带params参数，to的字符串写法 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;/home/message/detail/666/你好&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带params参数，to的对象写法 --&gt;</span><br><span class="line">&lt;router-link </span><br><span class="line">:to=&quot;&#123;</span><br><span class="line">name:&#x27;xiangqing&#x27;,</span><br><span class="line">params:&#123;</span><br><span class="line">   id:666,</span><br><span class="line">            title:&#x27;你好&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;&quot;</span><br><span class="line">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><blockquote><p>特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！</p></blockquote></li><li><p>接收参数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line">$route.params.id</span><br><span class="line">$route.params.title</span><br></pre></td></tr></table></figure></li></ol><h4 id="7-路由的props配置"><a href="#7-路由的props配置" class="headerlink" title="7.路由的props配置"></a>7.路由的props配置</h4><p> 作用：让路由组件更方便的收到参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;xiangqing&#x27;,</span><br><span class="line">path:&#x27;detail/:id&#x27;,</span><br><span class="line">component:Detail,</span><br><span class="line"></span><br><span class="line">//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件</span><br><span class="line">// props:&#123;a:900&#125;</span><br><span class="line"></span><br><span class="line">//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件</span><br><span class="line">// props:true</span><br><span class="line"></span><br><span class="line">//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件</span><br><span class="line">props(route)&#123;</span><br><span class="line">return &#123;</span><br><span class="line">id:route.query.id,</span><br><span class="line">title:route.query.title</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="8-lt-router-link-gt-的replace属性"><a href="#8-lt-router-link-gt-的replace属性" class="headerlink" title="8.&lt;router-link&gt;的replace属性"></a>8.<code>&lt;router-link&gt;</code>的replace属性</h4><ol><li>作用：控制路由跳转时操作浏览器历史记录的模式</li><li>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>，<code>push</code>是追加历史记录，<code>replace</code>是替换当前记录。路由跳转时候默认为<code>push</code></li><li>如何开启<code>replace</code>模式：<code>&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li></ol><h4 id="9-编程式路由导航"><a href="#9-编程式路由导航" class="headerlink" title="9.编程式路由导航"></a>9.编程式路由导航</h4><ol><li><p>作用：不借助<code>&lt;router-link&gt;</code>实现路由跳转，让路由跳转更加灵活</p></li><li><p>具体编码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">//$router的两个API</span><br><span class="line">this.$router.push(&#123;</span><br><span class="line">name:&#x27;xiangqing&#x27;,</span><br><span class="line">params:&#123;</span><br><span class="line">id:xxx,</span><br><span class="line">title:xxx</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">this.$router.replace(&#123;</span><br><span class="line">name:&#x27;xiangqing&#x27;,</span><br><span class="line">params:&#123;</span><br><span class="line">id:xxx,</span><br><span class="line">title:xxx</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">this.$router.forward() //前进</span><br><span class="line">this.$router.back() //后退</span><br><span class="line">this.$router.go() //可前进也可后退</span><br></pre></td></tr></table></figure></li></ol><h4 id="10-缓存路由组件"><a href="#10-缓存路由组件" class="headerlink" title="10.缓存路由组件"></a>10.缓存路由组件</h4><ol><li><p>作用：让不展示的路由组件保持挂载，不被销毁。</p></li><li><p>具体编码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">&lt;keep-alive include=&quot;News&quot;&gt; </span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure></li></ol><h4 id="11-两个新的生命周期钩子"><a href="#11-两个新的生命周期钩子" class="headerlink" title="11.两个新的生命周期钩子"></a>11.两个新的生命周期钩子</h4><ol><li>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。</li><li>具体名字：<ol><li><code>activated</code>路由组件被激活时触发。</li><li><code>deactivated</code>路由组件失活时触发。</li></ol></li></ol><h4 id="12-路由守卫"><a href="#12-路由守卫" class="headerlink" title="12.路由守卫"></a>12.路由守卫</h4><ol><li><p>作用：对路由进行权限控制</p></li><li><p>分类：全局守卫、独享守卫、组件内守卫</p></li><li><p>全局守卫:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">//全局前置守卫：初始化时执行、每次路由切换前执行</span><br><span class="line">router.beforeEach((to,from,next)=&gt;&#123;</span><br><span class="line">console.log(&#x27;beforeEach&#x27;,to,from)</span><br><span class="line">if(to.meta.isAuth)&#123; //判断当前路由是否需要进行权限控制</span><br><span class="line">if(localStorage.getItem(&#x27;school&#x27;) === &#x27;atguigu&#x27;)&#123; //权限控制的具体规则</span><br><span class="line">next() //放行</span><br><span class="line">&#125;else&#123;</span><br><span class="line">alert(&#x27;暂无权限查看&#x27;)</span><br><span class="line">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">next() //放行</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//全局后置守卫：初始化时执行、每次路由切换后执行</span><br><span class="line">router.afterEach((to,from)=&gt;&#123;</span><br><span class="line">console.log(&#x27;afterEach&#x27;,to,from)</span><br><span class="line">if(to.meta.title)&#123; </span><br><span class="line">document.title = to.meta.title //修改网页的title</span><br><span class="line">&#125;else&#123;</span><br><span class="line">document.title = &#x27;vue_test&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>独享守卫:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">beforeEnter(to,from,next)&#123;</span><br><span class="line">console.log(&#x27;beforeEnter&#x27;,to,from)</span><br><span class="line">if(to.meta.isAuth)&#123; //判断当前路由是否需要进行权限控制</span><br><span class="line">if(localStorage.getItem(&#x27;school&#x27;) === &#x27;atguigu&#x27;)&#123;</span><br><span class="line">next()</span><br><span class="line">&#125;else&#123;</span><br><span class="line">alert(&#x27;暂无权限查看&#x27;)</span><br><span class="line">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">next()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>组件内守卫：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">JS</span><br><span class="line"></span><br><span class="line">//进入守卫：通过路由规则，进入该组件时被调用</span><br><span class="line">beforeRouteEnter (to, from, next) &#123;</span><br><span class="line">&#125;,</span><br><span class="line">//离开守卫：通过路由规则，离开该组件时被调用</span><br><span class="line">beforeRouteLeave (to, from, next) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="13-路由器的两种工作模式"><a href="#13-路由器的两种工作模式" class="headerlink" title="13.路由器的两种工作模式"></a>13.路由器的两种工作模式</h4><ol><li>对于一个url来说，什么是hash值？—— #及其后面的内容就是hash值。</li><li>hash值不会包含在 HTTP 请求中，即：hash值不会带给服务器。</li><li>hash模式：<ol><li>地址中永远带着#号，不美观 。</li><li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法。</li><li>兼容性较好。</li></ol></li><li>history模式：<ol><li>地址干净，美观 。</li><li>兼容性和hash模式相比略差。</li><li>应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题。</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习路线</title>
      <link href="/2023/09/06/%E5%89%8D%E7%AB%AF-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"/>
      <url>/2023/09/06/%E5%89%8D%E7%AB%AF-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="前端学习路线"><a href="#前端学习路线" class="headerlink" title="前端学习路线"></a>前端学习路线</h1><blockquote><p>这份学习路线并不完美，也不会有最终形态，正如前端不可预见、永无止境的未来。</p></blockquote><p>💂 + 💻 = 👴🏽</p><p>建议先观看视频导读：<a href="https://www.bilibili.com/video/BV1nh411e7oG/">https://www.bilibili.com/video/BV1nh411e7oG/</a></p><h2 id="路线特点"><a href="#路线特点" class="headerlink" title="路线特点"></a>路线特点</h2><ol><li>一份全面的前端知识点大梳理和汇总</li><li>分阶段学习，每个阶段给出学习目标</li><li>使用符号对知识点的重要程度做了区分，按需学习</li><li>知识点附有描述和资源链接</li><li>提供一份清晰的个人顺序学习路线方法</li><li>提供大量优质学习资源</li></ol><h2 id="符号表"><a href="#符号表" class="headerlink" title="符号表"></a>符号表</h2><p>可根据知识点前的符号按需选学，并获取知识点描述和学习资源。</p><ul><li>⭐️ 必学（追求速成）</li><li>✅ 建议学（重要知识）</li><li>❗ 面试重点</li><li>❌ 一般没必要学习</li><li>💬 描述</li><li>📚 资源</li><li>🎯 目标</li></ul><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><ol><li>前言 - 学编程需要的特质</li><li>前端学习七阶段<ol><li>前端入门</li><li>巩固基础</li><li>前端工程化</li><li>前端优化</li><li>前端生态</li><li>前端求职</li><li>前端未来</li></ol></li><li>我的前端学习路线</li><li>尾声 - 持续学习</li></ol><h2 id="前言-学编程需要的特质"><a href="#前言-学编程需要的特质" class="headerlink" title="前言 - 学编程需要的特质"></a>前言 - 学编程需要的特质</h2><p>相信自己有能力，那么你就真的会有！</p><ul><li>兴趣</li><li>坚持</li><li>付出</li><li>心态</li></ul><h2 id="一、前端入门"><a href="#一、前端入门" class="headerlink" title="一、前端入门"></a>一、前端入门</h2><ul><li>💬 描述：学习前端基础三件套，建议从实战开始，边学边练，培养兴趣，快速入门。</li><li>📚 资源<ul><li>freeCodecamp 在线编程：<a href="https://learn.freecodecamp.one/">https://learn.freecodecamp.one/</a></li><li>阿里云前端实战学习：<a href="https://edu.aliyun.com/roadmap/frontend">https://edu.aliyun.com/roadmap/frontend</a></li><li>W3Cschool 编程入门实战：<a href="https://www.w3cschool.cn/codecamp/">https://www.w3cschool.cn/codecamp/</a></li><li>pink 老师前端入门教程：<a href="https://www.bilibili.com/video/BV14J4114768">https://www.bilibili.com/video/BV14J4114768</a></li></ul></li><li>🎯 目标：了解和实践各语言的基础语法，并能使用开发工具来独立开发一个留言板网站。</li></ul><h3 id="⭐️-开发工具"><a href="#⭐️-开发工具" class="headerlink" title="⭐️ 开发工具"></a>⭐️ 开发工具</h3><ul><li>💬 描述：工欲善其事，必先利其器。</li></ul><h4 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h4><ul><li>⭐️ Chrome</li><li>✅ Edge</li><li>✅ Firefox</li><li>❌ Opera</li><li>Safari</li></ul><h4 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h4><ul><li>⭐️ VSCode</li><li>✅ WebStorm</li><li>Atom</li><li>⭐️ Sublime Text</li><li>HBuilder X</li><li>记事本</li><li>在线 IDE</li></ul><h4 id="文档笔记"><a href="#文档笔记" class="headerlink" title="文档笔记"></a>文档笔记</h4><ul><li>✅ Markdown 语法</li><li>✅ Typora</li><li>在线笔记<ul><li>语雀</li><li>腾讯文档</li><li>石墨文档</li><li>印象笔记</li></ul></li><li>Mdnice</li></ul><h3 id="⭐️-HTML"><a href="#⭐️-HTML" class="headerlink" title="⭐️ HTML"></a>⭐️ HTML</h3><ul><li>💬 描述：用于定义一个网页结构的基本技术。</li><li>📚 资源：<a href="https://developer.mozilla.org/zh-CN/docs/Learn/HTML">https://developer.mozilla.org/zh-CN/docs/Learn/HTML</a></li><li>⭐️ 基本语法</li><li>⭐️ 标签<ul><li>分区 div</li><li>标题 h1 ~ h6</li><li>段落 p</li><li>图像 img</li><li>列表 ul /ol</li><li>超链接 a</li><li>表单 form</li><li>表格 table</li><li>框架 iframe</li></ul></li><li>⭐️ 属性</li><li>✅ HTML5 特性<ul><li>语义化标签</li><li>浏览器支持</li><li>多媒体标签</li><li>Canvas 画布</li><li>❌ 内联 SVG</li><li>本地存储<ul><li>localStorage</li><li>sessionStorage</li><li>❌ Web SQL</li></ul></li><li>Web Workers</li><li>应用缓存（Cache Manifest）</li><li>无障碍</li></ul></li></ul><h3 id="⭐️-CSS"><a href="#⭐️-CSS" class="headerlink" title="⭐️ CSS"></a>⭐️ CSS</h3><ul><li>💬 描述：层叠样式表，用于设计风格和布局。</li><li>📚 资源：<a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS">https://developer.mozilla.org/zh-CN/docs/Learn/CSS</a></li><li>⭐️ 基本语法</li><li>⭐️ 引入方式<ul><li>行内样式</li><li>内部样式表</li><li>外部样式表</li></ul></li><li>⭐️ 选择器<ul><li>通用选择器</li><li>标签选择器</li><li>id 选择器</li><li>class 选择器</li><li>属性选择器</li><li>派生选择器<ul><li>后代选择器</li><li>子元素选择器</li><li>相邻兄弟选择器</li></ul></li><li>组合选择器</li><li>伪选择器</li><li>选择器优先级</li></ul></li><li>⭐️ 属性<ul><li>单位<ul><li>px</li><li>em</li><li>rem</li><li>vw</li><li>vh</li></ul></li><li>背景</li><li>文本</li><li>字体</li><li>列表</li><li>表格</li></ul></li><li>⭐️ 文档流<ul><li>标准流</li><li>浮动流</li><li>定位流</li></ul></li><li>⭐️ 内联元素 / 块状元素</li><li>⭐️ 盒子模型<ul><li>content</li><li>padding</li><li>border</li><li>margin</li></ul></li><li>⭐️ 浮动<ul><li>设置浮动 float</li><li>清除浮动 clear</li></ul></li><li>⭐️ 定位<ul><li>static</li><li>absolute</li><li>fixed</li><li>relative</li><li>sticky</li></ul></li><li>⭐️ 层叠规则</li><li>❗ BFC 和 IFC 机制</li><li>CSS3<ul><li>⭐️ 响应式布局<ul><li>媒体查询</li><li>Flex 布局</li><li>Grid 布局</li><li>瀑布流</li></ul></li><li>动画</li><li>过渡</li><li>渐变</li><li>背景</li><li>边框</li><li>圆角</li><li>字体</li><li>2D / 3D 转换</li></ul></li></ul><h3 id="⭐️-JavaScript"><a href="#⭐️-JavaScript" class="headerlink" title="⭐️ JavaScript"></a>⭐️ JavaScript</h3><ul><li>💬 描述：具有函数优先的轻量级，解释型或即时编译型的编程语言。</li><li>📚 资源：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript</a></li><li>⭐️ 基本语法</li><li>⭐️ 数据类型<ul><li>值类型<ul><li>字符串 String</li><li>数组 Number</li><li>布尔 Boolean</li><li>空值 Null</li><li>未定义 Undefined</li><li>Symbol</li></ul></li><li>引用类型<ul><li>对象 Object</li><li>数组 Array</li><li>函数 Function</li></ul></li></ul></li><li>✅ 数据类型转换</li><li>✅ 函数<ul><li>⭐️ 概念</li><li>⭐️ 自定义函数</li><li>调用方式<ul><li>⭐️ 全局调用</li><li>构造函数调用</li><li>⭐️ 函数方法调用</li><li>apply</li><li>call</li></ul></li><li>✅❗ 闭包</li></ul></li><li>✅ 对象<ul><li>概念</li><li>this</li><li>原型链和继承</li><li>常用对象<ul><li>数字 Number</li><li>字符串 String 对象</li><li>日期 Date 对象</li><li>数组 Array</li><li>布尔 Boolean</li><li>算数 Math</li></ul></li><li>自定义对象</li></ul></li><li>✅❗ 作用域（作用域链）</li><li>✅ BOM API</li><li>⭐️ DOM API</li><li>⭐️ JSON</li><li>⭐️ Ajax</li><li>✅ JavaScript 执行机制</li></ul><h4 id="✅-ES6-特性"><a href="#✅-ES6-特性" class="headerlink" title="✅ ES6+ 特性"></a>✅ ES6+ 特性</h4><ul><li>💬 描述：新引入的 JavaScript 语法特性。</li><li>📚 资源：ES6 入门教程 <a href="https://es6.ruanyifeng.com/">https://es6.ruanyifeng.com/</a></li><li>let 和 const</li><li>变量解构赋值</li><li>对象扩展和新增方法</li><li>Symbol</li><li>Set 和 Map 数据结构</li><li>⭐️❗ Promise &amp; async /await 异步编程</li><li>Generator 函数异步编程</li></ul><h2 id="二、巩固基础"><a href="#二、巩固基础" class="headerlink" title="二、巩固基础"></a>二、巩固基础</h2><ul><li>💬 描述：学习前端、计算机、软件开发相关基础知识，并复习巩固上阶段学到的前端三件套。</li><li>📚 资源<ul><li>《JavaScript 高级程序设计》：<a href="https://www.code-nav.cn/rd/?rid=28ee4e3e606b1e1a0e3cfd8952d172cf">https://www.code-nav.cn/rd/?rid=28ee4e3e606b1e1a0e3cfd8952d172cf</a></li><li>《JavaScript 忍者秘籍》：<a href="https://www.code-nav.cn/rd/?rid=28ee4e3e606b16c00e3c5b18609e3dc2">https://www.code-nav.cn/rd/?rid=28ee4e3e606b16c00e3c5b18609e3dc2</a></li></ul></li><li>🎯 目标：熟悉前端三件套语法，尤其是 JavaScript，并了解互联网、域名、浏览器、服务器等，扎实前端程序员的基本功，为下面进入实战开发做准备。</li></ul><h3 id="前端基础知识"><a href="#前端基础知识" class="headerlink" title="前端基础知识"></a>前端基础知识</h3><ul><li>✅ 互联网</li><li>⭐️ 域名</li><li>⭐️ DNS</li><li>⭐️ 服务器</li><li>✅ 浏览器<ul><li>浏览器 DOM 事件流 / 事件委托</li><li>⭐️ 浏览器加载顺序</li><li>⭐️ 浏览器渲染过程</li><li>浏览器事件循环</li><li>浏览器同源策略</li><li>❗ 跨域解决方案</li><li>浏览器缓存</li><li>控制台调试技巧</li></ul></li><li>✅ HTTP<ul><li>❗ HTTP 请求过程</li><li>常见 HTTP 协议<ul><li>HTTP 1.0</li><li>⭐️ HTTP 1.1</li><li>HTTP 2</li><li>HTTP 3</li></ul></li><li>⭐️ HTTP 请求类别</li><li>⭐️ 常见状态码<ul><li>1xx 信息</li><li>2xx 成功</li><li>3xx 重定向</li><li>4xx 客户端错误</li><li>5xx 服务器错误</li></ul></li><li>WebSocket</li><li>⭐️ Cookie</li><li>Session</li><li>⭐️ HTTPS</li></ul></li></ul><h3 id="计算机基础"><a href="#计算机基础" class="headerlink" title="计算机基础"></a>计算机基础</h3><h4 id="✅-算法和数据结构"><a href="#✅-算法和数据结构" class="headerlink" title="✅ 算法和数据结构"></a>✅ 算法和数据结构</h4><ul><li>⭐️ 时间 / 空间复杂度分析</li><li>数据结构<ul><li>数组</li><li>字符串</li><li>队列</li><li>栈</li><li>链表</li><li>集合</li><li>哈希表</li><li>二叉树</li></ul></li><li>算法<ul><li>排序</li><li>双指针</li><li>查找</li><li>分治</li><li>动态规划</li><li>递归</li><li>回溯</li><li>贪心</li><li>位运算</li><li>DFS</li><li>BFS</li><li>图</li></ul></li></ul><h4 id="✅-计算机网络"><a href="#✅-计算机网络" class="headerlink" title="✅ 计算机网络"></a>✅ 计算机网络</h4><ul><li>HTTP 协议</li><li>网络模型</li><li>UDP / TCP 协议</li></ul><h4 id="✅-操作系统"><a href="#✅-操作系统" class="headerlink" title="✅ 操作系统"></a>✅ 操作系统</h4><ul><li>进程、线程</li><li>进程 / 线程间通讯方式</li><li>进程调度算法</li><li>进程 / 线程状态</li><li>死锁</li><li>内存管理</li></ul><h3 id="软件开发基础"><a href="#软件开发基础" class="headerlink" title="软件开发基础"></a>软件开发基础</h3><h4 id="✅-设计模式"><a href="#✅-设计模式" class="headerlink" title="✅ 设计模式"></a>✅ 设计模式</h4><ul><li>单例模式</li><li>代理模式</li><li>工厂模式</li><li>装饰者模式</li><li>观察者模式</li><li>策略模式</li><li>门面模式</li></ul><h4 id="⭐️-Git-版本控制"><a href="#⭐️-Git-版本控制" class="headerlink" title="⭐️ Git 版本控制"></a>⭐️ Git 版本控制</h4><ul><li>常用命令</li></ul><h4 id="✅-Linux-服务器"><a href="#✅-Linux-服务器" class="headerlink" title="✅ Linux 服务器"></a>✅ Linux 服务器</h4><ul><li>常用命令</li></ul><h4 id="✅-正则表达式"><a href="#✅-正则表达式" class="headerlink" title="✅ 正则表达式"></a>✅ 正则表达式</h4><h2 id="三、前端工程化"><a href="#三、前端工程化" class="headerlink" title="三、前端工程化"></a>三、前端工程化</h2><ul><li>💬 描述：前端工程化是使用软件工程的技术和方法来进行前端的开发流程、技术、工具、经验等规范化、标准化，其主要目的为了提高开发过程中的开发效率，减少不必要的重复工作时间。</li><li>📚 资源<ul><li>什么是前端工程化？<a href="https://www.zhihu.com/question/433854153/answer/1713597311">https://www.zhihu.com/question/433854153/answer/1713597311</a></li></ul></li><li>🎯 目标：至少学会一门主流的前端开发框架（Vue / React），并配合脚手架、组件库、工具等从 0 开始独立搭建并开发一个完整的前端网站，可以试着仿一些知名站点。要求遵循企业开发规范，将项目代码提交到代码仓库中，并独立发布上线，供他人访问。此外，建议抓住机会参与一些团队项目，感受团队开发模式和前端工程化的优势。</li></ul><h3 id="⭐️-研发流程"><a href="#⭐️-研发流程" class="headerlink" title="⭐️ 研发流程"></a>⭐️ 研发流程</h3><ol><li>技术选型</li><li>初始化</li><li>开发</li><li>本地测试</li><li>代码提交</li><li>编译、打包、构建</li><li>部署</li><li>集成测试</li><li>发布上线</li><li>监控运维</li></ol><h3 id="⭐️-代码托管"><a href="#⭐️-代码托管" class="headerlink" title="⭐️ 代码托管"></a>⭐️ 代码托管</h3><ul><li>💬 描述：集中存储、备份你的代码，还能和团队成员协作开发。</li><li>⭐️ GitHub</li><li>Gitee</li><li>GitLab</li></ul><h3 id="✅-Node-JS"><a href="#✅-Node-JS" class="headerlink" title="✅ Node.JS"></a>✅ Node.JS</h3><ul><li>💬 描述：一个开源与跨平台的 JavaScript 运行时环境。 它是一个可用于几乎任何项目的流行工具！</li><li>📚 资源<ul><li>Node.js 官方教程：<a href="http://nodejs.cn/learn">http://nodejs.cn/learn</a></li><li>Node.js 入门：<a href="https://cnodejs.org/getstart">https://cnodejs.org/getstart</a></li></ul></li></ul><h4 id="⭐️-包管理"><a href="#⭐️-包管理" class="headerlink" title="⭐️ 包管理"></a>⭐️ 包管理</h4><ul><li>💬 描述：用于安装 Node.js 的扩展、工具等。</li><li>⭐️ npm</li><li>⭐️ yarn</li><li>❌ bower</li><li>✅ npx</li></ul><h4 id="开发框架"><a href="#开发框架" class="headerlink" title="开发框架"></a>开发框架</h4><ul><li>Express</li><li>Koa</li><li>Egg</li></ul><h3 id="开发框架-1"><a href="#开发框架-1" class="headerlink" title="开发框架"></a>开发框架</h3><ul><li>💬 描述：解决特定的问题，提高<em>开发</em>效率、简化我们的代码复杂度。</li></ul><h4 id="⭐️-CSS-框架"><a href="#⭐️-CSS-框架" class="headerlink" title="⭐️ CSS 框架"></a>⭐️ CSS 框架</h4><ul><li>✅ BootStrap</li><li>⭐️ Tailwind CSS</li></ul><h4 id="⭐️-JavaScript-框架"><a href="#⭐️-JavaScript-框架" class="headerlink" title="⭐️ JavaScript 框架"></a>⭐️ JavaScript 框架</h4><h5 id="⭐️-Vue"><a href="#⭐️-Vue" class="headerlink" title="⭐️ Vue"></a>⭐️ Vue</h5><ul><li>Vue Router</li><li>Vuex</li></ul><h5 id="⭐️-React"><a href="#⭐️-React" class="headerlink" title="⭐️ React"></a>⭐️ React</h5><ul><li>React DOM</li><li>React Router</li><li>Redux</li><li>MobX</li><li>React Hooks</li></ul><h5 id="❌-Angular"><a href="#❌-Angular" class="headerlink" title="❌ Angular"></a>❌ Angular</h5><ul><li>RxJS</li><li>NgRx</li></ul><h5 id="✅-Svelte"><a href="#✅-Svelte" class="headerlink" title="✅ Svelte"></a>✅ Svelte</h5><h5 id="✅-UmiJS"><a href="#✅-UmiJS" class="headerlink" title="✅ UmiJS"></a>✅ UmiJS</h5><h3 id="封装库"><a href="#封装库" class="headerlink" title="封装库"></a>封装库</h3><h4 id="⭐️-组件库"><a href="#⭐️-组件库" class="headerlink" title="⭐️ 组件库"></a>⭐️ 组件库</h4><ul><li>✅ LayUI</li><li>⭐️ ElementUI（Vue）</li><li>✅ VantUI（Vue）</li><li>⭐️ Ant Design（React）</li><li>Material UI</li></ul><h4 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h4><ul><li>✅ AntV</li><li>Apache ECharts</li><li>HighCharts</li><li>D3.js</li></ul><h4 id="组件（插件）"><a href="#组件（插件）" class="headerlink" title="组件（插件）"></a>组件（插件）</h4><ul><li>富文本编辑器</li><li>弹窗</li><li>轮播图</li></ul><h4 id="工具库"><a href="#工具库" class="headerlink" title="工具库"></a>工具库</h4><ul><li>✅ jQuery</li><li>✅ Lodash</li><li>✅ Axios</li><li>时间处理 Moment.js</li></ul><h4 id="动效库"><a href="#动效库" class="headerlink" title="动效库"></a>动效库</h4><ul><li>✅ Animate.css</li><li>Ant Motion</li></ul><h4 id="字体图标库"><a href="#字体图标库" class="headerlink" title="字体图标库"></a>字体图标库</h4><ul><li>⭐️ IconFont</li><li>IconPark</li><li>Font Awesome</li></ul><h3 id="⭐️-脚手架"><a href="#⭐️-脚手架" class="headerlink" title="⭐️ 脚手架"></a>⭐️ 脚手架</h3><ul><li>💬 描述：快速生成新项目的目录模板，提升开发效率和开发舒适性。</li><li>📚 资源：<a href="https://www.jianshu.com/p/25ce8cf2e6a7">https://www.jianshu.com/p/25ce8cf2e6a7</a></li><li>Vue CLI</li><li>create-react-app</li><li>✅ Yeoman</li></ul><h3 id="⭐️-前端架构设计"><a href="#⭐️-前端架构设计" class="headerlink" title="⭐️ 前端架构设计"></a>⭐️ 前端架构设计</h3><ul><li>💬 描述：一系列工具和流程的集合，旨在提升前端代码的质量，并实现高效可持续的工作流。</li><li>模块化</li><li>组件化</li><li>✅ MVVM</li><li>设计原则</li><li>⭐️ SPA 单页应用</li><li>⭐️ 多页应用</li><li>✅ 前端路由</li><li>PWA</li><li>有损服务</li></ul><h4 id="✅-服务端渲染"><a href="#✅-服务端渲染" class="headerlink" title="✅ 服务端渲染"></a>✅ 服务端渲染</h4><ul><li>💬 描述：在服务端渲染 HTML 页面的模式。</li><li>📚 资源：<a href="https://www.zhihu.com/question/379563505">https://www.zhihu.com/question/379563505</a></li><li>Next.js（React）</li><li>Nuxt.js（Vue）</li><li>❌ Universal（Angular）</li></ul><h4 id="BFF"><a href="#BFF" class="headerlink" title="BFF"></a>BFF</h4><ul><li>💬 描述：Backend For Frontend（服务于前端的后端），就是服务器设计 API 时会考虑前端的使用，并在服务端直接进行业务逻辑的处理。</li><li>📚 资源：<a href="https://www.jianshu.com/p/eb1875c62ad3">https://www.jianshu.com/p/eb1875c62ad3</a></li><li>GraphQL</li></ul><h4 id="✅-微前端"><a href="#✅-微前端" class="headerlink" title="✅ 微前端"></a>✅ 微前端</h4><ul><li>💬 描述：将前端应用分解成一些更小、更简单的能够独立开发、测试、部署的小块，从而解决庞大的一整块后端服务带来的变更与扩展方面的限制。</li><li>📚 资源：<a href="https://zhuanlan.zhihu.com/p/96464401">https://zhuanlan.zhihu.com/p/96464401</a></li><li>qiankun</li><li>single-spa</li></ul><h3 id="CSS-in-JS"><a href="#CSS-in-JS" class="headerlink" title="CSS in JS"></a>CSS in JS</h3><ul><li>💬 描述：用 JavaScript 来写 CSS。</li><li>📚 资源：<a href="http://www.ruanyifeng.com/blog/2017/04/css_in_js.html">http://www.ruanyifeng.com/blog/2017/04/css_in_js.html</a></li><li>内联样式</li><li>声明样式</li><li>引入样式</li></ul><h4 id="⭐️-CSS-模块化"><a href="#⭐️-CSS-模块化" class="headerlink" title="⭐️ CSS 模块化"></a>⭐️ CSS 模块化</h4><ul><li>⭐️ CSS Modules</li><li>✅ styled-components</li><li>✅ Styled JSX</li><li>Emotion</li></ul><h3 id="✅-开发调试"><a href="#✅-开发调试" class="headerlink" title="✅ 开发调试"></a>✅ 开发调试</h3><ul><li>💬 描述：本地开发时热更新，提升开发效率。</li><li>webpack-dev-server</li><li>serve</li></ul><h4 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h4><ul><li>💬 描述：将内网外网通过 nat 隧道打通，让内网的网站、数据让外网可以访问。</li><li>Ngrok</li><li>NATAPP</li></ul><h3 id="⭐️-CSS-预编译"><a href="#⭐️-CSS-预编译" class="headerlink" title="⭐️ CSS 预编译"></a>⭐️ CSS 预编译</h3><ul><li>💬 描述：使用新的扩展语言以增强 CSS 的能力，并通过预编译的方式将其转换为浏览器认识的 CSS 代码。</li><li>⭐️ SASS</li><li>✅ PostCSS</li><li>Stylus</li><li>❌ LESS</li></ul><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><h4 id="测试分类"><a href="#测试分类" class="headerlink" title="测试分类"></a>测试分类</h4><ul><li>⭐️ UT 单元测试</li><li>SIT 系统集成测试</li><li>E2E 端到端测试</li><li>UAT 用户验收测试</li></ul><h4 id="✅-Mock"><a href="#✅-Mock" class="headerlink" title="✅ Mock"></a>✅ Mock</h4><ul><li>💬 描述：通过随机数据，模拟各种场景，增加单元测试的真实性。</li><li>Mock.js</li></ul><h4 id="✅-测试框架"><a href="#✅-测试框架" class="headerlink" title="✅ 测试框架"></a>✅ 测试框架</h4><ul><li>✅ Jest</li><li>Enzyme</li><li>✅ Puppeteer（Headless Browser）</li><li>Mocha</li><li>Jasmine</li></ul><h3 id="✅-代码质量"><a href="#✅-代码质量" class="headerlink" title="✅ 代码质量"></a>✅ 代码质量</h3><h4 id="开发规范"><a href="#开发规范" class="headerlink" title="开发规范"></a>开发规范</h4><ul><li>💬 描述：依照规范写出的代码会更加合理。</li><li>📚 资源：Airbnb 代码规范 <a href="https://github.com/BingKui/javascript-zh">https://github.com/BingKui/javascript-zh</a></li><li>CSS Style Guide</li><li>JavaScript Style Guide</li></ul><h4 id="类型校验"><a href="#类型校验" class="headerlink" title="类型校验"></a>类型校验</h4><ul><li>TypeScript</li></ul><h4 id="代码检查"><a href="#代码检查" class="headerlink" title="代码检查"></a>代码检查</h4><ul><li>ESLint</li><li>StyleLint</li></ul><h4 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h4><ul><li>💬 描述：根据配置自动格式化代码，统一格式。</li><li>Prettier</li></ul><h4 id="提交规范"><a href="#提交规范" class="headerlink" title="提交规范"></a>提交规范</h4><ul><li>约定式提交</li></ul><h4 id="提交检查"><a href="#提交检查" class="headerlink" title="提交检查"></a>提交检查</h4><ul><li>💬 描述：在提交代码时触发一些操作，比如检查代码的风格等。</li><li>pre-commit</li><li>husky</li></ul><h3 id="构建工具"><a href="#构建工具" class="headerlink" title="构建工具"></a>构建工具</h3><h4 id="自动化构建"><a href="#自动化构建" class="headerlink" title="自动化构建"></a>自动化构建</h4><ul><li>💬 描述：按照配置好的流程自动打包构建项目，提高团队的开发效率，降低项目的维护难度。</li><li>Gulp</li><li>✅ npm script</li><li>Grunt</li></ul><h4 id="打包工具"><a href="#打包工具" class="headerlink" title="打包工具"></a>打包工具</h4><ul><li>💬 描述：将各种零散的📚 资源文件打包为可在浏览器等环境运行的代码。</li><li>⭐️ Webpack</li><li>✅ Rollup</li><li>✅ Vite</li><li>Parcel</li><li>Snowpack</li></ul><h3 id="CI-CD"><a href="#CI-CD" class="headerlink" title="CI / CD"></a>CI / CD</h3><ul><li>💬 描述：通过在应用开发阶段引入自动化来频繁向客户交付应用。</li><li>GitLab CI</li><li>✅ Jenkins</li></ul><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><h4 id="⭐️-Web-服务器"><a href="#⭐️-Web-服务器" class="headerlink" title="⭐️ Web 服务器"></a>⭐️ Web 服务器</h4><h5 id="⭐️-Nginx"><a href="#⭐️-Nginx" class="headerlink" title="⭐️ Nginx"></a>⭐️ Nginx</h5><ul><li>💬 描述：高性能的 HTTP 和反向代理 web 服务器。</li><li>📚 资源：腾讯云动手实验室 <a href="https://cloud.tencent.com/developer/labs/gallery">https://cloud.tencent.com/developer/labs/gallery</a></li><li>反向代理</li><li>解决跨域</li><li>改写请求</li></ul><h5 id="✅-Apache"><a href="#✅-Apache" class="headerlink" title="✅ Apache"></a>✅ Apache</h5><h4 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h4><h5 id="✅-Docker"><a href="#✅-Docker" class="headerlink" title="✅ Docker"></a>✅ Docker</h5><ul><li>💬 描述：容器是一个标准化的软件单元，它将代码及其所有依赖关系打包，以便应用程序从一个计算环境可靠快速地运行到另一个计算环境。Docker 容器镜像是一个轻量的独立的可执行的软件包。包含程序运行的时候所需的一切：代码，运行时间，系统工具，系统库和设置。</li><li>📚 资源：Docker 从入门到实践 <a href="https://vuepress.mirror.docker-practice.com/">https://vuepress.mirror.docker-practice.com/</a></li><li>Dockerfile</li></ul><h5 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes"></a>Kubernetes</h5><h4 id="部署策略"><a href="#部署策略" class="headerlink" title="部署策略"></a>部署策略</h4><ul><li>全量发布</li><li>蓝绿部署</li><li>滚动发布</li><li>灰度发布</li></ul><h3 id="监控告警"><a href="#监控告警" class="headerlink" title="监控告警"></a>监控告警</h3><ul><li>前端埋点</li><li>错误监控</li><li>性能监控</li><li>行为监控</li></ul><h2 id="四、前端优化"><a href="#四、前端优化" class="headerlink" title="四、前端优化"></a>四、前端优化</h2><ul><li>💬 描述：通过分析和优化手段，提高网站的性能和用户体验。</li><li>🎯 目标：实践前端优化方法，从多个方面优化自己做过的项目，最好能将优化后的网站与原网站进行对比，得到一些数据和体验上的明显提升。</li></ul><h3 id="✅-性能优化"><a href="#✅-性能优化" class="headerlink" title="✅ 性能优化"></a>✅ 性能优化</h3><h4 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h4><ul><li>💬 描述：用于衡量一个 Web 页面的性能。</li><li>📚 资源：<a href="https://juejin.cn/post/6844904153869713416">https://juejin.cn/post/6844904153869713416</a></li><li>FP（First Paint）<ul><li>💬 描述：从开始加载到浏览器首次绘制像素到屏幕上的时间，也就是页面在屏幕上首次发生视觉变化的时间。</li></ul></li><li>FCP（First Contentful Paint）<ul><li>💬 描述：浏览器首次绘制来自 DOM 的内容的时间。</li></ul></li><li>FMP（First Meaningful Paint）<ul><li>💬 描述：页面的主要内容绘制到屏幕上的时间。</li></ul></li><li>FSP（First Screen Paint）<ul><li>💬 描述：页面从开始加载到首屏内容全部绘制完成的时间，用户可以看到首屏的全部内容。</li></ul></li><li>TTI（Time to Interactive）<ul><li>💬 描述：表示网页第一次完全达到可交互状态的时间点，浏览器已经可以持续性的响应用户的输入。</li></ul></li></ul><h4 id="优化手段"><a href="#优化手段" class="headerlink" title="优化手段"></a>优化手段</h4><ul><li>性能监控<ul><li>Performance API</li></ul></li><li>样式优化</li><li>JavaScript 优化<ul><li>防抖</li><li>节流</li></ul></li><li>代码分割</li><li>📚 资源压缩</li><li>打包优化</li><li>服务器优化</li><li>缓存优化<ul><li>Service Worker</li></ul></li><li>动画性能</li><li>dns-prefetch</li><li>Lazy loading</li><li>优化启动性能<ul><li>异步化</li></ul></li><li>渲染优化</li><li>网络优化</li><li>移动端性能优化</li><li>✅ CDN<ul><li>💬 描述：内容分发网络，是构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。</li><li>📚 资源：BootCDN <a href="https://www.bootcdn.cn/">https://www.bootcdn.cn/</a></li></ul></li></ul><h3 id="用户体验"><a href="#用户体验" class="headerlink" title="用户体验"></a>用户体验</h3><ul><li>设计系统</li><li>骨架屏</li></ul><h3 id="✅-兼容性"><a href="#✅-兼容性" class="headerlink" title="✅ 兼容性"></a>✅ 兼容性</h3><h4 id="浏览器兼容性"><a href="#浏览器兼容性" class="headerlink" title="浏览器兼容性"></a>浏览器兼容性</h4><ul><li>normalize.css</li><li>html5shiv.js</li><li>respond.js</li><li>Babel</li><li>Polyfill</li></ul><h4 id="屏幕分辨率兼容性"><a href="#屏幕分辨率兼容性" class="headerlink" title="屏幕分辨率兼容性"></a>屏幕分辨率兼容性</h4><h4 id="跨平台兼容性"><a href="#跨平台兼容性" class="headerlink" title="跨平台兼容性"></a>跨平台兼容性</h4><h3 id="SEO"><a href="#SEO" class="headerlink" title="SEO"></a>SEO</h3><ul><li>💬 描述：搜索引擎优化，利用搜索引擎的规则提高网站在有关搜索引擎内的自然排名。</li><li>📚 资源：百度搜索📚 资源平台 <a href="https://ziyuan.baidu.com/cooperateresource/index">https://ziyuan.baidu.com/cooperateresource/index</a></li><li>robots.txt</li><li>description</li><li>keywords</li><li>SiteMap</li><li>HTML 标签优化</li><li>站内链接建设</li><li>友情链接</li></ul><h3 id="✅-安全"><a href="#✅-安全" class="headerlink" title="✅ 安全"></a>✅ 安全</h3><ul><li>⭐️ XSS</li><li>CSRF</li><li>反爬虫</li><li>SQL 注入</li><li>DDoS</li></ul><h2 id="五、前端生态"><a href="#五、前端生态" class="headerlink" title="五、前端生态"></a>五、前端生态</h2><ul><li>💬 描述：如今，前端领域的范围越来越广，出现了更多前端工程师需要了解和关注的技术。</li><li>🎯 目标：能用学到的前端技术去做更多的事情，比如开发个人博客、文档网站、小程序、APP 等。</li></ul><h3 id="⭐️-静态站点构建"><a href="#⭐️-静态站点构建" class="headerlink" title="⭐️ 静态站点构建"></a>⭐️ 静态站点构建</h3><h4 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h4><ul><li>React Static</li></ul><h4 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h4><ul><li>✅ Gatsby.js</li><li>✅ Docusaurus</li><li>Hugo</li><li>Hexo</li></ul><h4 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h4><ul><li>JekyII</li><li>⭐️ Docsify</li><li>VuePress</li><li>✅ Dumi</li></ul><h3 id="✅-大前端"><a href="#✅-大前端" class="headerlink" title="✅ 大前端"></a>✅ 大前端</h3><p>💬 描述：前端技术的融合更加紧密，应用的领域也更加广泛，前端领域的内容呈现多样化，除了网站外，还可以用前端技术跨平台开发 Android、iOS、小程序、虚拟现实、增强现实等。</p><h4 id="移动应用"><a href="#移动应用" class="headerlink" title="移动应用"></a>移动应用</h4><ul><li>Hybrid</li><li>WebView</li><li>React Native</li><li>Flutter</li></ul><h4 id="移动应用打包"><a href="#移动应用打包" class="headerlink" title="移动应用打包"></a>移动应用打包</h4><ul><li>Weex</li><li>Cordova</li><li>Phonegap</li><li>Ionic</li></ul><h4 id="桌面应用"><a href="#桌面应用" class="headerlink" title="桌面应用"></a>桌面应用</h4><ul><li>Electron</li><li>NW.js</li><li>Proton Native</li></ul><h4 id="小程序"><a href="#小程序" class="headerlink" title="小程序"></a>小程序</h4><ul><li>原生</li><li>WebView</li></ul><h4 id="跨端开发框架"><a href="#跨端开发框架" class="headerlink" title="跨端开发框架"></a>跨端开发框架</h4><ul><li>✅ uni-app</li><li>✅ Taro</li><li>Flutter</li><li>Chameleon</li><li>Wepy</li><li>Rax</li></ul><h4 id="移动端调试"><a href="#移动端调试" class="headerlink" title="移动端调试"></a>移动端调试</h4><ul><li>Chrome Dev Tools</li><li>Android Simulator</li><li>IOS Simulator</li></ul><h3 id="✅-Serverless"><a href="#✅-Serverless" class="headerlink" title="✅ Serverless"></a>✅ Serverless</h3><ul><li>💬 描述：一种构建和管理基于微服务架构的完整流程，允许你在服务部署级别而不是服务器部署级别来管理你的应用部署，你甚至可以管理某个具体功能或端口的部署，这就能让开发者快速迭代，更快速地开发软件。</li></ul><h3 id="✅-云开发"><a href="#✅-云开发" class="headerlink" title="✅ 云开发"></a>✅ 云开发</h3><ul><li>💬 描述：云端一体化的后端云服务 ，采用 Serverless 架构，免去了移动应用构建中繁琐的服务器搭建和运维。同时云开发提供的静态托管、命令行工具（CLI）、Flutter SDK 等能力降低了应用开发的门槛。使用云开发可以构建完整的小程序 / 小游戏、H5、Web、移动 App 等应用。</li><li>✅ 腾讯云云开发</li><li>阿里云云开发</li></ul><h3 id="低代码"><a href="#低代码" class="headerlink" title="低代码"></a>低代码</h3><ul><li>💬 描述：无需编码（零代码）或通过少量代码就可以快速生成应用程序的开发平台。通过可视化进行应用程序开发的方法，使具有不同经验水平的开发人员可以通过图形化的用户界面，使用拖拽组件和模型驱动的逻辑来创建网页和移动应用程序。</li><li>腾讯云低码</li><li>阿里宜搭</li></ul><h2 id="六、前端求职"><a href="#六、前端求职" class="headerlink" title="六、前端求职"></a>六、前端求职</h2><ul><li>💬 描述：求职是一个漫长的过程，建议拉长战线，尽早准备。</li><li>🎯 目标：找到理想的工作。</li></ul><h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><ul><li>2020 秋招面经汇总：<a href="https://www.nowcoder.com/discuss/205497">https://www.nowcoder.com/discuss/205497</a></li></ul><h3 id="简历"><a href="#简历" class="headerlink" title="简历"></a>简历</h3><ul><li>超级简历</li></ul><h3 id="面试题库"><a href="#面试题库" class="headerlink" title="面试题库"></a>面试题库</h3><ul><li>牛客前端工程师面试宝典：<a href="https://www.nowcoder.com/tutorial/96/f5212664ab664984882b00635066ded2">https://www.nowcoder.com/tutorial/96/f5212664ab664984882b00635066ded2</a></li><li>前端面试每日 3+1：<a href="https://github.com/haizlin/fe-interview">https://github.com/haizlin/fe-interview</a></li><li>React 面试题目 &amp; 题解：<a href="https://github.com/sudheerj/reactjs-interview-questions">https://github.com/sudheerj/reactjs-interview-questions</a></li></ul><h3 id="面经"><a href="#面经" class="headerlink" title="面经"></a>面经</h3><ul><li>前端面经汇总：<a href="https://www.nowcoder.com/discuss/experience?tagId=644">https://www.nowcoder.com/discuss/experience?tagId=644</a></li></ul><h3 id="面试实战"><a href="#面试实战" class="headerlink" title="面试实战"></a>面试实战</h3><ul><li>AI 模拟面试：<a href="https://www.nowcoder.com/interview/ai/cover?jobTagId=644">https://www.nowcoder.com/interview/ai/cover?jobTagId=644</a></li></ul><h2 id="七、前端未来"><a href="#七、前端未来" class="headerlink" title="七、前端未来"></a>七、前端未来</h2><ul><li>💬 描述：前端未来可能的发展趋势和热门技术。</li><li>🎯 目标：关注前沿，持续进步。</li><li>WebAssembly</li><li>智能 UI</li><li>React Server Component</li><li>CSS Houdini</li></ul><h3 id="WebComponents"><a href="#WebComponents" class="headerlink" title="WebComponents"></a>WebComponents</h3><ul><li>HTML templates（HTML 模板）</li><li>Custom elements（自定义元素）</li><li>Shadow DOM（影子 DOM）</li></ul><h2 id="我的前端学习路线"><a href="#我的前端学习路线" class="headerlink" title="我的前端学习路线"></a>我的前端学习路线</h2><p>虽然上面整理的学习路线知识点非常多，但是大家也别太担心，其实按照一定顺序和方法来学习，并不会很难，聊聊我的学习经历。</p><h3 id="1-快速入门，培养兴趣"><a href="#1-快速入门，培养兴趣" class="headerlink" title="1. 快速入门，培养兴趣"></a>1. 快速入门，培养兴趣</h3><p>刚开始学习前端时，一定要以培养兴趣、快速入门为目标。我入门前端时，由于没有基础、啥都不懂，因此选择在线实战教程网站来学习，跟着教程案例一行行把代码敲下来，实时浏览显示效果，很轻松地就把 HTML、CSS、JavaScript 的语法基础过了一遍。但是这时，我对看过的知识点没有什么印象，基本是看了就忘，当我想要自己写一个网站，也根本无从下手。</p><p>于是，我开始试着死记硬背代码，结果发现背了之后还是不会写。那干脆一不做二不休，直接打开编辑器和教程网站，把之前在线实战时敲过的代码复制粘贴到编辑器中，然后再修改保存，到浏览器中打开文件。这样虽然要在编辑器和浏览器中来回切换，但起码能看到自己的网页文件运行的效果了。后来，我利用浏览器开发者工具提升了自己开发网站的调试效率，敲出的代码达不到满意的效果时，就再去查，再改，再浏览，最后终于完成了一个留言板网站！</p><p>通过这件事，我明白了一个道理，既然记不住知识，那就先别强行记忆，上手多写，忘了就去查不就好了？不要担心自己知识不够做不出来，只要你去试，都一定能实现。</p><h3 id="2-多看多写，巩固基础"><a href="#2-多看多写，巩固基础" class="headerlink" title="2. 多看多写，巩固基础"></a>2. 多看多写，巩固基础</h3><p>在这种操作下，我虽然能使用基础三件套开发简易网站了，但做的很慢，还老出问题。于是，我开始完整地看了几本前端入门和项目实战书籍，有三件套入门的，也有响应式网站设计的，还有 JavaScript 综合讲解的，以及一套完整的视频教程，通过这些来复习巩固之前学过的知识，打好了基础，并且了解了更多实战教程上没见到的知识。</p><p>看书和视频的过程中，我跟着做了几个简易的网站，也是边看边做。在这之后，我发现自己渐渐地能够脱离文档来写网站了！</p><h3 id="3-框架学习，学以致用"><a href="#3-框架学习，学以致用" class="headerlink" title="3. 框架学习，学以致用"></a>3. 框架学习，学以致用</h3><p>但是，总感觉开发网站时，什么都要自己写，重复的代码写一大堆，很麻烦。于是，我试着上网搜了解决这些问题的方法，发现可以用组件库减少重复编写 HTML 和 CSS 代码，于是学了 LayUI，其实和之前一样的，就是打开官网找到要用的组件，然后复制到项目中修改就行了，写的多了竟然还真记住了一些（虽然这个没必要记）。</p><p>界面和样式代码简化了，但是 JavaScript 写的我依旧头疼。于是我决定进入下一个阶段的学习，当时先看了本书叫《锋利的 jQuery》来学习 jQuery，学会之后使用它趁热打铁做了几个网站，发现的确能大大简化繁琐的 JavaScript DOM 操作，让我尝到了甜头，又有了继续学习前端的动力。</p><p>在那之后大概半年，我开始学习主流前端框架 Vue，也是跟着视频教程学，并且结合 ElementUI 组件库开发了一个响应式网站。不得不说，习惯了用原生 JavaScript 和 jQuery 开发后，再去用 Vue 开发，真的是爽飞了，小有成就感。</p><h3 id="4-根据需要，自主学习"><a href="#4-根据需要，自主学习" class="headerlink" title="4. 根据需要，自主学习"></a>4. 根据需要，自主学习</h3><p>在那之后，我就是通过不断地做项目来积累经验，既然编程知识太多学不完，那我就随需随学，逐渐拓宽自己的知识面。举个例子，我要做一个移动端 H5 页面，那就去搜 Vue 的移动端组件库，学会了 MintUI、VantUI 等；项目中要处理日期，那我就去搜日期处理库，学会了 Moment.js；项目重复文件和代码太多，我就去网上搜一些组件化、模块化的最佳实践；项目代码太大、加载太慢，我就去网上搜一些前端压缩、性能优化的方式；要把开发好的项目变成 APP，那我就去网上搜到了 Cordova 等打包工具；跟其他同学一起做项目时比较混乱、开发效率低，我就去搜了一些代码规范、前端工程化等；遇到 Bug 时，也是自己去网上搜索解决方案，并且还要看看有没有知识点是我遗漏的，我会再去弥补学习。通过不断实践、不断遇到问题和自主解决问题，我始终保持着学习的积极性，学到了越来越多前端的知识，并通过归纳总结来加深印象。</p><h3 id="5-渐入佳境，拓宽视野"><a href="#5-渐入佳境，拓宽视野" class="headerlink" title="5. 渐入佳境，拓宽视野"></a>5. 渐入佳境，拓宽视野</h3><p>在那之后，我学前端技术非常快了，像 React、TypeScript、Redux、Dva、Umi、Lerna 等等都随用随学，随学随用。此外，我不仅仅关注前端网页开发本身，还同时关注前端的生态和发展，学习了微前端、Serverless、云开发、低代码等技术，因此个人的能力提升也很大。如今在鹅厂工作中也是，面对各种不同技术栈的前端项目，我都能迎难而上，毕竟不会就学嘛！</p><p>哦，写的渐入佳境，我都忘了，自己是一名后端工程师，还搁这儿吹牛逼呢（ 所以本路线难免会有不专业的地方，请大家见谅～</p><h3 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h3><p>总结一下，学前端的路线其实就一句话：基础三件套 =&gt; 巩固基础 =&gt; 学习框架 =&gt; 多做项目 =&gt; 按需学习 =&gt; 拓宽视野。还有一个学任何编程技术都要注意的点，全程多敲代码！多敲代码！多敲代码！</p><h2 id="尾声-持续学习"><a href="#尾声-持续学习" class="headerlink" title="尾声 - 持续学习"></a>尾声 - 持续学习</h2><h3 id="优秀前端人的特质"><a href="#优秀前端人的特质" class="headerlink" title="优秀前端人的特质"></a>优秀前端人的特质</h3><ul><li>深厚的功底</li><li>良好的编码习惯</li><li>发现问题的洞察力</li><li>思维灵活，善于思考</li><li>追求技术，紧跟前沿</li><li>有创造力，有行动力</li><li>追求用户体验</li><li>时刻保持好奇</li><li>全栈意识</li><li>解决问题的能力强</li><li>懂得合作和高效沟通</li><li>重视工作，同样重视生活</li><li>责任心和全局观</li><li>个人的进步能带动团队的进步</li></ul><h3 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h3><ul><li>编程导航（包含以下所有资源，强烈推荐 👍）：<a href="https://www.code-nav.cn/">https://www.code-nav.cn</a></li><li>freeCodecamp 在线编程：<a href="https://learn.freecodecamp.one/">https://learn.freecodecamp.one/</a></li><li>阿里云前端实战学习：<a href="https://edu.aliyun.com/roadmap/frontend">https://edu.aliyun.com/roadmap/frontend</a></li><li>W3Cschool 编程入门实战：<a href="https://www.w3cschool.cn/codecamp/">https://www.w3cschool.cn/codecamp/</a></li><li>腾讯云动手实验室：<a href="https://cloud.tencent.com/developer/labs/gallery">https://cloud.tencent.com/developer/labs/gallery</a></li><li>pink 老师前端入门教程：<a href="https://www.bilibili.com/video/BV14J4114768">https://www.bilibili.com/video/BV14J4114768</a></li><li>MDN 前端文档：<a href="https://developer.mozilla.org/zh-CN">https://developer.mozilla.org/zh-CN</a></li><li>Node.js 入门：<a href="https://cnodejs.org/getstart">https://cnodejs.org/getstart</a></li><li>前端清单：<a href="https://cheatsheets.devtool.tech/">https://cheatsheets.devtool.tech/</a></li><li>前端小课：<a href="https://lefex.github.io/">https://lefex.github.io/</a></li><li>被删的前端游乐场：<a href="http://www.godbasin.com/">http://www.godbasin.com/</a></li><li>《ES6 入门教程》：<a href="https://es6.ruanyifeng.com/">https://es6.ruanyifeng.com/</a></li><li>谷歌 Web 开发者：<a href="https://developers.google.com/web">https://developers.google.com/web</a></li><li>JavaScript 明星项目：<a href="https://risingstars.js.org/2020/zh">https://risingstars.js.org/2020/zh</a></li><li>Best of JS：<a href="https://bestofjs.org/">https://bestofjs.org/</a></li><li>Codewars：<a href="https://www.codewars.com/?language=javascript">https://www.codewars.com/?language=javascript</a></li><li>Vue.js examples：<a href="https://vuejsexamples.com/">https://vuejsexamples.com/</a></li></ul><h3 id="前端资讯"><a href="#前端资讯" class="headerlink" title="前端资讯"></a>前端资讯</h3><ul><li>掘金资讯：<a href="https://juejin.cn/news">https://juejin.cn/news</a></li><li>InfoQ：<a href="https://www.infoq.cn/topic/Front-end">https://www.infoq.cn/topic/Front-end</a></li><li>daily.dev：<a href="https://daily.dev/">https://daily.dev/</a></li></ul><h3 id="技术博客"><a href="#技术博客" class="headerlink" title="技术博客"></a>技术博客</h3><ul><li>掘金：<a href="https://juejin.cn/frontend">https://juejin.cn/frontend</a></li><li>腾讯前端 IMWEB：<a href="http://imweb.io/">http://imweb.io</a></li><li>腾讯 Web 前端团队 Alloy Team：<a href="http://www.alloyteam.com/">http://www.alloyteam.com</a></li><li>淘宝前端团队：<a href="http://taobaofed.org/">http://taobaofed.org</a></li><li>百度 Web 前端研发部：<a href="http://fex.baidu.com/">http://fex.baidu.com</a></li><li>京东凹凸实验室：<a href="https://aotu.io/">https://aotu.io</a></li><li>360 奇舞团：<a href="https://75team.com/">https://75team.com</a></li><li>七牛团队技术博客：<a href="http://blog.qiniu.com/">http://blog.qiniu.com</a></li><li>有赞技术团队：<a href="https://tech.youzan.com/tag/front-end/">https://tech.youzan.com/tag/front-end/</a></li><li>百度 EFE Tech：<a href="https://efe.baidu.com/">https://efe.baidu.com/</a></li><li>css-tricks：<a href="https://css-tricks.com/archives">https://css-tricks.com/archives</a></li><li>web.dev：<a href="https://web.dev/blog/">https://web.dev/blog/</a></li></ul><h3 id="学习要点"><a href="#学习要点" class="headerlink" title="学习要点"></a>学习要点</h3><ul><li>前期学习以培养兴趣为主，不要过于追求深层理解。</li><li>前端学习不能靠死记硬背，要多敲代码、多做项目实践。</li><li>不要急于求成，踏实积累才是硬道理。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> 前端学习路线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端学习路线 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java学习路线</title>
      <link href="/2023/09/06/%E5%90%8E%E7%AB%AF-Java-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"/>
      <url>/2023/09/06/%E5%90%8E%E7%AB%AF-Java-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="Java-学习路线"><a href="#Java-学习路线" class="headerlink" title="Java 学习路线"></a>Java 学习路线</h1><blockquote><p>这份学习路线并不完美，也不会有最终形态，正如 Java 不可预见、永无止境的未来。</p></blockquote><p>💂 + 💻 = 👴🏽</p><p>建议先观看视频导读：<a href="https://www.bilibili.com/video/BV1Qf4y1K7ff/">https://www.bilibili.com/video/BV1Qf4y1K7ff/</a></p><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><p><a href="https://qiniuyun.code-nav.cn/img/image-20211127235325557.png"><img src="https://qiniuyun.code-nav.cn/img/image-20211127235325557.png" alt="image-20211127235325557"></a></p><h2 id="路线特点"><a href="#路线特点" class="headerlink" title="路线特点"></a>路线特点</h2><ol><li>最新，完整一条龙的大厂 Java 学习路线，从入门到入土</li><li>同时适用于想全面学习 / 快速求职的同学，可以根据符号来定制自己的专属学习路线</li><li>给出目标、学习建议、关键知识点、最优资源以及各类资源推荐（视频、书籍、文档、项目、工具等）</li><li>鱼皮自己是 Java 开发者，融入个人自学和从业的经历 + 思考，让路线有灵魂</li><li>划分阶段、更有计划，且在最后给出持续学习的方向、探索 Java 程序员发展的无限可能</li><li>完全开源，回馈社区，持续更新！</li></ol><h2 id="符号表"><a href="#符号表" class="headerlink" title="符号表"></a>符号表</h2><p>可以通过路线知识点前的表情字符，根据自己的实际情况选择学习：</p><ul><li>🌕 所有同学必须学习！！！</li><li>🌖 非常急着找工作，才可不学；目标大厂，必须学习！</li><li>🌗 急着找工作的话，可不学；目标大厂，建议学习</li><li>🌘 时间充足的话，再去学</li><li>⭐ 表示推荐资源</li></ul><h2 id="写在开头"><a href="#写在开头" class="headerlink" title="写在开头"></a>写在开头</h2><p>首先呢，我们要了解 Java 的应用场景和就业方向，看看和自己的学习目的是否一致。</p><p>目前，Java 由于其优秀的特性以及火爆的生态，岗位需求量大，是后台开发、安卓开发、大数据开发的主流编程语言，因此学习资源也很丰富，值得学习！</p><p>有关更多编程语言的选择，大家可以看我的视频了解：<a href="https://www.bilibili.com/video/BV1y3411r7pX/">https://www.bilibili.com/video/BV1y3411r7pX/</a></p><h2 id="阶段-0：前期准备"><a href="#阶段-0：前期准备" class="headerlink" title="阶段 0：前期准备"></a>阶段 0：前期准备</h2><ol><li>准备好一款在线、随时随地写代码的工具，不用在本地去安装和配置，是初学者的好帮手。<ul><li>推荐网站 - 菜鸟工具：<a href="https://c.runoob.com/compile/10">https://c.runoob.com/compile/10</a></li></ul></li><li>准备一款记笔记的软件，学编程的过程中老师的思路、自己遇到的问题、解决问题的方法、心得感悟、遇到的好资料，都要记下来哦，好记性不如烂笔头，可以帮助你事半功倍。<ul><li>推荐本地软件 Typora：<a href="https://www.typora.io/">https://www.typora.io/</a> （线上可以用 xx 文档）</li><li>推荐使用 Markdown 语法编写，鱼皮教程：<a href="https://www.bilibili.com/video/BV1no4y1k7YT/">https://www.bilibili.com/video/BV1no4y1k7YT/</a></li></ul></li><li>想学好编程，别背代码，要多写，把这句话刻到脑子里。</li><li>选视频和找资料的小技巧：多看评论区、多看隔壁评论区、不要看过期的视频。</li><li>如何访问 GitHub：<a href="https://mp.weixin.qq.com/s/uBFsuThsZ4kdkZgqfX12qA">https://mp.weixin.qq.com/s/uBFsuThsZ4kdkZgqfX12qA</a> （上面有很多免费的编程学习资源、项目源码，程序员必备）</li></ol><h2 id="阶段-1：Java-入门"><a href="#阶段-1：Java-入门" class="headerlink" title="阶段 1：Java 入门"></a>阶段 1：Java 入门</h2><h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>培养兴趣、快速上手，能运行和编写简单的 Java 程序。</p><p>学完本阶段后，可以试着用 Java 解决一些数学计算问题、编写图书管理系统等桌面端 GUI 程序，甚至是五子棋之类的小游戏。</p><h3 id="🌕-Java-编程基础（45-天）"><a href="#🌕-Java-编程基础（45-天）" class="headerlink" title="🌕 Java 编程基础（45 天）"></a>🌕 Java 编程基础（45 天）</h3><h4 id="知识"><a href="#知识" class="headerlink" title="知识"></a>知识</h4><ul><li>Java 特点（看不懂没事，别背！）</li><li>环境搭建</li><li>IDEA 开发工具<ul><li>新建项目</li><li>运行调试</li><li>界面配置</li><li>插件管理</li></ul></li><li>Java 基础语法<ul><li>数据类型</li><li>流程控制</li></ul></li><li>数组</li><li>面向对象<ul><li>方法</li><li>重载</li><li>封装</li><li>继承</li><li>多态</li></ul></li><li>抽象类</li><li>接口</li><li>枚举</li><li>常用类<ul><li>String</li><li>日期时间</li></ul></li><li>集合类</li><li>泛型</li><li>注解</li><li>异常处理</li><li>多线程</li><li>IO 流</li><li>反射</li></ul><h4 id="学习建议"><a href="#学习建议" class="headerlink" title="学习建议"></a>学习建议</h4><p>初学一门语言时，一定要持续学习，不能中断！</p><p>想要学好编程，一定要多敲代码！建议先跟着书上的例子敲一遍代码，然后试着自主编写代码，并完成课后练习。</p><p>不理解代码也没关系，可以学习 Debug 后，一行一行地打断点执行，查看程序的执行过程。千万不要觉得麻烦，养成习惯后真的能节省很多重复学习的时间。</p><h4 id="经典面试题"><a href="#经典面试题" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>为什么重写 equals 还要重写 hashcode？</li><li>== 和 equals 比较的区别</li><li>为啥有时会出现 4.0 - 3.6 = 0.40000001 这种现象？</li><li>final 关键字的作用</li><li>介绍 Java 的集合类</li><li>ArrayList 和 LinkedList 的区别</li></ol><h4 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 韩顺平 - 零基础 30 天学会 Java：<a href="https://www.bilibili.com/video/BV1fh411y7R8">https://www.bilibili.com/video/BV1fh411y7R8</a> （900 多集，顺序安排很合理，每个知识真正的打碎了，通俗、有示例、有实战、有思想）</li></ul></li><li>文档<ul><li>⭐ 菜鸟教程：<a href="https://www.runoob.com/java/java-tutorial.html">https://www.runoob.com/java/java-tutorial.html</a> （可以在线练习）</li><li>廖雪峰 Java 教程：<a href="https://www.liaoxuefeng.com/wiki/1252599548343744">https://www.liaoxuefeng.com/wiki/1252599548343744</a></li><li>IDEA 中文教程：<a href="https://github.com/judasn/IntelliJ-IDEA-Tutorial">https://github.com/judasn/IntelliJ-IDEA-Tutorial</a></li><li>IDEA Mac 快捷键指南，地址：<a href="https://www.jianshu.com/p/454c71172c46">https://www.jianshu.com/p/454c71172c46</a></li><li>IDEA Win 常用快捷键，地址：<a href="https://www.jianshu.com/p/5de7cca0fefc">https://www.jianshu.com/p/5de7cca0fefc</a></li></ul></li><li>书籍<ul><li>《Head First Java》</li></ul></li><li>在线游戏<ul><li>Codegym：<a href="https://codegym.cc/zh">https://codegym.cc/zh</a> （玩玩前几关培养兴趣不错，但后面收费了）</li></ul></li></ul><h3 id="🌖-Java-8（3-天）"><a href="#🌖-Java-8（3-天）" class="headerlink" title="🌖 Java 8（3 天）"></a>🌖 Java 8（3 天）</h3><h4 id="知识-1"><a href="#知识-1" class="headerlink" title="知识"></a>知识</h4><ul><li>Stream API</li><li>Lambda 表达式</li><li>新日期时间 API</li><li>接口默认方法</li></ul><h4 id="学习建议-1"><a href="#学习建议-1" class="headerlink" title="学习建议"></a>学习建议</h4><p>Java 8 是如今企业开发中最主流的 Java 稳定版本，在这个版本出现了很多实用的新特性，虽然面试考点不多，但能够提升编程效率，建议学习。</p><h4 id="经典面试题-1"><a href="#经典面试题-1" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>java 8 有哪些新特性？</li><li>HashMap 在 jdk 1.7 和 1.8 的区别？</li></ol><h4 id="资源-1"><a href="#资源-1" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 宋红康 - 全网最全Java零基础入门教程：<a href="https://www.bilibili.com/video/BV1Kb411W75N">https://www.bilibili.com/video/BV1Kb411W75N</a> （只看 Java 8 部分即可）</li></ul></li><li>文档<ul><li>⭐ 菜鸟教程：<a href="https://www.runoob.com/java/java8-new-features.html">https://www.runoob.com/java/java8-new-features.html</a></li></ul></li><li>书籍<ul><li>《Java 8 实战》</li></ul></li><li>工具<ul><li>⭐ 在线编写运行 Java 8：<a href="https://www.tutorialspoint.com/compile_java8_online.php">https://www.tutorialspoint.com/compile_java8_online.php</a></li></ul></li><li>其他<ul><li>Java 8 小代码片段：<a href="https://github.com/biezhi/30-seconds-of-java8">https://github.com/biezhi/30-seconds-of-java8</a></li></ul></li></ul><h3 id="练手项目"><a href="#练手项目" class="headerlink" title="练手项目"></a>练手项目</h3><ul><li>Java 实现简单计算器：<a href="https://www.lanqiao.cn/courses/185">https://www.lanqiao.cn/courses/185</a></li><li>Eclipse 实现 Java 编辑器：<a href="https://www.lanqiao.cn/courses/287">https://www.lanqiao.cn/courses/287</a></li><li>一本糊涂账：<a href="https://how2j.cn/module/104.html">https://how2j.cn/module/104.html</a></li><li>Java 五子棋：<a href="https://blog.csdn.net/cnlht/article/details/8176130">https://blog.csdn.net/cnlht/article/details/8176130</a></li><li>Java 中国象棋：<a href="https://blog.csdn.net/cnlht/article/details/8205733">https://blog.csdn.net/cnlht/article/details/8205733</a></li><li>JAVA GUI 图书馆管理系统：<a href="https://github.com/uboger/LibraryManager">https://github.com/uboger/LibraryManager</a></li><li>JAVA 坦克大战小游戏：<a href="https://github.com/wangzhengyi/TankWar">https://github.com/wangzhengyi/TankWar</a></li><li>Swing 编写的俄罗斯方块：<a href="https://github.com/HelloClyde/Tetris-Swing">https://github.com/HelloClyde/Tetris-Swing</a></li><li>小小记账本：<a href="https://github.com/xenv/SmallAccount">https://github.com/xenv/SmallAccount</a> （适合了解数据库的同学）</li></ul><h3 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h3><p>学完了 Java 基础后，有些同学会感到迷茫了啊，感觉好像啥也做不出来，不知道下一步做什么，我这一身的本领该如何施展啊？</p><p>不要慌，也不要急着去学新技术，接下来我们要多用 Java 来写代码了，巩固基础，但是写什么呢？</p><p>当然是数据结构和算法！</p><h2 id="阶段-2：巩固基础"><a href="#阶段-2：巩固基础" class="headerlink" title="阶段 2：巩固基础"></a>阶段 2：巩固基础</h2><h3 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h3><p>想学好编程，计算机基础知识要学好。</p><p>比如算法，是程序员的灵魂。学好算法有助于我们理解程序、开拓思路，因此也是很多公司面试时考察的关键，在找工作前，还是要刷个上百道算法题目的。</p><p>我们这个阶段的目标是：熟练使用 Java 语言来编写程序，巩固 Java 基础。（那直接用 Java 来写算法题目，一举两得，岂不美哉？）</p><p>此外，建议大家利用零碎时间多去了解 <strong>计算机基础知识</strong> ，比如操作系统、计算机网络等，对你后面学习开发框架之类的知识都有帮助。</p><h3 id="Java-基础（30-天）"><a href="#Java-基础（30-天）" class="headerlink" title="Java 基础（30 天）"></a>Java 基础（30 天）</h3><h4 id="学习建议-2"><a href="#学习建议-2" class="headerlink" title="学习建议"></a>学习建议</h4><p>建议大家去阅读 《Java 核心技术卷 1》，这本书堪称经典，是帮助你复习巩固 Java 的不二之选，其中图形界面章节可以选择不看。</p><p>之后可以刷牛客的 Java 练习题，检验自己的水平，我当时刷了两遍 1000 题（每天 30 题，1 个月也就刷完了，二刷会更快！）。虽然都是选择题，但能学到很多 Java 语言的特性、避免写代码时容易犯的错误。</p><p>如果你时间不够，只是想快速找到工作，那么本章节甚至可以完全跳过，后面慢慢弥补即可。</p><h4 id="资源-2"><a href="#资源-2" class="headerlink" title="资源"></a>资源</h4><ul><li>书籍<ul><li>⭐《Java 核心技术卷 1》</li></ul></li><li>练习<ul><li>⭐ 牛客题库：<a href="https://www.nowcoder.com/intelligentTest">https://www.nowcoder.com/intelligentTest</a></li></ul></li></ul><h3 id="🌖-数据结构与算法"><a href="#🌖-数据结构与算法" class="headerlink" title="🌖 数据结构与算法"></a>🌖 数据结构与算法</h3><h4 id="知识-2"><a href="#知识-2" class="headerlink" title="知识"></a>知识</h4><ul><li><strong>时间 / 空间复杂度分析</strong></li><li>数据结构<ul><li>数组</li><li>字符串</li><li>队列</li><li>栈</li><li>链表</li><li>集合</li><li>哈希表</li><li>树<ul><li>二叉树</li><li>多叉树</li><li>字典树</li></ul></li></ul></li><li>算法<ul><li>排序</li><li>双指针</li><li>查找</li><li>分治</li><li>动态规划</li><li>递归</li><li>回溯</li><li>贪心</li><li>位运算</li><li>DFS</li><li>BFS</li><li>图</li></ul></li></ul><h4 id="学习建议-3"><a href="#学习建议-3" class="headerlink" title="学习建议"></a>学习建议</h4><p>学算法一定要多思考、多练习！！！</p><p>在复习 Java、巩固基础的过程中，每天可以坚持用 Java 做 2 - 3 道算法题目。</p><p>不用担心看不懂，直接进入 LeetCode 学习板块 LeetBook，提供了免费的教程，文字、图解、动画讲算法、在线练习应有尽有，从 0 开始，跟着学习基础知识、跟着教程刷一些同类题目，培养算法思路。</p><p>之后再由简单到复杂、由通过率高到低，自主刷题，多看题解，举一反三。一定要把自己做过的每道题目代码都自行保存好，定期复习。时间足够的话，也可以试着自己写写题解，在网上分享一下自己的刷题思路，找到自己坚持的动力。</p><p>有条件的朋友也可以试着参与竞赛，没什么门槛，可以帮助你集中精神，而且周赛的题目还是挺友好的~</p><h4 id="经典面试题-2"><a href="#经典面试题-2" class="headerlink" title="经典面试题"></a>经典面试题</h4><ul><li>LeetCode 精选 100 道：<a href="https://leetcode-cn.com/problem-list/2cktkvj/">https://leetcode-cn.com/problem-list/2cktkvj/</a></li><li>LeetCode 精选算法 200 题：<a href="https://leetcode-cn.com/problem-list/qg88wci/">https://leetcode-cn.com/problem-list/qg88wci/</a></li></ul><h4 id="资源-3"><a href="#资源-3" class="headerlink" title="资源"></a>资源</h4><ul><li>文章<ul><li>⭐ 刷了 1000 多道算法题，一点心得：<a href="https://t.1yb.co/oT9q">https://t.1yb.co/oT9q</a> （鱼皮原创）</li></ul></li><li>在线教程<ul><li>⭐ LeetCode LeetBook：<a href="https://leetcode-cn.com/leetbook/">https://leetcode-cn.com/leetbook/</a></li></ul></li><li>在线刷题<ul><li>⭐ LeetCode：<a href="https://leetcode-cn.com/">https://leetcode-cn.com/</a></li></ul></li><li>书籍<ul><li>⭐《小灰的漫画算法》</li><li>⭐《剑指 Offer》</li><li>《程序员代码面试指南》</li><li>图解算法数据结构：<a href="https://leetcode-cn.com/leetbook/detail/illustration-of-algorithm/">https://leetcode-cn.com/leetbook/detail/illustration-of-algorithm/</a></li><li>LeetCode 101（C++）：<a href="https://github.com/changgyhub/leetcode_101">https://github.com/changgyhub/leetcode_101</a></li><li>LeetCode 题解（C++）：<a href="https://github.com/soulmachine/leetcode">https://github.com/soulmachine/leetcode</a></li><li>LeetCode Cookbook（Go 语言）：<a href="https://github.com/halfrost/LeetCode-Go">https://github.com/halfrost/LeetCode-Go</a></li></ul></li><li>视频<ul><li>尚硅谷 Java 数据结构与算法：<a href="https://www.bilibili.com/video/BV1E4411H73v">https://www.bilibili.com/video/BV1E4411H73v</a> （难度比面试的要求大一些，适合希望更全面学习的朋友）</li><li>Leetcode 真题解析：<a href="https://www.bilibili.com/video/BV1a54y1b74k">https://www.bilibili.com/video/BV1a54y1b74k</a></li></ul></li><li>工具<ul><li>VisuAlgo 数据结构和算法动态可视化：<a href="https://visualgo.net/zh">https://visualgo.net/zh</a></li><li>数据结构可视化：<a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html">https://www.cs.usfca.edu/~galles/visualization/Algorithms.html</a></li><li>RegExr：<a href="https://www.code-nav.cn/rd/?rid=79550af2601114e9012110711798772b">https://www.code-nav.cn/rd/?rid=79550af2601114e9012110711798772b</a> （学习、创建和测试正则表达式的在线可视化工具）</li></ul></li><li>网站<ul><li>五分钟学算法：<a href="https://www.cxyxiaowu.com/">https://www.cxyxiaowu.com/</a></li></ul></li></ul><h3 id="🌘-计算机导论"><a href="#🌘-计算机导论" class="headerlink" title="🌘 计算机导论"></a>🌘 计算机导论</h3><h4 id="知识-3"><a href="#知识-3" class="headerlink" title="知识"></a>知识</h4><ul><li>计算机发展历史</li><li>计算机应用领域</li><li>计算机发展方向</li><li>计算机基本组成</li><li>二进制</li><li>编程语言发展</li></ul><h4 id="学习建议-4"><a href="#学习建议-4" class="headerlink" title="学习建议"></a>学习建议</h4><p>大学计算机专业的同学一般刚开学就会上这门课，虽说学习它并不会直接提高你的编程技能，但能够让你更了解计算机和编程，从而在一定程度上帮助你培养学习兴趣、确定学习方向。</p><p>自学的话，不用刻意去学习计算机导论，而是可以通过看视频、阅读课外读物的方式慢慢地了解计算机的故事。</p><h4 id="资源-4"><a href="#资源-4" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>《计算机科学速成课》：<a href="https://www.bilibili.com/video/BV1EW411u7th">https://www.bilibili.com/video/BV1EW411u7th</a> （从底层到上层的计算机知识科普，强烈推荐）</li></ul></li><li>书籍<ul><li>《半小时漫画计算机》</li></ul></li></ul><h3 id="🌖-操作系统"><a href="#🌖-操作系统" class="headerlink" title="🌖 操作系统"></a>🌖 操作系统</h3><h4 id="知识-4"><a href="#知识-4" class="headerlink" title="知识"></a>知识</h4><ul><li>操作系统的组成</li><li>进程、线程</li><li>进程 / 线程间通讯方式</li><li>进程调度算法</li><li>进程 / 线程同步方式</li><li>进程 / 线程状态</li><li>死锁</li><li>内存管理</li><li>局部性原理</li></ul><h4 id="学习建议-5"><a href="#学习建议-5" class="headerlink" title="学习建议"></a>学习建议</h4><p>说实话，操作系统这一块知识挺枯燥的。你说说我现在项目都不会做，你又让我看这些理论，是不是想让我头秃？</p><p>我的建议是，可以先利用课余时间看一些网课或者有趣的课外书，对一些操作系统的概念先有个大致的印象，比如进程、线程、死锁，等后面有时间了再系统学习、等到找工作了再去背相关八股文。</p><p>还在校园就跟着学校的进度学习就成，自学的话可以看下《清华操作系统原理》视频，有实力的小伙伴，能看懂大黑书就更好了，但如果看不懂也别担心，这并不影响你后续知识的学习。</p><h4 id="经典面试题-3"><a href="#经典面试题-3" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>什么是死锁？死锁产生的条件？</li><li>线程有哪几种状态？</li><li>有哪些进程调度算法？</li><li>什么是缓冲区溢出？</li></ol><h4 id="资源-5"><a href="#资源-5" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>《清华操作系统原理》：<a href="https://www.bilibili.com/video/BV1uW411f72n">https://www.bilibili.com/video/BV1uW411f72n</a></li></ul></li><li>书籍<ul><li>《编码》</li><li>《30天自制操作系统》</li><li>《现代操作系统》（难度较大，不推荐新手看）</li><li>《深入理解计算机系统》（难度较大，不推荐新手看）</li><li>《 自己动手写操作系统》（国产好书，网上可以下载）</li></ul></li><li>大学课件<ul><li>浙大操作系统：<a href="https://github.com/QSCTech/zju-icicles">https://github.com/QSCTech/zju-icicles</a></li></ul></li></ul><h3 id="🌖-计算机网络"><a href="#🌖-计算机网络" class="headerlink" title="🌖 计算机网络"></a>🌖 计算机网络</h3><h4 id="知识-5"><a href="#知识-5" class="headerlink" title="知识"></a>知识</h4><ul><li>网络分层模型</li><li>网络传输过程</li><li>IP、端口</li><li>HTTP / HTTPS 协议</li><li>UDP / TCP 协议</li><li>ARP 地址解析协议</li><li>网络安全</li><li>DNS 域名解析</li></ul><h4 id="学习建议-6"><a href="#学习建议-6" class="headerlink" title="学习建议"></a>学习建议</h4><p>很多学习 Java 开发的同学最后都是从事 <strong>后端开发</strong> 的工作，而计算机网络知识是后端开发的重点。</p><p>和操作系统一样，自学网络可能会很枯燥，建议先看有趣的课外书，比如《图解 HTTP》；或者有趣的视频，比如《计算机网络微课堂》。后面要找工作面试前，再重点去背一些八股文就好了。还在学校的同学好好上课一般就没问题。</p><p>学习基础能帮助自己今后发展更稳定，且更容易接受新知识，所以请不要相信基础无用论。</p><h4 id="经典面试题-4"><a href="#经典面试题-4" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>计算机网络各层有哪些协议？</li><li>TCP 和 UDP 协议的区别？</li><li>TCP 为什么需要三次握手和四次挥手？</li><li>HTTP 和 HTTPS 协议的区别？</li></ol><h4 id="资源-6"><a href="#资源-6" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>《计算机网络微课堂》：<a href="https://www.bilibili.com/video/BV1c4411d7jb">https://www.bilibili.com/video/BV1c4411d7jb</a></li></ul></li><li>书籍<ul><li>⭐《图解 HTTP》</li><li>《网络是怎样连接的》</li><li>⭐《图解 TCP / IP》</li></ul></li><li>大学课件<ul><li>浙大计算机网络基础：<a href="https://github.com/QSCTech/zju-icicles">https://github.com/QSCTech/zju-icicles</a></li></ul></li></ul><h3 id="尾声-1"><a href="#尾声-1" class="headerlink" title="尾声"></a>尾声</h3><p>巩固基础要花至少 1 个月的时间，当你读完《Java 核心技术卷1》并且不用查询文档也能熟练地用 Java 做题时，就可以接着往下了。</p><h2 id="阶段-3：Java-企业开发基础"><a href="#阶段-3：Java-企业开发基础" class="headerlink" title="阶段 3：Java 企业开发基础"></a>阶段 3：Java 企业开发基础</h2><h3 id="目标-2"><a href="#目标-2" class="headerlink" title="目标"></a>目标</h3><p>面向薪资编程，学习实际后台开发工作要用的基础技术和框架，并能 <strong>独立</strong> 做出一个具有完整功能的 Java Web 项目。</p><p>学完这个阶段后，你应该已经能独立开发出大多数常见的后台系统了，比如各种管理系统、商城系统等。</p><h3 id="🌕-MySQL-数据库（7-天）"><a href="#🌕-MySQL-数据库（7-天）" class="headerlink" title="🌕 MySQL 数据库（7 天）"></a>🌕 MySQL 数据库（7 天）</h3><p>企业中大部分业务数据都是用关系型数据库存储的，因此数据库是后台开发同学的必备技能，其中 MySQL 数据库是目前的主流，也是面试时的重点。</p><h4 id="知识-6"><a href="#知识-6" class="headerlink" title="知识"></a>知识</h4><ul><li>基本概念</li><li>MySQL 搭建</li><li>SQL 语句编写</li><li>约束</li><li>索引</li><li>事务</li><li>锁机制</li><li>设计数据库表</li><li>性能优化</li></ul><h4 id="学习建议-7"><a href="#学习建议-7" class="headerlink" title="学习建议"></a>学习建议</h4><p>其中，<strong>SQL 语句编写</strong> 和 <strong>设计数据库表</strong> 这两个能力一定要有！</p><p>比如让你做一个学生管理系统，你要能想到需要哪些表，比如学生表、班级表；每个表需要哪些字段、字段类型。</p><p>这就要求大家多写 SQL、多根据实际的业务场景去练习设计能力。</p><h4 id="经典面试题-5"><a href="#经典面试题-5" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>MySQL 索引的最左原则</li><li>InnoDB 和 MyIsam 引擎的区别？</li><li>有哪些优化数据库性能的方法？</li><li>如何定位慢查询？</li><li>MySQL 支持行锁还是表锁？分别有哪些优缺点？</li></ol><h4 id="资源-7"><a href="#资源-7" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 老杜 - mysql入门基础 + 数据库实战：<a href="https://www.bilibili.com/video/BV1Vy4y1z7EX">https://www.bilibili.com/video/BV1Vy4y1z7EX</a> （较新、内容相对精炼，有习题）</li><li>尚硅谷 - MySQL基础教程：<a href="https://www.bilibili.com/video/BV1xW411u7ax">https://www.bilibili.com/video/BV1xW411u7ax</a> （小姐姐讲课，但感觉音质一般）</li></ul></li><li>在线练习<ul><li>⭐ SQL 自学网：<a href="http://xuesql.cn/">http://xuesql.cn/</a></li><li>⭐ SQL 在线运行：<a href="https://www.bejson.com/runcode/sql/">https://www.bejson.com/runcode/sql/</a></li></ul></li><li>文档<ul><li>SQL - 菜鸟教程：<a href="https://www.runoob.com/sql/sql-tutorial.html">https://www.runoob.com/sql/sql-tutorial.html</a></li><li>MySQL - 菜鸟教程：<a href="https://www.runoob.com/mysql/mysql-tutorial.html">https://www.runoob.com/mysql/mysql-tutorial.html</a></li></ul></li><li>网站<ul><li><a href="https://www.code-nav.cn/rd/?rid=b00064a76012546b016e274a3724c5f0">数据库大全</a>：果创云收录的各种数据库表设计</li></ul></li></ul><h3 id="🌕-开发框架（60-天）"><a href="#🌕-开发框架（60-天）" class="headerlink" title="🌕 开发框架（60 天）"></a>🌕 开发框架（60 天）</h3><p>Java 之所以能成为主流的企业开发语言，很大一部分原因是它完善的框架生态，用好框架，不仅能够大大提升开发效率，还能提高项目的稳定性、减少维护成本。</p><p>开发框架是后台开发工作中不可或缺的，也是面试考察的重点，一定要好好学！</p><p>不知道 Java 能做什么的朋友们，学完开发框架，就会有答案啦。</p><p>下面给大家推荐的都是企业中应用最多的主流开发框架，知识点比较零碎，就放在一起讲了。</p><h4 id="知识-7"><a href="#知识-7" class="headerlink" title="知识"></a>知识</h4><h5 id="🌕-Java-Web"><a href="#🌕-Java-Web" class="headerlink" title="🌕 Java Web"></a>🌕 Java Web</h5><ul><li>描述：Java 网页应用开发基础</li><li>一丢丢前端基础</li><li>XML</li><li>JSON</li><li>Servlet</li><li>Filter</li><li>Listener</li><li>JSP</li><li>JSTL</li><li>Cookie</li><li>Session</li></ul><h5 id="🌕-Spring-5"><a href="#🌕-Spring-5" class="headerlink" title="🌕 Spring 5"></a>🌕 Spring 5</h5><ul><li>描述：Java 轻量级应用框架</li><li>IOC</li><li>AOP</li><li>事务</li></ul><h5 id="🌕-SpringMVC"><a href="#🌕-SpringMVC" class="headerlink" title="🌕 SpringMVC"></a>🌕 SpringMVC</h5><ul><li>描述：Java 轻量级 web 开发框架</li><li>什么是 MVC？</li><li>请求与响应</li><li>Restful API</li><li>拦截器</li><li>配置</li><li>执行过程</li></ul><h5 id="🌕-MyBatis"><a href="#🌕-MyBatis" class="headerlink" title="🌕 MyBatis"></a>🌕 MyBatis</h5><ul><li>描述：数据访问框架，操作数据库进行增删改查等操作</li><li>增删改查</li><li>全局配置</li><li>动态 SQL</li><li>缓存</li><li>和其他框架的整合</li><li>逆向工程</li></ul><h5 id="🌗-MyBatis-Plus"><a href="#🌗-MyBatis-Plus" class="headerlink" title="🌗 MyBatis Plus"></a>🌗 MyBatis Plus</h5><ul><li>描述：Mybatis 的增强工具，能够简化开发、提高效率</li><li>引入</li><li>通用 CRUD</li><li>条件构造器</li><li>代码生成器</li><li>插件扩展</li><li>自定义全局操作</li></ul><h5 id="🌕-SpringBoot-2"><a href="#🌕-SpringBoot-2" class="headerlink" title="🌕 SpringBoot 2"></a>🌕 SpringBoot 2</h5><ul><li>描述：简化 Spring 应用的初始搭建以及开发过程，提高效率</li><li>常用注解</li><li>资源整合</li><li>高级特性</li><li>本地热部署</li></ul><h5 id="🌗-Spring-Security"><a href="#🌗-Spring-Security" class="headerlink" title="🌗 Spring Security"></a>🌗 Spring Security</h5><ul><li>描述：Spring 的安全管理框架</li><li>用户认证</li><li>权限管理</li><li>相关技术：Shiro</li></ul><h5 id="🌗-Maven-Gradle"><a href="#🌗-Maven-Gradle" class="headerlink" title="🌗 Maven / Gradle"></a>🌗 Maven / Gradle</h5><ul><li>描述：项目管理工具</li><li>构建</li><li>依赖管理</li><li>插件</li><li>配置</li><li>子父工程</li><li>多模块打包构建</li><li>Nexus 私服搭建</li></ul><h4 id="学习建议-8"><a href="#学习建议-8" class="headerlink" title="学习建议"></a>学习建议</h4><p>由于技术较多，且框架之间存在一定的联系，因此建议大家看同一系列的视频教程（尚硅谷、狂神说等等都可以），以保证学习内容的连续以及体验上的一致。</p><p>学这些技术的时候，<strong>千万不能懒</strong> ！一定要多记笔记，并且跟着老师写代码。原理部分不要太过纠结，先以能跟着敲出代码、写出可运行的项目为主，有些东西做出来也能帮助你更好地理解理论。</p><p>学习顺序挺重要的，建议按我推荐的顺序学，不要一上手就学 Spring Boot。只有先学习下自己整合框架的方法，才能帮你理解 SpringBoot 解决的问题，感受到它的方便和高效。</p><p>Maven / Gradle 当成工具用就好，面试基本不问，跟着框架教程去用就行了，急着找工作的话，先不用花太多时间去深入学。大厂面试问这个的也不多。</p><h4 id="经典面试题-6"><a href="#经典面试题-6" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>Spring 的 IOC 和 AOP 是什么，有哪些优点？</li><li>Spring 框架用到了哪些设计模式？</li><li>介绍 Spring Bean 的生命周期</li><li>MyBatis 如何实现延迟加载？</li><li>介绍 MyBatis 的多级缓存机制</li></ol><h4 id="资源-8"><a href="#资源-8" class="headerlink" title="资源"></a>资源</h4><ul><li>视频（按顺序看）<ul><li>⭐ 尚硅谷最新版 JavaWeb 全套教程：<a href="https://www.bilibili.com/video/BV1Y7411K7zz">https://www.bilibili.com/video/BV1Y7411K7zz</a> （前端部分最好也看下）</li><li>⭐ 尚硅谷 - Spring 5 框架最新版教程（idea版）：<a href="https://www.bilibili.com/video/BV1Vf4y127N5">https://www.bilibili.com/video/BV1Vf4y127N5</a></li><li>⭐ 尚硅谷 - SpringMVC 2021 最新教程：<a href="https://www.bilibili.com/video/BV1Ry4y1574R">https://www.bilibili.com/video/BV1Ry4y1574R</a></li><li>⭐ 尚硅谷 - MyBatis 实战教程全套完整版：<a href="https://www.bilibili.com/video/BV1mW411M737">https://www.bilibili.com/video/BV1mW411M737</a></li><li>⭐ 尚硅谷 - MyBatisPlus 教程：<a href="https://www.bilibili.com/video/BV1Ds411E76Y">https://www.bilibili.com/video/BV1Ds411E76Y</a></li><li>Maven 零基础入门教程：<a href="https://www.bilibili.com/video/BV1TW411g7hP">https://www.bilibili.com/video/BV1TW411g7hP</a> （搞不懂 Maven 可以看看）</li><li>⭐ 雷丰阳 2021 版 SpringBoot2 零基础入门：<a href="https://www.bilibili.com/video/BV19K4y1L7MT">https://www.bilibili.com/video/BV19K4y1L7MT</a></li><li>尚硅谷 - SpringSecurity 框架教程：<a href="https://www.bilibili.com/video/BV15a411A7kP">https://www.bilibili.com/video/BV15a411A7kP</a></li></ul></li></ul><h3 id="🌘-开发规范（3-天）"><a href="#🌘-开发规范（3-天）" class="headerlink" title="🌘 开发规范（3 天）"></a>🌘 开发规范（3 天）</h3><p>开发不规范，同事两行泪。</p><p>开发规范是团队开发中必须遵守的，有利于提高项目的开发效率、降低维护成本。</p><h4 id="知识-8"><a href="#知识-8" class="headerlink" title="知识"></a>知识</h4><ul><li>代码规范<ul><li>代码风格</li><li>命名</li><li>其他规则</li></ul></li><li>代码校验（CheckStyle）</li><li>提交规范</li></ul><h4 id="学习建议-9"><a href="#学习建议-9" class="headerlink" title="学习建议"></a>学习建议</h4><p>有时间的话，简单过一遍大厂团队的代码规范手册就好了，以后做项目的时候能想起来的话就去使用，或者从书中、网上查规范文档，再去遵守。</p><p>项目做得多了，自然会养成好的习惯，不用刻意去记（毕竟每个团队规范也不完全相同，背了也没用）。也可以直接利用开发工具自带的一些代码检查插件，帮忙养成好的编码习惯。</p><h4 id="资源-9"><a href="#资源-9" class="headerlink" title="资源"></a>资源</h4><ul><li>书籍<ul><li>⭐ 阿里巴巴 Java 开发手册：<a href="https://developer.aliyun.com/graph/java">https://developer.aliyun.com/graph/java</a> （搜索《Java开发手册》）</li></ul></li><li>视频<ul><li>华山版《Java开发手册》独家讲解：<a href="https://developer.aliyun.com/live/1201">https://developer.aliyun.com/live/1201</a></li></ul></li><li>文档<ul><li>Google Java Style Guide：<a href="https://google.github.io/styleguide/javaguide.html">https://google.github.io/styleguide/javaguide.html</a> （谷歌 Java 代码规范）</li></ul></li></ul><h3 id="🌕-Git（3-天）"><a href="#🌕-Git（3-天）" class="headerlink" title="🌕 Git（3 天）"></a>🌕 Git（3 天）</h3><p>此前大家可能听说过 GitHub，一流的代码开源托管平台。</p><p>Git 和它可不一样，是一个版本控制工具，可以更好地管理和共享项目代码，比如把自己的代码传到 GitHub 上、或者从远程下载。</p><p>无论自己做项目、还是团队开发，Git 都是现在不可或缺的神器。</p><h4 id="知识-9"><a href="#知识-9" class="headerlink" title="知识"></a>知识</h4><ul><li>区分 Git 和 GitHub</li><li>工作区</li><li>分支</li><li>代码提交、推送、拉取、回退、重置</li><li>分支操作</li><li>代码合并、解决冲突</li><li>标签</li><li>cherry-pick</li><li>Git Flow</li><li>相关技术：SVN（比较老）</li></ul><h4 id="学习建议-10"><a href="#学习建议-10" class="headerlink" title="学习建议"></a>学习建议</h4><p>每个命令跟着敲一遍，有个大致的印象，会用即可。</p><p>建议平时大家可以多把自己的代码使用 Git 命令上传到 GitHub 上，用的多了自然就熟悉了。</p><h4 id="经典面试题-7"><a href="#经典面试题-7" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>如何解决提交冲突？</li><li>提交不小心出现误操作，如何撤销？</li><li>什么是 Git Flow，它有什么好处？</li></ol><h4 id="资源-10"><a href="#资源-10" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐【尚硅谷】5h打通Git全套教程丨2021最新IDEA版 <a href="https://www.bilibili.com/video/BV1vy4y1s7k6">https://www.bilibili.com/video/BV1vy4y1s7k6</a></li></ul></li><li>书籍<ul><li>猴子都能懂的 Git 入门 <a href="https://backlog.com/git-tutorial/cn/">https://backlog.com/git-tutorial/cn/</a></li><li>⭐ GitHub 漫游指南 <a href="https://github.phodal.com/">https://github.phodal.com/</a></li></ul></li><li>文档<ul><li>GitHub 官方文档：<a href="https://docs.github.com/cn">https://docs.github.com/cn</a></li></ul></li><li>游戏<ul><li>Learning Git Branching：<a href="https://learngitbranching.js.org/?locale=zh_CN">https://learngitbranching.js.org/?locale=zh_CN</a></li></ul></li></ul><h3 id="🌖-Linux（10-天）"><a href="#🌖-Linux（10-天）" class="headerlink" title="🌖 Linux（10 天）"></a>🌖 Linux（10 天）</h3><p>企业中的很多前后台项目都是部署在 Linux 服务器上的，因此很有必要熟悉 Linux 的操作和脚本的编写。</p><p>后面学微服务、学架构都是在多台服务器操作，如果你不熟悉 Linux，会有点吃力。</p><h4 id="知识-10"><a href="#知识-10" class="headerlink" title="知识"></a>知识</h4><ul><li>Linux 系统安装</li><li>环境变量</li><li>文件管理</li><li>用户管理</li><li>内存管理</li><li>磁盘管理</li><li>进程管理</li><li>网络管理</li><li>软件包管理</li><li>服务管理</li><li>日志管理</li><li>Linux 内核</li><li><strong>常用命令</strong></li><li><strong>常用环境搭建</strong></li><li><strong>Shell 脚本编程</strong></li><li><strong>VIM 的使用</strong></li></ul><h4 id="学习建议-11"><a href="#学习建议-11" class="headerlink" title="学习建议"></a>学习建议</h4><p>多动手实践，建议自己购买一台云服务器，并且在本地搭建 Linux 虚拟机环境。</p><p>一定要自己从 0 开始手敲命令安装软件、部署服务，熟悉整个项目的上线流程。</p><p>每个命令至少要跟着敲一遍，了解它们的作用，并通过自然地练习，熟悉常用的 Linux 命令。</p><p>记不住没关系，用文档查就行了。</p><p>先会用，再理解。一般面试问的 Linux 题目也不会很难，面试前去背一下八股文就没什么问题，感兴趣的话可以去看看 Linux 内核设计。</p><h4 id="经典面试题-8"><a href="#经典面试题-8" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>如何查看某个进程的运行状态？</li><li>如何在 Linux 上查看 2 G 的大文件？</li><li>Linux 软链接和硬链接的区别</li></ol><h4 id="资源-11"><a href="#资源-11" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 2021 韩顺平 一周学会Linux <a href="https://www.bilibili.com/video/BV1Sv411r7vd">https://www.bilibili.com/video/BV1Sv411r7vd</a> （基于 CentOS 7.6 版本较新）</li></ul></li><li>书籍<ul><li>《鸟哥的 Linux 私房菜 —— 基础篇》<a href="http://cn.linux.vbird.org/linux_basic/linux_basic.php">http://cn.linux.vbird.org/linux_basic/linux_basic.php</a> （经典）</li></ul></li><li>文档<ul><li>Linux 工具快速教程：<a href="https://linuxtools-rst.readthedocs.io/">https://linuxtools-rst.readthedocs.io</a> （基础、工具进阶、工具参考）</li></ul></li><li>实战<ul><li>⭐ 蓝桥云课 Linux 基础入门：<a href="https://www.lanqiao.cn/courses/1">https://www.lanqiao.cn/courses/1</a></li><li>腾讯云动手实验室：<a href="https://cloud.tencent.com/developer/labs">https://cloud.tencent.com/developer/labs</a></li><li>阿里云体验实验室：<a href="https://developer.aliyun.com/adc/labs/">https://developer.aliyun.com/adc/labs/</a></li><li>阿里云知行实验室：<a href="https://start.aliyun.com/">https://start.aliyun.com/</a></li><li>华为云沙箱实验室：<a href="https://lab.huaweicloud.com/">https://lab.huaweicloud.com/</a></li></ul></li><li>社区<ul><li>Linux 中国：<a href="https://linux.cn/">https://linux.cn/</a></li></ul></li><li>工具<ul><li>⭐ Linux 命令搜索：<a href="https://wangchujiang.com/linux-command">https://wangchujiang.com/linux-command</a></li><li>Linux 命令大全手册：<a href="https://www.linuxcool.com/">https://www.linuxcool.com/</a></li><li>Linux 命令示例：<a href="http://linux-commands-examples.com/">http://linux-commands-examples.com/</a></li><li>宝塔 Linux 面板：<a href="https://www.bt.cn/">https://www.bt.cn/</a></li></ul></li></ul><h3 id="🌘-前端基础（14-天）"><a href="#🌘-前端基础（14-天）" class="headerlink" title="🌘 前端基础（14 天）"></a>🌘 前端基础（14 天）</h3><p>虽然 Java 程序员面试时基本不会出现前端相关问题，但是在企业中，往往需要前后端程序员配合完成工作。会一些前端，不仅可以提高你们的协作效率，还能提高自己对整个项目的了解和掌控力，甚至能独立开发出一个完整项目！这点也是能给面试加分的。</p><h4 id="知识-11"><a href="#知识-11" class="headerlink" title="知识"></a>知识</h4><ul><li>HTML</li><li>CSS</li><li>JavaScript<ul><li>Ajax</li></ul></li><li>Vue</li></ul><h4 id="学习建议-12"><a href="#学习建议-12" class="headerlink" title="学习建议"></a>学习建议</h4><p>不需要学习太多的前端技术，熟悉下基础的前端三件套，了解前端是如何向后端发送请求来做数据交互的一般就够了。有时间的话可以学下 Vue ，是比较容易上手的主流前端开发框架，Vue + SpringBoot 还是很香的。</p><h4 id="资源-12"><a href="#资源-12" class="headerlink" title="资源"></a>资源</h4><p>参见鱼皮原创的前端学习路线：<a href="https://mp.weixin.qq.com/s/HbzLEt6NOP9Is9F3GOnbUQ">https://mp.weixin.qq.com/s/HbzLEt6NOP9Is9F3GOnbUQ</a></p><h3 id="练手项目-1"><a href="#练手项目-1" class="headerlink" title="练手项目"></a>练手项目</h3><blockquote><p>更多请见本路线阶段 5：<a href="https://haiyong.site/post/b4562164.html###项目源码（50 套）">项目源码（50 套）</a> 。</p></blockquote><ul><li>HotelSystem：<a href="https://github.com/misterchaos/HotelSystem">https://github.com/misterchaos/HotelSystem</a> （酒店管理系统 Java,tomcat,mysql,servlet,jsp实现，没有使用任何框架）</li><li>超市管理系统：<a href="https://github.com/zhanglei-workspace/shopping-management-system">https://github.com/zhanglei-workspace/shopping-management-system</a></li><li>Mall4j：<a href="https://github.com/gz-yami/mall4j">https://github.com/gz-yami/mall4j</a> （Spring Boot 电商系统）</li><li>newbee-mall：<a href="https://github.com/newbee-ltd/newbee-mall">https://github.com/newbee-ltd/newbee-mall</a> （基于 Spring Boot 2.X 的全栈电商系统）</li><li>litemall：<a href="https://github.com/linlinjava/litemall">https://github.com/linlinjava/litemall</a> （小商城系统，Spring Boot 后端 + Vue 管理员前端 + 微信小程序用户前端 + Vue 用户移动端）</li><li>forum-java：<a href="https://github.com/Qbian61/forum-java">https://github.com/Qbian61/forum-java</a> （一款用 Java Spring Boot 实现的现代化社区系统）</li></ul><h3 id="尾声-2"><a href="#尾声-2" class="headerlink" title="尾声"></a>尾声</h3><p>学完这个阶段的知识后，一定要再串起来回忆一遍，必须自己独立开发一个 Java Web 项目（量级可以不大，但你学过的技术尽可能地用上），能发布到 Linux 服务器上让其他小伙伴访问就更好了~</p><p>如果你只是对 Java 感兴趣、或者只是想试着自己开发后台，并不是想靠 Java 找工作的话，学到这里就可以了。可以把更多时间投入到你主方向的学习中。</p><p>但如果你是想找 Java 方向的工作，尤其是想进大厂的话，一定要继续努力，用心学习下个阶段的企业开发进阶知识。</p><h2 id="阶段-4：Java-企业开发进阶"><a href="#阶段-4：Java-企业开发进阶" class="headerlink" title="阶段 4：Java 企业开发进阶"></a>阶段 4：Java 企业开发进阶</h2><h3 id="目标-3"><a href="#目标-3" class="headerlink" title="目标"></a>目标</h3><p>学习更多企业级开发技术和编程思想，能够结合多种技术，独立开发出架构合理的完整系统，<strong>解决实际问题</strong> 。</p><p>要了解为什么需要这个技术？什么时候用这个技术？某个需求该用哪些技术？</p><p>当然，这个阶段的内容有些过于丰富，不是所有的东西都要学，大家可以根据自己的实际情况（时间），有选择地学习。</p><h3 id="🌘-软件工程"><a href="#🌘-软件工程" class="headerlink" title="🌘 软件工程"></a>🌘 软件工程</h3><p>软件开发和管理的一些概念、原则、技术、方法、工具和经验。</p><h4 id="知识-12"><a href="#知识-12" class="headerlink" title="知识"></a>知识</h4><ul><li>软件的本质</li><li>软件特性</li><li>软件过程</li><li>软件开发原则<ul><li>开闭原则</li><li>里氏替换原则</li><li>依赖倒置原则</li><li>单一职责原则</li><li>接口隔离原则</li><li>迪米特法则</li></ul></li><li>软件过程模型</li><li>敏捷开发</li><li>软件开发模型</li><li>需求建模</li><li>软件设计</li><li>UML</li><li>体系结构设计</li><li>设计模式</li><li>软件质量管理</li><li>评审</li><li>软件质量保证</li><li>软件测试<ul><li>单元测试</li><li>集成测试</li><li>系统测试</li><li>压力测试</li><li>部署测试</li></ul></li><li>软件配置管理</li><li>软件项目管理</li><li>软件项目估算</li><li>项目进度安排</li><li>风险管理</li><li>软件过程改进<ul><li>成熟度模型</li></ul></li></ul><h4 id="学习建议-13"><a href="#学习建议-13" class="headerlink" title="学习建议"></a>学习建议</h4><p>大学软件专业的必修课，偏理论，能学到很多企业软件开发的方法，也是对软件开发同学综合能力的提升，有时间的话可以了解下。但对想要快速找工作的同学来说，忽略即可，面试基本不会问。</p><h4 id="资源-13"><a href="#资源-13" class="headerlink" title="资源"></a>资源</h4><ul><li>书籍<ul><li>《软件工程：实践者的研究方法》：<a href="https://book.douban.com/subject/6047742/">https://book.douban.com/subject/6047742/</a> （经典大黑书，讲的非常全面，但同样完整读下来还是有些难度的）</li><li>《软件开发的 201 个原则》：<a href="https://book.douban.com/subject/35628886/">https://book.douban.com/subject/35628886/</a> （工具书，看一遍挺好的）</li></ul></li><li>视频<ul><li>清华大学软件工程：<a href="https://www.bilibili.com/video/BV1eE411V7Cr">https://www.bilibili.com/video/BV1eE411V7Cr</a></li><li>北京大学软件工程：<a href="https://www.bilibili.com/video/BV1Vt411V72G">https://www.bilibili.com/video/BV1Vt411V72G</a></li><li>大连工业大学软件工程：<a href="https://www.bilibili.com/video/BV1Ns41177VM">https://www.bilibili.com/video/BV1Ns41177VM</a></li></ul></li><li>大学课件<ul><li>浙大计算机软件工程：<a href="https://github.com/QSCTech/zju-icicles">https://github.com/QSCTech/zju-icicles</a></li></ul></li></ul><h3 id="🌖-设计模式（21-天）"><a href="#🌖-设计模式（21-天）" class="headerlink" title="🌖 设计模式（21 天）"></a>🌖 设计模式（21 天）</h3><p>设计模式是软件开发中解决一类问题的通用方法。</p><p>使用设计模式能让你写出更优雅、可维护的代码，也正因如此，很多框架源码都用到了设计模式，你不学很难看懂。</p><h4 id="知识-13"><a href="#知识-13" class="headerlink" title="知识"></a>知识</h4><ul><li>创建型模式：对象实例化的模式，创建型模式用于解耦对象的实例化过程<ul><li>单例模式</li><li>工厂方法模式</li><li>抽象工厂</li><li>建造者模式</li><li>原型模式</li></ul></li><li>结构型模式：把类或对象结合在一起形成一个更大的结构<ul><li>适配器模式</li><li>组合模式</li><li>装饰器模式</li><li>代理模式</li><li>享元模式</li><li>外观模式</li><li>桥接模式</li></ul></li><li>行为型模式：类和对象如何交互，及划分责任和算法<ul><li>迭代器模式</li><li>模板方法模式</li><li>策略模式</li><li>命令模式</li><li>状态模式</li><li>责任链模式</li><li>备忘录模式</li><li>观察者模式</li><li>访问者模式</li><li>中介者模式</li><li>解释器模式</li></ul></li></ul><h4 id="学习建议-14"><a href="#学习建议-14" class="headerlink" title="学习建议"></a>学习建议</h4><p>先理解概念，了解每个设计模式的特点和应用场景，再多加练习，运用到实际项目。</p><h4 id="经典面试题-9"><a href="#经典面试题-9" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>单例模式有哪些实现方式？有哪些优缺点？请手写其中一种</li><li>你用过哪些设计模式，为什么用它？</li></ol><h4 id="资源-14"><a href="#资源-14" class="headerlink" title="资源"></a>资源</h4><ul><li>书籍<ul><li>⭐《图解设计模式》（强烈推荐这本书，正是用 Java 语言实现，图多、有示例代码、有习题和答案，很不错）</li><li>《Head First 设计模式》</li><li>《大话设计模式》</li><li>《设计模式：可复用面向对象软件的基础》（大黑书，有能力的话也可以去读）</li></ul></li><li>视频<ul><li>尚硅谷图解 Java 设计模式：<a href="https://www.bilibili.com/video/BV1G4411c7N4">https://www.bilibili.com/video/BV1G4411c7N4</a></li></ul></li><li>文档<ul><li>菜鸟教程：<a href="https://www.runoob.com/design-pattern/design-pattern-tutorial.html">https://www.runoob.com/design-pattern/design-pattern-tutorial.html</a></li><li>图说设计模式：<a href="https://design-patterns.readthedocs.io/zh_CN/latest/">https://design-patterns.readthedocs.io/zh_CN/latest/</a></li></ul></li></ul><h3 id="🌕-缓存（14-天）"><a href="#🌕-缓存（14-天）" class="headerlink" title="🌕 缓存（14 天）"></a>🌕 缓存（14 天）</h3><p>缓存是高并发系统不可或缺的技术，可以提高系统的性能和并发，因此是后台开发必学的知识点，也是面试重点。</p><h4 id="知识-14"><a href="#知识-14" class="headerlink" title="知识"></a>知识</h4><ul><li>什么是缓存？</li><li>本地缓存<ul><li>Caffeine 库</li></ul></li><li>多级缓存</li><li>Redis 分布式缓存<ul><li>数据类型</li><li>常用操作</li><li>Java 操作 Redis<ul><li>Spring Boot Redis Template</li><li>Redisson</li></ul></li><li>主从模型搭建</li><li>哨兵集群搭建</li><li>日志持久化</li></ul></li><li>缓存（Redis）应用场景<ul><li>数据共享</li><li>单点登录</li><li>计数器</li><li>限流</li><li>点赞</li><li>实时排行榜</li><li>分布式锁</li></ul></li><li>缓存常见问题<ul><li>缓存雪崩</li><li>缓存击穿</li><li>缓存穿透</li><li>缓存更新一致性</li></ul></li><li>相关技术：Memcached、Ehcache</li></ul><h4 id="学习建议-15"><a href="#学习建议-15" class="headerlink" title="学习建议"></a>学习建议</h4><p>学会如何简单地使用缓存并不难，和数据库类似，无非就是调用 API 对数据进行增删改查。</p><p>因此，建议先能够独立使用它，了解缓存的应用场景；再学习如何在 Java 中操作缓存中间件，并尝试和项目相结合，提高系统的性能。</p><p>跟着视频教程实操一遍即可，可以等到面试前再去深入了解原理和高级特性。</p><h4 id="经典面试题-10"><a href="#经典面试题-10" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>Redis 为什么快？</li><li>Redis 有哪些常用的数据结构？</li><li>Redis RDB 和 AOF 持久化的区别，如何选择？</li><li>如何解决缓存击穿、缓存穿透、雪崩问题？</li><li>如何用 Redis 实现点赞功能，怎么设计 Key / Value？</li></ol><h4 id="资源-15"><a href="#资源-15" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 尚硅谷 - 2021 最新 Redis 6 入门到精通教程：<a href="https://www.bilibili.com/video/BV1Rv41177Af">https://www.bilibili.com/video/BV1Rv41177Af</a> （基于 Redis 6 的，推荐）</li></ul></li><li>文档<ul><li>Redis 命令参考：<a href="http://redisdoc.com/">http://redisdoc.com/</a></li><li>Redis 面试题整理：<a href="https://github.com/lokles/Web-Development-Interview-With-Java/blob/main/Redis问题.md">https://github.com/lokles/Web-Development-Interview-With-Java/blob/main/Redis%E9%97%AE%E9%A2%98.md</a></li></ul></li><li>书籍<ul><li>《Redis 实战》（经典）</li></ul></li><li>工具<ul><li>⭐ Redis 在线练习：<a href="https://try.redis.io/">https://try.redis.io/</a> （强烈推荐）</li></ul></li></ul><h3 id="🌖-消息队列（14-天）"><a href="#🌖-消息队列（14-天）" class="headerlink" title="🌖 消息队列（14 天）"></a>🌖 消息队列（14 天）</h3><p>消息队列是用于传输和保存消息的容器，也是大型分布式系统中常用的技术，主要解决应用耦合、异步消息、流量削锋等问题。后台开发必学，也是面试重点。</p><h4 id="知识-15"><a href="#知识-15" class="headerlink" title="知识"></a>知识</h4><ul><li>消息队列的作用</li><li>RabbitMQ 消息队列<ul><li>生产消费模型</li><li>交换机模型</li><li>死信队列</li><li>延迟队列</li><li>消息持久化</li><li>Java 操作</li><li>集群搭建</li></ul></li><li>相关技术：Kafka、ActiveMQ、TubeMQ、RocketMQ</li></ul><h4 id="学习建议-16"><a href="#学习建议-16" class="headerlink" title="学习建议"></a>学习建议</h4><p>和缓存一样，学会如何使用消息队列并不难，无非就是调用 API 去生产、转发和消费消息。</p><p>因此，建议先能够独立使用它，了解消息队列的应用场景；再学习如何在 Java 中操作消息队列中间件，并尝试和项目相结合，感受消息队列带来的好处。</p><p>这里我建议初学者先学习 RabbitMQ，比 Kafka 要好理解一些。跟着视频教程实操一遍即可，可以等到面试前再去深入了解原理和高级特性。</p><h4 id="经典面试题-11"><a href="#经典面试题-11" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>使用消息队列有哪些优缺点？</li><li>如何保证消息消费的幂等性？</li><li>消息队列有哪些路由模型？</li><li>你是否用过消息队列，解决过什么问题？</li></ol><h4 id="资源-16"><a href="#资源-16" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 尚硅谷 - 2021 最新 RabbitMQ 教程：<a href="https://www.bilibili.com/video/BV1cb4y1o7zz">https://www.bilibili.com/video/BV1cb4y1o7zz</a> （很新很全面）</li></ul></li><li>文档<ul><li>RabbitMQ 中文文档：<a href="http://rabbitmq.mr-ping.com/">http://rabbitmq.mr-ping.com/</a></li></ul></li><li>书籍<ul><li>《RabbitMQ 实战：高效部署分布式消息队列》（经典）</li></ul></li><li>工具<ul><li>⭐ RabbitMQ 在线模拟器：<a href="http://tryrabbitmq.com/">http://tryrabbitmq.com/</a></li></ul></li></ul><h3 id="🌖-Nginx（14-天）"><a href="#🌖-Nginx（14-天）" class="headerlink" title="🌖 Nginx（14 天）"></a>🌖 Nginx（14 天）</h3><p>Nginx 是主流的、开源的、高性能的 HTTP 和反向代理 web 服务器，可以用于挂载网站、请求转发、负载均衡、网关路由等。前后端开发同学都需要学习，在后端开发的面试中有时会考到。</p><h4 id="知识-16"><a href="#知识-16" class="headerlink" title="知识"></a>知识</h4><ul><li>Nginx 作用</li><li>正向代理</li><li>反向代理（负载均衡）</li><li>常用命令</li><li>配置</li><li>动静分离（网站部署）</li><li>集群搭建</li><li>相关技术：HAProxy、Apache</li></ul><h4 id="学习建议-17"><a href="#学习建议-17" class="headerlink" title="学习建议"></a>学习建议</h4><p>Nginx 的基本使用非常简单，甚至不需要看任何的视频，跟着一篇文章就能够用它来提供网站访问能力、实现反向代理。</p><p>但是在企业中，Nginx 的使用往往没那么简单，作为负载均衡、请求转发的重要组件，往往需要针对实际场景去写一些特定的配置。因此建议有时间的话，实践下 Nginx 的配置方法，了解 Nginx 基本的设计思想，对今后自己设计系统时也有帮助。</p><h4 id="经典面试题-12"><a href="#经典面试题-12" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>Nginx 有哪些作用？</li><li>Nginx 为什么支持高并发？</li><li>Nginx 有哪些负载均衡策略？</li><li>什么是 Nginx 惊群问题，如何解决它？</li></ol><h4 id="资源-17"><a href="#资源-17" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 尚硅谷 - Nginx 教程由浅入深：<a href="https://www.bilibili.com/video/BV1zJ411w7SV">https://www.bilibili.com/video/BV1zJ411w7SV</a> （讲的比较全面）</li><li>⭐ Nginx 鱼皮 - 手把手带你从0搭建个人网站：<a href="https://www.bilibili.com/video/BV1rU4y1J785/">https://www.bilibili.com/video/BV1rU4y1J785/</a> （简单演示 Nginx 部署网站）</li></ul></li><li>文档<ul><li>Nginx 中文文档：<a href="https://www.nginx.cn/doc/index.html">https://www.nginx.cn/doc/index.html</a></li></ul></li><li>工具<ul><li>Nginx 配置在线生成：<a href="https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhCN">https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhCN</a></li></ul></li></ul><h3 id="🌗-Netty-网络编程（21-天）"><a href="#🌗-Netty-网络编程（21-天）" class="headerlink" title="🌗 Netty 网络编程（21 天）"></a>🌗 Netty 网络编程（21 天）</h3><p>开源的 Java 网络编程框架，用于开发高性能（事件驱动、异步非阻塞）、高可靠的网络服务器和客户端程序。</p><p>很多网络框架和服务器程序都用到了 Netty 作为底层，学好 Netty 不仅可以让我们自己实现高性能服务器，也能更好地理解其他的框架应用、阅读源码。</p><h4 id="知识-17"><a href="#知识-17" class="headerlink" title="知识"></a>知识</h4><ul><li>IO 模型（BIO / NIO）</li><li>Channel</li><li>Buffer</li><li>Seletor</li><li>Netty 模型</li><li>WebSocket 编程（动手做个聊天室）</li><li>相关技术：Vertx（中文文档：<a href="http://vertxchina.github.io/vertx-translation-chinese/">http://vertxchina.github.io/vertx-translation-chinese/</a> ，比 Netty 简单多了，实在看不懂 Netty 也可以学习下这个）</li></ul><h4 id="学习建议-18"><a href="#学习建议-18" class="headerlink" title="学习建议"></a>学习建议</h4><p>不同于之前学的 SSM 框架，Netty 还是需要一定学习成本的，一方面是国内资源太缺乏，另一方面很多重要的概念（比如 NIO）还是要多动手写代码调试才能理解。</p><p>还是建议先从视频入门，并且不建议在 Netty 上花太多时间，面试的时候一般也就考察一些 Netty 背后的思想（比如 NIO）而非框架本身的语法细节。</p><h4 id="经典面试题-13"><a href="#经典面试题-13" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>Netty 有哪些优点？</li><li>什么是 NIO？</li><li>介绍 Netty 的零拷贝机制</li></ol><h4 id="资源-18"><a href="#资源-18" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 尚硅谷Netty教程：<a href="https://www.bilibili.com/video/BV1DJ411m7NR">https://www.bilibili.com/video/BV1DJ411m7NR</a></li><li>Netty 技术演讲（中文字幕版）：<a href="https://www.youtube.com/watch?v=I8yy2Cy7dDI">https://www.youtube.com/watch?v=I8yy2Cy7dDI</a></li></ul></li><li>文档<ul><li>Netty 4 用户指南：<a href="https://www.w3cschool.cn/netty_4_user_guide/">https://www.w3cschool.cn/netty_4_user_guide/</a></li></ul></li><li>书籍<ul><li>《Netty 实战》</li></ul></li></ul><h3 id="🌖-微服务（60-天）"><a href="#🌖-微服务（60-天）" class="headerlink" title="🌖 微服务（60 天）"></a>🌖 微服务（60 天）</h3><p>随着互联网的发展，项目越来越复杂，单机且庞大的巨石项目已无法满足开发、运维、并发、可靠性等需求。</p><p>因此，后台架构不断演进，可以将庞大的项目拆分成一个个职责明确、功能独立的细小模块，模块可以部署在多台服务器上，相互配合协作，提供完整的系统能力。</p><p>换言之，想做大型项目，这块儿一定要好好学！</p><h4 id="知识-18"><a href="#知识-18" class="headerlink" title="知识"></a>知识</h4><h5 id="Dubbo"><a href="#Dubbo" class="headerlink" title="Dubbo"></a>Dubbo</h5><ul><li>架构演进</li><li>RPC</li><li>Zookeeper</li><li>服务提供者</li><li>服务消费者</li><li>项目搭建</li><li>相关技术：DubboX（对 Dubbo 的扩展）</li></ul><h5 id="🌖-微服务"><a href="#🌖-微服务" class="headerlink" title="🌖 微服务"></a>🌖 微服务</h5><ul><li>微服务概念</li><li>Spring Cloud 框架<ul><li>子父工程</li><li>服务注册与发现</li><li>注册中心 Eureka、Zookeeper、Consul</li><li>Ribbon 负载均衡</li><li>Feign 服务调用</li><li>Hystrix 服务限流、降级、熔断</li><li>Resilience4j 服务容错</li><li>Gateway（Zuul）微服务网关</li><li>Config 分布式配置中心</li><li>分布式服务总线</li><li>Sleuth + Zipkin 分布式链路追踪</li></ul></li><li>Spring Cloud Alibaba<ul><li>Nacos 注册、配置中心</li><li>OpenFeign 服务调用</li><li>Sentinel 流控</li><li>Seata 分布式事务</li></ul></li></ul><h5 id="接口管理"><a href="#接口管理" class="headerlink" title="接口管理"></a>接口管理</h5><ul><li>Swagger 接口文档</li><li>Postman 接口测试</li><li>相关技术：YApi、ShowDoc</li></ul><h4 id="学习建议-19"><a href="#学习建议-19" class="headerlink" title="学习建议"></a>学习建议</h4><p>时间不急的话，建议先从 Dubbo 学起，对分布式、RPC、微服务有些基本的了解，再去食用 Spring Cloud 全家桶会更香。学完 Spring Cloud 全家桶后，再去学 Spring Cloud Alibaba 就很简单了。</p><p>这部分内容的学习，原理 + 实践都很重要，也不要被各种高大上的词汇唬住了，都是上层（应用层）的东西，基本没有什么算法，跟着视频教程学，其实还是很好理解的。</p><p>分布式相关知识非常多，但这里不用刻意去背，先通过视频教程实战使用一些微服务框架，也能对其中的概念有基本的了解。</p><p>大厂面试的时候很少问 Spring Cloud 框架的细节，更多的是微服务以及各组件的一些思想，比如网关的好处、消息总线的好处等。</p><h4 id="经典面试题-14"><a href="#经典面试题-14" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>什么是微服务，有哪些优缺点？</li><li>什么是注册中心，能解决什么问题？</li></ol><h4 id="资源-19"><a href="#资源-19" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 尚硅谷 Dubbo 教程：<a href="https://www.bilibili.com/video/BV1ns411c7jV">https://www.bilibili.com/video/BV1ns411c7jV</a></li><li>⭐ 尚硅谷 SpringCloud（H版&amp;alibaba）框架开发教程（微服务分布式架构）：<a href="https://www.bilibili.com/video/BV18E411x7eT">https://www.bilibili.com/video/BV18E411x7eT</a> （把国外的 Spring Cloud 和国内的 Spring Cloud Alibaba 结合在一起对比着去讲，主流技术栈、知识点都讲到了，真心不错！）</li></ul></li><li>文档<ul><li>Apache Dubbo 官方文档：<a href="https://dubbo.apache.org/zh/">https://dubbo.apache.org/zh/</a></li><li>Spring Cloud Alibaba 官方文档：<a href="https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md">https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md</a></li><li>⭐ Swagger 教学文档：<a href="https://doc.xiaominfo.com/">https://doc.xiaominfo.com/</a> （跟着快速开始直接用就好了）</li></ul></li></ul><h3 id="🌖-容器（7-天）"><a href="#🌖-容器（7-天）" class="headerlink" title="🌖 容器（7 天）"></a>🌖 容器（7 天）</h3><p>将应用和环境进行封装，相互隔离、独立部署、便于移植，提高安全性、提高开发和维护效率。</p><p>便于实现微服务、持续集成和交付。</p><h4 id="知识-19"><a href="#知识-19" class="headerlink" title="知识"></a>知识</h4><ul><li>🌖 Docker<ul><li>容器概念</li><li>镜像</li><li>部署服务</li><li>Dockerfile</li><li>Docker Compose</li><li>Docker Machine</li><li>Docker Swarm</li><li>多阶段构建</li></ul></li><li>🌘 K8S（Kubernetes）<ul><li>K8S 架构</li><li>工作负载<ul><li>资源类型</li><li>Pod</li><li>Pod 生命周期</li><li>Pod 安全策略</li></ul></li><li>K8S 组件</li><li>K8S 对象</li><li>部署应用</li><li>服务<ul><li>Ingress</li></ul></li><li>Kubectl 命令行</li><li>集群管理</li></ul></li><li>相关技术：Apache Mesos、Mesosphere</li></ul><h4 id="学习建议-20"><a href="#学习建议-20" class="headerlink" title="学习建议"></a>学习建议</h4><p>业务上云是趋势，但是对于开发同学来说，会用 Docker / K8S 部署项目和服务就行。实际工作中，企业一般都有现成的平台直接用，面试考察的也不多，不用花太多时间。</p><h4 id="经典面试题-15"><a href="#经典面试题-15" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>什么是容器？</li><li>使用 Docker 有哪些好处？</li><li>如何快速启动多个 Docker 节点？</li></ol><h4 id="资源-20"><a href="#资源-20" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐【狂神说】Docker 最新超详细版教程通俗易懂：<a href="https://www.bilibili.com/video/BV1og4y1q7M4">https://www.bilibili.com/video/BV1og4y1q7M4</a></li><li>K8S 视频教程：<a href="https://www.bilibili.com/video/BV1K5411N7j8">https://www.bilibili.com/video/BV1K5411N7j8</a></li></ul></li><li>书籍<ul><li>《深入浅出 Docker》：<a href="https://www.zhihu.com/pub/reader/119632192">https://www.zhihu.com/pub/reader/119632192</a></li></ul></li><li>文档<ul><li>Docker — 从入门到实践：<a href="https://vuepress.mirror.docker-practice.com/">https://vuepress.mirror.docker-practice.com/</a></li><li>菜鸟教程 Docker：<a href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></li><li>国外 Docker 官方文档：<a href="https://docs.docker.com/get-started/">https://docs.docker.com/get-started/</a></li></ul></li><li>网站<ul><li>Docker 中文社区：<a href="https://www.docker.org.cn/">https://www.docker.org.cn/</a> （强烈推荐，有很多 Docker 技术文章和学习笔记）</li><li>Docker Blog：<a href="https://www.docker.com/blog/">https://www.docker.com/blog/</a> （国外 Docker 技术博客）</li></ul></li><li>镜像源<ul><li>Docker Hub：<a href="https://hub.docker.com/">https://hub.docker.com</a></li><li>腾讯软件源：<a href="http://mirrors.tencent.com/#/index">http://mirrors.tencent.com/#/index</a></li><li>阿里云 Docker 仓库：<a href="https://cr.console.aliyun.com/">https://cr.console.aliyun.com/</a></li></ul></li></ul><h3 id="🌗-CI-CD（3-天）"><a href="#🌗-CI-CD（3-天）" class="headerlink" title="🌗 CI / CD（3 天）"></a>🌗 CI / CD（3 天）</h3><p>持续集成 / 持续交付，贯穿整个研发到项目上线的过程，提高效率。</p><p>大公司一般都有自己的 CI / CD 平台。</p><h4 id="知识-20"><a href="#知识-20" class="headerlink" title="知识"></a>知识</h4><ul><li>什么是 CI / CD</li><li>CI / CD 有什么好处</li><li>使用任一 CI / CD 平台</li><li>相关技术：Jenkins、GitLab、微信云托管</li></ul><h4 id="学习建议-21"><a href="#学习建议-21" class="headerlink" title="学习建议"></a>学习建议</h4><p>了解它是什么，并且实战使用任一 CI / CD 平台，感受它和传统开发运维到底有什么不同，就足够了。其实很简单，不要花太多时间。</p><p>真正要自己去搭建的时候，跟着官方文档来就行。</p><h4 id="资源-21"><a href="#资源-21" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐【狂神说】CI/CD到底是什么？十分钟理解企业级DevOps：<a href="https://www.bilibili.com/video/BV1zf4y127vu">https://www.bilibili.com/video/BV1zf4y127vu</a> （讲的非常棒！带你快速理解 CI / CD 的作用和部分原理）</li><li>尚硅谷 - Jenkins 持续集成工具教程：<a href="https://www.bilibili.com/video/BV1GW411w7pn">https://www.bilibili.com/video/BV1GW411w7pn</a> （实在要用到 Jenkins 再去学）</li></ul></li><li>文档<ul><li>Jenkins 官方文档：<a href="https://www.jenkins.io/zh/">https://www.jenkins.io/zh/</a> （有很多案例，要用的时候查一下就行了）</li></ul></li><li>实战平台<ul><li>⭐ 微信云托管：<a href="https://cloud.weixin.qq.com/cloudrun">https://cloud.weixin.qq.com/cloudrun</a> （直播演示过，鱼皮后面会给大家出视频教程）</li><li>前端托管 Webify：<a href="https://cloud.tencent.com/product/webify">https://cloud.tencent.com/product/webify</a> （鱼皮给大家出过视频教程的 <a href="https://www.bilibili.com/video/BV11V411p7vf/）">https://www.bilibili.com/video/BV11V411p7vf/）</a></li></ul></li></ul><h3 id="练手项目-2"><a href="#练手项目-2" class="headerlink" title="练手项目"></a>练手项目</h3><blockquote><p>更多请见本路线阶段 5：<a href="https://haiyong.site/post/b4562164.html###项目源码（50 套）">项目源码（50 套）</a> 。</p></blockquote><ul><li>mall-learning：<a href="https://github.com/macrozheng/mall-learningmall">https://github.com/macrozheng/mall-learningmall</a> （学习教程，架构、业务、技术要点全方位解析）</li><li>miaosha：<a href="https://github.com/qiurunze123/miaosha">https://github.com/qiurunze123/miaosha</a> （秒杀系统设计与实现）</li><li>Mall：<a href="https://github.com/macrozheng/mall">https://github.com/macrozheng/mall</a> （包括前台商城系统及后台管理系统，基于 SpringBoot+MyBatis 实现）</li><li>Spring-Cloud-Admin：<a href="https://github.com/wxiaoqi/Spring-Cloud-AdminCloud-Admin">https://github.com/wxiaoqi/Spring-Cloud-AdminCloud-Admin</a> （基于 Spring Cloud 微服务化开发平台，具有统一授权、认证的后台管理系统）</li><li>paascloud-master：<a href="https://github.com/paascloud/paascloud-master">https://github.com/paascloud/paascloud-master</a> （基于 spring cloud + vue + oAuth2.0，前后端分离商城系统）</li><li>mall-swarm：<a href="https://github.com/macrozheng/mall-swarm">https://github.com/macrozheng/mall-swarm</a> （一套微服务商城系统，采用了 Spring Cloud Greenwich、Spring Boot 2、MyBatis、Docker、Elasticsearch 等核心技术，同时提供了基于 Vue 的管理后台方便快速搭建系统）</li><li>SecKill：<a href="https://github.com/hfbin/Seckill">https://github.com/hfbin/Seckill</a> （基于 SpringBoot+Mybatis+Redis+RabbitMQ 秒杀系统）</li><li>jeecg-boot：<a href="https://github.com/zhangdaiscott/jeecg-boot">https://github.com/zhangdaiscott/jeecg-boot</a> （低代码开发平台）</li><li>PassJava-Platform：<a href="https://github.com/Jackson0714/PassJava-Platform">https://github.com/Jackson0714/PassJava-Platform</a> （一款面试刷题的 Spring Cloud 开源系统）</li></ul><h3 id="尾声-3"><a href="#尾声-3" class="headerlink" title="尾声"></a>尾声</h3><p>看到这里，相信你已经感叹：编程语言一辈子学不完了！</p><p>但是，不用担心，通过对这么多知识点的学习，相信你已经有了一定的积累，也不知不觉地锻炼了自主学习能力、资源检索能力、代码阅读能力、问题解决能力，之后的学习会越来越轻松。</p><p>接下来，可以试着用你学到的技术来解决实际的问题，自主从 0 开始做一些项目，保持编程手感。</p><h2 id="阶段-5：项目实战"><a href="#阶段-5：项目实战" class="headerlink" title="阶段 5：项目实战"></a>阶段 5：项目实战</h2><h3 id="目标-4"><a href="#目标-4" class="headerlink" title="目标"></a>目标</h3><p>综合所学技术从 0 到 1 开发和上线一个全面、有特色的、可以写进简历的个人项目。</p><h3 id="学习建议-22"><a href="#学习建议-22" class="headerlink" title="学习建议"></a>学习建议</h3><p>其实在之前的框架学习视频中应该就做过几个项目了，但相对不够完整和体系化。</p><p>有想法的同学可以做任何自己想做的项目，推荐参加一些作品类竞赛，练手、拿奖、收获项目经历一举三得。</p><p>暂时没想法的朋友，建议先跟着专门带做项目的视频教程做 1 - 2 套 Java 完整项目，一定要从 0 到 1 自己手写！</p><p>有能力的朋友也可以试着用 GitHub 上的源码来学习啦~</p><p>做一个完整的项目的确很不容易，建议大家根据自己的 <strong>时间、兴趣</strong> 选择 <strong>较新的</strong>、<strong>有配套源码的</strong> 教程，保持耐心。</p><p>如何选择编程学习资源，可以看下我的原创文章：<a href="https://mp.weixin.qq.com/s/mlMql9RJCd7THt6rpGb8UA">https://mp.weixin.qq.com/s/mlMql9RJCd7THt6rpGb8UA</a></p><p>下面推荐一些优质的、较新的项目实战视频教程 + 50 套项目源码。</p><h3 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h3><ul><li>尚硅谷 - 谷粒学院 - 微服务 + 全栈 - 在线教育实战项目：<a href="https://www.bilibili.com/video/BV1dQ4y1A75e">https://www.bilibili.com/video/BV1dQ4y1A75e</a> （全栈项目，前后端讲得都很全面）</li><li>尚硅谷 - 尚筹网 - Java项目实战开发教程 - SSM 框架 + 微服务架构：<a href="https://www.bilibili.com/video/BV1bE411T7oZ（500">https://www.bilibili.com/video/BV1bE411T7oZ（500</a> 多集，包含完整的用户权限管理，功能丰富、讲得很细致全面）</li><li>黑马 - 24 小时搞定 Java 毕设电商项目：<a href="https://www.bilibili.com/video/BV13f4y1r7fS">https://www.bilibili.com/video/BV13f4y1r7fS</a></li><li>黑马程序员 Java 项目《传智健康》，超完整的企业级医疗行业项目：<a href="https://www.bilibili.com/video/BV1Bo4y117zV">https://www.bilibili.com/video/BV1Bo4y117zV</a></li><li>黑马程序员 Java 项目《万信金融》企业级开发实战，互联网金融行业解决方案：<a href="https://www.bilibili.com/video/BV1Ub4y1f7rk">https://www.bilibili.com/video/BV1Ub4y1f7rk</a></li><li>黑马程序员 Java 项目 SaaS 移动办公完整版《iHRM 人力资源管理系统》，跨行业 SaaS 办公整合性解决方案：<a href="https://www.bilibili.com/video/BV18A411L7UX">https://www.bilibili.com/video/BV18A411L7UX</a></li><li>黑马程序员 Java 大型分布式微服务闪聚支付项目，Java 移动支付全生态系统：<a href="https://www.bilibili.com/video/BV17v411V79c">https://www.bilibili.com/video/BV17v411V79c</a></li><li>黑马程序员 Java 项目《好客租房》：<a href="https://www.bilibili.com/video/BV1sZ4y1F7PD">https://www.bilibili.com/video/BV1sZ4y1F7PD</a></li></ul><h3 id="常用类库"><a href="#常用类库" class="headerlink" title="常用类库"></a>常用类库</h3><h5 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h5><ul><li>Guava：谷歌开发的 Java 工具库（<a href="https://github.com/google/guava）">https://github.com/google/guava）</a></li><li>Apache Commons：各类工具库，比如 commons-lang、commons-io、commons-collections 等（<a href="https://github.com/apache/commons-lang）">https://github.com/apache/commons-lang）</a></li><li>Hutool：Java 工具集库（<a href="https://github.com/looly/hutool）">https://github.com/looly/hutool）</a></li><li>Lombok：Java 增强库（<a href="https://github.com/projectlombok/lombok）">https://github.com/projectlombok/lombok）</a></li><li>Apache HttpComponents Client：HTTP 客户端库（<a href="https://github.com/apache/httpcomponents-client）">https://github.com/apache/httpcomponents-client）</a></li><li>OkHttp：适用于 JVM、Android 等平台的 Http 客户端（<a href="https://github.com/square/okhttp）">https://github.com/square/okhttp）</a></li><li>Gson：谷歌的 JSON 处理库（<a href="https://github.com/google/gson）">https://github.com/google/gson）</a></li><li>Jcommander：Java 命令行参数解析框架（<a href="https://github.com/cbeust/jcommander）">https://github.com/cbeust/jcommander）</a></li><li>Apache PDFBox：PDF 操作库（<a href="https://github.com/apache/pdfbox）">https://github.com/apache/pdfbox）</a></li><li>EasyExcel：阿里的 Excel 处理库（<a href="https://github.com/alibaba/easyexcel）">https://github.com/alibaba/easyexcel）</a></li><li>Apache POI：表格文件处理库（<a href="https://github.com/apache/poi）">https://github.com/apache/poi）</a></li></ul><h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><ul><li>JUnit：Java 测试框架（<a href="https://github.com/junit-team/junit4）">https://github.com/junit-team/junit4）</a></li><li>Mockito：Java 单元测试 Mock 框架（<a href="https://github.com/mockito/mockito）">https://github.com/mockito/mockito）</a></li><li>Selenium：浏览器自动化框架（<a href="https://github.com/SeleniumHQ/selenium）">https://github.com/SeleniumHQ/selenium）</a></li><li>htmlunit：Java 模拟浏览器（<a href="https://github.com/HtmlUnit/htmlunit）">https://github.com/HtmlUnit/htmlunit）</a></li><li>TestNG：Java 测试框架（<a href="https://github.com/cbeust/testng）">https://github.com/cbeust/testng）</a></li><li>Jacoco：Java 代码覆盖度库（<a href="https://github.com/jacoco/jacoco）">https://github.com/jacoco/jacoco）</a></li></ul><h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><ul><li>cglib：字节码生成库（<a href="https://github.com/cglib/cglib）">https://github.com/cglib/cglib）</a></li><li>Arthas：Java 诊断工具（<a href="https://github.com/alibaba/arthas）">https://github.com/alibaba/arthas）</a></li><li>config：针对 JVM 的配置库（<a href="https://github.com/lightbend/config）">https://github.com/lightbend/config）</a></li><li>Quasar：Java 纤程库（<a href="https://github.com/puniverse/quasar）">https://github.com/puniverse/quasar）</a></li><li>drools：Java 规则引擎（<a href="https://github.com/kiegroup/drools）">https://github.com/kiegroup/drools）</a></li><li>Caffeine：Java 高性能缓存库（<a href="https://github.com/ben-manes/caffeine）">https://github.com/ben-manes/caffeine）</a></li><li>Disruptor：高性能线程间消息传递库（<a href="https://github.com/LMAX-Exchange/disruptor）">https://github.com/LMAX-Exchange/disruptor）</a></li><li>Knife4j：Swagger 文档增强（<a href="https://doc.xiaominfo.com/）">https://doc.xiaominfo.com/）</a></li><li>Thumbnailator：Java 缩略图生成库（<a href="https://github.com/coobird/thumbnailator）">https://github.com/coobird/thumbnailator）</a></li><li>Logback：Java 日志库（<a href="https://github.com/qos-ch/logback）">https://github.com/qos-ch/logback）</a></li><li>Apache Camel：消息传输集成框架（<a href="https://github.com/apache/camel）">https://github.com/apache/camel）</a></li><li>Quartz：定时任务调度库（<a href="https://github.com/quartz-scheduler/quartz）">https://github.com/quartz-scheduler/quartz）</a></li><li>Apache Mahout：机器学习库（<a href="https://github.com/apache/mahout）">https://github.com/apache/mahout）</a></li><li>Apache OpenNLP：NLP 工具库（<a href="https://github.com/apache/opennlp）">https://github.com/apache/opennlp）</a></li><li>RxJava：JVM 反应式编程框架（<a href="https://github.com/ReactiveX/RxJava）">https://github.com/ReactiveX/RxJava）</a></li><li>JProfiler：性能分析库（<a href="https://www.ej-technologies.com/products/jprofiler/overview.html）">https://www.ej-technologies.com/products/jprofiler/overview.html）</a></li><li>jsoup：HTML 文档解析库（<a href="https://jsoup.org/）">https://jsoup.org/）</a></li><li>webmagic：Java 爬虫框架（<a href="https://github.com/code4craft/webmagic/）">https://github.com/code4craft/webmagic/）</a></li></ul><h3 id="IDEA-插件"><a href="#IDEA-插件" class="headerlink" title="IDEA 插件"></a>IDEA 插件</h3><p>综合实用性、易用性、流行度、维护频率，精选了以下插件，简单分类为天地二品。</p><h4 id="精选地品插件"><a href="#精选地品插件" class="headerlink" title="精选地品插件"></a>精选地品插件</h4><p>简单好用、增强功能</p><ul><li>Background Image Plus +<ul><li>描述：给编辑器设置背景图片（小姐姐图片）</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/11247-background-image-plus-">https://plugins.jetbrains.com/plugin/11247-background-image-plus-</a></li></ul></li><li>Chinese Language Pack<ul><li>描述：中文支持</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/13710-chinese-simplified-language-pack----">https://plugins.jetbrains.com/plugin/13710-chinese-simplified-language-pack----</a></li></ul></li><li>Translation<ul><li>描述：翻译插件，鼠标选中文本，点击右键即可自动翻译成多国语言。</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8579-translation/">https://plugins.jetbrains.com/plugin/8579-translation/</a></li></ul></li><li>Key Promoter X<ul><li>描述：快捷键提示插件。当你执行鼠标操作时，如果该操作可被快捷键代替，会给出提示，帮助你自然形成使用快捷键的习惯，告别死记硬背。</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9792-key-promoter-x/">https://plugins.jetbrains.com/plugin/9792-key-promoter-x/</a></li></ul></li><li>Rainbow Brackets<ul><li>描述：给括号添加彩虹色，使开发者通过颜色区分括号嵌套层级，便于阅读</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10080-rainbow-brackets/">https://plugins.jetbrains.com/plugin/10080-rainbow-brackets/</a></li></ul></li><li>CodeGlance<ul><li>描述：在编辑器右侧生成代码小地图，可以拖拽小地图光标快速定位代码，阅读行数很多的代码文件时非常实用。</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7275-codeglance/">https://plugins.jetbrains.com/plugin/7275-codeglance/</a></li></ul></li><li>WakaTime<ul><li>描述：代码统计和跟踪插件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7425-wakatime">https://plugins.jetbrains.com/plugin/7425-wakatime</a></li></ul></li><li>Statistic<ul><li>描述：代码统计</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/4509-statistic">https://plugins.jetbrains.com/plugin/4509-statistic</a></li></ul></li></ul><h4 id="精选天品插件"><a href="#精选天品插件" class="headerlink" title="精选天品插件"></a>精选天品插件</h4><p>提高开发效率和代码质量</p><ul><li>String Manipulation<ul><li>描述：字符串快捷处理</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/2162-string-manipulation">https://plugins.jetbrains.com/plugin/2162-string-manipulation</a></li></ul></li><li>Tabnine AI Code Completion<ul><li>描述：使用 AI 去自动提示和补全代码，比 IDEA 自带的代码补全更加智能化</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/12798-tabnine-ai-code-completion-js-java-python-ts-rust-go-php--more">https://plugins.jetbrains.com/plugin/12798-tabnine-ai-code-completion-js-java-python-ts-rust-go-php--more</a></li></ul></li><li>GsonFormatPlus<ul><li>描述：根据 json 生成对象</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/14949-gsonformatplus">https://plugins.jetbrains.com/plugin/14949-gsonformatplus</a></li></ul></li><li>JUnitGenerator V2.0<ul><li>描述：自动生成单元测试</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/3064-junitgenerator-v2-0">https://plugins.jetbrains.com/plugin/3064-junitgenerator-v2-0</a></li></ul></li><li>RestfulTool<ul><li>描述：辅助 web 开发的工具集</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/14280-restfultool">https://plugins.jetbrains.com/plugin/14280-restfultool</a></li></ul></li><li>SequenceDiagram<ul><li>描述：自动生成方法调用时序图</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8286-sequencediagram">https://plugins.jetbrains.com/plugin/8286-sequencediagram</a></li></ul></li><li>CheckStyle-IDEA<ul><li>描述：自动检查 Java 代码规范</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/1065-checkstyle-idea">https://plugins.jetbrains.com/plugin/1065-checkstyle-idea</a></li></ul></li><li>Alibaba Java Coding Guidelines<ul><li>描述：代码规范检查插件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10046-alibaba-java-coding-guidelines">https://plugins.jetbrains.com/plugin/10046-alibaba-java-coding-guidelines</a></li></ul></li><li>SonarLint<ul><li>描述：帮助你发现和修复代码的错误和漏洞</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7973-sonarlint">https://plugins.jetbrains.com/plugin/7973-sonarlint</a></li></ul></li><li>MybatisX<ul><li>描述：MyBatis 增强插件，支持自动生成 entity、mapper、service 等常用操作的代码，优化体验</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10119-mybatisx">https://plugins.jetbrains.com/plugin/10119-mybatisx</a></li></ul></li></ul><h4 id="美化类"><a href="#美化类" class="headerlink" title="美化类"></a>美化类</h4><ul><li>Extra Icons<ul><li>描述：图标美化插件，支持更多文件类型</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/11058-extra-icons">https://plugins.jetbrains.com/plugin/11058-extra-icons</a></li></ul></li><li>Chinese Language Pack<ul><li>描述：中文支持</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/13710-chinese-simplified-language-pack----">https://plugins.jetbrains.com/plugin/13710-chinese-simplified-language-pack----</a></li></ul></li><li>Grep Console<ul><li>描述：自定义设置控制台输出颜色</li><li>官网：<a href="https://plugins.jetbrains.com/idea/plugin/7125-grep-console">https://plugins.jetbrains.com/idea/plugin/7125-grep-console</a></li></ul></li><li>Material Theme UI<ul><li>描述：美观的主题</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8006-material-theme-ui">https://plugins.jetbrains.com/plugin/8006-material-theme-ui</a></li></ul></li><li>Nyan Progress Bar<ul><li>描述：进度条美化</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8575-nyan-progress-bar">https://plugins.jetbrains.com/plugin/8575-nyan-progress-bar</a></li></ul></li><li>activate-power-mode<ul><li>描述：打字特效</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8330-activate-power-mode">https://plugins.jetbrains.com/plugin/8330-activate-power-mode</a></li></ul></li><li>Power Mode II<ul><li>描述：打字特效插件升级版</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8251-power-mode-ii">https://plugins.jetbrains.com/plugin/8251-power-mode-ii</a></li></ul></li><li>Rainbow Brackets<ul><li>描述：给括号添加彩虹色，使开发者通过颜色区分括号嵌套层级，便于阅读</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10080-rainbow-brackets/">https://plugins.jetbrains.com/plugin/10080-rainbow-brackets/</a></li></ul></li><li>Background Image Plus +<ul><li>描述：给编辑器设置背景图片</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/11247-background-image-plus-">https://plugins.jetbrains.com/plugin/11247-background-image-plus-</a></li></ul></li></ul><h4 id="代码生成类"><a href="#代码生成类" class="headerlink" title="代码生成类"></a>代码生成类</h4><ul><li>Codota AI Autocomplete for Java and JavaScript<ul><li>描述：使用 AI 去自动提示和补全代码，比 IDEA 自带的代码补全更加智能化</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7638-codota-ai-autocomplete-for-java-and-javascript">https://plugins.jetbrains.com/plugin/7638-codota-ai-autocomplete-for-java-and-javascript</a></li></ul></li><li>Tabnine AI Code Completion<ul><li>描述：使用 AI 来自动提示和补全代码，比 IDEA 自带的代码补全更加智能化</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/12798-tabnine-ai-code-completion-js-java-python-ts-rust-go-php--more">https://plugins.jetbrains.com/plugin/12798-tabnine-ai-code-completion-js-java-python-ts-rust-go-php--more</a></li></ul></li><li>UUID Generator<ul><li>描述：生成随机的 UUID</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8320-uuid-generator">https://plugins.jetbrains.com/plugin/8320-uuid-generator</a></li></ul></li><li>Randomness<ul><li>描述：生成随机值</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9836-randomness">https://plugins.jetbrains.com/plugin/9836-randomness</a></li></ul></li><li>.ignore<ul><li>描述：生成不同语言的版本控制忽略文件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7495--ignore">https://plugins.jetbrains.com/plugin/7495--ignore</a></li></ul></li><li>Auto filling Java call arguments<ul><li>描述：通过快捷键自动补全函数的调用参数</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8638-auto-filling-java-call-arguments/">https://plugins.jetbrains.com/plugin/8638-auto-filling-java-call-arguments/</a></li></ul></li><li>GenerateAllSetter<ul><li>描述：快速生成调用对象 setter 方法的代码</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9360-generateallsetter">https://plugins.jetbrains.com/plugin/9360-generateallsetter</a></li></ul></li><li>GenerateSerialVersionUID<ul><li>描述：一键为实现 Serializable 接口的类生成 SerialVersionUID</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/185-generateserialversionuid/">https://plugins.jetbrains.com/plugin/185-generateserialversionuid/</a></li></ul></li><li>GsonFormatPlus<ul><li>描述：根据 json 生成对象</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/14949-gsonformatplus">https://plugins.jetbrains.com/plugin/14949-gsonformatplus</a></li></ul></li><li>Lombok<ul><li>描述：配合 Lombok 依赖及注解使用，能够大大减少 Java 对象的代码量。IDEA 已自带，无需安装。</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/6317-lombok/">https://plugins.jetbrains.com/plugin/6317-lombok/</a></li></ul></li><li>Easy Code<ul><li>描述：根据数据库表生成 Java entity、dao、mapper、service、controller 等代码</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10954-easy-code">https://plugins.jetbrains.com/plugin/10954-easy-code</a></li></ul></li><li>Easy Javadoc<ul><li>描述：快速生成 Javadoc 文档</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/12977-easy-javadoc">https://plugins.jetbrains.com/plugin/12977-easy-javadoc</a></li></ul></li><li>JavaDoc<ul><li>描述：生成 Javadoc 文档</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7157-javadoc">https://plugins.jetbrains.com/plugin/7157-javadoc</a></li></ul></li><li>Json2Pojo<ul><li>描述：根据 JSON 生成 POJO，根据 POJO 生成 JSON</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8533-json2pojo">https://plugins.jetbrains.com/plugin/8533-json2pojo</a></li></ul></li><li>JUnitGenerator V2.0<ul><li>描述：自动生成单元测试</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/3064-junitgenerator-v2-0">https://plugins.jetbrains.com/plugin/3064-junitgenerator-v2-0</a></li></ul></li><li>Jindent - Source Code Formatter<ul><li>描述：根据自定义模板来生成 javadoc 注释</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8309-jindent--source-code-formatter">https://plugins.jetbrains.com/plugin/8309-jindent--source-code-formatter</a></li></ul></li><li>MybatisX<ul><li>描述：MyBatis 增强插件，支持自动生成 entity、mapper、service 等常用操作的代码，优化体验</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10119-mybatisx">https://plugins.jetbrains.com/plugin/10119-mybatisx</a></li></ul></li><li>MyBatisCodeHelperPro<ul><li>描述：MyBatis 增强插件，支持自动生成 entity、mapper、service 等常用操作的代码（收费）</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9837-mybatiscodehelperpro">https://plugins.jetbrains.com/plugin/9837-mybatiscodehelperpro</a></li></ul></li></ul><h4 id="功能提效类"><a href="#功能提效类" class="headerlink" title="功能提效类"></a>功能提效类</h4><h5 id="源码阅读"><a href="#源码阅读" class="headerlink" title="源码阅读"></a>源码阅读</h5><ul><li>Call Graph<ul><li>描述：生成调用关系图，便于查看源码</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/12304-call-graph">https://plugins.jetbrains.com/plugin/12304-call-graph</a></li></ul></li><li>Jump to Line<ul><li>描述：支持跳转到任意行进行调试</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/14877-jump-to-line">https://plugins.jetbrains.com/plugin/14877-jump-to-line</a></li></ul></li><li>SequenceDiagram<ul><li>描述：自动生成方法调用时序图</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8286-sequencediagram">https://plugins.jetbrains.com/plugin/8286-sequencediagram</a></li></ul></li><li>jclasslib Bytecode Viewer<ul><li>描述：字节码查看器</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9248-jclasslib-bytecode-viewer">https://plugins.jetbrains.com/plugin/9248-jclasslib-bytecode-viewer</a></li></ul></li><li>BrowseWordAtCaret<ul><li>描述： 快速在相同单词间进行跳转</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/201-browsewordatcaret">https://plugins.jetbrains.com/plugin/201-browsewordatcaret</a></li></ul></li><li>CodeGlance<ul><li>描述：在编辑器右侧生成代码小地图，可以拖拽小地图光标快速定位代码，阅读行数很多的代码文件时非常实用。</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7275-codeglance/">https://plugins.jetbrains.com/plugin/7275-codeglance/</a></li></ul></li></ul><h5 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h5><ul><li>CheckStyle-IDEA<ul><li>描述：自动检查 Java 代码规范</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/1065-checkstyle-idea">https://plugins.jetbrains.com/plugin/1065-checkstyle-idea</a></li></ul></li><li>Alibaba Java Coding Guidelines<ul><li>描述：代码规范检查插件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10046-alibaba-java-coding-guidelines">https://plugins.jetbrains.com/plugin/10046-alibaba-java-coding-guidelines</a></li></ul></li><li>SonarLint<ul><li>描述：帮助你发现和修复代码的错误和漏洞</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7973-sonarlint">https://plugins.jetbrains.com/plugin/7973-sonarlint</a></li></ul></li><li>FindBugs-IDEA<ul><li>描述：帮你找出代码中潜藏的 Bug</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/3847-findbugs-idea">https://plugins.jetbrains.com/plugin/3847-findbugs-idea</a></li></ul></li><li>MetricsReloaded<ul><li>描述：代码复杂度分析</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/93?pr=idea">https://plugins.jetbrains.com/plugin/93?pr=idea</a></li></ul></li></ul><h5 id="格式处理"><a href="#格式处理" class="headerlink" title="格式处理"></a>格式处理</h5><ul><li>CamelCase<ul><li>描述：快速字符串格式转换工具，如驼峰式</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7160-camelcase">https://plugins.jetbrains.com/plugin/7160-camelcase</a></li></ul></li><li>Json Parser<ul><li>描述：验证和格式化 Json 字符串的工具</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10650-json-parser">https://plugins.jetbrains.com/plugin/10650-json-parser</a></li></ul></li><li>Properties to YAML Converter<ul><li>描述：把 Properties 文件的格式转为 YAML 格式</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8000-properties-to-yaml-converter">https://plugins.jetbrains.com/plugin/8000-properties-to-yaml-converter</a></li></ul></li><li>String Manipulation<ul><li>描述：字符串快捷处理</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/2162-string-manipulation">https://plugins.jetbrains.com/plugin/2162-string-manipulation</a></li></ul></li></ul><h5 id="代码统计"><a href="#代码统计" class="headerlink" title="代码统计"></a>代码统计</h5><ul><li>WakaTime<ul><li>描述：代码统计和跟踪插件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7425-wakatime">https://plugins.jetbrains.com/plugin/7425-wakatime</a></li></ul></li><li>Statistic<ul><li>描述：代码统计</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/4509-statistic">https://plugins.jetbrains.com/plugin/4509-statistic</a></li></ul></li></ul><h5 id="代码检索"><a href="#代码检索" class="headerlink" title="代码检索"></a>代码检索</h5><ul><li>OnlineSearch<ul><li>描述：选择文本后支持不同搜索引擎进行搜索</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8298-onlinesearch/">https://plugins.jetbrains.com/plugin/8298-onlinesearch/</a></li></ul></li><li>CodeSearch<ul><li>描述：快捷地打开搜索引擎进行搜索</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/12578-codesearch">https://plugins.jetbrains.com/plugin/12578-codesearch</a></li></ul></li></ul><h5 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h5><ul><li>Leetcode Editor<ul><li>描述：在 IDEA 里刷算法题</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/12132-leetcode-editor">https://plugins.jetbrains.com/plugin/12132-leetcode-editor</a></li></ul></li><li>File Watchers<ul><li>描述：监听文件，当其发生变化时自动执行命令</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7177-file-watchers">https://plugins.jetbrains.com/plugin/7177-file-watchers</a></li></ul></li><li>PlantUML integration<ul><li>描述：UML 建模工具，只需简单的代码就能画出复杂的 UML 类图</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7017-plantuml-integration">https://plugins.jetbrains.com/plugin/7017-plantuml-integration</a></li></ul></li><li>Bytecode Editor<ul><li>描述：字节码编辑工具</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8461-bytecode-editor">https://plugins.jetbrains.com/plugin/8461-bytecode-editor</a></li></ul></li><li>Alibaba Cloud Toolkit<ul><li>描述：阿里云工具集</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/11386-alibaba-cloud-toolkit">https://plugins.jetbrains.com/plugin/11386-alibaba-cloud-toolkit</a></li></ul></li><li>Tencent Cloud Toolkit<ul><li>描述：腾讯云工具集</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/15653-tencent-cloud-toolkit">https://plugins.jetbrains.com/plugin/15653-tencent-cloud-toolkit</a></li></ul></li><li>EduTools<ul><li>描述：面向教育者，允许创建、分享和加入练习</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10081-edutools">https://plugins.jetbrains.com/plugin/10081-edutools</a></li></ul></li><li>IDE Features Trainer<ul><li>描述：IntelliJ IDEA 官方出的学习辅助插件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8554-ide-features-trainer">https://plugins.jetbrains.com/plugin/8554-ide-features-trainer</a></li></ul></li><li>JRebel Plugin<ul><li>描述：项目热更新，提高效率（可惜要收费）</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/4441-jrebel-and-xrebel-for-intellij">https://plugins.jetbrains.com/plugin/4441-jrebel-and-xrebel-for-intellij</a></li></ul></li><li>Key Promoter X<ul><li>描述：快捷键提示插件。当你执行鼠标操作时，如果该操作可被快捷键代替，会给出提示，帮助你自然形成使用快捷键的习惯，告别死记硬背。</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9792-key-promoter-x/">https://plugins.jetbrains.com/plugin/9792-key-promoter-x/</a></li></ul></li><li>Translation<ul><li>描述：翻译插件，鼠标选中文本，点击右键即可自动翻译成多国语言。</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8579-translation/">https://plugins.jetbrains.com/plugin/8579-translation/</a></li></ul></li><li>idea_seat<ul><li>描述：自动提醒，防止你久坐不动</li><li>官网：<a href="https://github.com/s-unscrupulous/idea_seat">https://github.com/s-unscrupulous/idea_seat</a></li></ul></li><li>RestfulTool<ul><li>描述：辅助 web 开发的工具集</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/14280-restfultool">https://plugins.jetbrains.com/plugin/14280-restfultool</a></li></ul></li><li>Multirun<ul><li>描述：同时启动多应用</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7248-multirun">https://plugins.jetbrains.com/plugin/7248-multirun</a></li></ul></li></ul><h4 id="扩展增强类"><a href="#扩展增强类" class="headerlink" title="扩展增强类"></a>扩展增强类</h4><ul><li>Free Mybatis Plugin<ul><li>描述：MyBatis 增强插件，支持 mapper =&gt; xml 的跳转、代码生成等功能</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8321-free-mybatis-plugin">https://plugins.jetbrains.com/plugin/8321-free-mybatis-plugin</a></li></ul></li><li>MyBatis Log Plugin<ul><li>描述：MyBatis SQL 提取和格式化输出</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10065-mybatis-log-plugin">https://plugins.jetbrains.com/plugin/10065-mybatis-log-plugin</a></li></ul></li><li>Maven Helper<ul><li>描述：Maven 辅助插件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7179-maven-helper">https://plugins.jetbrains.com/plugin/7179-maven-helper</a></li></ul></li><li>Gradle View<ul><li>描述：Gradle 项目管理工具的扩展</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7150-gradle-view">https://plugins.jetbrains.com/plugin/7150-gradle-view</a></li></ul></li><li>Arthas Idea<ul><li>描述： Arthas 命令生成插件。Arthas 是阿里开源的 Java 在线诊断工具，该插件可以自动生成 Arthas 在线 Java 代码诊断命令，不用再到官网翻文档拼命令啦！</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/13581-arthas-idea/">https://plugins.jetbrains.com/plugin/13581-arthas-idea/</a></li></ul></li><li>GitToolBox<ul><li>描述： Git 增强插件。在自带的 Git 功能之上，新增了查看 Git 状态、自动拉取代码、提交通知等功能。最好用的是可以查看到每一行代码的最近一次提交信息。</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7499-gittoolbox/">https://plugins.jetbrains.com/plugin/7499-gittoolbox/</a></li></ul></li><li>BashSupport<ul><li>描述：支持 Bash 脚本文件的高亮和提示等</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/4230-bashsupport">https://plugins.jetbrains.com/plugin/4230-bashsupport</a></li></ul></li><li>Git Flow Integration<ul><li>描述：Git Flow 的图形界面操作</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7315-git-flow-integration">https://plugins.jetbrains.com/plugin/7315-git-flow-integration</a></li></ul></li><li>Gitee<ul><li>描述：开源中国的码云插件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8383-gitee">https://plugins.jetbrains.com/plugin/8383-gitee</a></li></ul></li><li>Drools<ul><li>描述：规则引擎的扩展</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/16871-drools">https://plugins.jetbrains.com/plugin/16871-drools</a></li></ul></li><li>EnvFile<ul><li>描述：对多环境配置文件的支持</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7861-envfile">https://plugins.jetbrains.com/plugin/7861-envfile</a></li></ul></li><li>Kubernetes<ul><li>描述：容器管理的扩展</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10485-kubernetes">https://plugins.jetbrains.com/plugin/10485-kubernetes</a></li></ul></li><li>Vue.js<ul><li>描述：Vue.js 前端框架的扩展</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9442-vue-js">https://plugins.jetbrains.com/plugin/9442-vue-js</a></li></ul></li><li>Scala<ul><li>描述：Scala 语言的扩展</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/1347-scala">https://plugins.jetbrains.com/plugin/1347-scala</a></li></ul></li><li>Zookeeper<ul><li>描述：Zookeeper 中间件的扩展</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/7364-zookeeper">https://plugins.jetbrains.com/plugin/7364-zookeeper</a></li></ul></li><li>Jms messenger<ul><li>描述：对 Java 消息服务的扩展</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10949-jms-messenger">https://plugins.jetbrains.com/plugin/10949-jms-messenger</a></li></ul></li><li>MapStruct Support<ul><li>描述：对 MapStruct 对象转换的支持</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10036-mapstruct-support">https://plugins.jetbrains.com/plugin/10036-mapstruct-support</a></li></ul></li><li>Big Data Tools<ul><li>描述：提供了 HDFS 等大数据框架的工具集</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/12494-big-data-tools">https://plugins.jetbrains.com/plugin/12494-big-data-tools</a></li></ul></li><li>CSV<ul><li>描述：支持 CSV 文件的高亮和提示等</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/10037-csv">https://plugins.jetbrains.com/plugin/10037-csv</a></li></ul></li><li>Ideolog<ul><li>描述：识别和格式化 log 日志文件</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9746-ideolog">https://plugins.jetbrains.com/plugin/9746-ideolog</a></li></ul></li><li>Toml<ul><li>描述：支持 toml 文件的高亮和提示等</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/8195-toml">https://plugins.jetbrains.com/plugin/8195-toml</a></li></ul></li><li>.env files support<ul><li>描述：支持 .env 文件的高亮和提示等</li><li>官网：<a href="https://plugins.jetbrains.com/plugin/9525--env-files-support">https://plugins.jetbrains.com/plugin/9525--env-files-support</a></li></ul></li></ul><h3 id="常用软件"><a href="#常用软件" class="headerlink" title="常用软件"></a>常用软件</h3><p><strong>以下部分软件可在【公众号：程序员鱼皮】回复【软件】获取~</strong></p><h5 id="开发相关"><a href="#开发相关" class="headerlink" title="开发相关"></a>开发相关</h5><ul><li>JetBrains IDEA：Java 集成开发环境，凭学生邮箱可申请免费使用（<a href="https://www.jetbrains.com/idea/）">https://www.jetbrains.com/idea/）</a></li><li>Reset Jetbrains：你懂的</li><li>Visual Studio Code：插件化代码编辑器（<a href="https://code.visualstudio.com/）">https://code.visualstudio.com/）</a></li><li>Sublime Text：轻量代码编辑器（<a href="https://www.sublimetext.com/）">https://www.sublimetext.com/）</a></li><li>Navicat：数据库管理软件（<a href="https://www.navicat.com.cn/）">https://www.navicat.com.cn/）</a></li><li>JMeter：Java 性能测试工具（<a href="https://jmeter.apache.org/）">https://jmeter.apache.org/）</a></li><li>JVisual VM：Java 运行状态可视化工具（<a href="https://visualvm.github.io/）">https://visualvm.github.io/）</a></li><li>XShell：SSH 连接软件（<a href="https://www.netsarang.com/zh/xshell/）">https://www.netsarang.com/zh/xshell/）</a></li><li>XFtp：FTP 连接软件（<a href="https://www.netsarang.com/zh/xftp/）">https://www.netsarang.com/zh/xftp/）</a></li><li>Redis Desktop Manager：Redis 可视化管理工具（<a href="https://github.com/uglide/RedisDesktopManager）">https://github.com/uglide/RedisDesktopManager）</a></li><li>Postman：接口测试工具（<a href="https://www.postman.com/）">https://www.postman.com/）</a></li><li>VMware：虚拟机软件（<a href="https://www.vmware.com/）">https://www.vmware.com/）</a></li><li>Chocolatey：Windows 软件包管理器（<a href="https://chocolatey.org/）">https://chocolatey.org/）</a></li><li>Typora：写文档软件（<a href="https://typora.io/）">https://typora.io/）</a></li></ul><h5 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h5><ul><li>Ditto：强大的剪切板（<a href="https://ditto-cp.sourceforge.io/）">https://ditto-cp.sourceforge.io/）</a></li><li>uTools：插件化的效率工具（<a href="https://u.tools/）">https://u.tools/）</a></li><li>XMind：思维导图软件（<a href="https://www.xmind.cn/）">https://www.xmind.cn/）</a></li><li>Qdir：Windows 多窗口管理器（<a href="https://q-dir.en.softonic.com/）">https://q-dir.en.softonic.com/）</a></li></ul><h3 id="项目源码（50-套）"><a href="#项目源码（50-套）" class="headerlink" title="项目源码（50 套）"></a>项目源码（50 套）</h3><h4 id="电商秒杀"><a href="#电商秒杀" class="headerlink" title="电商秒杀"></a>电商秒杀</h4><ul><li>天猫整站 J2EE：<a href="https://how2j.cn/module/115.htm">https://how2j.cn/module/115.htm</a></li><li>天猫整站 SSM：<a href="https://how2j.cn/module/134.html">https://how2j.cn/module/134.html</a></li><li>天猫整站 Springboot：<a href="https://how2j.cn/module/156.html">https://how2j.cn/module/156.html</a></li><li>mall-learning：<a href="https://github.com/macrozheng/mall-learningmall">https://github.com/macrozheng/mall-learningmall</a> （学习教程，架构、业务、技术要点全方位解析）</li><li>SpringBoot 电商商城系统 Mall4j：<a href="https://github.com/gz-yami/mall4j">https://github.com/gz-yami/mall4j</a></li><li>SpringBoot 完整电商系统 Mall：<a href="https://github.com/macrozheng/mall">https://github.com/macrozheng/mall</a> （包括前台商城系统及后台管理系统，基于 SpringBoot+MyBatis 实现）</li><li>newbee-mall：<a href="https://github.com/newbee-ltd/newbee-mall">https://github.com/newbee-ltd/newbee-mall</a> （一套电商系统，包括 newbee-mall 商城系统及 newbee-mall-admin 商城后台管理系统，基于 Spring Boot 2.X 及相关技术栈开发）</li><li>paascloud-master：<a href="https://github.com/paascloud/paascloud-master">https://github.com/paascloud/paascloud-master</a> （基于 spring cloud + vue + oAuth2.0，前后端分离商城系统）</li><li>mall-swarm：<a href="https://github.com/macrozheng/mall-swarm">https://github.com/macrozheng/mall-swarm</a> （一套微服务商城系统，采用了 Spring Cloud Greenwich、Spring Boot 2、MyBatis、Docker、Elasticsearch 等核心技术，同时提供了基于 Vue 的管理后台方便快速搭建系统）</li><li>onemall：<a href="https://github.com/YunaiV/onemall">https://github.com/YunaiV/onemall</a> （mall 商城，基于微服务的思想，构建在 B2C 电商场景下的项目实战。核心技术栈，是 Spring Boot + Dubbo 。未来，会重构成 Spring Cloud Alibaba）</li><li>litemall：<a href="https://github.com/linlinjava/litemall">https://github.com/linlinjava/litemall</a> （又一个小商城，litemall = Spring Boot 后端 + Vue 管理员前端 + 微信小程序用户前端 + Vue 用户移动端）</li><li>xmall：<a href="https://github.com/Exrick/xmall">https://github.com/Exrick/xmall</a> （基于SOA架构的分布式电商购物商城 前后端分离 前台商城:Vue全家桶 后台管理系统）</li><li>miaosha：<a href="https://github.com/qiurunze123/miaosha">https://github.com/qiurunze123/miaosha</a> （秒杀系统设计与实现）</li><li>SecKill：<a href="https://github.com/hfbin/Seckill">https://github.com/hfbin/Seckill</a> （基于 SpringBoot+Mybatis+Redis+RabbitMQ 秒杀系统）</li></ul><h4 id="博客论坛"><a href="#博客论坛" class="headerlink" title="博客论坛"></a>博客论坛</h4><ul><li><a href="https://github.com/langhsu/mblog">Mblog</a>：开源 Java 博客系统</li><li><a href="https://github.com/halo-dev/halo">halo</a>：一个优秀的开源博客发布应用</li><li><a href="https://github.com/Qbian61/forum-java">forum-java</a>：一款用 Java（spring boot） 实现的现代化社区（论坛/问答/BBS/社交网络/博客）系统平台</li><li><a href="https://github.com/lenve/vhr">vhr</a>：微人事是一个前后端分离的人力资源管理系统，项目采用 SpringBoot+Vue 开发。</li><li><a href="https://github.com/cloudfavorites/favorites-web">favorites-web</a>:云收藏 Spring Boot 2.X 开源项目。云收藏是一个使用 Spring Boot 构建的开源网站，可以让用户在线随时随地收藏的一个网站，在网站上分类整理收藏的网站或者文章。</li><li><a href="https://github.com/codedrinker/community">community</a>：码问，开源论坛、问答系统，现有功能提问、回复、通知、最新、最热、消除零回复功能。技术栈 Spring、Spring Boot、MyBatis、MySQL/H2、Bootstrap</li><li><a href="https://github.com/yourkevin/NiterForum">NiterForum</a>：尼特社区-NiterForum-一个论坛/社区程序。后端Springboot/MyBatis/Maven/MySQL，前端Thymeleaf/Layui。可供初学者，学习、交流使用。</li><li><a href="https://github.com/lenve/VBlog">VBlog</a>：V部落，Vue+SpringBoot实现的多用户博客管理平台!</li><li><a href="https://github.com/damoqiongqiu/NiceFish">NiceFish</a>：SpringBoot/SpringCloud 前后端分离项目</li><li><a href="https://github.com/ZHENFENG13/My-Blog">My-Blog</a>： My Blog 是由 SpringBoot + Mybatis + Thymeleaf 等技术实现的 Java 博客系统，页面美观、功能齐全、部署简单及完善的代码，一定会给使用者无与伦比的体验。</li><li><a href="https://github.com/ZHENFENG13/My-Blog-layui">My-Blog-layui</a>：layui 版本的 My-Blog : A simple &amp; beautiful blogging system implemented with spring-boot &amp; layui &amp; thymeleaf &amp; mybatis My Blog 是由 SpringBoot + Layui + Mybatis + Thymeleaf 等技术实现的 Java 博客系统，页面美观、功能齐全、部署简单及完善的代码，一定会给使用者无与伦比的体验</li><li><a href="https://github.com/88250/symphony">symphony</a>：Java 实现的现代化社区</li></ul><h4 id="管理系统"><a href="#管理系统" class="headerlink" title="管理系统"></a>管理系统</h4><ul><li><a href="https://github.com/wxiaoqi/Spring-Cloud-Admin">Spring-Cloud-Admin</a>：Cloud-Admin 是国内首个基于 Spring Cloud 微服务化开发平台，具有统一授权、认证后台管理系统，其中包含具备用户管理、资源权限管理、网关 API 管理等多个模块，支持多业务系统并行开发，可以作为后端服务的开发脚手架。代码简洁，架构清晰，适合学习和直接项目中使用。核心技术采用 Spring Boot2 以及 Spring Cloud Gateway 相关核心组件，前端采用 vue-element-admin 组件。</li><li><a href="https://github.com/tomsun28/bootshiro">bootshiro</a>：基于 springboot+shiro+jwt 的资源无状态认证权限管理系统后端</li><li><a href="https://github.com/72crm/72crm-java">悟空CRM</a>：基于jfinal+vue+ElementUI的前后端分离CRM系统</li><li><a href="https://github.com/elunez/eladmin">EL-ADMIN</a>：基于 SpringBoot 的后台管理系统</li><li><a href="https://gitee.com/log4j/pig">pig</a>：基于 Spring Boot 2.2、 Spring Cloud Hoxton &amp; Alibaba、 OAuth2 的 RBAC 权限管理系统。</li><li><a href="https://github.com/wuyouzhuguli/FEBS-Shiro">FEBS-Shiro</a>：Spring Boot 2.1.3，Shiro1.4.0 &amp; Layui 2.5.4 权限管理系统。</li><li><a href="https://github.com/Heeexy/SpringBoot-Shiro-Vue">Spring Boot-Shiro-Vue</a>：基于Spring Boot-Shiro-Vue 的权限管理</li><li><a href="https://github.com/ZeroWdd/studentmanager">studentmanager</a>：基于springboot+mybatis学生管理系统</li><li><a href="https://github.com/jishenghua/jshERP">jshERP</a>：华夏ERP基于SpringBoot框架和SaaS模式，立志为中小企业提供开源好用的ERP软件，目前专注进销存+财务功能。主要模块有零售管理、采购管理、销售管理、仓库管理、财务管理、报表查询、系统管理等。支持预付款、收入支出、仓库调拨、组装拆卸、订单等特色功能。拥有库存状况、出入库统计等报表。同时对角色和权限进行了细致全面控制，精确到每个按钮和菜单。</li><li><a href="https://github.com/misterchaos/HotelSystem">HotelSystem</a>：酒店管理系统 Java,tomcat,mysql,servlet,jsp实现，没有使用任何框架</li></ul><h4 id="开发平台"><a href="#开发平台" class="headerlink" title="开发平台"></a>开发平台</h4><ul><li><a href="https://github.com/2014shijina2014/open-capacity-platform">open-capacity-platform</a>：微服务能力开发平台</li><li><a href="https://github.com/zhangdaiscott/jeecg-boot">jeecg-boot</a>：JeecgBoot是一款基于BPM的低代码平台！前后端分离架构 SpringBoot 2.x，SpringCloud，Ant Design&amp;Vue，Mybatis-plus，Shiro，JWT，支持微服务。强大的代码生成器让前后端代码一键生成，实现低代码开发！</li></ul><h4 id="其他-2"><a href="#其他-2" class="headerlink" title="其他"></a>其他</h4><ul><li><a href="https://github.com/mindskip/xzs">学之思在线考试系统</a>：一款 java + vue 的前后端分离的考试系统</li><li><a href="https://github.com/Jackson0714/PassJava-Platform">PassJava-Platform</a>：一款面试刷题的 Spring Cloud 开源系统</li><li><a href="https://github.com/kekingcn/kkFileView">kkFileView</a>：使用spring boot打造文件文档在线预览项目</li><li><a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter">dynamic-datasource</a>：一个基于springboot的快速集成多数据源的启动器</li><li><a href="https://github.com/373675032/moti-cloud">moti-cloud</a>：莫提网盘，基于 SpringBoot+MyBatis+ThymeLeaf+BootStrap，适合初学者</li><li><a href="https://github.com/qiurunze123/threadandjuc">threadandjuc</a>：three-high-import 高可用\高可靠\高性能，三高多线程导入系统（该项目意义为理论贯通)</li><li><a href="https://github.com/proxyee-down-org/proxyee-down">proxyee-down</a>：http下载工具，基于http代理，支持多连接分块下载</li><li><a href="https://github.com/sfturing/hosp_order">hosp_order</a>：医院预约挂号系统，基于 SSM 框架</li><li><a href="https://how2j.cn/module/170.html">趋势投资 SpringCloud</a></li><li><a href="https://how2j.cn/module/176.html">DiyTomcat</a></li></ul><h2 id="阶段-6：Java-高级"><a href="#阶段-6：Java-高级" class="headerlink" title="阶段 6：Java 高级"></a>阶段 6：Java 高级</h2><h3 id="目标-5"><a href="#目标-5" class="headerlink" title="目标"></a>目标</h3><p>不满足于能做，而是通过更 <strong>深入</strong> 和 <strong>广泛</strong> 的学习，实现高质量的代码和更优秀的架构，培养解决问题的能力。</p><p>已经到了这个阶段，建议除了看完成的教程外，平时多自主搜索信息去学习，积少成多。比如遇到了一个不了解的名词，可以去网上搜一下，感兴趣的话再进行下一步的学习。</p><h3 id="🌖-并发编程（21-天）"><a href="#🌖-并发编程（21-天）" class="headerlink" title="🌖 并发编程（21 天）"></a>🌖 并发编程（21 天）</h3><p>对 Java 后端开发程序员来说，懂得如何利用有限的系统资源来提高系统的性能是很重要的，也是大厂面试考察的重点，因此并发编程（尤其是 Java 并发包的使用）这块的知识很重要。</p><p>把它放到高级，是因为在学并发编程前，需要有一定的编程经验、了解一定的操作系统知识。</p><h4 id="知识-21"><a href="#知识-21" class="headerlink" title="知识"></a>知识</h4><ul><li>线程和进程</li><li>线程状态</li><li>并行和并发</li><li>同步和异步</li><li>Synchronized</li><li>Volatile 关键字</li><li>Lock 锁</li><li>死锁</li><li>可重入锁</li><li>线程安全</li><li>线程池</li><li>JUC 的使用</li><li>AQS</li><li>Fork Join</li><li>CAS</li></ul><h4 id="学习建议-23"><a href="#学习建议-23" class="headerlink" title="学习建议"></a>学习建议</h4><p>并发编程入门不难，依然是 <strong>先学会使用</strong> 基础的 Java 并发包， 再通过大量地实践和测试，了解一些原理，才能真正掌握何时使用、如何更合理地使用并发编程。而不是张口闭口多线程，上天入地高并发。</p><h4 id="经典面试题-16"><a href="#经典面试题-16" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>volatile 关键字的作用</li><li>使用线程池有哪些好处？</li><li>线程池参数如何设置？</li><li>什么是线程安全问题，如何解决？</li><li>介绍 synchronized 的锁升级机制</li><li>CopyOnWriteArrayList 适用于哪种场景？</li></ol><h4 id="资源-22"><a href="#资源-22" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐【尚硅谷】大厂必备技术之JUC并发编程2021最新版：<a href="https://www.bilibili.com/video/BV1Kw411Z7dF">https://www.bilibili.com/video/BV1Kw411Z7dF</a> （特点是短、精、新）</li><li>黑马程序员全面深入学习Java并发编程：<a href="https://www.bilibili.com/video/BV16J411h7Rd">https://www.bilibili.com/video/BV16J411h7Rd</a> （讲的很细、全面深入）</li></ul></li><li>书籍<ul><li>⭐《Java并发编程实战》（国外的经典）</li><li>⭐《Java 并发编程艺术》（国人写的，理论思想内容较多，有时间建议反复看）</li></ul></li><li>项目<ul><li>⭐ Java 并发知识点总结：<a href="https://github.com/CL0610/Java-concurrency">https://github.com/CL0610/Java-concurrency</a></li></ul></li></ul><h3 id="🌖-JVM（30-天）"><a href="#🌖-JVM（30-天）" class="headerlink" title="🌖 JVM（30 天）"></a>🌖 JVM（30 天）</h3><p>想要深入理解 Java，探秘 Java 跨平台的奥秘，一定要了解 Java 底层的虚拟机技术。</p><p>了解虚拟机、掌握虚拟机性能调优方法，有助于你写出更高性能、资源占用更小的优质程序。</p><p>在学习 JVM 的过程中，也能学到很多精妙的设计，开拓思路。</p><h4 id="知识-22"><a href="#知识-22" class="headerlink" title="知识"></a>知识</h4><ul><li>JVM 内存结构</li><li>JVM 生命周期</li><li>主流虚拟机</li><li>Java 代码执行流程</li><li>类加载<ul><li>类加载器</li><li>类加载过程</li><li>双亲委派机制</li></ul></li><li>垃圾回收<ul><li>垃圾回收器</li><li>垃圾回收策略</li><li>垃圾回收算法</li><li>StopTheWorld</li></ul></li><li>字节码</li><li>内存分配和回收</li><li>JVM 性能调优<ul><li>性能分析方法</li><li>常用工具</li><li>参数设置</li></ul></li><li>Java 探针</li><li>线上故障分析</li></ul><h4 id="学习建议-24"><a href="#学习建议-24" class="headerlink" title="学习建议"></a>学习建议</h4><p>JVM 的知识略显枯燥，建议先看视频，有实操的地方一定要实操！自己多去分析。</p><p>第一遍不理解没有关系，可以再看书来巩固，想要真正学好，《深入理解 Java 虚拟机（第三版）》一定要读。</p><p>如果只是为了通过面试可以直接看更精简的视频，比如狂神的。</p><h4 id="经典面试题-17"><a href="#经典面试题-17" class="headerlink" title="经典面试题"></a>经典面试题</h4><ol><li>介绍 JVM 的内存模型？</li><li>JVM 内存为什么要分代？</li><li>介绍一次完整的 GC 流程</li><li>介绍双亲委派模型，为什么需要它？</li></ol><h4 id="资源-23"><a href="#资源-23" class="headerlink" title="资源"></a>资源</h4><ul><li>视频<ul><li>⭐ 尚硅谷宋红康 - JVM 全套教程详解：<a href="https://www.bilibili.com/video/BV1PJ411n7xZ">https://www.bilibili.com/video/BV1PJ411n7xZ</a> （讲得相当全面！附有实操）</li><li>【狂神说Java】JVM快速入门篇：<a href="https://www.bilibili.com/video/BV1iJ411d7jS">https://www.bilibili.com/video/BV1iJ411d7jS</a> （讲得有点浅，但都是面试重点，时间紧的小伙伴可以直接看这个）</li></ul></li><li>书籍<ul><li>⭐《深入理解 Java 虚拟机（第三版）》（有理论有实践，内容丰富，不可多得的 JVM 学习神书，就是有点废头发）</li></ul></li><li>项目<ul><li>⭐ Java 虚拟机底层原理知识总结：<a href="https://github.com/doocs/jvm">https://github.com/doocs/jvm</a></li></ul></li><li>实战<ul><li>阿里云 JVM 实战：<a href="https://developer.aliyun.com/graph/java/point/64">https://developer.aliyun.com/graph/java/point/64</a></li></ul></li><li>工具<ul><li>Arthas 开源 Java 诊断工具：<a href="https://github.com/alibaba/arthas">https://github.com/alibaba/arthas</a></li></ul></li></ul><h3 id="架构设计"><a href="#架构设计" class="headerlink" title="架构设计"></a>架构设计</h3><h4 id="🌖-分布式"><a href="#🌖-分布式" class="headerlink" title="🌖 分布式"></a>🌖 分布式</h4><ul><li>分布式理论<ul><li>CAP</li><li>BASE</li></ul></li><li>分布式缓存<ul><li>Redis</li><li>Memcached</li><li>Etcd</li></ul></li><li>一致性算法<ul><li>Raft</li><li>Paxos</li><li>一致性哈希</li></ul></li><li>分布式事务<ul><li>解决方案<ul><li>2PC</li><li>3PC</li><li>TCC</li><li>本地消息表</li><li>MQ 事务消息</li><li>最大努力通知</li></ul></li><li>LCN 分布式事务框架：<a href="https://github.com/codingapi/tx-lcn">https://github.com/codingapi/tx-lcn</a></li></ul></li><li>分布式 id 生成<ul><li>Leaf 分布式 id 生成服务：<a href="https://github.com/Meituan-Dianping/Leaf">https://github.com/Meituan-Dianping/Leaf</a></li></ul></li><li>分布式任务调度<ul><li>XXL-JOB 调度平台：<a href="https://www.xuxueli.com/xxl-job/">https://www.xuxueli.com/xxl-job/</a></li><li>elastic-job：<a href="https://gitee.com/elasticjob/elastic-job">https://gitee.com/elasticjob/elastic-job</a></li></ul></li><li>分布式服务调用<ul><li>trpc</li></ul></li><li>分布式存储<ul><li>HDFS</li><li>Ceph</li></ul></li><li>分布式数据库<ul><li>TiDB</li><li>OceanBase</li></ul></li><li>分布式文件系统<ul><li>HDFS</li></ul></li><li>分布式协调<ul><li>Zookeeper</li></ul></li><li>分布式监控<ul><li>Prometheus</li><li>Zabbix</li></ul></li><li>分布式消息队列<ul><li>RabbitMQ</li><li>Kafka</li><li>Apache Pulsar</li></ul></li><li>分布式日志收集<ul><li>Elastic Stack</li><li>Loki</li></ul></li><li>分布式搜索引擎<ul><li>Elasticsearch</li></ul></li><li>分布式链路追踪<ul><li>Apache SkyWalking</li></ul></li><li>分布式配置中心<ul><li>Apollo</li><li>Nacos</li></ul></li></ul><h4 id="🌗-高可用"><a href="#🌗-高可用" class="headerlink" title="🌗 高可用"></a>🌗 高可用</h4><ul><li>限流</li><li>降级熔断</li><li>冷备</li><li>双机热备</li><li>同城双活</li><li>异地双活</li><li>异地多活</li><li>容灾备份</li></ul><h4 id="🌗-高并发"><a href="#🌗-高并发" class="headerlink" title="🌗 高并发"></a>🌗 高并发</h4><ul><li>数据库<ul><li>分库分表<ul><li>MyCat 中间件</li><li>Apache ShardingSphere 中间件</li></ul></li><li>读写分离</li></ul></li><li>缓存<ul><li>缓存雪崩</li><li>缓存击穿</li><li>缓存穿透</li></ul></li><li>负载均衡<ul><li>负载均衡算法</li><li>软硬件负载均衡（2、3、4、7 层）</li></ul></li></ul><h4 id="🌘-服务网格"><a href="#🌘-服务网格" class="headerlink" title="🌘 服务网格"></a>🌘 服务网格</h4><p>服务网格用来描述组成应用程序的微服务网络以及它们之间的交互。服务网格的规模和复杂性不断的增长，它将会变得越来越难以理解和管理，常见的需求包括服务发现、负载均衡、故障恢复、度量和监控等。</p><h5 id="知识-23"><a href="#知识-23" class="headerlink" title="知识"></a>知识</h5><ul><li>Istio<ul><li>流量管理</li><li>安全性</li><li>可观测性</li></ul></li><li>Envoy（开源的边缘和服务代理）</li></ul><h5 id="资源-24"><a href="#资源-24" class="headerlink" title="资源"></a>资源</h5><ul><li>资料大全：<a href="https://www.servicemesher.com/awesome-servicemesh/">https://www.servicemesher.com/awesome-servicemesh/</a></li><li>istio 官方文档：<a href="https://preliminary.istio.io/latest/zh">https://preliminary.istio.io/latest/zh</a></li><li>istio 视频教程：<a href="https://www.bilibili.com/video/BV1Lf4y1x7j8">https://www.bilibili.com/video/BV1Lf4y1x7j8</a></li><li>在线体验 istio：<a href="https://katacoda.com/courses/istio/">https://katacoda.com/courses/istio/</a></li></ul><h4 id="🌘-DDD-领域驱动设计"><a href="#🌘-DDD-领域驱动设计" class="headerlink" title="🌘 DDD 领域驱动设计"></a>🌘 DDD 领域驱动设计</h4><p>将数据、业务流程抽象成容易理解的领域模型，通过用代码实现领域模型，来组成完整的业务系统。</p><h5 id="知识-24"><a href="#知识-24" class="headerlink" title="知识"></a>知识</h5><ul><li>DDD 的优势</li><li>DDD 的适用场景</li><li>DDD 核心概念<ul><li>领域模型分类：失血、贫血、充血、涨血</li><li>子域划分：核心域、通用域、支撑域</li><li>限界上下文</li><li>实体和值对象</li><li>聚合设计</li><li>领域事件</li></ul></li><li>DDD 实践</li></ul><h5 id="资源-25"><a href="#资源-25" class="headerlink" title="资源"></a>资源</h5><ul><li>DDD 入门：<a href="https://juejin.cn/post/7004002483601145863">https://juejin.cn/post/7004002483601145863</a></li><li>DDD 编码实践：<a href="https://juejin.cn/post/6844903903104860174">https://juejin.cn/post/6844903903104860174</a></li><li>DDD 实践教程：<a href="https://www.bilibili.com/video/BV1Y341167Xp">https://www.bilibili.com/video/BV1Y341167Xp</a></li></ul><h4 id="🌘-其他"><a href="#🌘-其他" class="headerlink" title="🌘 其他"></a>🌘 其他</h4><ul><li>Sidecar</li><li>Serverless</li><li>云原生</li></ul><h4 id="学习建议-25"><a href="#学习建议-25" class="headerlink" title="学习建议"></a>学习建议</h4><p>架构设计的学习没有顶点，多看文章，思考每种设计的优缺点和适用场景，有机会的话在企业中实践即可。</p><p>还在学校、或者初入这行的同学切记，千万不要一味地去背诵架构设计的八股文。你可以背，但是这一块的知识只有结合具体的项目才有意义，所以要多做项目去实践设计的合理性，而不是什么设计都咔咔往系统里去怼。比如面试问到分布式事务，能结合自己项目中用分布式事务解决问题的经验去回答最好。</p><h3 id="🌘-其他技术"><a href="#🌘-其他技术" class="headerlink" title="🌘 其他技术"></a>🌘 其他技术</h3><ul><li>热数据探测技术：京东 HotKey</li><li>数据库流水订阅：阿里 Canal</li><li>监控告警</li><li>应用安全</li><li>故障演练</li><li>流量回放</li></ul><h2 id="阶段-7：Java-求职"><a href="#阶段-7：Java-求职" class="headerlink" title="阶段 7：Java 求职"></a>阶段 7：Java 求职</h2><h3 id="目标-6"><a href="#目标-6" class="headerlink" title="目标"></a>目标</h3><p>找到好工作</p><h3 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h3><ol><li>尽早做规划，可以通过大厂招聘官网的岗位描述来了解岗位的要求</li><li>雕琢一份优秀的简历，推荐阅读：<a href="https://mp.weixin.qq.com/s/wfabzdpOPdq89faFFpZ4NA">https://mp.weixin.qq.com/s/wfabzdpOPdq89faFFpZ4NA</a></li><li>多读面经，坚持刷算法</li><li>多参与面试，持续复盘总结</li></ol><h3 id="资源-26"><a href="#资源-26" class="headerlink" title="资源"></a>资源</h3><h4 id="校招岗位"><a href="#校招岗位" class="headerlink" title="校招岗位"></a>校招岗位</h4><ul><li>⭐ 牛客求职校招版：<a href="https://www.nowcoder.com/recommend/campus">https://www.nowcoder.com/recommend/campus</a></li><li>阿里 Java 开发：<a href="https://campus.alibaba.com/position.htm?refno=12699">https://campus.alibaba.com/position.htm?refno=12699</a></li><li>腾讯后台开发：<a href="https://join.qq.com/post_detail.html?pid=1&amp;id=101&amp;tid=2">https://join.qq.com/post_detail.html?pid=1&amp;id=101&amp;tid=2</a></li><li>腾讯全栈开发：<a href="https://join.qq.com/post_detail.html?pid=1&amp;id=137&amp;tid=2">https://join.qq.com/post_detail.html?pid=1&amp;id=137&amp;tid=2</a></li><li>腾讯运营开发：<a href="https://join.qq.com/post_detail.html?pid=1&amp;id=105&amp;tid=2">https://join.qq.com/post_detail.html?pid=1&amp;id=105&amp;tid=2</a></li><li>美团后端开发：<a href="https://campus.meituan.com/jobs?jobFamily=1&amp;jobId=4005&amp;jobType=1&amp;pageNo=2">https://campus.meituan.com/jobs?jobFamily=1&amp;jobId=4005&amp;jobType=1&amp;pageNo=2</a></li><li>华为软件开发：<a href="https://career.huawei.com/reccampportal/portal5/campus-recruitment-detail.html?jobId=176044">https://career.huawei.com/reccampportal/portal5/campus-recruitment-detail.html?jobId=176044</a></li></ul><h4 id="社招岗位"><a href="#社招岗位" class="headerlink" title="社招岗位"></a>社招岗位</h4><ul><li>⭐ 牛客求职社招版：<a href="https://www.nowcoder.com/recommend/fulltime">https://www.nowcoder.com/recommend/fulltime</a></li><li>阿里社招：<a href="https://job.alibaba.com/zhaopin/positionList.htm">https://job.alibaba.com/zhaopin/positionList.htm</a></li><li>腾讯社招：<a href="https://careers.tencent.com/search.html">https://careers.tencent.com/search.html</a></li></ul><h4 id="实习"><a href="#实习" class="headerlink" title="实习"></a>实习</h4><ul><li>⭐ 牛客实习广场：<a href="https://nowpick.nowcoder.com/w/intern/center">https://nowpick.nowcoder.com/w/intern/center</a></li><li>实习僧：<a href="https://www.shixiseng.com/">https://www.shixiseng.com/</a></li></ul><h4 id="内推"><a href="#内推" class="headerlink" title="内推"></a>内推</h4><ul><li>牛客内推：<a href="https://www.nowcoder.com/discuss/referral/index">https://www.nowcoder.com/discuss/referral/index</a></li></ul><h4 id="鱼皮经历"><a href="#鱼皮经历" class="headerlink" title="鱼皮经历"></a>鱼皮经历</h4><ul><li>从 0 开始的编程学习进大厂经历<ul><li>⭐ 我学计算机的四年，共勉：<a href="https://mp.weixin.qq.com/s/Nc7Ee2UyrPg6hGseQUCzeg">https://mp.weixin.qq.com/s/Nc7Ee2UyrPg6hGseQUCzeg</a></li></ul></li><li>实习经历<ul><li>⭐ 我的第一份实习：<a href="https://mp.weixin.qq.com/s/SwGiRzyTkCOOCUXfXPR1Pw">https://mp.weixin.qq.com/s/SwGiRzyTkCOOCUXfXPR1Pw</a></li><li>⭐ 我的第二份实习，字节跳动：<a href="https://mp.weixin.qq.com/s/3q-YIfuZBjPjSnamNwOraw">https://mp.weixin.qq.com/s/3q-YIfuZBjPjSnamNwOraw</a></li></ul></li></ul><h4 id="知识总结"><a href="#知识总结" class="headerlink" title="知识总结"></a>知识总结</h4><ul><li>⭐ 牛客 Java 面试宝典：<a href="https://www.nowcoder.com/tutorial/94">https://www.nowcoder.com/tutorial/94</a></li><li>⭐ JavaGuide：<a href="https://snailclimb.gitee.io/javaguide/#/">https://snailclimb.gitee.io/javaguide/#/</a></li><li>⭐ CS-Notes：<a href="http://www.cyc2018.xyz/">http://www.cyc2018.xyz/</a></li><li>阿里 Java 技术图谱：<a href="https://developer.aliyun.com/graph/java">https://developer.aliyun.com/graph/java</a></li></ul><h4 id="面经"><a href="#面经" class="headerlink" title="面经"></a>面经</h4><ul><li>⭐ 牛客面经：<a href="https://www.nowcoder.com/discuss/experience?tagId=639">https://www.nowcoder.com/discuss/experience?tagId=639</a></li><li>秋招总结&amp;Java心得（双非硕士，已拿11+5家Offer）：<a href="https://www.nowcoder.com/discuss/327041">https://www.nowcoder.com/discuss/327041</a></li><li>被疫情逼得gap year的完全菜鸡的春招之路。：<a href="https://www.nowcoder.com/discuss/427812">https://www.nowcoder.com/discuss/427812</a></li><li>谨以此文纪念2019年春招：<a href="https://www.nowcoder.com/discuss/181212">https://www.nowcoder.com/discuss/181212</a></li><li>2019秋招经验谈：<a href="https://www.nowcoder.com/discuss/122463">https://www.nowcoder.com/discuss/122463</a></li><li>秋招心得：<a href="https://www.nowcoder.com/discuss/317888">https://www.nowcoder.com/discuss/317888</a></li><li>非科班本科菜鸡投的337家(Java后台)：<a href="https://www.nowcoder.com/discuss/133333">https://www.nowcoder.com/discuss/133333</a></li><li>2018 这一年：<a href="https://www.nowcoder.com/discuss/137593">https://www.nowcoder.com/discuss/137593</a></li><li>双非的秋招，感谢牛客：<a href="https://www.nowcoder.com/discuss/142181">https://www.nowcoder.com/discuss/142181</a></li><li>二本本科Java上岸(滴滴京东58)2019秋招心得+面经：<a href="https://www.nowcoder.com/discuss/333912">https://www.nowcoder.com/discuss/333912</a></li><li>碎碎念流水账特别长 of 自己的 Java 秋招：<a href="https://www.nowcoder.com/discuss/354154">https://www.nowcoder.com/discuss/354154</a></li><li>秋招之路：个人历程以及面经总结：<a href="https://www.nowcoder.com/discuss/344311">https://www.nowcoder.com/discuss/344311</a></li><li>【秋招面经总结】菜逼的坎坷之路（JAVA后台研发）：<a href="https://www.nowcoder.com/discuss/352030">https://www.nowcoder.com/discuss/352030</a></li><li>阿里11面+EMC+网易+美团面经：<a href="https://www.nowcoder.com/discuss/105302">https://www.nowcoder.com/discuss/105302</a></li><li>2018秋招阿里巴巴java笔试试题：<a href="https://www.nowcoder.com/discuss/67379">https://www.nowcoder.com/discuss/67379</a></li><li>我的秋招经验分享（已拿BAT头条网易）：<a href="https://www.nowcoder.com/discuss/117071">https://www.nowcoder.com/discuss/117071</a></li><li>20届的阿里 头条 网易 滴滴 百度 小米等Java面经：<a href="https://www.nowcoder.com/discuss/68289">https://www.nowcoder.com/discuss/68289</a></li><li>拿了5个offer，回馈牛友发一波面经（长文详细）：<a href="https://www.nowcoder.com/discuss/79051">https://www.nowcoder.com/discuss/79051</a></li><li>【总结】零基础学习一年拿到BAT三家offer：<a href="https://www.nowcoder.com/discuss/188241">https://www.nowcoder.com/discuss/188241</a></li><li>本科生秋招经验总结帖：<a href="https://www.nowcoder.com/discuss/296586">https://www.nowcoder.com/discuss/296586</a></li><li>双非渣硕校招总结+Java面经（网易阿里百度等）：<a href="https://www.nowcoder.com/discuss/134850">https://www.nowcoder.com/discuss/134850</a></li><li>2018秋招笔试科大讯飞java笔试试题：<a href="https://www.nowcoder.com/discuss/67684">https://www.nowcoder.com/discuss/67684</a></li><li>头条后台研发面经（共三面）：<a href="https://www.nowcoder.com/discuss/94233">https://www.nowcoder.com/discuss/94233</a></li><li>一点点小经验和几家Java面经：<a href="https://www.nowcoder.com/discuss/138434">https://www.nowcoder.com/discuss/138434</a></li><li>感谢牛客网！发一波面经！阿里、网易游戏、京东等offer。：<a href="https://www.nowcoder.com/discuss/101712">https://www.nowcoder.com/discuss/101712</a></li><li>非科班水硕的春招实习总结- Java 后台开发：<a href="https://www.nowcoder.com/discuss/186528">https://www.nowcoder.com/discuss/186528</a></li><li>十面阿里，七面头条，六个Offer，春招结束：<a href="https://www.nowcoder.com/discuss/80156">https://www.nowcoder.com/discuss/80156</a></li><li>成功上岸，最后一波回馈：<a href="https://www.nowcoder.com/discuss/176434">https://www.nowcoder.com/discuss/176434</a></li><li>【Java后台开发面经】阿里|网易|头条|腾讯|华为：<a href="https://www.nowcoder.com/discuss/108655">https://www.nowcoder.com/discuss/108655</a></li><li>三跨学生的面经（头条、拼多多、华为、vivo）：<a href="https://www.nowcoder.com/discuss/195640">https://www.nowcoder.com/discuss/195640</a></li></ul><h4 id="面试题解"><a href="#面试题解" class="headerlink" title="面试题解"></a>面试题解</h4><ul><li>⭐ 2021 最新 Java 笔试、面试题合集：<a href="https://pan.baidu.com/s/1DE4HAu-DS80n7VOaGpU_KQ">https://pan.baidu.com/s/1DE4HAu-DS80n7VOaGpU_KQ</a> （密码：lkw1）</li><li>牛客网 Java开发校招面试考点汇总（附面试题和答案）：<a href="https://www.nowcoder.com/discuss/161991">https://www.nowcoder.com/discuss/161991</a></li><li>50w字+的技术类校招面试题汇总（附答案+考点）：<a href="https://www.nowcoder.com/discuss/164726">https://www.nowcoder.com/discuss/164726</a></li><li>硬件，软件（后端开发，算法，数据分析等）历年企业笔试真题汇总：<a href="https://www.nowcoder.com/discuss/212783">https://www.nowcoder.com/discuss/212783</a></li></ul><h4 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h4><ul><li>⭐ 尚硅谷 2021 逆袭版 Java 面试题第三季：<a href="https://www.bilibili.com/video/BV1Hy4y1B78T">https://www.bilibili.com/video/BV1Hy4y1B78T</a></li><li>⭐ 阿里大佬透彻讲解 Java 面试 500 道必考题：<a href="https://www.bilibili.com/video/BV1yU4y1J7Bb">https://www.bilibili.com/video/BV1yU4y1J7Bb</a></li></ul><h2 id="阶段-8：持续学习"><a href="#阶段-8：持续学习" class="headerlink" title="阶段 8：持续学习"></a>阶段 8：持续学习</h2><h3 id="目标-7"><a href="#目标-7" class="headerlink" title="目标"></a>目标</h3><p>持续追求技术的深度和广度，培养自己的 <strong>核心竞争力</strong> 和 <strong>不可替代性</strong> ，学无止境！</p><h3 id="学习建议-26"><a href="#学习建议-26" class="headerlink" title="学习建议"></a>学习建议</h3><p>自主学习，自主搜索教程，多看书，多阅读技术博客，多实践。</p><h3 id="学习方向"><a href="#学习方向" class="headerlink" title="学习方向"></a>学习方向</h3><h4 id="框架源码"><a href="#框架源码" class="headerlink" title="框架源码"></a>框架源码</h4><ul><li>Spring</li><li>SpringBoot</li><li>SpringMVC</li><li>MyBatis</li><li>Netty</li><li>Dubbo</li><li>SpringCloud</li></ul><h4 id="计算机原理"><a href="#计算机原理" class="headerlink" title="计算机原理"></a>计算机原理</h4><ul><li>《算法导论》：<a href="https://www.bilibili.com/video/av48922404">https://www.bilibili.com/video/av48922404</a></li><li>《现代操作系统》：<a href="https://www.bilibili.com/video/av9555596">https://www.bilibili.com/video/av9555596</a></li><li>《深入理解计算机系统》：<a href="https://www.bilibili.com/video/av31289365">https://www.bilibili.com/video/av31289365</a></li><li>《编译原理》： <a href="https://www.bilibili.com/video/av17649289">https://www.bilibili.com/video/av17649289</a></li><li>《计算机网络：自顶向下方法》：<a href="https://www.bilibili.com/video/BV1JV411t7ow">https://www.bilibili.com/video/BV1JV411t7ow</a></li><li>《计算机程序的构造和解释》：<a href="https://www.bilibili.com/video/av8515129">https://www.bilibili.com/video/av8515129</a></li><li>《数据库系统概论》：<a href="https://www.bilibili.com/video/BV1G54y1d7ZK">https://www.bilibili.com/video/BV1G54y1d7ZK</a></li></ul><h4 id="数据库-中间件-分布式"><a href="#数据库-中间件-分布式" class="headerlink" title="数据库 / 中间件 / 分布式"></a>数据库 / 中间件 / 分布式</h4><ul><li>数据库<ul><li>MySQL</li><li>PostgreSQL</li></ul></li><li>缓存<ul><li>Redis</li></ul></li><li>队列<ul><li>Apache Kafka</li><li>Apache Pulsar</li></ul></li><li>搜索引擎<ul><li>Elastic Stack<ul><li>Elasticsearch</li><li>logstash</li><li>kibana</li><li>beats</li></ul></li></ul></li><li>容器<ul><li>Docker</li><li>K8S</li></ul></li></ul><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><ul><li>广告系统</li><li>电商系统</li><li>搜索系统</li><li>支付转账</li><li>游戏后台</li><li>即时通讯</li><li>社交系统</li><li>CMS 系统</li><li>ERP 系统</li><li>OA 系统</li><li>代码生成</li><li>权限管理</li><li>秒杀活动</li></ul><h4 id="架构设计-1"><a href="#架构设计-1" class="headerlink" title="架构设计"></a>架构设计</h4><p>同阶段 6 架构设计部分</p><h4 id="大数据"><a href="#大数据" class="headerlink" title="大数据"></a>大数据</h4><ul><li>5V 特点</li><li>Hadoop</li><li>HDFS</li><li>MapReduce</li><li>Spark</li><li>Flink</li><li>Storm</li><li>Hive</li><li>HBase</li><li>Druid</li><li>Kylin</li><li>Pig</li><li>Mahout</li></ul><h4 id="前沿技术"><a href="#前沿技术" class="headerlink" title="前沿技术"></a>前沿技术</h4><ul><li><p>云原生：</p><p><a href="https://www.jianshu.com/p/a37baa7c3eff">https://www.jianshu.com/p/a37baa7c3eff</a></p><ul><li>Quasar Framework：<a href="http://www.quasarchs.com/">http://www.quasarchs.com/</a></li></ul></li><li><p>服务网格：</p><p><a href="https://www.redhat.com/zh/topics/microservices/what-is-a-service-mesh">https://www.redhat.com/zh/topics/microservices/what-is-a-service-mesh</a></p><ul><li>istio：<a href="https://github.com/istio/istio">https://github.com/istio/istio</a></li></ul></li><li><p>GraalVM：</p><p><a href="https://juejin.cn/post/6850418120570437646">https://juejin.cn/post/6850418120570437646</a></p></li></ul><p>  （高性能的通用虚拟机）</p><ul><li>官网：<a href="https://www.graalvm.org/">https://www.graalvm.org/</a></li></ul><ul><li><p>ZGC：</p><p><a href="https://juejin.cn/post/6859276583656980493">https://juejin.cn/post/6859276583656980493</a></p></li></ul><p>  （新一代垃圾回收器）</p><ul><li>官网：<a href="http://openjdk.java.net/projects/zgc/">http://openjdk.java.net/projects/zgc/</a></li></ul><h3 id="自学-Java-专题资源"><a href="#自学-Java-专题资源" class="headerlink" title="自学 Java 专题资源"></a>自学 Java 专题资源</h3><ul><li>⭐ GitHub Java 专区：<a href="https://github.com/topics/java">https://github.com/topics/java</a></li><li>⭐ GitHub Java 合集：<a href="https://github.com/akullpp/awesome-java">https://github.com/akullpp/awesome-java</a></li><li>StackOverflow：<a href="https://stackoverflow.com/questions/tagged/java">https://stackoverflow.com/questions/tagged/java</a> （解决问题必备）</li><li>⭐ 掘金 Java 专区：<a href="https://juejin.cn/tag/Java">https://juejin.cn/tag/Java</a></li><li>美团技术团队：<a href="https://tech.meituan.com/">https://tech.meituan.com/</a></li><li>阿里技术团队：<a href="https://102.alibaba.com/tech/list/">https://102.alibaba.com/tech/list/</a></li><li>有赞技术团队：<a href="https://tech.youzan.com/tag/back-end/">https://tech.youzan.com/tag/back-end/</a></li></ul><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="程序员重要能力"><a href="#程序员重要能力" class="headerlink" title="程序员重要能力"></a>程序员重要能力</h3><p>想成为大佬，就是要通过学习和积累，提升自己的各方面能力，比较抽象，共勉！</p><ol><li>团队协作能力</li><li>高效沟通能力</li><li>需求分析能力</li><li>架构设计能力</li><li>抽象复用能力</li><li>独立创造能力</li><li>问题解决能力</li><li>归纳总结能力</li><li>自主学习能力</li><li>工具利用能力</li><li>高效编码能力</li><li>信息检索能力</li><li>开源建设能力</li><li>源码阅读能力</li><li>自测审查能力</li><li>文档编写能力</li><li>知识表达能力</li><li>绘图描述能力</li><li>兴趣驱动（长期学习能力）</li><li>保持好奇心</li><li>其他（狗头）<ul><li>复制粘贴能力</li><li>打架能力</li><li>PPT 制作能力</li></ul></li></ol><h3 id="编程误区"><a href="#编程误区" class="headerlink" title="编程误区"></a>编程误区</h3><ol><li>我不适合学编程？❌（兴趣比天赋更重要，不要怀疑自己）</li><li>忽视基础，急于求成 ❌（勿以浮沙筑高台）</li><li>数学、英语差，就学不好编程 ❌（开发工作基本不用高等数学，英语可以使用翻译软件、工作中提升）</li><li>编程时，刻意记忆代码 ❌（知道每行代码的意义，能看文档写出来就行）</li><li>每行代码都要追求完美 ❌（何为完美？每个人的定义不同）</li><li>用百度搜索、复制粘贴的都是菜鸡程序员 ❌（艹）</li><li>我做的项目太小了，就不整理了 ❌（自己的每个项目都要整理，可以记录自己的成长）</li><li>跟别人交流很麻烦，我更愿意自己写代码 ❌（1 + 1 &gt; 2，切勿闭门造车，不过也要找到合适的同学去交流）</li><li>做别人做过的项目没有意义 ❌（连别人做过的项目都做不出，还想造新轮子？）</li><li>遇到 Bug，想办法绕过而不是寻找解决方案 ❌（Bug 最能使人成长）</li><li>遇到问题，第一时间去问别人而非自己解决 ❌（建议阅读《提问的智慧》）</li><li>花了很多时间、看了很多书，就能学好编程 ❌（编程最忌讳纸上谈兵）</li><li>只向前学习，不整理学过的知识 ❌（建议每学完一个知识，都去回想、总结、写心得，这个时间的花费是值得的）</li><li>单元测试不重要 ❌（一棍打死）</li><li>写文档不重要 ❌（一棍打死）</li><li>和我无关的工作，就不需要了解 ❌（了解团队、同行是很重要的，全局视野）</li><li>收藏的资源从来不看，就不收藏了 ❌（万一以后用到了呢？）</li><li>不去考虑需求的价值，而是一味寻求解决方案 ❌（不要成为需求机器，要有自己的独立思考）</li></ol><h3 id="高效法则"><a href="#高效法则" class="headerlink" title="高效法则"></a>高效法则</h3><ol><li>不要过分追求完美，完成比完美更重要。</li><li>有现成的代码，就不要自己写，避免重复劳动（学习除外）。</li><li>学会使用软件及快捷键来提升自己的编码效率。</li><li>做项目前，要先想清楚怎么做，做好充分的预研和设计。这样不仅便于后续的程序扩展，也能避免无意义的返工。</li><li>将大的目标进行拆解，做好计划，分清主次。不要因为觉得目标遥不可及而拖延，也不要盲目乐观而松懈。</li><li>养成好的作息习惯，找到自己适合工作的黄金时间。</li><li>记性不好，就多记录、多总结、定期复习。哪怕实在记不住，也可以借助文档、收藏夹软件来当自己的第二大脑。</li><li>积累属于自己的工具库，配合搜索软件实现随用随取。</li><li>多和其他同行交流或订阅技术推送，拓宽知识渠道，从而了解更多的工具和方法。有些东西你只要听说过，要用时也许就能节省大量查找时间。</li><li>找到让自己进入专注做事的状态的方法，比如戴上耳机、嚼口香糖等。</li><li>做事高效，离不开经验的积累，因此要多写代码、多做项目。</li></ol><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol><li><p>按照这份路线学习，每天要学多少个小时，总共要学多久？</p><p>回答：每个人学习能力不同，当然没有固定标准。我当时平均每天可以学习 6 个小时，寒暑假能保证 8 小时以上的学习，路线中的时长是我当时学习时长 * 1.5 倍的参考值。实话说，我的学习效率真的不高，对编程感兴趣，多学就好了。与其纠结这个时长，倒不妨多抽点时间，每天多学一点。</p></li><li><p>这份路线上推荐的资源，鱼皮都看完了么？</p><p>回答：我是特么神仙啊？怎么可能都看完了！这份路线的本质是以网上现有的、死板的 Java 大学习框架为基础，结合我自己实际学习的知识、经验和感悟给它注入灵魂，从而希望给大家带来更大的帮助和价值。路线中的资源都是利用我自己的资源检索能力和渠道，通过试看、反复对比和参考评价精选出来的，不是主观臆断、空穴来风。</p></li><li><p>我学到这份路线的哪个位置，可以找工作？</p><p>回答：这和你自己的领悟能力和教育背景有关。夸张点说，有些清华大学的同学，可能之前都没学过 Java，照样能找到大厂 Java 开发工作。学到同一阶段的同学，学习过程中的认真程度、积累总结数、做项目个数、基础学习的好坏不同，找到的工作肯定也不同。但一般情况下，想要进大厂，建议至少学完阶段 4 的微服务部分，然后去做一个完整的项目，用上之前学习的技术；不想进大厂的同学，学完第 3 阶段后，学下缓存和队列，一般也能找到 Java 开发的工作。</p></li><li><p>学完这份路线就能进大厂么？</p><p>回答：你先学完，再问这个问题。没有绝对进大厂的保证，但是相信我，把这份路线上的大部分知识学了，再做做项目，哪怕进不了大厂，你拿到的薪水也绝对比松散学习的同学高！</p></li><li><p>我可以相信你么？</p><p>回答：不要相信我，应该相信你自己。想进大厂，就不要怀疑自己的能力！</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>分享200+个关于AI的网站</title>
      <link href="/2023/09/06/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-AI-%E5%BA%94%E7%94%A8/"/>
      <url>/2023/09/06/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-AI-%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>分享200+个关于AI的网站</p><p>欢迎大家访问：<a href="https://tools.haiyong.site/ai">https://tools.haiyong.site/ai</a></p><h2 id="AI-应用"><a href="#AI-应用" class="headerlink" title="AI 应用"></a>AI 应用</h2><ul><li><p>文心一言: <a href="https://yiyan.baidu.com/">https://yiyan.baidu.com/</a></p><p>百度出品的人工智能语言模型</p></li><li><p>ChatGPT: <a href="https://chat.openai.com/">https://chat.openai.com/</a></p><p>一款功能丰富、智能化、易用性强的人工智能工具，适用于各种内容创作者</p></li><li><p>Notion AI: <a href="https://www.notion.so/">https://www.notion.so/</a></p><p>这是真人工智能，不是人工智障</p></li><li><p>Stable Diffusion WebUI: <a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui">https://github.com/AUTOMATIC1111/stable-diffusion-webui</a></p><p>Github 源码，可以自己搭建一个 Stable Diffusion 算法的 Web 版</p></li><li><p>头像生成卡通: <a href="https://toonme.com/">https://toonme.com/</a></p><p>把头像交给 AI，实现你的卡通梦</p></li><li><p>DALL·E 2: <a href="https://openai.com/dall-e-2/">https://openai.com/dall-e-2/</a></p><p>OpenAI旗下DALL·E 2模型，可以从自然语言的描述中创造出现实的图像和艺术</p></li><li><p>NUWA: <a href="https://nuwa-infinity.microsoft.com/#/">https://nuwa-infinity.microsoft.com/#/</a></p><p>一个多模态生成模型，旨在从给定的文本、图像或视频输入中生成高质量的图像和视频</p></li><li><p>Stability AI: <a href="https://stability.ai/">https://stability.ai/</a></p><p>根据你输入的文字描述，生成相应的图片</p></li><li><p>Novel AI: <a href="https://novelai.net/">https://novelai.net/</a></p><p>用于人工智能辅助写作、讲故事、虚拟陪伴</p></li><li><p>6pen art: <a href="https://6pen.art/">https://6pen.art/</a></p><p>利用文本生成绘画作品的产品</p></li><li><p>Deep Dream Generator: <a href="https://deepdreamgenerator.com/">https://deepdreamgenerator.com/</a></p><p>在文本框内输入文字内容，选择想要的图片格式、风格等</p></li><li><p>Parti: <a href="https://parti.research.google/">https://parti.research.google/</a></p><p>一款文本、图像生成工具</p></li><li><p>DeepAI: <a href="https://deepai.org/machine-learning-model/text2img">https://deepai.org/machine-learning-model/text2img</a></p><p>文本转图像—AI图像生成器API</p></li><li><p>fotor: <a href="https://www.fotor.com/features/ai-image-generator/">https://www.fotor.com/features/ai-image-generator/</a></p><p>AI图像生成器</p></li><li><p>Runway: <a href="https://runwayml.com/">https://runwayml.com/</a></p><p>由人工智能驱动的创意工具</p></li><li><p>即时AI: <a href="https://js.design/AI-gallery">https://js.design/AI-gallery</a></p><p>将创意一键变成创作</p></li><li><p>PicSo: <a href="https://picso.ai/">https://picso.ai/</a></p><p>是一个文本到图像的人工智能艺术生成器应用和创意数字艺术的在线平台</p></li><li><p>Dream AI: <a href="https://dream.ai/">https://dream.ai/</a></p><p>利用人工智能的力量创造美丽的艺术作品</p></li><li><p>LuciaAI: <a href="https://luciaai.com/">https://luciaai.com/</a></p><p>是一个先进的人工智能写作助手</p></li><li><p>Tome AI: <a href="https://beta.tome.app/">https://beta.tome.app/</a></p><p>由AI驱动的讲故事形式</p></li><li><p>beautiful.ai: <a href="https://www.beautiful.ai/presentation-maker">https://www.beautiful.ai/presentation-maker</a></p><p>第一个具有人工智能设计的演示文稿制作器</p></li><li><p>DeckRobot: <a href="https://www.deckrobot.com/">https://www.deckrobot.com/</a></p><p>将毫不费力地设计出数百张幻灯片</p></li><li><p>Slidekick: <a href="https://www.sitekick.ai/">https://www.sitekick.ai/</a></p><p>AI登陆页面构建器</p></li><li><p>Presentations.AI: <a href="https://presentations.ai/">https://presentations.ai/</a></p><p>瞬间获得演讲超能力</p></li><li><p>Alpaca: <a href="https://www.getalpaca.io/">https://www.getalpaca.io/</a></p><p>用于图像生成的AI模型</p></li><li><p>AI Render: <a href="https://airender.gumroad.com/">https://airender.gumroad.com/</a></p><p>使用稳定扩散AI创造令人惊奇的图像</p></li><li><p>autobackend: <a href="https://www.autobackend.dev/">https://www.autobackend.dev/</a></p><p>在几秒钟内创建一个后端</p></li><li><p>ABtesting.ai: <a href="https://abtesting.ai/">https://abtesting.ai/</a></p><p>用AI A/B测试软件提高转化率</p></li><li><p>Mutiny: <a href="https://www.mutinyhq.com/">https://www.mutinyhq.com/</a></p><p>把你的网站变成你的第一收入渠道</p></li><li><p>QuickBooks: <a href="https://quickbooks.intuit.com/global/">https://quickbooks.intuit.com/global/</a></p><p>适用于小型企业的智能、简单的在线会计软件</p></li><li><p>AdCreative.ai: <a href="https://www.adcreative.ai/">https://www.adcreative.ai/</a></p><p>生成广告创意，帮助你销售更多</p></li><li><p>Adflow: <a href="https://www.adflow.ai/">https://www.adflow.ai/</a></p><p>为你的广告文案增光添彩</p></li><li><p>Anyword: <a href="https://anyword.com/">https://anyword.com/</a></p><p>AI文案写作，AI写作助手&amp; 文本生成器</p></li><li><p>Osmosis: <a href="https://osmosis.studio/">https://osmosis.studio/</a></p><p>一个基于内容意识的网络协作设计工具，用于生成销售真实产品的人工智能广告</p></li><li><p>Pencil: <a href="https://www.trypencil.com/">https://www.trypencil.com/</a></p><p>为电子商务提供无限的广告创意</p></li><li><p>LensAI: <a href="https://lens-ai.com/">https://lens-ai.com/</a></p><p>人工智能驱动的上下文计算机视觉广告解决方案</p></li><li><p>SuperBuzz: <a href="https://www.superbuzz.io/">https://www.superbuzz.io/</a></p><p>使用GPT-3技术提高保留流量和利润</p></li><li><p>AI21 Labs: <a href="https://www.ai21.com/">https://www.ai21.com/</a></p><p>通过使机器成为人类的思想伙伴来重新想象我们的阅读和写作方式</p></li><li><p>Aleph Alpha: <a href="https://www.aleph-alpha.com/">https://www.aleph-alpha.com/</a></p><p>人工智能领导者</p></li><li><p>Anthropic: <a href="https://www.anthropic.com/">https://www.anthropic.com/</a></p><p>是一家人工智能安全和研究公司</p></li><li><p>Cohere: <a href="https://cohere.ai/">https://cohere.ai/</a></p><p>开发人员的NLP工具包和语言模型</p></li><li><p>DeepMind: <a href="https://www.deepmind.com/">https://www.deepmind.com/</a></p><p>研究和建立安全的人工智能系统</p></li><li><p>Meta AI: <a href="https://ai.facebook.com/">https://ai.facebook.com/</a></p><p>专注于生成式人工智能</p></li><li><p>Alpa: <a href="https://opt.alpa.ai/">https://opt.alpa.ai/</a></p><p>服务于OPT-175B语言模型</p></li><li><p>BLOOM: <a href="https://bigscience.notion.site/BLOOM-BigScience-176B-Model-ad073ca07cdf479398d5f95d88e218c4">https://bigscience.notion.site/BLOOM-BigScience-176B-Model-ad073ca07cdf479398d5f95d88e218c4</a></p><p>为你的笔记、任务、维基和数据库提供一体化的工作空间</p></li><li><p>Cedille: <a href="https://cedille.ai/">https://cedille.ai/</a></p><p>用于文本生成的NLP平台</p></li><li><p>Perplexity: <a href="https://www.perplexity.ai/">https://www.perplexity.ai/</a></p><p>智能总结并展示信息源</p></li><li><p>Hugging Face: <a href="https://huggingface.co/">https://huggingface.co/</a></p><p>开源数据集和预训练模型</p></li><li><p>HyperCLOVA: <a href="https://www.navercorp.com/promotion/pressReleasesView/30546">https://www.navercorp.com/promotion/pressReleasesView/30546</a></p><p>一个类似于GPT-3的韩语模型训练网站</p></li><li><p>LaMDA: <a href="https://www.blog.google/technology/ai/lamda/">https://www.blog.google/technology/ai/lamda/</a></p><p>突破性的对话技术</p></li><li><p>Turing-NLG: <a href="https://turing.microsoft.com/">https://turing.microsoft.com/</a></p><p>微软图灵项目</p></li><li><p>Megatron NLG: <a href="https://developer.nvidia.com/blog/using-deepspeed-and-megatron-to-train-megatron-turing-nlg-530b-the-worlds-largest-and-most-powerful-generative-language-model/">https://developer.nvidia.com/blog/using-deepspeed-and-megatron-to-train-megatron-turing-nlg-530b-the-worlds-largest-and-most-powerful-generative-language-model/</a></p><p>生成语言模型</p></li><li><p>Muse: <a href="https://muse.lighton.ai/home">https://muse.lighton.ai/home</a></p><p>是一个访问VLM-4的API</p></li><li><p>SambaNova Systems: <a href="https://sambanova.ai/solutions/gpt/">https://sambanova.ai/solutions/gpt/</a></p><p>SambaNova套件简化了类似于人类的语言</p></li><li><p>Wu Dao 1.0: <a href="https://syncedreview.com/2021/03/23/chinas-gpt-3-baai-introduces-superscale-intelligence-model-wu-dao-1-0/">https://syncedreview.com/2021/03/23/chinas-gpt-3-baai-introduces-superscale-intelligence-model-wu-dao-1-0/</a></p><p>BAAI推出超大规模智能模型</p></li><li><p>youtube: <a href="https://www.youtube.com/">https://www.youtube.com/</a></p><p>用GitHub Copilot设计一个API</p></li><li><p>Interior AI: <a href="https://interiorai.com/">https://interiorai.com/</a></p><p>室内设计理念的灵感，以及使用人工智能的虚拟分期应用程序</p></li><li><p>Adobe Podcast: <a href="https://podcast.adobe.com/">https://podcast.adobe.com/</a></p><p>人工智能音频录制和编辑</p></li><li><p>Atomic AI: <a href="https://atomic.ai/">https://atomic.ai/</a></p><p>人工智能驱动的RNA药物发现，具有原子级的精确性</p></li><li><p>Character AI: <a href="https://beta.character.ai/">https://beta.character.ai/</a></p><p>是一个神经语言模型的聊天机器人网络应用</p></li><li><p>D-ID: <a href="https://studio.d-id.com/">https://studio.d-id.com/</a></p><p>使用带有文字或音频的静止图像，就能创建专业视频</p></li><li><p>Lensa: <a href="https://prisma-ai.com/lensa">https://prisma-ai.com/lensa</a></p><p>是一个多合一的图像编辑应用程序</p></li><li><p>MegaPortraits: <a href="https://samsunglabs.github.io/MegaPortraits/">https://samsunglabs.github.io/MegaPortraits/</a></p><p>一次性拍摄百万像素的神经头像</p></li><li><p>MyHeritage: <a href="https://www.myheritage.com/">https://www.myheritage.com/</a></p><p>人工智能生成的图像</p></li><li><p>Photo AI: <a href="https://photoai.io/">https://photoai.io/</a></p><p>第一个人工智能摄影师</p></li><li><p>Profile Picture: <a href="https://www.profilepicture.ai/">https://www.profilepicture.ai/</a></p><p>AI资料图片的生成和制作</p></li><li><p>Ready Player Me: <a href="https://labs.readyplayer.me/avatar">https://labs.readyplayer.me/avatar</a></p><p>一个使用Dall-E的人工智能化身创造者</p></li><li><p>Wonder-AI: <a href="https://www.wonder-ai.com/">https://www.wonder-ai.com/</a></p><p>一个生成性人工智能系统，专门生成奇幻生物和环境的图像</p></li><li><p>Flowrite: <a href="https://www.flowrite.com/">https://www.flowrite.com/</a></p><p>为你的日常沟通增色</p></li><li><p>Blog Idea Generator: <a href="https://www.usetopic.com/blog-idea-generator">https://www.usetopic.com/blog-idea-generator</a></p><p>博客创意生成器—即时的内容灵感</p></li><li><p>Makelog: <a href="https://www.makelog.com/">https://www.makelog.com/</a></p><p>将产品更新转化为你最有力的资产</p></li><li><p>AI Buddy: <a href="https://aibuddy.chat/">https://aibuddy.chat/</a></p><p>用于WhatsApp的聊天工具</p></li><li><p>AskBrian: <a href="https://www.askbrian.ai/">https://www.askbrian.ai/</a></p><p>专业人士的人工智能助手</p></li><li><p>BLOONY: <a href="https://bloony.ai/">https://bloony.ai/</a></p><p>人工智能聊天伙伴</p></li><li><p>Jerome Powell Bot: <a href="https://www.institutionalinvestor.com/article/b1tktmhcfdyqsk/An-Interview-With-a-Hyper-Realistic-AI-Powered-Simulation-of-Jerome-Powell">https://www.institutionalinvestor.com/article/b1tktmhcfdyqsk/An-Interview-With-a-Hyper-Realistic-AI-Powered-Simulation-of-Jerome-Powell</a></p><p>采访超现实的、由人工智能驱动的杰罗姆-鲍威尔的模拟人</p></li><li><p>Kuki: <a href="https://www.kuki.ai/">https://www.kuki.ai/</a></p><p>一个人工智能大脑，旨在为人类提供娱乐服务</p></li><li><p>Project December: <a href="https://projectdecember.net/">https://projectdecember.net/</a></p><p>使用GPT-3来创建超现实的聊天机器人</p></li><li><p>Quickchat: <a href="https://www.quickchat.ai/">https://www.quickchat.ai/</a></p><p>建立像人一样说话的人工智能助理的技术</p></li><li><p>Emerson: <a href="https://www.quickchat.ai/emerson">https://www.quickchat.ai/emerson</a></p><p>是一台可以和你对话的人工智能计算机</p></li><li><p>Grammarly: <a href="https://www.grammarly.com/">https://www.grammarly.com/</a></p><p>是一款在线语法纠正和校对工具</p></li><li><p>Bing AI 作图: <a href="https://cn.bing.com/create">https://cn.bing.com/create</a></p><p>必应图像创作器，输入文字生成图片</p></li><li><p>Tabnine: <a href="https://www.tabnine.com/">https://www.tabnine.com/</a></p><p>是一个AI代码助手</p></li><li><p>Copilot X: <a href="https://github.com/features/preview/copilot-x">https://github.com/features/preview/copilot-x</a></p><p>GitHub 和 OpenAI 合作开发的一个代码自动生成工具</p></li><li><p>RemoveBG: <a href="https://www.remove.bg/">https://www.remove.bg/</a></p><p>图片去除背景</p></li><li><p>Outplay: <a href="https://outplayhq.com/">https://outplayhq.com/</a></p><p>AI生成销售话术</p></li><li><p>CoWriter: <a href="https://cowriter.org/">https://cowriter.org/</a></p><p>AI辅助写作</p></li><li><p>AI Data Sidekick: <a href="https://www.airops.com/">https://www.airops.com/</a></p><p>AI编写SQL代码</p></li><li><p>Fireflies: <a href="https://fireflies.ai/">https://fireflies.ai/</a></p><p>该工具可插入 Zoom、Teams 或 Webex 等流行的视频会议工具，并自动执行做笔记和创建转录的过程</p></li><li><p>dreamlike.art: <a href="https://dreamlike.art/">https://dreamlike.art/</a></p><p>在几秒钟内创造出令人惊叹的原创艺术</p></li><li><p>Phygital+: <a href="https://phygital.plus/">https://phygital.plus/</a></p><p>让创作者在没有代码的情况下使用神经网络</p></li><li><p>ARC Lab: <a href="https://arc.tencent.com/zh/ai-demos/faceRestoration">https://arc.tencent.com/zh/ai-demos/faceRestoration</a></p><p>腾讯ARC实验室推出的AI人像修复小工具</p></li><li><p>Papercup: <a href="https://www.papercup.com/">https://www.papercup.com/</a></p><p>人工智能驱动的配音</p></li><li><p>Voice Mode: <a href="https://www.voicemod.net/zh/">https://www.voicemod.net/zh/</a></p><p>免费即时变声器</p></li><li><p>Soundraw: <a href="https://soundraw.io/">https://soundraw.io/</a></p><p>全新的AI音乐平台</p></li><li><p>LALAL: <a href="https://www.lalal.ai/">https://www.lalal.ai/</a></p><p>提供音乐源分离服务，使用ai技术从任何音频中提取人声，伴奏和多种乐器</p></li><li><p>Boomy: <a href="https://www.boomy.com/">https://www.boomy.com/</a></p><p>在几秒钟内创作出原创歌曲</p></li><li><p>Endel: <a href="https://endel.io/">https://endel.io/</a></p><p>个性化的声音景观</p></li><li><p>MURF: <a href="https://murf.ai/">https://murf.ai/%20</a></p><p>将文字输出为语音，可用于视频制作</p></li><li><p>Mubert: <a href="https://mubert.com/">https://mubert.com/</a></p><p>为内容创作者、品牌和开发者提供的新的免版税音乐生态系统</p></li><li><p>Riffusion: <a href="https://www.riffusion.com/">https://www.riffusion.com/</a></p><p>一个基于AI生成音乐的项目</p></li><li><p>polyAI: <a href="https://poly.ai/">https://poly.ai/</a></p><p>语音助手，企业智能客服语音服务</p></li><li><p>Cascadeur: <a href="https://cascadeur.com/">https://cascadeur.com/</a></p><p>最简单的AI辅助关键帧动画制作软件</p></li><li><p>MunchAI: <a href="https://www.getmunch.com/">https://www.getmunch.com/</a></p><p>自动将长视频转换为数据驱动的短片，用于社交媒体</p></li><li><p>Fliki: <a href="https://fliki.ai/">https://fliki.ai/</a></p><p>用AI语音将文字变成视频</p></li><li><p>pollinations: <a href="https://pollinations.ai/">https://pollinations.ai/</a></p><p>您的引擎 个性化的媒体</p></li><li><p>Autodraw: <a href="https://www.autodraw.com/">https://www.autodraw.com/</a></p><p>人工智能画画平台</p></li><li><p>通义千问: <a href="https://tongyi.aliyun.com/">https://tongyi.aliyun.com/</a></p><p>阿里开发的大语言模型</p></li><li><p>Bard: <a href="https://bard.google.com/">https://bard.google.com/</a></p><p>Google 推出的 AI 聊天对话机器人 Bard</p></li><li><p>Codeium: <a href="https://codeium.com/">https://codeium.com/</a></p><p>人工智能编码及检索</p></li><li><p>CodiumAI: <a href="https://www.codium.ai/">https://www.codium.ai/</a></p><p>AI 代码测试工具</p></li><li><p>Codiga: <a href="https://www.codiga.io/">https://www.codiga.io/</a></p><p>AI 代码实时分析</p></li><li><p>Hocoos AI 建站: <a href="https://hocoos.com/">https://hocoos.com/</a></p><p>AI 建站神器，5 分钟完成建站</p></li><li><p>Replicate: <a href="https://replicate.com/">https://replicate.com/</a></p><p>使用云 API 运行开源机器学习模型</p></li><li><p>Codex: <a href="https://openai.com/blog/openai-codex">https://openai.com/blog/openai-codex</a></p><p>OpenAI 旗下 AI 代码生成训练模型，AI 系统可以将自然语言翻译成代码。</p></li></ul><hr><h2 id="AI-写作"><a href="#AI-写作" class="headerlink" title="AI 写作"></a>AI 写作</h2><ul><li><p>FlowUs: <a href="https://flowus.cn/login">https://flowus.cn/login</a></p><p>一款具有特色的、 Notion 类的 All in One 生产力工具</p></li><li><p>Compose AI: <a href="https://www.compose.ai/">https://www.compose.ai/</a></p><p>AI写作工具</p></li><li><p>Jasper: <a href="https://www.jasper.ai/">https://www.jasper.ai/</a></p><p>文本生成器，使用 AI 制作出令人惊叹的文案</p></li><li><p>Texta: <a href="https://texta.ai/">https://texta.ai/</a></p><p>为你的博客获得高质量的SEO优化和吸引人的内容</p></li><li><p>Writeseed: <a href="https://writeseed.com/">https://writeseed.com/</a></p><p>最好的人工智能写作工具</p></li><li><p>Elephas: <a href="https://elephas.app/">https://elephas.app/</a></p><p>适用于Mac的个人AI写作助手</p></li><li><p>Everylead: <a href="https://www.everylead.ai/">https://www.everylead.ai/</a></p><p>个性化每条线索</p></li><li><p>Automata: <a href="https://byautomata.io/">https://byautomata.io/</a></p><p>将博客和视频作为LinkedIn的帖子、Twitter的线程和新闻通讯重新使用</p></li><li><p>Gramara: <a href="https://gramara.com/">https://gramara.com/</a></p><p>立即写出流利的英语</p></li><li><p>Coda AI: <a href="https://coda.io/product/ai-alpha">https://coda.io/product/ai-alpha</a></p><p>使用Coda AI来拉动背景信息并帮助你添加内容</p></li><li><p>Type: <a href="https://type.ai/">https://type.ai/</a></p><p>由人工智能驱动的文件编辑器</p></li><li><p>GoCharlie: <a href="https://gocharlie.ai/">https://gocharlie.ai/</a></p><p>为内容创作者提供的生成性人工智能平台</p></li><li><p>HyperWrite: <a href="https://www.hyperwriteai.com/">https://www.hyperwriteai.com/</a></p><p>最先进的人工智能写作伴侣</p></li><li><p>Hoppy Copy: <a href="https://www.hoppycopy.co/">https://www.hoppycopy.co/</a></p><p>邮件AI，自动帮你写回复邮件</p></li><li><p>Writers Brew: <a href="https://writersbrew.app/">https://writersbrew.app/</a></p><p>加速阅读和写作2倍的速度和效果</p></li><li><p>Jenni: <a href="https://jenni.ai/">https://jenni.ai/</a></p><p>与Jenni AI一起为你的写作增色</p></li><li><p>Easy Peasy: <a href="https://easy-peasy.ai/">https://easy-peasy.ai/</a></p><p>最佳人工智能作家</p></li><li><p>Moonbeam: <a href="https://www.gomoonbeam.com/">https://www.gomoonbeam.com/</a></p><p>是一个长篇写作的AI助手</p></li><li><p>Rytr: <a href="https://rytr.me/">https://rytr.me/</a></p><p>写作助手</p></li><li><p>Writerly: <a href="https://writerly.ai/">https://writerly.ai/</a></p><p>在几秒钟内产生超相关的、SEO优化的内容。</p></li><li><p>Frase: <a href="https://www.frase.io/">https://www.frase.io/</a></p><p>研究、撰写和优化高质量的SEO内容</p></li><li><p>Quillbot: <a href="https://quillbot.com/">https://quillbot.com/</a></p><p>一个人工智能驱动的转述工具，可以增强你的写作能力</p></li><li><p>Sudowrite: <a href="https://www.sudowrite.com/">https://www.sudowrite.com/</a></p><p>神奇的写作AI打破作家的障碍</p></li><li><p>Writer: <a href="https://writer.com/">https://writer.com/</a></p><p>使用Writer的人工智能写作平台大规模解锁品牌内容</p></li><li><p>Supernormal: <a href="https://supernormal.com/">https://supernormal.com/</a></p><p>更快地编写会议笔记</p></li><li><p>SEO AI: <a href="https://seo.ai/">https://seo.ai/</a></p><p>在更短的时间内创建更多高质量的SEO内容，并确保其性能</p></li><li><p>Writesonic: <a href="https://writesonic.com/">https://writesonic.com/</a></p><p>创作的最佳AI作家</p></li><li><p>Copy.AI: <a href="https://www.copy.ai/">https://www.copy.ai/</a></p><p>为企业生成高质量的文案</p></li><li><p>Boo.ai: <a href="https://boo.ai/">https://boo.ai/</a></p><p>是一种新型的文本编辑器，它使用人工智能生成副本并帮助您集思广益</p></li><li><p>Orchard: <a href="https://www.orchard.ink/">https://www.orchard.ink/</a></p><p>是一个文本编辑器，可以帮助作家构思、迭代和创新</p></li><li><p>Notion AI: <a href="https://www.notion.so/">https://www.notion.so/</a></p><p>工作更快，写得更好，想得更多</p></li><li><p>Readwise Reader: <a href="https://readwise.io/read?ref=ness_labs">https://readwise.io/read?ref=ness_labs</a></p><p>第一款为实力派读者打造的 “稍后阅读 “应用程序</p></li><li><p>纯纯写作: <a href="https://writer.drakeet.com/">https://writer.drakeet.com/</a></p><p>绝不丢失文本编辑器</p></li><li><p>秘塔写作猫: <a href="https://www.xiezuocat.com/">https://www.xiezuocat.com/</a></p><p>集AI写作、多人协作、文本校对、改写润色、自动配图等功能为一体</p></li><li><p>Wordtune: <a href="https://www.wordtune.com/">https://www.wordtune.com/</a></p><p>你的个人写作助理</p></li><li><p>copysmith: <a href="https://copysmith.ai/">https://copysmith.ai/</a></p><p>为企业和电子商务提供人工智能内容创作</p></li><li><p>通义听悟: <a href="https://tingwu.aliyun.com/">https://tingwu.aliyun.com/</a></p><p>实时记录交流内容，多语言翻译</p></li></ul><hr><h2 id="AI-编程"><a href="#AI-编程" class="headerlink" title="AI 编程"></a>AI 编程</h2><ul><li><p>autobackend: <a href="https://www.autobackend.dev/">https://www.autobackend.dev/</a></p><p>在几秒钟内创建一个后端</p></li><li><p>BerriAI: <a href="https://berri.ai/">https://berri.ai/</a></p><p>连接您的数据并在几分钟内建立生产就绪的chatGPT应用程序</p></li><li><p>AutoRegex: <a href="https://www.autoregex.xyz/">https://www.autoregex.xyz/</a></p><p>使用人工智能更容易创建正则表达式</p></li><li><p>Tabnine: <a href="https://www.tabnine.com/">https://www.tabnine.com/</a></p><p>是一个AI代码助手</p></li><li><p>Code Snippets: <a href="https://codesnippets.ai/">https://codesnippets.ai/</a></p><p>GPT-4驱动的VSCode的代码片段</p></li><li><p>HeyCLI: <a href="https://www.heycli.com/">https://www.heycli.com/</a></p><p>将自然语言翻译成终端命令</p></li><li><p>Bifrost: <a href="https://www.bifrost.so/">https://www.bifrost.so/</a></p><p>将Figma设计自动转化为干净的React代码</p></li><li><p>SpellBox: <a href="https://spellbox.app/">https://spellbox.app/</a></p><p>人工智能编程助手</p></li><li><p>Debuild: <a href="https://debuild.app/">https://debuild.app/</a></p><p>快速构建网络应用程序</p></li><li><p>AirOps: <a href="https://www.airops.com/">https://www.airops.com/</a></p><p>使用强大的配方集编写SQL、文档和更多内容</p></li><li><p>AI Query: <a href="https://aiquery.co/">https://aiquery.co/</a></p><p>在几秒钟内用人工智能生成SQL查询</p></li><li><p>HTTPie AI: <a href="https://httpie.io/ai">https://httpie.io/ai</a></p><p>一种与API互动的新方式</p></li><li><p>Ghostwriter: <a href="https://replit.com/site/ghostwriter">https://replit.com/site/ghostwriter</a></p><p>用人工智能加速编码-replit</p></li><li><p>ExplainDev: <a href="https://explain.dev/">https://explain.dev/</a></p><p>根据上下文回答你的问题的代码解释器</p></li><li><p>Codeball: <a href="https://codeball.ai/">https://codeball.ai/</a></p><p>人工智能驱动的代码审查</p></li><li><p>What The Diff: <a href="https://whatthediff.ai/">https://whatthediff.ai/</a></p><p>由人工智能驱动的代码审查助手</p></li><li><p>Ask Command: <a href="https://askcommand.com/">https://askcommand.com/</a></p><p>人工智能驱动的开发者助手</p></li><li><p>PLZ-CIL: <a href="https://github.com/m1guelpf/plz-cli">https://github.com/m1guelpf/plz-cli</a></p><p>用自然语言查找终端命令</p></li><li><p>Codeium: <a href="https://codeium.com/">https://codeium.com/</a></p><p>人工智能编码及检索</p></li><li><p>CodiumAI: <a href="https://www.codium.ai/">https://www.codium.ai/</a></p><p>AI 代码测试工具</p></li><li><p>Codiga: <a href="https://www.codiga.io/">https://www.codiga.io/</a></p><p>AI 代码实时分析</p></li><li><p>Warp.AI: <a href="https://www.warp.dev/">https://www.warp.dev/</a></p><p>与您的终端完全集成的 AI</p></li><li><p>Safurai: <a href="https://www.safurai.com/">https://www.safurai.com/</a></p><p>是一个基于人工智能的IDE扩展，旨在帮助开发人员进行编码、调试和重构</p></li><li><p>brancher.ai: <a href="https://www.brancher.ai/">https://www.brancher.ai/</a></p><p>是一个无代码平台，它可以让你仅用很短的时间通过连接 AI 模型来创建 AI 驱动的应用程序</p></li><li><p>GitHub Copilot: <a href="https://copilot.github.com/">https://copilot.github.com/</a></p><p>你的人工智能配对程序员</p></li><li><p>Akkio: <a href="https://www.akkio.com/">https://www.akkio.com/</a></p><p>是一个易于使用、可扩展和负担得起的无代码人工智能平台，用于实时决策</p></li><li><p>Browse AI: <a href="https://www.browse.ai/">https://www.browse.ai/</a></p><p>监控任何网页的变化</p></li></ul><hr><h2 id="AI-设计"><a href="#AI-设计" class="headerlink" title="AI 设计"></a>AI 设计</h2><ul><li><p>Adobe Firefly: <a href="https://firefly.adobe.com/">https://firefly.adobe.com/</a></p><p>用Firefly做出无限的创作</p></li><li><p>Fiction: <a href="https://www.fiction.com/">https://www.fiction.com/</a></p><p>AI照片和头像生成器</p></li><li><p>Uizard: <a href="https://uizard.io/autodesigner/">https://uizard.io/autodesigner/</a></p><p>使用简单的文本来生成应用程序和网站的多屏幕模拟图</p></li><li><p>Contentinator: <a href="https://contentinator.com/">https://contentinator.com/</a></p><p>为您的 Figma 设计生成逼真的内容</p></li><li><p>Galileo AI: <a href="https://www.usegalileo.ai/">https://www.usegalileo.ai/</a></p><p>界面设计的副手</p></li><li><p>Clickable: <a href="https://www.clickable.so/">https://www.clickable.so/</a></p><p>用AI在几秒钟内生成广告</p></li><li><p>Flair: <a href="https://flair.ai/">https://flair.ai/</a></p><p>用你自己的品牌对象生成产品照片</p></li><li><p>Pebblely: <a href="https://pebblely.com/">https://pebblely.com/</a></p><p>用AI在几秒钟内创建漂亮的产品照片</p></li><li><p>MakeLogoAI: <a href="https://makelogo.ai/">https://makelogo.ai/</a></p><p>独特的标志，100%由人工智能生成</p></li><li><p>Hothot: <a href="https://hotpot.ai/">https://hotpot.ai/</a></p><p>帮助你创建惊人的图形、图片和文本</p></li><li><p>Magician: <a href="https://magician.design/">https://magician.design/</a></p><p>一个由人工智能驱动的Figma的神奇设计工具</p></li><li><p>爱设计 PPT: <a href="https://ppt.isheji.com/">https://ppt.isheji.com/</a></p><p>AI 快速生成高质量 PPT</p></li></ul><hr><h2 id="AI-作图"><a href="#AI-作图" class="headerlink" title="AI 作图"></a>AI 作图</h2><ul><li><p>PicWish: <a href="https://picwish.com/">https://picwish.com/</a></p><p>一个多功能的图像创意平台</p></li><li><p>Stable Diffusion: <a href="https://stability.ai/">https://stability.ai/</a></p><p>AI 绘画，输入关键字生成图片</p></li><li><p>Civitai: <a href="https://civitai.com/">https://civitai.com/</a></p><p>训练好的模型分享网站</p></li><li><p>文心一格: <a href="https://yige.baidu.com/creation">https://yige.baidu.com/creation</a></p><p>百度 AI 产品，创意和艺术辅助产品</p></li><li><p>Nijijourney: <a href="https://nijijourney.com/zh/">https://nijijourney.com/zh/</a></p><p>魔法般的二次元绘画生成</p></li><li><p>Midjourney: <a href="https://www.midjourney.com/home/">https://www.midjourney.com/home/</a></p><p>是一款搭载在 Discord 上的人工智能绘画聊天工具</p></li><li><p>NightCafe Creator: <a href="https://creator.nightcafe.studio/">https://creator.nightcafe.studio/</a></p><p>AI艺术生成器</p></li><li><p>fotor: <a href="https://www.fotor.com/features/ai-image-generator/">https://www.fotor.com/features/ai-image-generator/</a></p><p>AI图像生成器</p></li><li><p>StarryAI: <a href="https://starryai.com/">https://starryai.com/</a></p><p>AI艺术生成器应用程序</p></li><li><p>Hugging Face: <a href="https://huggingface.co/">https://huggingface.co/</a></p><p>开源数据集和预训练模型</p></li><li><p>Adobe Firefly: <a href="https://firefly.adobe.com/">https://firefly.adobe.com/</a></p><p>用Firefly做出无限的创作</p></li><li><p>Hothot: <a href="https://hotpot.ai/">https://hotpot.ai/</a></p><p>帮助你创建惊人的图形、图片和文本</p></li><li><p>HeadshotPro: <a href="https://www.headshotpro.com/">https://www.headshotpro.com/</a></p><p>为远程团队提供专业的公司头像</p></li><li><p>Variart: <a href="https://variart.ai/">https://variart.ai/</a></p><p>输入你想使用的图片，即可生成一个没有任何版权限制的类似图片</p></li><li><p>Scribble Diffusion: <a href="https://scribblediffusion.com/">https://scribblediffusion.com/</a></p><p>使用AI将你的草图变成一个精致的图像</p></li><li><p>BoothAI: <a href="https://www.booth.ai/">https://www.booth.ai/</a></p><p>用AI创建专业品质的产品摄影</p></li><li><p>Draw Things: <a href="https://drawthings.ai/">https://drawthings.ai/</a></p><p>AI辅助的图像生成</p></li><li><p>DiffusionBee: <a href="https://diffusionbee.com/">https://diffusionbee.com/</a></p><p>稳定的扩散应用于AI艺术</p></li><li><p>Glazeroom: <a href="https://glazeroom.com/">https://glazeroom.com/</a></p><p>利用AI帮助艺术家更快地提供更好的艺术作品</p></li><li><p>Astria: <a href="https://www.astria.ai/">https://www.astria.ai/</a></p><p>量身定制的AI图像生成</p></li><li><p>Lexica: <a href="https://lexica.art/">https://lexica.art/</a></p><p>稳定扩散的搜索引擎</p></li><li><p>Erase BG: <a href="https://www.erase.bg/zh/">https://www.erase.bg/zh/</a></p><p>免费去背景软件</p></li><li><p>Clipdrop: <a href="https://clipdrop.co/tools">https://clipdrop.co/tools</a></p><p>AI 技术处理图像的工具</p></li><li><p>Artbreeder: <a href="https://www.artbreeder.com/">https://www.artbreeder.com/</a></p><p>创建令人惊叹的插画和艺术</p></li><li><p>dreamlike.art: <a href="https://dreamlike.art/">https://dreamlike.art/</a></p><p>在几秒钟内创造出令人惊叹的原创艺术</p></li><li><p>getimg.ai: <a href="https://getimg.ai/">https://getimg.ai/</a></p><p>创造出令人惊叹的头像</p></li><li><p>stockimg: <a href="https://stockimg.ai/">https://stockimg.ai/</a></p><p>可帮助用户在几分钟内生成徽标、书籍封面、横幅等</p></li><li><p>Profile Pic Maker: <a href="https://pfpmaker.com/">https://pfpmaker.com/</a></p><p>一个在线的头像制作网站</p></li><li><p>Watermark Remover: <a href="https://www.watermarkremover.io/zh">https://www.watermarkremover.io/zh</a></p><p>从图像中删除水印</p></li><li><p>ThisPersonDoesNotExist: <a href="https://www.thispersondoesnotexist.com/">https://www.thispersondoesnotexist.com/</a></p><p>生成一张不真实存在的人脸照片</p></li><li><p>Playground: <a href="https://playgroundai.com/">https://playgroundai.com/</a></p><p>AI绘画网站</p></li><li><p>Shrink media: <a href="https://www.shrink.media/zh">https://www.shrink.media/zh</a></p><p>通过巧妙的压缩和降维来减小图像的文件大小，并免费下载压缩后的图像</p></li><li><p>Upscale.media: <a href="https://www.upscale.media/zh">https://www.upscale.media/zh</a></p><p>改变图片的分辨率</p></li><li><p>photosonic: <a href="https://photosonic.writesonic.com/">https://photosonic.writesonic.com/</a></p><p>用AI创造独特的图像</p></li><li><p>Arthub.ai: <a href="https://arthub.ai/">https://arthub.ai/</a></p><p>发现、上传和分享人工智能生成的艺术</p></li><li><p>DreamStudio: <a href="https://beta.dreamstudio.ai/generate">https://beta.dreamstudio.ai/generate</a></p><p>AI 图像生成器</p></li><li><p>无界AI: <a href="https://www.wujieai.com/">https://www.wujieai.com/</a></p><p>人人都是艺术家</p></li><li><p>Maze Guru: <a href="https://maze.guru/">https://maze.guru/</a></p><p>一个由 AI 驱动的 AI 绘画生成平台</p></li><li><p>Stable Diffusion Online: <a href="https://stablediffusionweb.com/">https://stablediffusionweb.com/</a></p><p>能够在任何文本输入的情况下生成照片般逼真的图像</p></li><li><p>Craiyon: <a href="http://https//www.craiyon.com">http://https//www.craiyon.com</a></p><p>可以根据任意文本生成图片的网站</p></li><li><p>Magic Eraser: <a href="https://www.magiceraser.io/">https://www.magiceraser.io/</a></p><p>一款操作简单的在线P图网站</p></li><li><p>This Beach Does Not Exist: <a href="https://thisbeachdoesnotexist.com/">https://thisbeachdoesnotexist.com/</a></p><p>基于人工智能的合成海滩发生器</p></li><li><p>Let’s Enhance: <a href="https://letsenhance.io/">https://letsenhance.io/</a></p><p>一款简单易用的在线图片无损放大工具</p></li><li><p>Generated Photos: <a href="https://generated.photos/">https://generated.photos/</a></p><p>是一个专门提供人像照片的网站</p></li><li><p>Imagen: <a href="https://imagen.research.google/">https://imagen.research.google/</a></p><p>文本到图像的扩散模型</p></li></ul><hr><h2 id="AI-训练模型"><a href="#AI-训练模型" class="headerlink" title="AI 训练模型"></a>AI 训练模型</h2><ul><li><p>Codex: <a href="https://openai.com/blog/openai-codex">https://openai.com/blog/openai-codex</a></p><p>OpenAI 旗下 AI 代码生成训练模型，AI 系统可以将自然语言翻译成代码，</p></li><li><p>Imagen: <a href="https://imagen.research.google/">https://imagen.research.google/</a></p><p>文本到图像扩散模型</p></li><li><p>LLaMA: <a href="https://github.com/facebookresearch/llama">https://github.com/facebookresearch/llama</a></p><p>火焰模型推理代码</p></li><li><p>Lobe: <a href="https://www.lobe.ai/">https://www.lobe.ai/</a></p><p>一个免费、易于使用的工具来训练机器学习模型</p></li><li><p>Scale: <a href="https://scale.com/">https://scale.com/</a></p><p>加快人工智能应用的发展</p></li><li><p>Evidently AI: <a href="https://www.evidentlyai.com/">https://www.evidentlyai.com/</a></p><p>开源机器学习监控</p></li></ul><hr><h2 id="AI-影音编辑"><a href="#AI-影音编辑" class="headerlink" title="AI 影音编辑"></a>AI 影音编辑</h2><ul><li><p>Runway: <a href="https://runwayml.com/">https://runwayml.com/</a></p><p>由人工智能驱动的创意工具</p></li><li><p>Synthesia: <a href="https://www.synthesia.io/">https://www.synthesia.io/</a></p><p>该平台提供了一个直观的界面，可以简化任何人的视频创作</p></li><li><p>LyricStudio: <a href="https://lyricstudio.net/">https://lyricstudio.net/</a></p><p>根据你的主题和风格建议独特的歌词创意</p></li><li><p>FakeYou: <a href="https://fakeyou.com/">https://fakeyou.com/</a></p><p>是一个文本到语音的仙境</p></li><li><p>Artflow: <a href="https://www.app.artflow.ai/">https://www.app.artflow.ai/</a></p><p>使用人工智能生成的资产，创建自己独特的动画故事</p></li><li><p>Crypko: <a href="https://crypko.ai/cn/">https://crypko.ai/cn/</a></p><p>可以自动生成动漫人物，且可为动漫人物添加流畅的动画效果</p></li><li><p>Nova A.I.: <a href="https://wearenova.ai/">https://wearenova.ai/</a></p><p>简单的在线视频编辑软件</p></li><li><p>Make-A-Video: <a href="https://makeavideo.studio/">https://makeavideo.studio/</a></p><p>根据文字提示生成高质量视频</p></li><li><p>Verw: <a href="https://vrew.voyagerx.com/zh-TW/">https://vrew.voyagerx.com/zh-TW/</a></p><p>用AI语音识别自动上字幕</p></li><li><p>Descript: <a href="https://www.descript.com/">https://www.descript.com/</a></p><p>一个音视频编辑器</p></li><li><p>Uberduck: <a href="https://uberduck.ai/">https://uberduck.ai/</a></p><p>开源语音AI社区</p></li><li><p>AIVA: <a href="https://www.aiva.ai/">https://www.aiva.ai/</a></p><p>人工智能谱写情感原声音乐</p></li><li><p>Supertone: <a href="https://supertone.ai/">https://supertone.ai/</a></p><p>使用AI创作音乐、声音和其他声音</p></li><li><p>Jukebox: <a href="https://openai.com/research/jukebox">https://openai.com/research/jukebox</a></p><p>是OpenAI的一款AI音乐生成器</p></li><li><p>Altered: <a href="https://www.altered.ai/">https://www.altered.ai/</a></p><p>是一款专业的 AI 变声软件</p></li><li><p>Unscreen: <a href="https://www.unscreen.com/">https://www.unscreen.com/</a></p><p>移除视频背景</p></li><li><p>Topaz video AI: <a href="https://www.topazlabs.com/topaz-video-ai">https://www.topazlabs.com/topaz-video-ai</a></p><p>是一款人工智能视频无损放大软件,</p></li></ul><h2 id="AI-效率助手"><a href="#AI-效率助手" class="headerlink" title="AI 效率助手"></a>AI 效率助手</h2><ul><li><p>Tome AI: <a href="https://beta.tome.app/">https://beta.tome.app/</a></p><p>由AI驱动的讲故事形式</p></li><li><p>tiledesk: <a href="https://tiledesk.com/chatbot-design-studio/">https://tiledesk.com/chatbot-design-studio/</a></p><p>聊天机器人设计工作室</p></li><li><p>IngestAI: <a href="https://ingestai.io/">https://ingestai.io/</a></p><p>把你的知识库变成一个类似于ChatGPT的上下文感知机器人</p></li><li><p>Frase: <a href="https://www.frase.io/">https://www.frase.io/</a></p><p>研究、撰写和优化高质量的SEO内容</p></li><li><p>Mem.ai: <a href="https://mem.ai/">https://mem.ai/</a></p><p>让 AI 组织您团队的工作</p></li><li><p>Resume Worded: <a href="https://resumeworded.com/index.php">https://resumeworded.com/index.php</a></p><p>是一个在线简历改进工具</p></li><li><p>ChatExcel: <a href="https://chatexcel.com/">https://chatexcel.com/</a></p><p>仅通过聊天来操控您的Excel表格</p></li><li><p>Todoist: <a href="https://todoist.com/zh-CN">https://todoist.com/zh-CN</a></p><p>管理您的工作和生活</p></li><li><p>ChatBCG: <a href="https://www.chatbcg.com/">https://www.chatbcg.com/</a></p><p>一个通过AI生成PPT的工具</p></li><li><p>Poised: <a href="https://www.poised.com/">https://www.poised.com/</a></p><p>是一个 AI 支持的沟通教练，通过观察用户在线上会议中的表现，为用户提供个性化的沟通课程和改进反馈</p></li><li><p>TLDR this: <a href="https://tldrthis.com/">https://tldrthis.com/</a></p><p>是一个免费的在线文本摘要工具</p></li><li><p>Iris.ai: <a href="https://ted.iris.ai/">https://ted.iris.ai/</a></p><p>您的科学助理</p></li><li><p>wizdom.ai: <a href="https://www.wizdom.ai/">https://www.wizdom.ai/</a></p><p>是一个自然语言处理平台，帮助人们通过理解和从数据中提取见解来做出更好的决策</p></li><li><p>Simpread: <a href="https://ksria.com/simpread/">https://ksria.com/simpread/</a></p><p>如杂志般沉浸式阅读体验的扩展</p></li><li><p>Semantic Scholar: <a href="https://www.semanticscholar.org/">https://www.semanticscholar.org/</a></p><p>人工智能驱动的研究工具</p></li><li><p>Elicit: <a href="https://elicit.org/">https://elicit.org/</a></p><p>使用机器学习来帮助您进行研究</p></li><li><p>Bardeen: <a href="https://www.bardeen.ai/">https://www.bardeen.ai/</a></p><p>引入突破性的 AI 来自动化手动工作流</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 学习技能 </category>
          
          <category> AI网站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux学习路线</title>
      <link href="/2023/09/06/%E7%89%A9%E8%81%94%E7%BD%91-Linux-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"/>
      <url>/2023/09/06/%E7%89%A9%E8%81%94%E7%BD%91-Linux-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-学习路线"><a href="#Linux-学习路线" class="headerlink" title="Linux 学习路线"></a>Linux 学习路线</h1><p>💂 + 💻 = 👴🏽</p><p>建议先观看视频入门：<a href="https://www.bilibili.com/video/BV1ev411G7VE/">https://www.bilibili.com/video/BV1ev411G7VE/</a></p><h2 id="为什么学-Linux？"><a href="#为什么学-Linux？" class="headerlink" title="为什么学 Linux？"></a>为什么学 Linux？</h2><p>相比于 Windows，Linux 免费、开源、安全、灵活、稳定、便于开发，所以更受企业青睐，甚至 <strong>90% 以上</strong> 的企业应用都是用 Linux 服务器部署的。</p><p>无论是前端、后端、算法、测试、运维等计算机相关岗位的同学，都建议学习下 Linux，大有裨益。</p><h2 id="学习境界"><a href="#学习境界" class="headerlink" title="学习境界"></a>学习境界</h2><p>首先，Linux 入门很简单，但想学的透彻难上加难！</p><p>因此，在学习之前要明确目标。</p><p>可以 Linux 的学习分为几种境界：</p><ol><li>明劲，就是了解 Linux 的基本概念，会敲常用命令来应对工作。对于大多数想从事开发和运维岗位的同学，学到这就足够找到工作了。</li><li>暗劲，又分为两种境界，能理解 Linux 尤其是其内核的设计思想，为小圆满；能将其思想应用到系统的架构设计中，为大圆满。暗劲境界的高手，冲击大厂、做架构师、从事底层开发，都不成问题。</li><li>化劲，可谓出神入化，不仅熟知 Linux 的使用、思想和细节，更能推陈出新，自主创造新的系统。</li></ol><p>当然，一般情况下，会用就够了，想进大厂最好也学习一些内核的设计思想。找到工作后，是否要深入学习完全取决于你自己。</p><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><p><a href="https://qiniuyun.code-nav.cn/img/鱼皮 - Linux 学习路线.png"><img src="https://qiniuyun.code-nav.cn/img/%E9%B1%BC%E7%9A%AE%20-%20Linux%20%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.png" alt="鱼皮 - Linux 学习路线"></a></p><h2 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h2><h3 id="Linux-基础知识"><a href="#Linux-基础知识" class="headerlink" title="Linux 基础知识"></a>Linux 基础知识</h3><ul><li>发展历史</li><li>⭐ 特点和优势</li><li>应用场景</li><li>⭐ 常见 Linux 系统版本（推荐 CentOS 7+）<ul><li>⭐ CentOS</li><li>⭐ Ubuntu</li><li>Debian</li><li>Fedora</li></ul></li><li>何为开源？</li></ul><h3 id="Linux-环境"><a href="#Linux-环境" class="headerlink" title="Linux 环境"></a>Linux 环境</h3><ul><li>搭建方式<ul><li>⭐ 虚拟机</li><li>⭐ 云服务器</li><li>在线工具</li><li>WSL</li><li>Docker 容器</li></ul></li><li>远程连接<ul><li>⭐ SSH</li><li>连接工具<ul><li>⭐ XShell</li><li>⭐ MobaXterm</li><li>SecureCRT</li><li>Putty</li></ul></li></ul></li></ul><h3 id="Linux-常用命令"><a href="#Linux-常用命令" class="headerlink" title="Linux 常用命令"></a>Linux 常用命令</h3><blockquote><p>此处只列举命令名称，命令的具体用法可直接在手册中（<a href="https://www.linuxcool.com/）查询">https://www.linuxcool.com/）查询</a></p></blockquote><h4 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h4><ul><li>uname 查看系统信息</li><li>hostname 查看主机名</li><li>cat /proc/cpuinfo 查看 CPU 信息</li><li>lsmod 查看已加载的系统模块</li><li>top 查看系统使用情况</li><li>df 查看磁盘使用情况</li><li>fdisk 查看磁盘分区</li><li>du 查看目录使用情况</li><li>iostat 查看 I / O 使用情况</li><li>free 显示系统内存情况</li><li>env 查看环境变量</li><li>uptime 查看系统运行时间、用户数、负载</li></ul><h4 id="系统操作"><a href="#系统操作" class="headerlink" title="系统操作"></a>系统操作</h4><ul><li>shutdown 关机</li><li>reboot 重启</li><li>mount 挂载设备</li><li>umount 卸载设备</li></ul><h4 id="用户相关"><a href="#用户相关" class="headerlink" title="用户相关"></a>用户相关</h4><ul><li>su 切换用户</li><li>sudo 以管理员身份执行</li><li>who 查看当前用户名</li><li>ssh 远程连接</li><li>logout 注销</li><li>useradd 创建用户</li><li>userdel 删除用户</li><li>usermod 修改用户</li><li>groupadd 创建用户组</li><li>groupdel 删除用户组</li><li>groupmod 修改用户组</li><li>passwd 修改密码</li><li>last 显示用户或终端的登录情况</li></ul><h4 id="文件相关"><a href="#文件相关" class="headerlink" title="文件相关"></a>文件相关</h4><ul><li>cd 切换目录</li><li>ls 查看目录列表</li><li>tree 打印目录树</li><li>mkdir 创建目录</li><li>rm 删除目录</li><li>touch 新建文件</li><li>cp 复制文件</li><li>mv 移动文件</li><li>ln 创建文件链接</li><li>find 搜索文件</li><li>locate 定位文件</li><li>whereis 查看可执行文件路径</li><li>which 在 PATH 指定的路径中，搜索某系统命令的位置</li><li>chmod 设置目录权限</li><li>cat / more / less 查看文件</li><li>tac 倒序查看文件</li><li>head / tail 查看文件开头 / 结尾</li><li>paste 合并文件</li><li>zip / tar / gzip 压缩文件</li><li>unzip / tar / gunzip 解压文件</li><li>grep / sed / awk 文本处理</li><li>vim 文本编辑</li></ul><h4 id="程序相关"><a href="#程序相关" class="headerlink" title="程序相关"></a>程序相关</h4><ul><li>crontab 计划任务</li><li>nohup 后台运行程序</li><li>jobs 查看系统任务</li><li>ps 查看进程</li><li>kill 杀死进程</li><li>rpm / yum / apt / apt-get / dpkg 软件包管理</li><li>service / systemctl 服务管理</li></ul><h4 id="网络相关"><a href="#网络相关" class="headerlink" title="网络相关"></a>网络相关</h4><ul><li>ifconfig 查看网络属性</li><li>netstat 查看网络状态</li><li>iptables 查看 iptables 规则</li></ul><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul><li>date 显示系统时间</li><li>cal 显示日历</li><li>history 显示与操作历史</li><li>help 帮助</li><li>alias 别名</li></ul><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><ul><li>用户</li><li>用户组</li><li>ACL 权限管理</li><li>用户切换</li><li>管理员</li></ul><h3 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h3><ul><li>文件操作<ul><li>创建</li><li>修改</li><li>复制</li><li>移动</li><li>删除</li></ul></li><li>文件浏览</li><li>文件搜索</li><li>文件权限</li><li>软硬链接</li><li>压缩 / 解压</li></ul><h3 id="文本操作"><a href="#文本操作" class="headerlink" title="文本操作"></a>文本操作</h3><ul><li>正则表达式</li><li>grep</li><li>sed</li><li>awk</li></ul><h3 id="VIM-编辑器"><a href="#VIM-编辑器" class="headerlink" title="VIM 编辑器"></a>VIM 编辑器</h3><ul><li>基本操作</li><li>模式</li><li>快捷键</li><li>VIM 定制</li><li>插件增强</li></ul><p>送张 VIM 键盘图：</p><p><a href="https://qiniuyun.code-nav.cn/img/vi-vim-cheat-sheet-sch.gif"><img src="https://qiniuyun.code-nav.cn/img/vi-vim-cheat-sheet-sch.gif" alt="img"></a></p><h3 id="磁盘管理"><a href="#磁盘管理" class="headerlink" title="磁盘管理"></a>磁盘管理</h3><ul><li>使用情况查询</li><li>磁盘分区</li><li>挂载</li></ul><h3 id="驱动管理"><a href="#驱动管理" class="headerlink" title="驱动管理"></a>驱动管理</h3><ul><li>驱动加载</li><li>驱动更新</li><li>网卡</li><li>显卡</li></ul><h3 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h3><ul><li>启动进程</li><li>杀死进程</li><li>查看进程</li><li>前台 / 后台任务</li><li>进程监控</li></ul><h3 id="计划任务"><a href="#计划任务" class="headerlink" title="计划任务"></a>计划任务</h3><ul><li>crond 服务</li><li>crontab 命令</li></ul><h3 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h3><ul><li>IP</li><li>端口</li><li>主机名</li><li>hosts</li><li>网络配置</li><li>网络状态</li><li>网络监控</li></ul><h3 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h3><ul><li>系统设置<ul><li>日期时间</li><li>语言</li><li>字符集</li></ul></li><li>系统服务</li><li>环境变量</li><li>日志</li><li>系统关机 / 重启</li><li>数据备份与恢复</li></ul><h3 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a>服务管理</h3><ul><li>服务查看</li><li>启动服务</li><li>禁用服务</li><li>删除服务</li><li>开机自启</li></ul><h3 id="软件管理"><a href="#软件管理" class="headerlink" title="软件管理"></a>软件管理</h3><ul><li>软件包管理器<ul><li>⭐ rpm</li><li>⭐ yum</li><li>apt</li><li>apt-get</li><li>dpkg</li></ul></li><li>软件安装</li><li>软件更新</li><li>软件卸载</li><li>源码安装</li></ul><h3 id="常用软件-服务搭建"><a href="#常用软件-服务搭建" class="headerlink" title="常用软件 / 服务搭建"></a>常用软件 / 服务搭建</h3><ul><li>HTTP</li><li>Mail</li><li>NFS</li><li>DNS</li><li>FTP</li><li>mysql</li><li>LVS + Keepalived</li><li>Apache</li><li>Nginx</li><li>Redis</li><li>日志服务</li></ul><h3 id="Shell-脚本编程"><a href="#Shell-脚本编程" class="headerlink" title="Shell 脚本编程"></a>Shell 脚本编程</h3><ul><li>默认变量</li><li>运算符</li><li>条件</li><li>循环</li><li>执行</li><li>函数<ul><li>系统函数</li><li>自定义函数</li></ul></li><li>规范</li><li>调试方法</li><li>管道</li><li>I/O 重定向</li></ul><h3 id="Linux-启动过程"><a href="#Linux-启动过程" class="headerlink" title="Linux 启动过程"></a>Linux 启动过程</h3><ul><li>BIOS 启动引导</li><li>引导加载程序</li><li>内核加载</li><li>系统初始化（init）</li><li>运行级别</li><li>启动内核</li><li>执行初始化脚本</li><li>用户登录</li></ul><h3 id="Linux-内核"><a href="#Linux-内核" class="headerlink" title="Linux 内核"></a>Linux 内核</h3><ul><li>内核的组成</li><li>目录结构</li><li>版本</li><li>模块</li><li>编译</li><li>裁剪</li></ul><p>具体路线图参考：</p><p><a href="https://qiniuyun.code-nav.cn/img/内核知识体系.jpg"><img src="https://qiniuyun.code-nav.cn/img/%E5%86%85%E6%A0%B8%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB.jpg" alt="内核知识体系 by 0Voice"></a></p><h3 id="第三方工具"><a href="#第三方工具" class="headerlink" title="第三方工具"></a>第三方工具</h3><ul><li>Ansible</li><li>Webmin</li><li>宝塔 Linux</li></ul><h2 id="岗位"><a href="#岗位" class="headerlink" title="岗位"></a>岗位</h2><ul><li>后端开发（Java / Go / C++）</li><li>底层开发（C / C++）</li><li>运维开发</li><li>大数据</li><li>云计算</li><li>自动化运维</li><li>嵌入式开发</li><li>网络工程师</li></ul><h2 id="学习建议"><a href="#学习建议" class="headerlink" title="学习建议"></a>学习建议</h2><p>多动手实践，建议自己购买一台云服务器，并且在本地搭建 Linux 虚拟机环境。</p><p>一定要自己从 0 开始手敲命令安装软件、部署服务，熟悉整个项目的上线流程。</p><p>每个命令至少要跟着敲一遍，了解它们的作用，并通过自然地练习，熟悉常用的 Linux 命令。</p><p>记不住没关系，用文档查就行了。</p><p>先会用，再理解。</p><p>时间不多的话，可以通过面试题来了解一些 Linux 设计思想，而不是直接去深入学习内核，虽说学会了的确大有裨益，但性价比不高。</p><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><ul><li>视频<ul><li>⭐ 2021 韩顺平 一周学会Linux：<a href="https://www.bilibili.com/video/BV1Sv411r7vd（基于">https://www.bilibili.com/video/BV1Sv411r7vd（基于</a> CentOS 7.6 版本较新，视频长度刚刚好，也比较完整）</li><li>【千锋】Linux 云计算基础视频教程 650 集入门：<a href="https://www.bilibili.com/video/BV1pz4y1D73n（很全面，适合时间足够、想认真学的同学）">https://www.bilibili.com/video/BV1pz4y1D73n（很全面，适合时间足够、想认真学的同学）</a></li><li>【狂神说Java】Linux 教程 - 阿里云真实环境学习：<a href="https://www.bilibili.com/video/BV187411y7hF（算是个小的入门教程吧，时间足够的话还是推荐看更完整的）">https://www.bilibili.com/video/BV187411y7hF（算是个小的入门教程吧，时间足够的话还是推荐看更完整的）</a></li><li>细说Linux - 从入门到精通：<a href="https://study.163.com/course/courseMain.htm?courseId=983014（感觉有点啰嗦，作为备用吧）">https://study.163.com/course/courseMain.htm?courseId=983014（感觉有点啰嗦，作为备用吧）</a></li><li>玩转Vim 从放弃到爱不释手：<a href="https://www.imooc.com/learn/1129（好评很多）">https://www.imooc.com/learn/1129（好评很多）</a></li><li>阿里云 Linux 运维学习路线：<a href="https://edu.aliyun.com/roadmap/linux">https://edu.aliyun.com/roadmap/linux</a></li></ul></li><li>书籍<ul><li>《鸟哥的 Linux 私房菜 —— 基础篇》：<a href="http://cn.linux.vbird.org/linux_basic/linux_basic.php（经典）">http://cn.linux.vbird.org/linux_basic/linux_basic.php（经典）</a></li><li>《深入理解 LINUX 内核》：<a href="https://book.douban.com/subject/1767120/">https://book.douban.com/subject/1767120/</a></li><li>《深入Linux内核架构》：<a href="https://book.douban.com/subject/4843567/">https://book.douban.com/subject/4843567/</a></li><li>《Linux内核完全剖析》：<a href="https://book.douban.com/subject/3229243/">https://book.douban.com/subject/3229243/</a></li><li>《Linux内核设计与实现(原书第3版)》：<a href="https://book.douban.com/subject/6097773/">https://book.douban.com/subject/6097773/</a></li></ul></li><li>文档<ul><li>Linux 教程（菜鸟教程）：<a href="https://www.runoob.com/linux/linux-tutorial.html">https://www.runoob.com/linux/linux-tutorial.html</a></li><li>Linux 教程（W3CSchool）：<a href="https://www.w3cschool.cn/linux/">https://www.w3cschool.cn/linux/</a></li><li>Linux 工具快速教程：<a href="https://linuxtools-rst.readthedocs.xn--io(">https://linuxtools-rst.readthedocs.io（基础、工具进阶、工具参考）</a>-nw3ca5701dba793cpumgmqca0288f9ywafw6c1iv/)</li></ul></li><li>合集<ul><li>Linux内核学习资料：<a href="https://github.com/0voice/linux_kernel_wiki">https://github.com/0voice/linux_kernel_wiki</a></li><li>GitHub Linux 专区：<a href="https://github.com/topics/linux（很多好项目）">https://github.com/topics/linux（很多好项目）</a></li><li>GitHub Linux 合集：<a href="https://github.com/inputsh/awesome-linux（Linux">https://github.com/inputsh/awesome-linux（Linux</a> 系列技术）</li><li>StackOverflow：<a href="https://stackoverflow.com/questions/tagged/linux（解决问题必备）">https://stackoverflow.com/questions/tagged/linux（解决问题必备）</a></li><li>掘金 Linux 专区：<a href="https://juejin.cn/tag/Linux（技术文章）">https://juejin.cn/tag/Linux（技术文章）</a></li></ul></li><li>实战<ul><li>⭐ 蓝桥云课 Linux 基础入门：<a href="https://www.lanqiao.cn/courses/1（强烈推荐）">https://www.lanqiao.cn/courses/1（强烈推荐）</a></li><li>腾讯云动手实验室：<a href="https://cloud.tencent.com/developer/labs">https://cloud.tencent.com/developer/labs</a></li><li>阿里云体验实验室：<a href="https://developer.aliyun.com/adc/labs/">https://developer.aliyun.com/adc/labs/</a></li><li>阿里云知行实验室：<a href="https://start.aliyun.com/">https://start.aliyun.com/</a></li><li>华为云沙箱实验室：<a href="https://lab.huaweicloud.com/">https://lab.huaweicloud.com/</a></li></ul></li><li>社区（国内倒的差不多了）<ul><li>Linux 中国：<a href="https://linux.cn/">https://linux.cn/</a></li><li>开源中国：<a href="https://www.oschina.net/（综合的开源社区）">https://www.oschina.net/（综合的开源社区）</a></li><li>红帽官网：<a href="https://www.redhat.com/zh">https://www.redhat.com/zh</a></li></ul></li><li>工具<ul><li>DistroTest 在线操作系统测试：<a href="https://distrotest.net/">https://distrotest.net</a></li><li>⭐ Linux 命令搜索：<a href="https://wangchujiang.com/linux-command">https://wangchujiang.com/linux-command</a></li><li>Linux 命令大全手册：<a href="https://man.linuxde.net/">https://man.linuxde.net/</a></li><li>Linux 命令大全手册：<a href="https://www.linuxcool.com/">https://www.linuxcool.com/</a></li><li>Linux 命令示例：<a href="http://linux-commands-examples.com/">http://linux-commands-examples.com/</a></li><li>宝塔 Linux 面板：<a href="https://www.bt.cn/">https://www.bt.cn/</a></li><li>在线 Shell 脚本检查：<a href="https://www.shellcheck.net/">https://www.shellcheck.net</a></li></ul></li><li>面试题<ul><li>牛客网 Linux 专项练习：<a href="https://www.nowcoder.com/intelligentTest">https://www.nowcoder.com/intelligentTest</a></li><li>牛客网 Linux 面试题：<a href="https://www.nowcoder.com/search?query=linux面试题&amp;type=question">https://www.nowcoder.com/search?query=linux%E9%9D%A2%E8%AF%95%E9%A2%98&amp;type=question</a></li><li>Linux 常见面试题整理：<a href="https://zhuanlan.zhihu.com/p/376749877">https://zhuanlan.zhihu.com/p/376749877</a></li><li>Linux 常见面试题整理：<a href="https://github.com/0voice/linux_kernel_wiki#-面试题">https://github.com/0voice/linux_kernel_wiki#-%E9%9D%A2%E8%AF%95%E9%A2%98</a></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python抓取数据分析网站</title>
      <link href="/2023/09/05/%E5%90%8E%E7%AB%AF-python%E6%8A%93%E5%8F%96%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E7%BD%91%E7%AB%99/"/>
      <url>/2023/09/05/%E5%90%8E%E7%AB%AF-python%E6%8A%93%E5%8F%96%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<h1 id="python-数据分析入门-——bili-数据抓取到数据分析网站的实战记录"><a href="#python-数据分析入门-——bili-数据抓取到数据分析网站的实战记录" class="headerlink" title="python 数据分析入门 ——bili 数据抓取到数据分析网站的实战记录"></a>python 数据分析入门 ——bili 数据抓取到数据分析网站的实战记录</h1><h2 id="先说两句废话"><a href="#先说两句废话" class="headerlink" title="先说两句废话"></a>先说两句废话</h2><p>最近，很多人都问我是不是摸鱼不更新博客了。<br>其实是我是点新技能去了，差不多用了 10 天的时间学习了下 python。<br>然后用了差不多 10 天的时间写了一个基于 python 的 flask 框架的网站项目。<br>虽说项目还是有点小瑕疵，但至少是实现出来了。<br>由于代码基本上都是在本地写的，没上传到 github 上，因此这几天的 github 贡献比较惨淡。<br>目前，项目通过 cloudflare 的 workers 反向代理。<br>部署在 <a href="https://bili.zfour.workers.dev/">BILIBILI 交互设计</a>（ <a href="https://bili.zfour.workers.dev/）">https://bili.zfour.workers.dev/）</a><br>实现了基本的数据可视化、数据库展示、线性回归分析等功能。<br>以下是主要页面的情况：<br><strong>网站首页：</strong><br><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong1.png" alt="image.png"><br><strong>用户行为分析：</strong><br><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong2.png" alt="image.png"><br><strong>文字关联性影响：</strong><br><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong3.png" alt="image.png"></p><h1 id="那么我是怎么实现的呢？"><a href="#那么我是怎么实现的呢？" class="headerlink" title="那么我是怎么实现的呢？"></a>那么我是怎么实现的呢？</h1><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong4.jpg" alt="yuque_diagram.jpg"></p><p>其实主要花时间的地方在于<strong>编写爬取策略</strong>以及<strong>数据展示策略</strong>上。<br>python 的优点在于其丰富的依赖库支持，省去了许多不必要的麻烦。<br>总的来说，分为三个步骤：</p><ul><li>数据爬取存储到 sqlite</li><li>运用 leancloud 进行数据存储和读取</li><li>运用 ECHARTS 进行数据展示</li></ul><h1 id="爬取数据存储到-sqlite"><a href="#爬取数据存储到-sqlite" class="headerlink" title="爬取数据存储到 sqlite"></a>爬取数据存储到 sqlite</h1><h2 id="为什么要挂-ip-池？"><a href="#为什么要挂-ip-池？" class="headerlink" title="为什么要挂 ip 池？"></a>为什么要挂 ip 池？</h2><p>不少网站对于同一 ip 高频次访问网站的的行为会进行阻断。<br>为了保障爬虫能正常获取网站的信息，需要对爬虫进行伪装。<br>通过给每一个请求代理不同 ip，能欺骗网站是不同 ip 的多位用户在访问网站。<br>对于爬取大量数据来说是十分必要的。</p><h2 id="如何挂-ip-池？"><a href="#如何挂-ip-池？" class="headerlink" title="如何挂 ip 池？"></a>如何挂 ip 池？</h2><p>这里我参考了目前 github 上比较火的项目 <a href="https://github.com/jhao104/proxy_pool">ProxyPool 爬虫代理 IP 池</a><br><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong5.png" alt="image.png"><br>项目中有详细的配置文档，因为该内容不是本次的重点，所以不过多赘述。<br>主要难点是需要搭建一个<strong>本地 Redis 数据库</strong>环境用于存储 ip 池。因此需要进行下载安装，并开启 <strong>Redis。</strong><br>在下载项目后进行依赖的安装，通过以下代码开启 ip 池服务。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PYTHON</span><br><span class="line"># 启动调度程序</span><br><span class="line">python proxyPool.py schedule</span><br><span class="line"></span><br><span class="line"># 启动webApi服务</span><br><span class="line">python proxyPool.py server</span><br></pre></td></tr></table></figure><p>然后，便可以访问本地 api 获取实时更新的可用 ip 和端口了。<br>大概的原理如下图。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong6.jpg" alt="yuque_diagram.jpg"></p><h2 id="如何爬取数据？"><a href="#如何爬取数据？" class="headerlink" title="如何爬取数据？"></a>如何爬取数据？</h2><p>爬取数据主要是通过 requests 库实现的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PYTHON</span><br><span class="line">&gt;&gt;&gt; r = requests.get(&#x27;https://api.github.com/user&#x27;, auth=(&#x27;user&#x27;, &#x27;pass&#x27;))</span><br><span class="line">&gt;&gt;&gt; r.status_code</span><br><span class="line">200</span><br><span class="line">&gt;&gt;&gt; r.headers[&#x27;content-type&#x27;]</span><br><span class="line">&#x27;application/json; charset=utf8&#x27;</span><br><span class="line">&gt;&gt;&gt; r.encoding</span><br><span class="line">&#x27;utf-8&#x27;</span><br><span class="line">&gt;&gt;&gt; r.text</span><br><span class="line">u&#x27;&#123;&quot;type&quot;:&quot;User&quot;...&#x27;</span><br><span class="line">&gt;&gt;&gt; r.json()</span><br><span class="line">&#123;u&#x27;private_gists&#x27;: 419, u&#x27;total_private_repos&#x27;: 77, ...&#125;</span><br></pre></td></tr></table></figure><p>本次爬取的数据内容为以 “交互设计” 为搜索关键词按照播放量排列的搜索结果。<br>bili 提供的搜索结果为 50 个分页，每页 20 条视频数据。<br>同时为了获取点赞、转发、收藏等数据，必须得遍历爬取每一个详情页。<br>因此需要设置两层循环，首先遍历 50 个分页，再遍历爬取每个分页的详情页链接。对每个详情页的数据进行爬取。<br>以下是主要代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br></pre></td><td class="code"><pre><span class="line">PYTHON</span><br><span class="line"># -*- codeing = utf-8 -*-</span><br><span class="line"># @Time : 2020/12/22 9:05 上午</span><br><span class="line"># @Author : Zfour</span><br><span class="line"># @File : spyder1.py</span><br><span class="line"># @Software : PyCharm</span><br><span class="line"></span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">import re</span><br><span class="line">import urllib.request, urllib.error</span><br><span class="line">import xlwt</span><br><span class="line">import sqlite3</span><br><span class="line">import ssl</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 从IP代理池获取随机代理的IP和端口</span><br><span class="line">def get_proxy():</span><br><span class="line">    return requests.get(&quot;http://127.0.0.1:5010/get/&quot;).json()</span><br><span class="line"></span><br><span class="line"># 从IP代理池删除失效的代理的IP和端口</span><br><span class="line">def delete_proxy(proxy):</span><br><span class="line">    requests.get(&quot;http://127.0.0.1:5010/delete/?proxy=&#123;&#125;&quot;.format(proxy))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ssl验证</span><br><span class="line">ssl._create_default_https_context = ssl._create_unverified_context</span><br><span class="line"></span><br><span class="line"># 正则匹配规则</span><br><span class="line"># findlink = re.compile(r&#x27;&lt;a href=&quot;(.*?)&quot;&gt;&#x27;)</span><br><span class="line"># findimglink = re.compile(r&#x27;&lt;img.*src=&quot;(.*?)&quot;&#x27;, re.S)</span><br><span class="line"># findtitle = re.compile(r&#x27;&lt;span class=&quot;title&quot;&gt;(.*?)&lt;/span&gt;&#x27;)</span><br><span class="line"># findrate = re.compile(r&#x27;&lt;span class=&quot;rating_num&quot; property=&quot;v:average&quot;&gt;(.*?)&lt;/span&gt;&#x27;)</span><br><span class="line"># findpeoplenum = re.compile(r&#x27;&lt;span&gt;(\d*)人评价&lt;/span&gt;&#x27;)</span><br><span class="line"># findinfo = re.compile(r&#x27;&lt;span class=&quot;inq&quot;&gt;(.*?)&lt;/span&gt;&#x27;)</span><br><span class="line"># findmessage = re.compile(r&#x27;&lt;p class=&quot;&quot;&gt;(.*?)&lt;/p&gt;&#x27;, re.S)</span><br><span class="line"># 这里将部分正则表达用BS4进行了替换</span><br><span class="line"></span><br><span class="line">videolink = re.compile(r&#x27;href=&quot;//(.*?)\?from=search&quot;&#x27;)</span><br><span class="line">zan = re.compile(r&#x27;title=&quot;点赞数(.*?)&quot;&gt;&#x27;)</span><br><span class="line">coin = re.compile(r&#x27;&lt;/i&gt;(.*?)&lt;/span&gt;&#x27;, re.S)</span><br><span class="line">a_link = re.compile(r&#x27;&gt;(.*?)&lt;/a&gt;&#x27;, re.S)</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    baseurl = &quot;https://search.bilibili.com/all?keyword=%E4%BA%A4%E4%BA%92%E8%AE%BE%E8%AE%A1&amp;order=click&amp;duration=0&amp;tids_1=0&amp;page=&quot;</span><br><span class="line">    # bilibili的搜索链接</span><br><span class="line"></span><br><span class="line">    datalist = getData(baseurl)</span><br><span class="line">    # 获取数据</span><br><span class="line"></span><br><span class="line">    dbsavepath = &#x27;bili.db&#x27;</span><br><span class="line">    # 定义存储路径</span><br><span class="line"></span><br><span class="line">    saveData2DB(datalist, dbsavepath)</span><br><span class="line">    # 存储数据到本地数据库</span><br><span class="line"></span><br><span class="line"># 获取Data得到一个存储数据的list</span><br><span class="line">def getData(baseurl):</span><br><span class="line">    datalist = []</span><br><span class="line">    # 定义数据列表</span><br><span class="line"></span><br><span class="line">    for i in range(0, 50):</span><br><span class="line">        url = baseurl + str(i + 1)</span><br><span class="line">        html = askurl(url)</span><br><span class="line">        # print(html)</span><br><span class="line">        soup = BeautifulSoup(html, &quot;html.parser&quot;)</span><br><span class="line">    # 遍历50页的数据，通过bs4进行解析</span><br><span class="line"></span><br><span class="line">        for item in soup.find_all(&#x27;a&#x27;, class_=&#x27;img-anchor&#x27;):</span><br><span class="line">            # print(item)</span><br><span class="line">            item = str(item)</span><br><span class="line">            video_link = re.findall(videolink, item)[0]</span><br><span class="line">            video_link = &#x27;https://&#x27; + video_link</span><br><span class="line">            video_html = askurl(video_link)</span><br><span class="line">            video_soup = BeautifulSoup(video_html, &quot;html.parser&quot;)</span><br><span class="line">            # 获取当页的稿件链接，并用bs4解析详情页</span><br><span class="line"></span><br><span class="line">            like_num = video_soup.select(&#x27;.ops &gt; .like&#x27;)</span><br><span class="line">            like_num = str(like_num)</span><br><span class="line">            like_num = re.findall(zan, like_num)[0]</span><br><span class="line">            # -------------获取点赞数</span><br><span class="line"></span><br><span class="line">            coin_num = video_soup.select(&#x27;.ops &gt; .coin&#x27;)[0]</span><br><span class="line">            coin_num = str(coin_num)</span><br><span class="line">            coin_num = re.findall(coin, coin_num)[0].strip()</span><br><span class="line">            if coin_num == &#x27;投币&#x27;:</span><br><span class="line">                coin_num = &#x27;0&#x27;</span><br><span class="line">            # 将万还原为数字</span><br><span class="line">            for ch in coin_num:</span><br><span class="line">                if u&#x27;\u4e00&#x27; &lt;= ch &lt;= u&#x27;\u9fff&#x27;:</span><br><span class="line">                    coin_num = coin_num.replace(&#x27;万&#x27;, &#x27;&#x27;)</span><br><span class="line">                    coin_num = float(coin_num) * 10000</span><br><span class="line">                    coin_num = int(coin_num)</span><br><span class="line">            # -------------获取投币数</span><br><span class="line"></span><br><span class="line">            collect_num = video_soup.select(&#x27;.ops &gt; .collect&#x27;)[0].text</span><br><span class="line">            collect_num = collect_num.replace(&#x27;\n&#x27;, &#x27;&#x27;).strip()</span><br><span class="line">            if collect_num == &#x27;收藏&#x27;:</span><br><span class="line">                collect_num = &#x27;0&#x27;</span><br><span class="line">            for ch in collect_num:</span><br><span class="line">                if u&#x27;\u4e00&#x27; &lt;= ch &lt;= u&#x27;\u9fff&#x27;:</span><br><span class="line">                    collect_num = collect_num.replace(&#x27;万&#x27;, &#x27;&#x27;)</span><br><span class="line">                    collect_num = float(collect_num) * 10000</span><br><span class="line">                    collect_num = int(collect_num)</span><br><span class="line">            # -------------获取收藏数</span><br><span class="line"></span><br><span class="line">            share_num = video_soup.select(&#x27;.ops &gt; .share&#x27;)[0].text</span><br><span class="line">            share_num = share_num.replace(&#x27;\n&#x27;, &#x27;&#x27;).strip()</span><br><span class="line">            if share_num == &#x27;分享&#x27;:</span><br><span class="line">                share_num = &#x27;0&#x27;</span><br><span class="line">            for ch in share_num:</span><br><span class="line">                if u&#x27;\u4e00&#x27; &lt;= ch &lt;= u&#x27;\u9fff&#x27;:</span><br><span class="line">                    share_num = share_num.replace(&#x27;万&#x27;, &#x27;&#x27;)</span><br><span class="line">                    share_num = float(share_num) * 10000</span><br><span class="line">            share_num = int(share_num)</span><br><span class="line">            # -------------获取分享数</span><br><span class="line"></span><br><span class="line">            play_num = video_soup.select(&#x27;.video-data &gt; .view&#x27;)[0][&#x27;title&#x27;]</span><br><span class="line">            play_num = play_num.replace(&#x27;总播放数&#x27;, &#x27;&#x27;)</span><br><span class="line">            play_num = int(play_num)</span><br><span class="line">            # -------------获取播放量</span><br><span class="line"></span><br><span class="line">            danmu_num = video_soup.select(&#x27;.video-data &gt; .dm&#x27;)[0].text</span><br><span class="line">            danmu_num = danmu_num.replace(&quot;弹幕&quot;, &quot;&quot;)</span><br><span class="line">            danmu_num = int(danmu_num)</span><br><span class="line">            # -------------获取弹幕量</span><br><span class="line"></span><br><span class="line">            date = video_soup.select(&#x27;.video-data &gt; span&#x27;)[2].text[0:10]</span><br><span class="line">            time = video_soup.select(&#x27;.video-data &gt; span&#x27;)[2].text[10:].strip()</span><br><span class="line">            title = video_soup.select(&#x27;.video-title&#x27;)[0][&#x27;title&#x27;]</span><br><span class="line">            # -------------获取时间和标题</span><br><span class="line"></span><br><span class="line">            tag = video_soup.select(&#x27;.tag-link&#x27;)</span><br><span class="line">            taglist = []</span><br><span class="line">            for tg in tag:</span><br><span class="line">                tg = str(tg)</span><br><span class="line">                tg = tg.replace(&quot;&lt;span&gt;&quot;, &quot;&quot;)</span><br><span class="line">                tg = tg.replace(&quot;&lt;/span&gt;&quot;, &quot;&quot;)</span><br><span class="line">                tg = tg.replace(r&#x27;&lt;img class=&quot;channel-icon&quot; height=&quot;32&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAUCAYAAACJfM0wAAAAAXNSR0IArs4c6QAAAP5JREFUOBGllD0OwjAMhV9yGcTOisRFegwWJJgQS4/RiyCxdkdcJiFuGtX9ceJAJtf5/OQkfjUore5zhHfngB1GtIexLZrdK1dqcpvo3hd43OH9gjMOFlc0+4dUvyhgGHXq3BPwlmVZSOL2JHUuFIX64fiSKOmHvXhF9LFasvB0p6silkj3zlIxzAmv4JpETrhXCImMLEwjhfBA4gp7A7MNyMI0p8bctsXTuMmzLI9bauRvg9QKFPjYca3DFLxBrcOU/OieCocpHUlTIbonvd+CUfHyuDHVX0ISFt3DBDnDY4bMwt5G91Q4TOlIO/xPaxymdOTkvMLAzw5KHwX+Czr/jXvbTvs/AAAAAElFTkSuQmCC&quot; width=&quot;32&quot;/&gt;&lt;span class=&quot;channel-name&quot;&gt;&#x27;, &quot;&quot;)</span><br><span class="line">                tg = re.findall(a_link, tg)[0].strip()</span><br><span class="line">                taglist.append(tg)</span><br><span class="line">            taglist = &#x27;,&#x27;.join(taglist)</span><br><span class="line">            # -------------获取标签列表</span><br><span class="line"></span><br><span class="line">            data = [</span><br><span class="line">                str(title),</span><br><span class="line">                str(video_link),</span><br><span class="line">                str(time),</span><br><span class="line">                str(date),</span><br><span class="line">                int(play_num),</span><br><span class="line">                int(like_num),</span><br><span class="line">                int(coin_num),</span><br><span class="line">                int(danmu_num),</span><br><span class="line">                int(collect_num),</span><br><span class="line">                int(share_num),</span><br><span class="line">                str(taglist)</span><br><span class="line">            ]</span><br><span class="line">            print(data)</span><br><span class="line"></span><br><span class="line">            # 获取标题</span><br><span class="line">            # print(title)</span><br><span class="line">            # 获取了视频的链接</span><br><span class="line">            # print(video_link)</span><br><span class="line">            # 获取时间</span><br><span class="line">            # print(time)</span><br><span class="line">            # 获取日期</span><br><span class="line">            # print(date)</span><br><span class="line">            # 获取点赞数</span><br><span class="line">            # print(like_num)</span><br><span class="line">            # 获取硬币数</span><br><span class="line">            # print(coin_num)</span><br><span class="line">            # 获取播放量</span><br><span class="line">            # print(play_num)</span><br><span class="line">            # 获取弹幕量</span><br><span class="line">            # print(danmu_num)</span><br><span class="line">            # 获取收藏量</span><br><span class="line">            # print(collect_num)</span><br><span class="line">            # 获取分享量</span><br><span class="line">            # print(share_num)</span><br><span class="line">            # -------------</span><br><span class="line"></span><br><span class="line">            datalist.append(data)</span><br><span class="line">            将数据传入datalist</span><br><span class="line"></span><br><span class="line">    # print(datalist)</span><br><span class="line">    return datalist</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 得到一个网页的网页信息</span><br><span class="line">def askurl(url):</span><br><span class="line">    proxy = get_proxy().get(&quot;proxy&quot;)</span><br><span class="line">    # 设置代理</span><br><span class="line"></span><br><span class="line">    print(proxy)</span><br><span class="line">    # 确认代理地址</span><br><span class="line"></span><br><span class="line">    headers = &#123;</span><br><span class="line">        &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.103 Safari/537.36&#x27;&#125;</span><br><span class="line">    # 设置请求头</span><br><span class="line"></span><br><span class="line">    html = &quot;&quot;</span><br><span class="line">    # 提供接收数据的字段</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        response = requests.get(url=url, headers=headers, proxies=&#123;&quot;http&quot;: &quot;http://&#123;&#125;&quot;.format(proxy)&#125;)</span><br><span class="line">        response.encoding = &quot;utf-8&quot;</span><br><span class="line">        html = response.text</span><br><span class="line">        # print(html)</span><br><span class="line">    # 使用requests进行网络请求</span><br><span class="line"></span><br><span class="line">    except urllib.error.URLError as  e:</span><br><span class="line">        if hasattr(e, &quot;code&quot;):</span><br><span class="line">            print(e.code)</span><br><span class="line">        if hasattr(e, &quot;reason&quot;):</span><br><span class="line">            print(e.reason)</span><br><span class="line">    # 异常处理</span><br><span class="line">    return html</span><br><span class="line"></span><br><span class="line"># 将数据存储到本地sqlite数据库</span><br><span class="line">def saveData2DB(datalist, dbsavepath):</span><br><span class="line">    initdb(dbsavepath)</span><br><span class="line">    # 创建数据库</span><br><span class="line"></span><br><span class="line">    for data in datalist:</span><br><span class="line">        print(data[0])</span><br><span class="line">        sql = &#x27;&#x27;&#x27;</span><br><span class="line">        insert into bilidata</span><br><span class="line">        (title,video_link,time,date,play_num,like_num,coin_num,danmu_num,collect_num,share_num,taglist)</span><br><span class="line">        values (&#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;, %d, %d, %d,</span><br><span class="line">     %d, %d, %d,&#x27;%s&#x27;)&#x27;&#x27;&#x27; % (data[0],data[1],data[2],data[3],data[4],data[5],data[6],data[7],data[8],data[9],data[10])</span><br><span class="line">        # 定义sql命令</span><br><span class="line"></span><br><span class="line">        conn = sqlite3.connect(dbsavepath)</span><br><span class="line">        # 连接数据库</span><br><span class="line"></span><br><span class="line">        c = conn.cursor()</span><br><span class="line">        # 获取指针</span><br><span class="line"></span><br><span class="line">        c.execute(sql)</span><br><span class="line">        # 执行spl语句</span><br><span class="line"></span><br><span class="line">        conn.commit()</span><br><span class="line">        # 提交数据</span><br><span class="line"></span><br><span class="line">        conn.close()</span><br><span class="line">        # 关闭表</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def initdb(dbsavepath):</span><br><span class="line">    sql = &#x27;&#x27;&#x27;</span><br><span class="line">    create table bilidata</span><br><span class="line">    (id integer not null primary key autoincrement ,</span><br><span class="line">    title text not null ,</span><br><span class="line">    video_link text not null ,</span><br><span class="line">    time text not null ,</span><br><span class="line">    date text not null ,</span><br><span class="line">    play_num int ,</span><br><span class="line">    like_num int ,</span><br><span class="line">    coin_num int ,</span><br><span class="line">    danmu_num int ,</span><br><span class="line">    collect_num int ,</span><br><span class="line">    share_num int ,</span><br><span class="line">    taglist text</span><br><span class="line">    );</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    # 建表语句</span><br><span class="line"></span><br><span class="line">    conn = sqlite3.connect(dbsavepath)</span><br><span class="line">    c = conn.cursor()</span><br><span class="line">    c.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    conn.close()</span><br><span class="line">    # 创建数据表</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h1 id="本地数据存储-leancloud-云数据库"><a href="#本地数据存储-leancloud-云数据库" class="headerlink" title="本地数据存储 leancloud 云数据库"></a>本地数据存储 leancloud 云数据库</h1><p>为了更好地保存数据同时便于后期维护和更新管理。<br>需要将本地数据上传到云端部署。<br>上传的方法也很简单。</p><h2 id="上传数据到-leancloud"><a href="#上传数据到-leancloud" class="headerlink" title="上传数据到 leancloud"></a>上传数据到 leancloud</h2><p>需要进行 appid 和 key 验证。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">PYTHON</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line">import leancloud</span><br><span class="line">import sqlite3</span><br><span class="line"></span><br><span class="line">con = sqlite3.connect(&quot;bili.db&quot;)  # 连接bili数据庫</span><br><span class="line">cur = con.cursor()  # 定义指针</span><br><span class="line">sql = &quot;select * from bilidata&quot;</span><br><span class="line">data = cur.execute(sql)</span><br><span class="line"></span><br><span class="line">leancloud.init(&quot;8888&quot;, &quot;8888&quot;)</span><br><span class="line"># 或者使用 Master Key</span><br><span class="line"># leancloud.init(&quot;&#123;&#123;appid&#125;&#125;&quot;, master_key=&quot;&#123;&#123;masterkey&#125;&#125;&quot;)</span><br><span class="line"></span><br><span class="line"># 声明 class</span><br><span class="line">Bilidata = leancloud.Object.extend(&#x27;bilidata&#x27;)</span><br><span class="line"></span><br><span class="line"># 构建对象</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 为属性赋值</span><br><span class="line">for item in data:</span><br><span class="line">    bilidata = Bilidata()</span><br><span class="line">    bilidata.set(&#x27;id&#x27;, item[0])</span><br><span class="line">    bilidata.set(&#x27;title&#x27;, item[1])</span><br><span class="line">    bilidata.set(&#x27;video_link&#x27;, item[2])</span><br><span class="line">    bilidata.set(&#x27;time&#x27;, item[3])</span><br><span class="line">    bilidata.set(&#x27;date&#x27;, item[4])</span><br><span class="line">    bilidata.set(&#x27;play_num&#x27;, item[5])</span><br><span class="line">    bilidata.set(&#x27;like_num&#x27;, item[6])</span><br><span class="line">    bilidata.set(&#x27;coin_num&#x27;, item[7])</span><br><span class="line">    bilidata.set(&#x27;danmu_num&#x27;, item[8])</span><br><span class="line">    bilidata.set(&#x27;collect_num&#x27;, item[9])</span><br><span class="line">    bilidata.set(&#x27;share_num&#x27;, item[10])</span><br><span class="line">    bilidata.set(&#x27;taglist&#x27;, item[11])</span><br><span class="line">    try:</span><br><span class="line">        bilidata.save()</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(e)</span><br><span class="line">        bilidata.save()</span><br><span class="line">    print(&quot;已上传第%d&quot; % item[0])</span><br><span class="line"># 将对象保存到云端</span><br></pre></td></tr></table></figure><h2 id="从-leancloud-获取数据"><a href="#从-leancloud-获取数据" class="headerlink" title="从 leancloud 获取数据"></a>从 leancloud 获取数据</h2><p>简单的数据查询如下所示。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">PYTHON</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line">import leancloud</span><br><span class="line"></span><br><span class="line">leancloud.init(&quot;8888&quot;, &quot;8888&quot;)</span><br><span class="line"># 验证密钥</span><br><span class="line">Bilidata = leancloud.Object.extend(&#x27;bilidata&#x27;)</span><br><span class="line"># 连接class</span><br><span class="line">query = Bilidata.query</span><br><span class="line"># 为查询创建别名</span><br><span class="line">query.select(&#x27;title&#x27;)</span><br><span class="line"># 选择类</span><br><span class="line">query.limit(1000)</span><br><span class="line"># 限定数量</span><br><span class="line">query_list = query.find()</span><br><span class="line"># 执行查询，返回数组</span><br><span class="line"></span><br><span class="line">i= 0</span><br><span class="line"></span><br><span class="line">for item in query_list:</span><br><span class="line">    title = item.get(&#x27;title&#x27;)</span><br><span class="line">    print(title)</span><br><span class="line">    print(i)</span><br><span class="line">    i += 1</span><br></pre></td></tr></table></figure><h1 id="运用-ECHARTS-进行数据展示"><a href="#运用-ECHARTS-进行数据展示" class="headerlink" title="运用 ECHARTS 进行数据展示"></a>运用 ECHARTS 进行数据展示</h1><h2 id="python-部分"><a href="#python-部分" class="headerlink" title="python 部分"></a>python 部分</h2><p>python 部分主要是获取 leancloud 的数据并进行一定处理，通过 flask 的路由传给静态前端。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br></pre></td><td class="code"><pre><span class="line">PYTHON</span><br><span class="line">from flask import Flask, render_template</span><br><span class="line">from collections import Counter</span><br><span class="line">import leancloud</span><br><span class="line">import requests</span><br><span class="line">import random</span><br><span class="line">import jieba</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">leancloud.init(&quot;8888&quot;, &quot;8888&quot;)</span><br><span class="line"># 验证app ID及密钥</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">querylist = [</span><br><span class="line">        &#x27;id&#x27;,</span><br><span class="line">        &#x27;title&#x27;,</span><br><span class="line">        &#x27;video_link&#x27;,</span><br><span class="line">        &#x27;time&#x27;,</span><br><span class="line">        &#x27;date&#x27;,</span><br><span class="line">        &#x27;play_num&#x27;,</span><br><span class="line">        &#x27;like_num&#x27;,</span><br><span class="line">        &#x27;coin_num&#x27;,</span><br><span class="line">        &#x27;danmu_num&#x27;,</span><br><span class="line">        &#x27;collect_num&#x27;,</span><br><span class="line">        &#x27;share_num&#x27;,</span><br><span class="line">        &#x27;taglist&#x27;]</span><br><span class="line"># 定义所有需要查询的数据类型</span><br><span class="line"></span><br><span class="line"># 从leancould获取数据</span><br><span class="line"></span><br><span class="line"># 时间序列数据排序</span><br><span class="line">def getleanclouddatatime(order,number):</span><br><span class="line">    Bilidata = leancloud.Object.extend(&#x27;bilidata&#x27;)</span><br><span class="line">    query = Bilidata.query</span><br><span class="line">    query.select(querylist)</span><br><span class="line">    query.descending(order)</span><br><span class="line">    query.limit(number)</span><br><span class="line">    query_list = query.find()</span><br><span class="line">    dataoutput = []</span><br><span class="line">    datalist = []</span><br><span class="line">    for item in query_list:</span><br><span class="line">        data = []</span><br><span class="line">        data.append(item.get(&#x27;id&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;title&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;video_link&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;time&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;date&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;play_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;like_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;coin_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;danmu_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;collect_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;share_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;taglist&#x27;))</span><br><span class="line">        dataoutput.append(data)</span><br><span class="line">    k1 = 0</span><br><span class="line">    for i in dataoutput:</span><br><span class="line">        if i[querylist.index(order)] == 0:</span><br><span class="line">            break</span><br><span class="line">        item = []</span><br><span class="line">        k1 = k1 + 1</span><br><span class="line">        str = i[3]</span><br><span class="line">        str1 = str[0:2]</span><br><span class="line">        item.append(k1)</span><br><span class="line">        item.append(str1)</span><br><span class="line">        datalist.append(item)</span><br><span class="line">    return datalist</span><br><span class="line"></span><br><span class="line"># top列表排序</span><br><span class="line">def getleanclouddataorder(order,number):</span><br><span class="line">    Bilidata = leancloud.Object.extend(&#x27;bilidata&#x27;)</span><br><span class="line">    query = Bilidata.query</span><br><span class="line">    query.select(querylist)</span><br><span class="line">    query.descending(order)</span><br><span class="line">    query.limit(number)</span><br><span class="line">    query_list = query.find()</span><br><span class="line">    dataoutput = []</span><br><span class="line">    datalist = []</span><br><span class="line">    for item in query_list:</span><br><span class="line">        data = []</span><br><span class="line">        data.append(item.get(&#x27;id&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;title&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;video_link&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;time&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;date&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;play_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;like_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;coin_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;danmu_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;collect_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;share_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;taglist&#x27;))</span><br><span class="line">        dataoutput.append(data)</span><br><span class="line">    for item in dataoutput:</span><br><span class="line">        items = []</span><br><span class="line">        items.append(item[1])</span><br><span class="line">        items.append(item[querylist.index(order)])</span><br><span class="line">        items.append(item[2])</span><br><span class="line">        imagelink = item[2].replace(&#x27;https://www.bilibili.com/video/&#x27;, &#x27;&#x27;)</span><br><span class="line">        #imagelink = getpic(imagelink)</span><br><span class="line">        imagelink =&#x27;https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.mp.itc.cn%2Fq_70%2Cc_zoom%2Cw_640%2Fupload%2F20160903%2Fd1ed32e2adcb4a93bb76ad1f2d322399_th.jpeg&amp;refer=http%3A%2F%2Fimg.mp.itc.cn&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1613485663&amp;t=85d654cc0e9d042828ea62d164c146e4&#x27;</span><br><span class="line">        items.append(imagelink)</span><br><span class="line">        datalist.append(items)</span><br><span class="line">    return datalist</span><br><span class="line"></span><br><span class="line"># 基础数据获取</span><br><span class="line">def getleanclouddata():</span><br><span class="line">    Bilidata = leancloud.Object.extend(&#x27;bilidata&#x27;)</span><br><span class="line">    query = Bilidata.query</span><br><span class="line">    query.select(querylist)</span><br><span class="line">    query.limit(1000)</span><br><span class="line">    query_list = query.find()</span><br><span class="line">    dataoutput = []</span><br><span class="line">    for item in query_list:</span><br><span class="line">        data = []</span><br><span class="line">        data.append(item.get(&#x27;id&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;title&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;video_link&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;time&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;date&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;play_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;like_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;coin_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;danmu_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;collect_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;share_num&#x27;))</span><br><span class="line">        data.append(item.get(&#x27;taglist&#x27;))</span><br><span class="line">        dataoutput.append(data)</span><br><span class="line">    return dataoutput</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 临时通过api获取图片链接</span><br><span class="line">def getpic(urlid):</span><br><span class="line">    url = &#x27;https://api.bilibili.com/x/web-interface/view?bvid=&#x27; + urlid</span><br><span class="line">    r = requests.get(url)</span><br><span class="line">    r.encoding = &#x27;utf-8&#x27;</span><br><span class="line">    datajson = r.json()</span><br><span class="line">    return datajson[&#x27;data&#x27;][&#x27;pic&#x27;]</span><br><span class="line"></span><br><span class="line"># 词频分析</span><br><span class="line">@app.route(&#x27;/word-infection&#x27;)</span><br><span class="line">def word():</span><br><span class="line">    taglist = []</span><br><span class="line">    wordlist = []</span><br><span class="line">    titlelist = getleanclouddata()</span><br><span class="line">    for index, item in enumerate(titlelist):</span><br><span class="line">        title = item[1]</span><br><span class="line">        titlere = re.sub(r&quot;[0-9\s+\.\!\/_,$%^*()?;；:-【】+\&quot;\&#x27;]+|[+——！，;:\-丨｜：～。？、~@#￥%……&amp;*（）]+&quot;, &quot;&quot;, title)</span><br><span class="line">        seg_list = jieba.cut(titlere, cut_all=False)</span><br><span class="line">        wordlist.extend(seg_list)</span><br><span class="line">        taglist.extend(item[11].split(&quot;,&quot;))</span><br><span class="line">    # dict = collections.Counter(wordlist)</span><br><span class="line">    word_dict_list = &#123;key: value for key, value in dict(Counter(wordlist)).items() if value &gt; 10 and len(key) &gt; 1&#125;</span><br><span class="line">    word_dictkey_list = list(tuple(word_dict_list.keys()))</span><br><span class="line">    word_dictvalue_list = list(tuple(word_dict_list.values()))</span><br><span class="line"></span><br><span class="line">    tag_dict_list = &#123;key: value for key, value in dict(Counter(taglist)).items() if value &gt; 10 and value &lt; 500&#125;</span><br><span class="line">    tag_dictkey_list = list(tuple(tag_dict_list.keys()))</span><br><span class="line">    tag_dictvalue_list = list(tuple(tag_dict_list.values()))</span><br><span class="line"></span><br><span class="line">    return render_template(&#x27;./charts_word.html&#x27;,</span><br><span class="line">                           word_dictkey_list=word_dictkey_list,</span><br><span class="line">                           word_dictvalue_list=word_dictvalue_list,</span><br><span class="line">                           tag_dictkey_list=tag_dictkey_list,</span><br><span class="line">                           tag_dictvalue_list=tag_dictvalue_list,</span><br><span class="line">                           )</span><br><span class="line"></span><br><span class="line"># 用户行为分析</span><br><span class="line">@app.route(&#x27;/interact-infection&#x27;)</span><br><span class="line">def interact():</span><br><span class="line">    data = getleanclouddata()</span><br><span class="line">    listmost = [0,0,0,0,0]</span><br><span class="line">    listmin = [0, 0, 0, 0, 0]</span><br><span class="line">    zero =[0, 0, 0, 0, 0]</span><br><span class="line">    thousand = [0, 0, 0, 0, 0]</span><br><span class="line">    hundred = [0, 0, 0, 0, 0]</span><br><span class="line">    play_coll_list = []</span><br><span class="line">    play_like_list = []</span><br><span class="line">    play_share_list = []</span><br><span class="line">    play_coin_list = []</span><br><span class="line">    play_danmu_list = []</span><br><span class="line">    coll_like_list = []</span><br><span class="line">    for dataitem in data:</span><br><span class="line">        num = 0</span><br><span class="line">        maxnumlist = []</span><br><span class="line">        minnumlist = []</span><br><span class="line">        transplay = dataitem[5]/1000</span><br><span class="line">        like_play = [transplay, dataitem[6]]</span><br><span class="line">        coll_play = [transplay, dataitem[9]]</span><br><span class="line">        share_play = [transplay, dataitem[10]]</span><br><span class="line">        coin_play = [transplay, dataitem[7]]</span><br><span class="line">        danmu_play = [transplay, dataitem[8]]</span><br><span class="line">        coll_like=  [dataitem[9], dataitem[6]]</span><br><span class="line">        test = [dataitem[6], dataitem[7], dataitem[8],dataitem[9], dataitem[10]]</span><br><span class="line">        for index, item in enumerate(test):</span><br><span class="line">            if item &gt; 100:</span><br><span class="line">                hundred[index] += 1</span><br><span class="line">            if item &gt; 1000:</span><br><span class="line">                thousand[index] += 1</span><br><span class="line">        if dataitem[9] &lt; 1000 and dataitem[5] &lt; 15000:</span><br><span class="line">            play_coll_list.append(coll_play)</span><br><span class="line">        if dataitem[6] &lt; 400 and dataitem[5] &lt; 15000:</span><br><span class="line">            play_like_list.append(like_play)</span><br><span class="line">        if dataitem[10] &lt; 200 and dataitem[5] &lt; 15000:</span><br><span class="line">            play_share_list.append(share_play)</span><br><span class="line">        if dataitem[7] &lt; 200 and dataitem[5] &lt; 15000:</span><br><span class="line">            play_coin_list.append(coin_play)</span><br><span class="line">        if dataitem[8] &lt; 100 and dataitem[5] &lt; 15000:</span><br><span class="line">            play_danmu_list.append(danmu_play)</span><br><span class="line">        if dataitem[9] &lt; 1000 and dataitem[6] &lt; 1000:</span><br><span class="line">            coll_like_list.append(coll_like)</span><br><span class="line">        maxnum = max(dataitem[6], dataitem[7], dataitem[8],dataitem[9], dataitem[10])</span><br><span class="line">        minnum = min(dataitem[6], dataitem[7], dataitem[8], dataitem[9], dataitem[10])</span><br><span class="line">        for index, item in enumerate(dataitem):</span><br><span class="line">            if index &gt; 5 and item == maxnum:</span><br><span class="line">                num = index - 6</span><br><span class="line">                maxnumlist.append(num)</span><br><span class="line">            if index &gt; 5 and item == minnum:</span><br><span class="line">                num = index - 6</span><br><span class="line">                minnumlist.append(num)</span><br><span class="line">                if minnum == 0:</span><br><span class="line">                    zero[num] = zero[num] + 1</span><br><span class="line">        randommaxnum = random.choice(maxnumlist)</span><br><span class="line">        listmost[randommaxnum] = listmost[randommaxnum] + 1</span><br><span class="line">        randomminnum = random.choice(minnumlist)</span><br><span class="line">        listmin[randomminnum] = listmin[randomminnum] + 1</span><br><span class="line"></span><br><span class="line">    return render_template(&#x27;./charts_action.html&#x27;,</span><br><span class="line">                           actionmost=listmost,</span><br><span class="line">                           actionmin=listmin,</span><br><span class="line">                           zero=zero,</span><br><span class="line">                           thousand=thousand,</span><br><span class="line">                           hundred=hundred,</span><br><span class="line">                           play_coll_list=play_coll_list,</span><br><span class="line">                           play_like_list=play_like_list,</span><br><span class="line">                           play_share_list=play_share_list,</span><br><span class="line">                           play_coin_list=play_coin_list,</span><br><span class="line">                           play_danmu_list=play_danmu_list,</span><br><span class="line">                           coll_like_list=coll_like_list</span><br><span class="line">                           )</span><br><span class="line"></span><br><span class="line"># 排行榜</span><br><span class="line">@app.route(&#x27;/toplist&#x27;)</span><br><span class="line">def toplist():</span><br><span class="line">    datalist = getleanclouddataorder(&#x27;play_num&#x27;, 10)</span><br><span class="line">    datalist1 = getleanclouddataorder(&#x27;like_num&#x27;, 10)</span><br><span class="line">    datalist2 = getleanclouddataorder(&#x27;coin_num&#x27;, 10)</span><br><span class="line">    datalist3 = getleanclouddataorder(&#x27;collect_num&#x27;, 10)</span><br><span class="line">    datalist4 = getleanclouddataorder(&#x27;share_num&#x27;, 10)</span><br><span class="line">    datalist5 = getleanclouddataorder(&#x27;danmu_num&#x27;, 10)</span><br><span class="line">    return render_template(&#x27;./toplist.html&#x27;,</span><br><span class="line">                           play=datalist,</span><br><span class="line">                           like=datalist1,</span><br><span class="line">                           coin=datalist2,</span><br><span class="line">                           coll=datalist3,</span><br><span class="line">                           share=datalist4,</span><br><span class="line">                           danmu=datalist5</span><br><span class="line">                           )</span><br><span class="line"></span><br><span class="line"># 时间影响</span><br><span class="line">@app.route(&#x27;/time-infection&#x27;)</span><br><span class="line">def time():</span><br><span class="line">    list_day_time = []</span><br><span class="line">    data4 = getleanclouddata()</span><br><span class="line">    for item in data4:</span><br><span class="line">        str = item[3]</span><br><span class="line">        str1 = str[0:2]</span><br><span class="line">        list_day_time.append(str1)</span><br><span class="line">    ranklist = []</span><br><span class="line">    rankid = 0</span><br><span class="line">    for ranktime in list_day_time:</span><br><span class="line">        item = []</span><br><span class="line">        rankid = rankid + 1</span><br><span class="line">        item.append(rankid)</span><br><span class="line">        item.append(ranktime)</span><br><span class="line">        ranklist.append(item)</span><br><span class="line">    timecount = Counter(list_day_time)</span><br><span class="line">    timecountkeys = sorted(list(timecount.keys()))</span><br><span class="line">    timedata = []</span><br><span class="line">    for i in range(len(timecountkeys)):</span><br><span class="line">        item = []</span><br><span class="line">        keys = timecountkeys[i]</span><br><span class="line">        item.append(keys + &#x27;:00&#x27;)</span><br><span class="line">        value = timecount[keys]</span><br><span class="line">        item.append(value)</span><br><span class="line">        timedata.append(item)</span><br><span class="line">    # timelike = getleanclouddatatime(&#x27;like_num&#x27;, 1000)</span><br><span class="line">    # timecoin = getleanclouddatatime(&#x27;coin_num&#x27;, 1000)</span><br><span class="line">    # timecollect = getleanclouddatatime(&#x27;collect_num&#x27;, 1000)</span><br><span class="line">    # timeshare = getleanclouddatatime(&#x27;share_num&#x27;, 1000)</span><br><span class="line">    # timedanmu = getleanclouddatatime(&#x27;danmu_num&#x27;, 1000)</span><br><span class="line">    return render_template(&#x27;./charts.html&#x27;,</span><br><span class="line">                           dataall=data4,</span><br><span class="line">                           time=timedata,</span><br><span class="line">                           rank=ranklist,</span><br><span class="line">                           # like=timelike,</span><br><span class="line">                           # coin=timecoin,</span><br><span class="line">                           # coll=timecollect,</span><br><span class="line">                           # share=timeshare,</span><br><span class="line">                           # danmu=timedanmu</span><br><span class="line">                           )</span><br><span class="line"></span><br><span class="line"># 数据库</span><br><span class="line">@app.route(&#x27;/database&#x27;)</span><br><span class="line">def database():</span><br><span class="line">    dataall = []</span><br><span class="line">    data3 = getleanclouddata()</span><br><span class="line">    for item in data3:</span><br><span class="line">        data = []</span><br><span class="line">        for i in range(len(item)):</span><br><span class="line">            if i == 1:</span><br><span class="line">                str = &#x27;&lt;a rel=&quot;+&#x27; + item[1] + &#x27;&quot; href=&quot;&#x27; + item[2] + &#x27;&quot;&gt;&#x27; + item[1] + &#x27;&lt;/a&gt;&#x27;</span><br><span class="line">                data.append(str)</span><br><span class="line">                continue</span><br><span class="line">            if i == 2:</span><br><span class="line">                continue</span><br><span class="line">            data.append(item[i])</span><br><span class="line">        dataall.append(data)</span><br><span class="line">    return render_template(&#x27;./tables.html&#x27;, alldata=dataall)</span><br><span class="line"></span><br><span class="line"># 主页</span><br><span class="line">@app.route(&#x27;/&#x27;)</span><br><span class="line">def homepage():</span><br><span class="line">    # 获取时间</span><br><span class="line">    dateall = getleanclouddata()</span><br><span class="line">    datelist=[]</span><br><span class="line">    for item in dateall:</span><br><span class="line">        datelist.append(item[4].replace(&quot;-&quot;, &quot;/&quot;))</span><br><span class="line">    data_list = []</span><br><span class="line">    data2_list = []</span><br><span class="line">    data3_list = []</span><br><span class="line">    data4_list = []</span><br><span class="line">    data5_list = []</span><br><span class="line">    data6_list = []</span><br><span class="line">    data7_list = []</span><br><span class="line">    data8_list = []</span><br><span class="line">    data9_list = []</span><br><span class="line">    data10_list = []</span><br><span class="line">    data11_list = []</span><br><span class="line">    data12_list = []</span><br><span class="line">    data13_list = []</span><br><span class="line">    for item in dateall:</span><br><span class="line">        data_rank = []</span><br><span class="line">        data_title = []</span><br><span class="line">        data_like = []</span><br><span class="line">        data_coin = []</span><br><span class="line">        data_danmu = []</span><br><span class="line">        data_collect = []</span><br><span class="line">        data_share = []</span><br><span class="line">        data_title.append(item[0])</span><br><span class="line">        data_rank.append(item[0])</span><br><span class="line">        data_like.append(item[0])</span><br><span class="line">        data_coin.append(item[0])</span><br><span class="line">        data_danmu.append(item[0])</span><br><span class="line">        data_collect.append(item[0])</span><br><span class="line">        data_share.append(item[0])</span><br><span class="line">        data_rank.append(item[5])</span><br><span class="line">        data_title.append(item[1])</span><br><span class="line">        data_like.append(item[6])</span><br><span class="line">        data_coin.append(item[7])</span><br><span class="line">        data_danmu.append(item[8])</span><br><span class="line">        data_collect.append(item[9])</span><br><span class="line">        data_share.append(item[10])</span><br><span class="line">        data2_list.append(data_rank)</span><br><span class="line">        data3_list.append(data_title)</span><br><span class="line">        data4_list.append(data_like)</span><br><span class="line">        data5_list.append(data_coin)</span><br><span class="line">        data6_list.append(data_danmu)</span><br><span class="line">        data7_list.append(data_collect)</span><br><span class="line">        data8_list.append(data_share)</span><br><span class="line">        data9_list.extend(item[11].split(&quot;,&quot;))</span><br><span class="line">        data10_list = &#123;key: value for key, value in dict(Counter(data9_list)).items() if value &gt; 20 and value &lt; 508&#125;</span><br><span class="line">        data11_list = list(tuple(data10_list.keys()))</span><br><span class="line">        data12_list = list(tuple(data10_list.values()))</span><br><span class="line">    return render_template(&quot;./index.html&quot;,</span><br><span class="line">                           dateall=dateall,</span><br><span class="line">                           datelist=datelist,</span><br><span class="line">                           bili_video_date=data_list,</span><br><span class="line">                           bili_video_rank=data2_list,</span><br><span class="line">                           bili_video_title=data3_list,</span><br><span class="line">                           bili_video_like=data4_list,</span><br><span class="line">                           bili_video_coin=data5_list,</span><br><span class="line">                           bili_video_danmu=data6_list,</span><br><span class="line">                           bili_video_collect=data7_list,</span><br><span class="line">                           bili_video_share=data8_list,</span><br><span class="line">                           bili_video_tag1=data11_list,</span><br><span class="line">                           bili_video_tag2=data12_list,</span><br><span class="line">                           bili=data13_list</span><br><span class="line">                           )</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><h2 id="前端部分"><a href="#前端部分" class="headerlink" title="前端部分"></a>前端部分</h2><p>js 部分主要是进行数据的可视化展示。</p><h3 id="时间序列数据的展示"><a href="#时间序列数据的展示" class="headerlink" title="时间序列数据的展示"></a>时间序列数据的展示</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong7.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line">//基于准备好的dom，初始化echarts实例</span><br><span class="line">    var myChart = echarts.init(document.getElementById(&#x27;time-data-bili-videxo&#x27;));</span><br><span class="line">      let arr =&#123;&#123;datelist|tojson&#125;&#125;;</span><br><span class="line">    var maxdate=new Date(arr[1]);</span><br><span class="line">    var mindate=new Date(arr[1]);</span><br><span class="line">    for (item of arr)&#123;</span><br><span class="line">        itemdate=new Date(item);</span><br><span class="line">        if (itemdate&gt;maxdate)&#123;</span><br><span class="line">            maxdate = itemdate</span><br><span class="line">        &#125;</span><br><span class="line">        if (itemdate&lt;mindate)&#123;</span><br><span class="line">            mindate = itemdate</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">//判断最近日期和最远日期</span><br><span class="line"></span><br><span class="line">    let objGroup = arr.reduce(function (obj, name) &#123;</span><br><span class="line">        obj[name] = obj[name] ? ++obj[name] : 1;</span><br><span class="line">        return obj;</span><br><span class="line">            &#125;, &#123;&#125;);</span><br><span class="line">    let objKey = Object.keys(objGroup);</span><br><span class="line">    let objValue = Object.values(objGroup);</span><br><span class="line"></span><br><span class="line"> //指定图表的配置项和数据</span><br><span class="line">    var dateTime = mindate;</span><br><span class="line">    var data =[]</span><br><span class="line">    firstday = mindate</span><br><span class="line">    lastday =  maxdate</span><br><span class="line">    day = (lastday - firstday) / (1000 * 60 * 60 * 24)</span><br><span class="line">        for (var i = 0; i &lt; day; i++) &#123;</span><br><span class="line">    dataitem=[]</span><br><span class="line">    dateTime=dateTime.setDate(dateTime.getDate()+1);</span><br><span class="line">    dateTime=new Date(dateTime);</span><br><span class="line">    timesrt= [dateTime.getFullYear(),dateTime.getMonth()+1, dateTime.getDate()].join(&#x27;/&#x27;);</span><br><span class="line">    dataitem.push(timesrt)</span><br><span class="line">    valuestr = 0</span><br><span class="line">    for (index in  objKey)&#123;</span><br><span class="line">        var date = new Date(objKey[index]);</span><br><span class="line">        if(date.getTime() == dateTime.getTime())&#123;</span><br><span class="line">            valuestr = objValue[index]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dataitem.push(valuestr)</span><br><span class="line">    data.push(dataitem)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> //图表的参数设置</span><br><span class="line">option = &#123;</span><br><span class="line"></span><br><span class="line">    tooltip: &#123;</span><br><span class="line">        trigger: &#x27;axis&#x27;,</span><br><span class="line">        position: function (pt) &#123;</span><br><span class="line">            return [pt[0], &#x27;10%&#x27;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    toolbox: &#123;</span><br><span class="line">        feature: &#123;</span><br><span class="line">            dataZoom: &#123;</span><br><span class="line">                yAxisIndex: &#x27;none&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            restore: &#123;&#125;,</span><br><span class="line">            saveAsImage: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        name:&#x27;日期&#x27;,</span><br><span class="line">        type: &#x27;time&#x27;,</span><br><span class="line">        boundaryGap: false</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">        name:&#x27;投稿量&#x27;,</span><br><span class="line">        type: &#x27;value&#x27;,</span><br><span class="line">        boundaryGap: [0, &#x27;100%&#x27;],</span><br><span class="line">        max: function (value) &#123;return value.max&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    dataZoom: [&#123;</span><br><span class="line">        type: &#x27;inside&#x27;,</span><br><span class="line">        start: 87,</span><br><span class="line">        end: 100</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        start: 87,</span><br><span class="line">        end: 100</span><br><span class="line">    &#125;],</span><br><span class="line">    series: [</span><br><span class="line">        &#123;</span><br><span class="line">            name: &#x27;视频量&#x27;,</span><br><span class="line">            color:&#x27;#4e73df&#x27;,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">            symbol: &#x27;none&#x27;,</span><br><span class="line">            areaStyle: &#123;&#125;,</span><br><span class="line">            data: data</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 使用刚指定的配置项和数据显示图表。</span><br><span class="line">    myChart.setOption(option);</span><br></pre></td></tr></table></figure><h3 id="折线图数据的展示"><a href="#折线图数据的展示" class="headerlink" title="折线图数据的展示"></a>折线图数据的展示</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong8.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line"> // 基于准备好的dom，初始化echarts实例</span><br><span class="line">var myChart3 = echarts.init(document.getElementById(&#x27;action-data-bili-video&#x27;));</span><br><span class="line"></span><br><span class="line">option3 = &#123;</span><br><span class="line">     tooltip: &#123;</span><br><span class="line">        trigger: &#x27;axis&#x27;,</span><br><span class="line">        position: function (pos, params, dom, rect, size) &#123;</span><br><span class="line">      // 鼠标在左侧时 tooltip 显示到右侧，鼠标在右侧时 tooltip 显示到左侧。</span><br><span class="line">      var obj = &#123;top: 0&#125;;</span><br><span class="line">      obj[[&#x27;left&#x27;, &#x27;right&#x27;][+(pos[0] &lt; size.viewSize[0] / 2)]] = 5;</span><br><span class="line">      return obj;</span><br><span class="line">  &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        data: [&#x27;点赞&#x27;, &#x27;投币&#x27;, &#x27;收藏&#x27;, &#x27;转发&#x27;, &#x27;弹幕&#x27;]</span><br><span class="line">    &#125;,</span><br><span class="line">    dataZoom: [&#123;</span><br><span class="line">        type: &#x27;inside&#x27;,</span><br><span class="line">        start: 0,</span><br><span class="line">        end: 2</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        type : &#x27;slider&#x27;,</span><br><span class="line">        start: 0,</span><br><span class="line">        end: 2</span><br><span class="line">    &#125;],</span><br><span class="line"></span><br><span class="line">    toolbox: &#123;</span><br><span class="line">        feature: &#123;</span><br><span class="line">            dataZoom: &#123;</span><br><span class="line">                yAxisIndex: &#x27;none&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            restore: &#123;&#125;,</span><br><span class="line">            saveAsImage: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        name:&#x27;排名&#x27;,</span><br><span class="line">        type: &#x27;category&#x27;,</span><br><span class="line">        boundaryGap: false,</span><br><span class="line"></span><br><span class="line">           &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">         name:&#x27;数量&#x27;,</span><br><span class="line">        type: &#x27;value&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">        &#123;</span><br><span class="line">            name: &#x27;标题&#x27;,</span><br><span class="line">            color:&#x27;#9bb5ff&#x27;,</span><br><span class="line">            type: &#x27;custom&#x27;,</span><br><span class="line">            data: &#123;&#123; bili_video_title|tojson &#125;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            color:&#x27;#e74a3b&#x27;,</span><br><span class="line">            name: &#x27;点赞&#x27;,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">            data: &#123;&#123; bili_video_like|tojson &#125;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;   color:&#x27;#4e73df&#x27;,</span><br><span class="line">            name: &#x27;投币&#x27;,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">            data: &#123;&#123; bili_video_coin|tojson &#125;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;   color:&#x27;#f6c23e&#x27;,</span><br><span class="line">            name: &#x27;收藏&#x27;,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">            data:&#123;&#123; bili_video_collect|tojson &#125;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;   color:&#x27;#1cc88a&#x27;,</span><br><span class="line">            name: &#x27;转发&#x27;,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">            data: &#123;&#123; bili_video_share|tojson &#125;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;   color:&#x27;#36b9cc&#x27;,</span><br><span class="line">            name: &#x27;弹幕&#x27;,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line"></span><br><span class="line">            data: &#123;&#123; bili_video_danmu|tojson &#125;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 使用刚指定的配置项和数据显示图表。</span><br><span class="line">myChart3.setOption(option3);</span><br></pre></td></tr></table></figure><h3 id="词频图数据的展示"><a href="#词频图数据的展示" class="headerlink" title="词频图数据的展示"></a>词频图数据的展示</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong9.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line">var myChart4 = echarts.init(document.getElementById(&#x27;tag-data-bili-video&#x27;));</span><br><span class="line">var colorList = [</span><br><span class="line">&#x27;#4e73df&#x27;,</span><br><span class="line">&#x27;#6610f2&#x27;,</span><br><span class="line">&#x27;#6f42c1&#x27;,</span><br><span class="line">&#x27;#e83e8c&#x27;,</span><br><span class="line">&#x27;#e74a3b&#x27;,</span><br><span class="line">&#x27;#fd7e14&#x27;,</span><br><span class="line">&#x27;#f6c23e&#x27;,</span><br><span class="line">&#x27;#1cc88a&#x27;,</span><br><span class="line">&#x27;#20c9a6&#x27;,</span><br><span class="line">&#x27;#36b9cc&#x27;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">var listtag = []</span><br><span class="line">for(index in &#123;&#123; bili_video_tag1|tojson &#125;&#125; )&#123;</span><br><span class="line">    let minSize = 0</span><br><span class="line">    if (&#123;&#123;bili_video_tag2|tojson &#125;&#125;[index]/10 &lt;= 18)&#123;</span><br><span class="line">        minSize = 14</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        minSize = &#123;&#123;bili_video_tag2|tojson &#125;&#125;[index]/10</span><br><span class="line">    &#125;</span><br><span class="line">    item = &#123;&#x27;name&#x27;:&#123;&#123; bili_video_tag1|tojson &#125;&#125;[index],&#x27;value&#x27;:&#123;&#123; bili_video_tag2|tojson &#125;&#125;[index],</span><br><span class="line">        &quot;symbolSize&quot;: &#123;&#123;bili_video_tag2|tojson &#125;&#125;[index],</span><br><span class="line">            &quot;draggable&quot;: true,</span><br><span class="line">            &quot;label&quot;: &#123;</span><br><span class="line">            &#x27;color&#x27;: &quot;#fff&quot; ,</span><br><span class="line">            &#x27;fontSize&#x27;: minSize,</span><br><span class="line">            &#x27;textBorderColor&#x27;: colorList[index%10],</span><br><span class="line">                &#x27;textBorderWidth&#x27;:1</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;itemStyle&quot;: &#123;</span><br><span class="line">                &quot;normal&quot;: &#123;</span><br><span class="line">                    &quot;shadowBlur&quot;: 250,</span><br><span class="line">                    &quot;shadowColor&quot;: colorList[index%10],</span><br><span class="line">                    &quot;color&quot;: colorList[index%10]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    listtag.push(item)</span><br><span class="line">&#125;</span><br><span class="line">console.log(listtag)</span><br><span class="line"></span><br><span class="line">option4 = &#123;</span><br><span class="line">    // 图表标题</span><br><span class="line">    title: &#123;</span><br><span class="line">        show:true,//显示策略，默认值true,可选为：true（显示） | false（隐藏）</span><br><span class="line">        //text: &#x27;&quot;新时代&quot;主题图谱&#x27;,//主标题文本，&#x27;\n&#x27;指定换行</span><br><span class="line">        x: &#x27;center&#x27;,        // 水平安放位置，默认为左对齐，可选为：</span><br><span class="line">                          // &#x27;center&#x27; ¦ &#x27;left&#x27; ¦ &#x27;right&#x27;</span><br><span class="line">                          // ¦ &#123;number&#125;（x坐标，单位px）</span><br><span class="line">        y: &#x27;bottom&#x27;,             // 垂直安放位置，默认为全图顶端，可选为：</span><br><span class="line">                          // &#x27;top&#x27; ¦ &#x27;bottom&#x27; ¦ &#x27;center&#x27;</span><br><span class="line">                          // ¦ &#123;number&#125;（y坐标，单位px）</span><br><span class="line">        //textAlign: null          // 水平对齐方式，默认根据x设置自动调整</span><br><span class="line">        backgroundColor: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">        borderColor: &#x27;#ccc&#x27;,    // 标题边框颜色</span><br><span class="line">        borderWidth: 0,         // 标题边框线宽，单位px，默认为0（无边框）</span><br><span class="line">        padding: 5,             // 标题内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                                // 接受数组分别设定上右下左边距，同css</span><br><span class="line">        itemGap: 10,            // 主副标题纵向间隔，单位px，默认为10，</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">            fontSize: 18,</span><br><span class="line">            fontWeight: &#x27;bolder&#x27;,</span><br><span class="line">            color: &#x27;#333&#x27;        // 主标题文字颜色</span><br><span class="line">        &#125;,</span><br><span class="line">        subtextStyle: &#123;</span><br><span class="line">            color: &#x27;#aaa&#x27;        // 副标题文字颜色</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    backgroundColor: &#x27;#fff&#x27;,</span><br><span class="line">    tooltip: &#123;&#125;,</span><br><span class="line">    animationDurationUpdate: function(idx) &#123;</span><br><span class="line">        // 越往后的数据延迟越大</span><br><span class="line">        return idx * 100;</span><br><span class="line">    &#125;,</span><br><span class="line">    animationEasingUpdate: &#x27;bounceIn&#x27;,</span><br><span class="line">    color: [&#x27;#fff&#x27;, &#x27;#fff&#x27;, &#x27;#fff&#x27;],</span><br><span class="line">    series: [&#123;</span><br><span class="line">        type: &#x27;graph&#x27;,</span><br><span class="line">        layout: &#x27;force&#x27;,</span><br><span class="line">        force: &#123;</span><br><span class="line">            repulsion: 400,</span><br><span class="line">            edgeLength: 10</span><br><span class="line">        &#125;,</span><br><span class="line">        roam: true,</span><br><span class="line">        label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                show: true</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: listtag</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 使用刚指定的配置项和数据显示图表。</span><br><span class="line">myChart4.setOption(option4);</span><br></pre></td></tr></table></figure><h3 id="列表的展示"><a href="#列表的展示" class="headerlink" title="列表的展示"></a>列表的展示</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong10.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">CODE</span><br><span class="line">&lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">&#123;% for i in play %&#125;</span><br><span class="line">&lt;div style=&quot;display:flex;height: 80px; align-items:center&quot; &gt;</span><br><span class="line">    &lt;span style=&quot;font-weight: bold;width:10%;padding:0 10px;&quot;&gt;&#123;&#123; loop.index &#125;&#125;.&lt;/span&gt;</span><br><span class="line">    &lt;img style=&quot;height: 100%&quot; src=&quot;&#123;&#123; i[3] &#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;a href=&#x27;&#123;&#123; i[2] &#125;&#125;&#x27;</span><br><span class="line">style=&quot;padding:0 20px;width:50%;display:inline-block;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;&quot;&gt;&#123;&#123; i[0] &#125;&#125;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    &lt;span style=&quot;width:20%;text-align:right;font-weight: bold&quot;&gt; &#123;&#123; i[1] &#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="数据表的展示"><a href="#数据表的展示" class="headerlink" title="数据表的展示"></a>数据表的展示</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong10.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line">//这里使用了jquery.dataTables.min.js</span><br><span class="line">  $(&#x27;#dataTable&#x27;).DataTable(</span><br><span class="line">       &#123;</span><br><span class="line">          &quot;data&quot;:  &#123;&#123; alldata|tojson &#125;&#125;,</span><br><span class="line">           language:&#123;</span><br><span class="line">        &quot;processing&quot;: &quot;处理中...&quot;,</span><br><span class="line">        &quot;lengthMenu&quot;: &quot;显示 _MENU_ 项结果&quot;,</span><br><span class="line">        &quot;zeroRecords&quot;: &quot;没有匹配结果&quot;,</span><br><span class="line">        &quot;info&quot;: &quot;显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项&quot;,</span><br><span class="line">        &quot;infoEmpty&quot;: &quot;显示第 0 至 0 项结果，共 0 项&quot;,</span><br><span class="line">        &quot;infoFiltered&quot;: &quot;(由 _MAX_ 项结果过滤)&quot;,</span><br><span class="line">        &quot;infoPostFix&quot;: &quot;&quot;,</span><br><span class="line">        &quot;search&quot;: &quot;搜索:&quot;,</span><br><span class="line">        &quot;searchPlaceholder&quot;: &quot;搜索...&quot;,</span><br><span class="line">        &quot;url&quot;: &quot;&quot;,</span><br><span class="line">        &quot;emptyTable&quot;: &quot;表中数据为空&quot;,</span><br><span class="line">        &quot;loadingRecords&quot;: &quot;载入中...&quot;,</span><br><span class="line">        &quot;infoThousands&quot;: &quot;,&quot;,</span><br><span class="line">        &quot;paginate&quot;: &#123;</span><br><span class="line">            &quot;first&quot;: &quot;首页&quot;,</span><br><span class="line">            &quot;previous&quot;: &quot;上页&quot;,</span><br><span class="line">            &quot;next&quot;: &quot;下页&quot;,</span><br><span class="line">            &quot;last&quot;: &quot;末页&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;aria&quot;: &#123;</span><br><span class="line">            &quot;paginate&quot;: &#123;</span><br><span class="line">                &quot;first&quot;: &quot;首页&quot;,</span><br><span class="line">                &quot;previous&quot;: &quot;上页&quot;,</span><br><span class="line">                &quot;next&quot;: &quot;下页&quot;,</span><br><span class="line">                &quot;last&quot;: &quot;末页&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;sortAscending&quot;: &quot;以升序排列此列&quot;,</span><br><span class="line">            &quot;sortDescending&quot;: &quot;以降序排列此列&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;thousands&quot;: &quot;.&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  );</span><br></pre></td></tr></table></figure><h3 id="饼图的展示"><a href="#饼图的展示" class="headerlink" title="饼图的展示"></a>饼图的展示</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong11.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line">// 基于准备好的dom，初始化echarts实例</span><br><span class="line">    var myChart1 = echarts.init(document.getElementById(&#x27;mostaction-data-bili-video&#x27;));</span><br><span class="line">    // 指定图表的配置项和数据</span><br><span class="line"></span><br><span class="line">    option1 = &#123;</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">            trigger: &#x27;item&#x27;,</span><br><span class="line">            formatter: &#x27;&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        legend: &#123;</span><br><span class="line">            orient: &#x27;vertical&#x27;,</span><br><span class="line">            left: &#x27;left&#x27;,</span><br><span class="line">        &#125;,</span><br><span class="line">        series: [</span><br><span class="line">            &#123;</span><br><span class="line">                name: &#x27;单篇稿件中最多的用户行为&#x27;,</span><br><span class="line">                type: &#x27;pie&#x27;,</span><br><span class="line">                radius: &#x27;50%&#x27;,</span><br><span class="line">                data: [</span><br><span class="line">                    &#123;value: &#123;&#123;actionmost[0]&#125;&#125;, name:&#x27;点赞&#x27;&#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        value:&#123;&#123;actionmost[1]&#125;&#125;,</span><br><span class="line">        name: &#x27;投币&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    &#123;</span><br><span class="line">        value:&#123;&#123;actionmost[2]&#125;&#125;</span><br><span class="line">    ,</span><br><span class="line">        name: &#x27;弹幕&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    &#123;</span><br><span class="line">        value: &#123;&#123;actionmost[3]&#125;&#125;</span><br><span class="line">    ,</span><br><span class="line">        name: &#x27;收藏&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    &#123;</span><br><span class="line">        value: &#123;&#123;actionmost[4]&#125;&#125;</span><br><span class="line">    ,</span><br><span class="line">        name: &#x27;转发&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    ],</span><br><span class="line">    emphasis: &#123;</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">            shadowBlur: 10,</span><br><span class="line">                shadowOffsetX</span><br><span class="line">        :</span><br><span class="line">            0,</span><br><span class="line">                shadowColor</span><br><span class="line">        :</span><br><span class="line">            &#x27;rgba(0, 0, 0, 0.5)&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    // 使用刚指定的配置项和数据显示图表。</span><br><span class="line">    myChart1.setOption(option1);</span><br></pre></td></tr></table></figure><h3 id="线性回归分析图的展示"><a href="#线性回归分析图的展示" class="headerlink" title="线性回归分析图的展示"></a>线性回归分析图的展示</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong12.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line">// 基于准备好的dom，初始化echarts实例</span><br><span class="line">   var myChart6 = echarts.init(document.getElementById(&#x27;playaction-data-bili-video&#x27;));</span><br><span class="line">   echarts.registerTransform(ecStat.transform.regression);</span><br><span class="line">   option6 = &#123;</span><br><span class="line">       dataset: [&#123;</span><br><span class="line">           source: &#123;&#123;play_coll_list&#125;&#125;,</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">       transform: &#123;</span><br><span class="line">           type: &#x27;ecStat:regression&#x27;</span><br><span class="line">           // &#x27;linear&#x27; by default.</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   ],</span><br><span class="line">   toolbox: &#123;</span><br><span class="line">       feature: &#123;</span><br><span class="line">           dataZoom: &#123;</span><br><span class="line">           &#125;</span><br><span class="line">       ,</span><br><span class="line">           brush: &#123;</span><br><span class="line">               type: [&#x27;rect&#x27;, &#x27;polygon&#x27;, &#x27;clear&#x27;]</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   ,</span><br><span class="line">   brush: &#123;</span><br><span class="line">   &#125;</span><br><span class="line">   ,</span><br><span class="line">   legend: &#123;</span><br><span class="line">       bottom: 5</span><br><span class="line">   &#125;</span><br><span class="line">   ,</span><br><span class="line">   tooltip: &#123;</span><br><span class="line">       trigger: &#x27;axis&#x27;,</span><br><span class="line">           axisPointer</span><br><span class="line">   :</span><br><span class="line">       &#123;</span><br><span class="line">           type: &#x27;cross&#x27;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   ,</span><br><span class="line">   xAxis: &#123;</span><br><span class="line">       min:1,</span><br><span class="line">       name:&#x27;播放量(千)&#x27;,</span><br><span class="line">           splitLine</span><br><span class="line">   :</span><br><span class="line">       &#123;</span><br><span class="line">           lineStyle: &#123;</span><br><span class="line">               type: &#x27;dashed&#x27;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   ,</span><br><span class="line">   &#125;</span><br><span class="line">   ,</span><br><span class="line">   yAxis: &#123;</span><br><span class="line">       name:&#x27;收藏量&#x27;,</span><br><span class="line"></span><br><span class="line">           splitLine</span><br><span class="line">   :</span><br><span class="line">       &#123;</span><br><span class="line">           lineStyle: &#123;</span><br><span class="line">               type: &#x27;dashed&#x27;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   ,</span><br><span class="line">   &#125;</span><br><span class="line">   ,</span><br><span class="line">   series: [&#123;</span><br><span class="line">       symbolSize: 5,</span><br><span class="line">       name: &#x27;散点&#x27;,</span><br><span class="line">       type: &#x27;scatter&#x27;</span><br><span class="line">   &#125;, &#123;</span><br><span class="line">       name: &#x27;线性回归&#x27;,</span><br><span class="line">       type: &#x27;line&#x27;,</span><br><span class="line">       datasetIndex: 1,</span><br><span class="line">       symbolSize: 0.1,</span><br><span class="line">       symbol: &#x27;circle&#x27;,</span><br><span class="line">       label: &#123;show: true, fontSize: 16&#125;,</span><br><span class="line">       labelLayout: &#123;dx: -20&#125;,</span><br><span class="line">       encode: &#123;label: 2, tooltip: 1&#125;</span><br><span class="line">   &#125;]</span><br><span class="line">   &#125;</span><br><span class="line">   ;</span><br><span class="line">   // 使用刚指定的配置项和数据显示图表。</span><br><span class="line">   myChart6.setOption(option6);</span><br></pre></td></tr></table></figure><h3 id="关系图谱的展示"><a href="#关系图谱的展示" class="headerlink" title="关系图谱的展示"></a>关系图谱的展示</h3><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/Pythonpachong13.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">JAVASCRIPT</span><br><span class="line">var myChart3= echarts.init(document.getElementById(&#x27;tagtitle-data-bili-video&#x27;));</span><br><span class="line">var nodelist=[];</span><br><span class="line">var linklist=[];</span><br><span class="line">for (index in &#123;&#123; tag_dictkey_list|tojson &#125;&#125;)&#123;</span><br><span class="line">        var nodesitem =&#123;</span><br><span class="line">     &quot;name&quot;: &quot;&quot;,</span><br><span class="line">     &quot;value&quot;: 0,</span><br><span class="line">     &quot;category&quot;: 0,</span><br><span class="line">     &quot;symbolSize&quot;:0,</span><br><span class="line">&#125;</span><br><span class="line">        nodesitem.name =  &#123;&#123; tag_dictkey_list|tojson &#125;&#125;[index];</span><br><span class="line">        nodesitem.value =  &#123;&#123; tag_dictvalue_list|tojson &#125;&#125;[index];</span><br><span class="line">        nodesitem.symbolSize=  nodesitem.value/4;</span><br><span class="line">        nodesitem.category = 0</span><br><span class="line">        nodelist.push(nodesitem)</span><br><span class="line">&#125;</span><br><span class="line">for (index in &#123;&#123; word_dictkey_list|tojson &#125;&#125;)&#123;</span><br><span class="line">        var nodesitem =&#123;</span><br><span class="line">     &quot;name&quot;: &quot;&quot;,</span><br><span class="line">     &quot;value&quot;: 0,</span><br><span class="line">     &quot;category&quot;: 0,</span><br><span class="line">     &quot;symbolSize&quot;:0</span><br><span class="line">&#125;</span><br><span class="line">        nodesitem.name =  &#123;&#123; word_dictkey_list|tojson &#125;&#125;[index];</span><br><span class="line">        nodesitem.value =  &#123;&#123; word_dictvalue_list|tojson &#125;&#125;[index];</span><br><span class="line">        nodesitem.symbolSize=  nodesitem.value/4;</span><br><span class="line">        nodesitem.category = 1</span><br><span class="line">        nodelist.push(nodesitem)</span><br><span class="line">&#125;</span><br><span class="line">console.log(nodelist)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for (i in &#123;&#123; tag_dictkey_list|tojson &#125;&#125;)&#123;</span><br><span class="line">    for (j in &#123;&#123; tag_dictkey_list|tojson &#125;&#125;)&#123;</span><br><span class="line">        str1 = &#123;&#123; tag_dictkey_list|tojson &#125;&#125;[i];</span><br><span class="line">         str2 = &#123;&#123; tag_dictkey_list|tojson &#125;&#125;[j];</span><br><span class="line">         if (str2.indexOf(str1) != -1)&#123;</span><br><span class="line">             var link =&#123;</span><br><span class="line">                 &quot;source&quot;: i,</span><br><span class="line">                 &quot;target&quot;: j</span><br><span class="line">             &#125;</span><br><span class="line">             linklist.push(link)</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">for (i in &#123;&#123; word_dictkey_list|tojson &#125;&#125;)&#123;</span><br><span class="line">    for (j in &#123;&#123; word_dictkey_list|tojson &#125;&#125;)&#123;</span><br><span class="line">        str1 = &#123;&#123; word_dictkey_list|tojson &#125;&#125;[i];</span><br><span class="line">         str2 = &#123;&#123; word_dictkey_list|tojson &#125;&#125;[j];</span><br><span class="line">         if (str2.indexOf(str1) != -1)&#123;</span><br><span class="line">             var source = Number(i)+Number(&#123;&#123; tag_dictkey_list|tojson &#125;&#125;.length)</span><br><span class="line">             var target = Number(j)+Number(&#123;&#123; tag_dictkey_list|tojson &#125;&#125;.length)</span><br><span class="line">             var link =&#123;</span><br><span class="line">                 &quot;source&quot;: source,</span><br><span class="line">                 &quot;target&quot;: target</span><br><span class="line">             &#125;</span><br><span class="line">             linklist.push(link)</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">for (i1 in &#123;&#123; tag_dictkey_list|tojson &#125;&#125;)&#123;</span><br><span class="line">    for (j1 in &#123;&#123; word_dictkey_list|tojson &#125;&#125;)&#123;</span><br><span class="line">        if (&#123;&#123;tag_dictkey_list|tojson&#125;&#125;[i1].indexOf(&#123;&#123;word_dictkey_list|tojson&#125;&#125;[j1]) != -1)&#123;</span><br><span class="line">            target = Number(j1)+Number(&#123;&#123; tag_dictkey_list|tojson &#125;&#125;.length)</span><br><span class="line">                         var link =&#123;</span><br><span class="line">                 &quot;source&quot;: target,</span><br><span class="line">                 &quot;target&quot;: i1</span><br><span class="line">             &#125;</span><br><span class="line">             linklist.push(link)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(linklist)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">graph = &#123;</span><br><span class="line">    &quot;type&quot;: &quot;force&quot;,</span><br><span class="line">    &quot;categories&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;标题&quot;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;标签&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;nodes&quot;: nodelist,</span><br><span class="line">    &quot;links&quot;: linklist</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    option3 = &#123;</span><br><span class="line">        tooltip: &#123;&#125;,</span><br><span class="line">        legend: &#123;</span><br><span class="line">            data: [&#x27;标题&#x27;, &#x27;标签&#x27;]</span><br><span class="line">        &#125;,</span><br><span class="line">        series: [&#123;</span><br><span class="line">            type: &#x27;graph&#x27;,</span><br><span class="line">            layout: &#x27;force&#x27;,</span><br><span class="line">            animation: false,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: true,</span><br><span class="line">                position: &#x27;right&#x27;,</span><br><span class="line">                formatter: &#x27;&#123;b&#125;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            draggable: true,</span><br><span class="line">            data: graph.nodes.map(function (node, idx) &#123;</span><br><span class="line">                node.id = idx;</span><br><span class="line">                return node;</span><br><span class="line">            &#125;),</span><br><span class="line">            categories: graph.categories,</span><br><span class="line">             force: &#123;</span><br><span class="line">            repulsion: 400,</span><br><span class="line">            edgeLength: 200</span><br><span class="line">            &#125;,</span><br><span class="line">            roam: true,</span><br><span class="line">            edges: graph.links</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">myChart3.setOption(option3);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>stm32f103c8t6介绍</title>
      <link href="/2023/09/05/%E7%89%A9%E8%81%94%E7%BD%91-stm32f103c8t6/"/>
      <url>/2023/09/05/%E7%89%A9%E8%81%94%E7%BD%91-stm32f103c8t6/</url>
      
        <content type="html"><![CDATA[<h1 id="stm32f103c8t6"><a href="#stm32f103c8t6" class="headerlink" title="stm32f103c8t6"></a>stm32f103c8t6</h1><p>STM32F103C8T6是STMicroelectronics（意法半导体）推出的一款STM32系列微控制器（MCU）的型号。这款微控制器基于ARM Cortex-M3内核，并具有丰富的外设和功能，适用于各种嵌入式系统和应用。</p><p>以下是关于STM32F103C8T6微控制器的一些主要特征和规格：</p><ol><li><p><strong>处理器核心</strong>：</p><ul><li>ARM Cortex-M3内核，工作频率通常为72 MHz。</li></ul></li><li><p><strong>闪存和RAM</strong>：</p><ul><li>64KB Flash存储器：用于程序存储。</li><li>20KB SRAM：用于数据存储。</li></ul></li><li><p><strong>GPIO引脚</strong>：</p><ul><li>支持多个GPIO引脚，可以配置为不同的输入/输出模式，包括浮空输入、上拉/下拉输入、推挽输出、开漏输出等。</li></ul></li><li><p><strong>通信接口</strong>：</p><ul><li>USART/UART：用于串口通信。</li><li>SPI：用于串行外设接口。</li><li>I2C：用于两线制串行通信。</li><li>CAN：用于控制器局域网通信。</li></ul></li><li><p><strong>定时器</strong>：</p><ul><li>通用定时器：支持多个通用定时器，可用于生成脉冲、计时和PWM输出。</li><li>基本定时器：支持基本定时器功能。</li><li>看门狗定时器：用于系统复位和监视。</li></ul></li><li><p><strong>ADC</strong>：</p><ul><li>内置模数转换器（ADC）：用于模拟信号采样。</li></ul></li><li><p><strong>中断和DMA</strong>：</p><ul><li>支持中断控制器，可用于处理各种事件和中断。</li><li>支持直接存储器访问控制器（DMA），可用于高速数据传输。</li></ul></li><li><p><strong>电源管理</strong>：</p><ul><li>支持低功耗模式，可实现能效优化。</li><li>内置复位和电压监视电路。</li></ul></li><li><p><strong>包装</strong>：</p><ul><li>LQFP48封装，带有48个引脚。</li></ul></li><li><p><strong>工作电压</strong>：</p><ul><li>典型工作电压为3.3V。</li></ul></li><li><p><strong>应用领域</strong>：</p><ul><li>STM32F103C8T6常用于各种嵌入式系统，包括自动控制、传感器接口、通信接口、工业控制、家用电器、嵌入式网络等领域。</li></ul></li></ol><p>STM32F103C8T6是一款功能强大的微控制器，具有广泛的外设和通信接口，适用于多种应用场景。开发人员可以使用STMicroelectronics提供的开发工具，如STM32CubeMX和STM32CubeIDE，来开发和编程STM32F103C8T6微控制器。此外，还可以利用各种外部传感器和模块来扩展其功能。</p><h2 id="1、stm32f103c8t6片上资源外设"><a href="#1、stm32f103c8t6片上资源外设" class="headerlink" title="1、stm32f103c8t6片上资源外设"></a>1、stm32f103c8t6片上资源外设</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/stm32about1.png" alt="1"></p><h2 id="2、STM32系列产品命名规则"><a href="#2、STM32系列产品命名规则" class="headerlink" title="2、STM32系列产品命名规则"></a>2、STM32系列产品命名规则</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/stm32about2.png" alt=""></p><h2 id="3、stm32f103c8t6引脚定义"><a href="#3、stm32f103c8t6引脚定义" class="headerlink" title="3、stm32f103c8t6引脚定义"></a>3、stm32f103c8t6引脚定义</h2><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/STM32F103C8T6%E5%BC%95%E8%84%9A%E5%AE%9A%E4%B9%89.png" alt="STM32F103C8T6引脚定义"></p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> 嵌入式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1、GPIO通用输入输出口</title>
      <link href="/2023/09/05/%E7%89%A9%E8%81%94%E7%BD%91-STM32-1%E3%80%81GPIO%E9%80%9A%E7%94%A8%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8F%A3/"/>
      <url>/2023/09/05/%E7%89%A9%E8%81%94%E7%BD%91-STM32-1%E3%80%81GPIO%E9%80%9A%E7%94%A8%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="STM32GPIO口引脚模式配置"><a href="#STM32GPIO口引脚模式配置" class="headerlink" title="STM32GPIO口引脚模式配置"></a>STM32GPIO口引脚模式配置</h1><h2 id="STM32-GPIO模式："><a href="#STM32-GPIO模式：" class="headerlink" title="STM32 GPIO模式："></a>STM32 GPIO模式：</h2><p>当使用STM32系列微控制器的GPIO引脚时，您可以根据您的应用需求选择不同的GPIO模式。以下是对每个模式的更详细介绍：</p><ol><li><h3 id="输入模式："><a href="#输入模式：" class="headerlink" title="输入模式："></a><strong>输入模式</strong>：</h3><ul><li><strong>浮空输入（Floating Input）</strong>：引脚未连接到任何电路。可以用于读取外部电平，但应注意，由于没有上拉或下拉电阻，引脚可能会受到噪声干扰。</li><li><strong>上拉输入（Input Pull-Up）</strong>：引脚通过内部上拉电阻连接到高电平。在没有外部连接时，引脚会保持高电平。通常用于按钮和开关的输入，以防止悬空电平。</li><li><strong>下拉输入（Input Pull-Down）</strong>：引脚通过内部下拉电阻连接到低电平。在没有外部连接时，引脚会保持低电平。与上拉输入类似，通常用于按钮和开关的输入。</li></ul></li><li><h3 id="输出模式："><a href="#输出模式：" class="headerlink" title="输出模式："></a><strong>输出模式</strong>：</h3><ul><li><strong>通用推挽输出（General-Purpose Push-Pull Output）</strong>：引脚可以输出高电平或低电平。用于驱动外部数字电路。</li><li><strong>开漏输出（Open-Drain Output）</strong>：引脚只能拉低，而不能拉高。通常需要外部上拉电阻来拉高电平。用于实现开漏输出，适用于一些总线通信协议如I2C和SPI。</li><li><strong>复用开漏输出（Open-Drain Output with Alternate Function）</strong>：类似于开漏输出，但引脚还可以配置为执行特定的备用功能，如UART通信、PWM输出等。</li></ul></li><li><strong>复用模式</strong>：<ul><li>引脚可以配置为具有不同备用功能的引脚。这些备用功能可以通过相应的寄存器设置来选择，以满足特定的通信或控制需求。</li></ul></li><li><strong>模拟模式</strong>：<ul><li>GPIO引脚可以配置为模拟输入或模拟输出。模拟输入用于连接到模拟传感器或其他模拟电路，而模拟输出用于输出模拟信号。</li></ul></li><li><strong>中断模式</strong>：<ul><li>GPIO引脚可以配置为触发外部中断。当引脚状态变化时，可以触发中断服务程序，允许您在特定事件发生时立即响应。</li></ul></li><li><strong>高速模式</strong>：<ul><li>高速模式允许GPIO引脚以更高的时钟频率工作，以适应特定的应用需求。这对于需要快速切换引脚状态的应用非常有用。</li></ul></li><li><strong>低功耗模式</strong>：<ul><li>某些STM32系列支持低功耗模式，可以降低GPIO引脚的功耗，适用于需要长时间运行的电池供电应用。</li></ul></li></ol><p>引脚电平：0V~3.3V，部分引脚可容忍5V</p><p>输出模式下可控制端口输出高低电平，用以驱动LED，控制蜂鸣器、模拟通信协议输出时序等</p><p>输入模式下可读取端口的高低电平或电压，用于读取按键输入、外接模块电平信号输入、ADC电压采集、模拟通信协议接收数据等</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Analog IN 模拟输入,这些引脚通常用于连接到模拟传感器或其他模拟电路。</span></span><br><span class="line">GPIO_Mode_AIN = <span class="number">0x0</span>,</span><br><span class="line"><span class="comment">//In_Floating 浮空输入,这意味着引脚未连接到任何电路，可以读取外部电平，但可能受到噪声干扰。</span></span><br><span class="line">GPIO_Mode_IN_FLOATING = <span class="number">0x04</span>,</span><br><span class="line"><span class="comment">//In Pull Down 下拉输入,引脚通过内部下拉电阻连接到低电平，在没有外部连接时，引脚会保持低电平。</span></span><br><span class="line">GPIO_Mode_IPD = <span class="number">0x28</span>,</span><br><span class="line"><span class="comment">//In Pull Up 上拉输入,引脚通过内部上拉电阻连接到高电平，在没有外部连接时，引脚会保持高电平。</span></span><br><span class="line">GPIO_Mode_IPU = <span class="number">0x48</span>,</span><br><span class="line"><span class="comment">//Out Open Drain 开漏输出，高电平没有驱动能力,在这种模式下，引脚可以拉低，但不能拉高，通常需要外部上拉电阻来拉高电平。</span></span><br><span class="line">GPIO_Mode_Out_OD = <span class="number">0x14</span>,</span><br><span class="line"><span class="comment">//Out Push Pull 推挽输出，高低电平都有驱动能力,在这种模式下，引脚可以输出高电平或低电平，具有驱动能力，用于驱动外部数字电路。</span></span><br><span class="line">GPIO_Mode_Out_PP = <span class="number">0x10</span>,</span><br><span class="line"><span class="comment">//Atl Open Drain 复用开漏,类似于开漏输出，但引脚还可以配置为执行特定的备用功能，如UART通信、I2C通信等。</span></span><br><span class="line">GPIO_Mode_AF_OD = <span class="number">0x1C</span>,</span><br><span class="line"><span class="comment">//Atl Push Pull 复用推挽,类似于推挽输出，但引脚也可以配置为执行备用功能。</span></span><br><span class="line">GPIO_Mode_AF_PP = <span class="number">0x18</span></span><br></pre></td></tr></table></figure><h3 id="操作STM32的GPIO步骤"><a href="#操作STM32的GPIO步骤" class="headerlink" title="操作STM32的GPIO步骤"></a>操作STM32的GPIO步骤</h3><h4 id="1、使用RCC开启GPIO的时钟"><a href="#1、使用RCC开启GPIO的时钟" class="headerlink" title="1、使用RCC开启GPIO的时钟"></a>1、使用RCC开启GPIO的时钟</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一个参数选择外设，第二个参数使能或失能</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_AHBPeriphClockCmd</span><span class="params">(<span class="type">uint32_t</span> RCC_AHBPeriph, FunctionalState NewState)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_APB2PeriphClockCmd</span><span class="params">(<span class="type">uint32_t</span> RCC_APB2Periph, FunctionalState NewState)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_APB1PeriphClockCmd</span><span class="params">(<span class="type">uint32_t</span> RCC_APB1Periph, FunctionalState NewState)</span>;</span><br></pre></td></tr></table></figure><p>AHB外设时钟控制函数就是使能或者失能AHB外设时钟的</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  Enables or disables the AHB peripheral clock.</span></span><br><span class="line"><span class="comment">  使能或失能AHB外设时钟</span></span><br><span class="line"><span class="comment">  * @param  RCC_AHBPeriph: specifies the AHB peripheral to gates its clock.</span></span><br><span class="line"><span class="comment">  *   第一个参数选择哪一个外设</span></span><br><span class="line"><span class="comment">  *   For @b STM32_Connectivity_line_devices, this parameter can be any combination</span></span><br><span class="line"><span class="comment">  *   of the following values:</span></span><br><span class="line"><span class="comment">  stm32互联型的设备可以在这个列表选择</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_DMA1</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_DMA2</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_SRAM</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_FLITF</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_CRC</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_OTG_FS    </span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_ETH_MAC   </span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_ETH_MAC_Tx</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_ETH_MAC_Rx</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  *   For @b other_STM32_devices, this parameter can be any combination of the </span></span><br><span class="line"><span class="comment">  *   following values:   </span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_DMA1</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_DMA2</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_SRAM</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_FLITF</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_CRC</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_FSMC</span></span><br><span class="line"><span class="comment">  *     @arg RCC_AHBPeriph_SDIO</span></span><br><span class="line"><span class="comment">  *   </span></span><br><span class="line"><span class="comment">  * @note SRAM and FLITF clock can be disabled only during sleep make</span></span><br><span class="line"><span class="comment">  注意SRAM和FLITF时钟只能在睡眠时禁用</span></span><br><span class="line"><span class="comment">  * @param  NewState: new state of the specified peripheral clock.</span></span><br><span class="line"><span class="comment">  指定外设时钟的新状态。</span></span><br><span class="line"><span class="comment">  *   This parameter can be: ENABLE or DISABLE.</span></span><br><span class="line"><span class="comment">  取值为:ENABLE或DISABLE。</span></span><br><span class="line"><span class="comment">  * @retval None</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_AHBPeriphClockCmd</span><span class="params">(<span class="type">uint32_t</span> RCC_AHBPeriph, FunctionalState NewState)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* Check the parameters */</span></span><br><span class="line">  assert_param(IS_RCC_AHB_PERIPH(RCC_AHBPeriph));</span><br><span class="line">  assert_param(IS_FUNCTIONAL_STATE(NewState));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (NewState != DISABLE)</span><br><span class="line">  &#123;</span><br><span class="line">    RCC-&gt;AHBENR |= RCC_AHBPeriph;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    RCC-&gt;AHBENR &amp;= ~RCC_AHBPeriph;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2、使用GPIO-Init函数初始化GPIO"><a href="#2、使用GPIO-Init函数初始化GPIO" class="headerlink" title="2、使用GPIO_Init函数初始化GPIO"></a>2、使用GPIO_Init函数初始化GPIO</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该函数用于将指定的GPIO外设复位为其默认状态。</span></span><br><span class="line"><span class="comment">//参数 GPIOx 是一个指向 GPIO_TypeDef 结构的指针，用于指定要复位的GPIO外设，例如 GPIOA、GPIOB等。</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_DeInit</span><span class="params">(GPIO_TypeDef* GPIOx)</span>;</span><br><span class="line"><span class="comment">//该函数用于将AFIO (Alternate Function I/0) 外设复位为其认状态。AFIO设用于配器GPIO引脚的复用功能。</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_AFIODeInit</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="comment">//该函数用于通过结构体参数初始化指定GPIO外设的GPIO引脚。</span></span><br><span class="line"><span class="comment">//参数 GPIOx 是一个指向 GPIO_TypeDef 结构的指针，用于指定要配置的GPIO外设</span></span><br><span class="line"><span class="comment">//参数 GPIO Initstruct 是一个结构体指针，包含有关要配置的GPIO引脚的详细信息，例如引脚的模式速度、上下拉等。</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_Init</span><span class="params">(GPIO_TypeDef* GPIOx, GPIO_InitTypeDef* GPIO_InitStruct)</span>;</span><br><span class="line"><span class="comment">//该函数用于将传递的结构体初始化为默认值，以便稍后通过 GPIO_Init 函数进行配置//参数 GPIO_Initstruct 是一个结构体指针，需要在调用该函数前进行定义，并将其传递给 GPIO_Init函数。</span></span><br><span class="line"><span class="type">void</span> pIO <span class="title function_">structInit</span><span class="params">(GPIO InitTypeDef* GPIO Initstruct)</span>;<span class="comment">//该函数用于读取指</span></span><br></pre></td></tr></table></figure><h4 id="3、使用输出或输入的函数控制GPIO"><a href="#3、使用输出或输入的函数控制GPIO" class="headerlink" title="3、使用输出或输入的函数控制GPIO"></a>3、使用输出或输入的函数控制GPIO</h4><h5 id="3-1、GPIO输出函数"><a href="#3-1、GPIO输出函数" class="headerlink" title="3.1、GPIO输出函数"></a>3.1、GPIO输出函数</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GPIO的写入输出函数</span></span><br><span class="line"><span class="comment">//该函数用于将指定GPIO外设的一个或多个引脚设置为高电平。</span></span><br><span class="line"><span class="type">void</span> GPIO <span class="title function_">SetBits</span><span class="params">(GPIO TypeDef* GPIOx, uint16 t GPIO Pin)</span>;</span><br><span class="line"><span class="comment">//该函数用于将指定GPIO外设的一个或多个引脚设置为低电平。</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_ResetBits</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;</span><br><span class="line"><span class="comment">//该函数用于根据第三个参数的值来设置指定GPIO外设的一个引脚的状态（高或低）。</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_WriteBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin, BitAction BitVal)</span>;</span><br><span class="line"><span class="comment">//该函数用于根据第二个参数的值来设置指定GPIO外设的所有引脚的状态（高或低）。</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_Write</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> PortVal)</span>;</span><br></pre></td></tr></table></figure><h5 id="3-2-输出函数控制GPIO示例"><a href="#3-2-输出函数控制GPIO示例" class="headerlink" title="3.2 输出函数控制GPIO示例"></a>3.2 输出函数控制GPIO示例</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">LED_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line"><span class="comment">//这行代码启用了GPIOA外设的时钟。在STM32中，要使用GPIO端口，首先需要启用相应的外设时钟。</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">    <span class="comment">//这行代码定义了一个名为`GPIO_InitStructure`的结构体变量，用于配置GPIO端口的初始化参数</span></span><br><span class="line">        <span class="comment">/*!typedef struct&#123;//typedef更改结构体的名字为GPIO_InitStructure</span></span><br><span class="line"><span class="comment">  uint16_t GPIO_Pin;</span></span><br><span class="line"><span class="comment">  //指定要配置的GPIO引脚。</span></span><br><span class="line"><span class="comment">该参数可以是@ref GPIO_pins_define的任意值</span></span><br><span class="line"><span class="comment">  GPIOSpeed_TypeDef GPIO_Speed;  </span></span><br><span class="line"><span class="comment">  //指定所选引脚的速度。</span></span><br><span class="line"><span class="comment">该参数可以是@ref GPIOSpeed_TypeDef的值</span></span><br><span class="line"><span class="comment">  GPIOMode_TypeDef GPIO_Mode;    </span></span><br><span class="line"><span class="comment">  //指定所选引脚的工作模式。</span></span><br><span class="line"><span class="comment">该参数可以是@ref GPIOMode_TypeDef的值</span></span><br><span class="line"><span class="comment">&#125;GPIO_InitTypeDef; */</span></span><br><span class="line">    <span class="comment">//.引出结构体成员</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;</span><br><span class="line">    <span class="comment">//这行代码配置了GPIO的工作模式。`GPIO_Mode_Out_PP` 表示GPIO端口将被配置为推挽输出模式，即可以输出高电平和低</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_2;</span><br><span class="line">    <span class="comment">//这行代码指定了要初始化的GPIO引脚。在这里，GPIOA的引脚1和2被初始化。</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">    <span class="comment">//这行代码配置了GPIO的输出速度。在这里，GPIO的输出速度被设置为50MHz。</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line">    <span class="comment">//这行代码使用前面配置好的参数初始化GPIOA端口。它告诉STM32使用`GPIO_InitStructure`中定义的参数来配置GPIOA端口。</span></span><br><span class="line">GPIO_SetBits(GPIOA, GPIO_Pin_1 | GPIO_Pin_2);</span><br><span class="line">    <span class="comment">//这行代码将GPIOA的引脚1和2设置为高电平，从而点亮LED。`GPIO_SetBits` 函数用于设置指定引脚的电平。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-3、GPIO读取函数"><a href="#3-3、GPIO读取函数" class="headerlink" title="3.3、GPIO读取函数"></a>3.3、GPIO读取函数</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GPIO的读取输入函数</span></span><br><span class="line"><span class="comment">//该函数用于读取指定GPIO外设的单个引脚的输入状态，返回引脚的状态(高电平或低电平）</span></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">GPIO_ReadInputDataBit</span><span class="params">(GpIO_TypeDef* GPIOx, uint16 t GpIO Pin)</span>;</span><br><span class="line"><span class="comment">//该函数用于读取指定GPIO外设的所有引脚的输入状态，返回整个GPIO端口的状态值。</span></span><br><span class="line">uint16 t GPIO <span class="title function_">ReadInputData</span><span class="params">(GPIO TypeDef* GPIOx)</span>;</span><br><span class="line"><span class="comment">//该函数用于读取指定GPIO外设的单个引脚的输出状态，返回引脚的状态（高电平或低电平)</span></span><br><span class="line">uint8 t GPIO <span class="title function_">ReadOutputDataBit</span><span class="params">(GpIO TypeDef* GPIOx, uint16 t GpIO pin)</span>;</span><br><span class="line"><span class="comment">//该函数用于读取指定GPIO外设的所有引脚的输出状态，返回整个GPIO端口的状态值。</span></span><br><span class="line">uint16 t GPIO <span class="title function_">ReadoutputData</span><span class="params">(GpIO TypeDef* GPIOx)</span></span><br></pre></td></tr></table></figure><h5 id="3-4-输人函数控制GPIO示例"><a href="#3-4-输人函数控制GPIO示例" class="headerlink" title="3.4 输人函数控制GPIO示例"></a>3.4 输人函数控制GPIO示例</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Key_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 启用GPIOB外设的时钟</span></span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line">    <span class="comment">// 定义GPIO初始化参数结构体</span></span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;    </span><br><span class="line">    <span class="comment">// 配置GPIO工作模式为上拉输入模式（Input Pull-Up）</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;    </span><br><span class="line">    <span class="comment">// 配置GPIO引脚，这里配置引脚1和引脚11</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_11;    </span><br><span class="line">    <span class="comment">// 配置GPIO输出速度为50MHz</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;    </span><br><span class="line">    <span class="comment">// 使用上述配置初始化GPIOB端口</span></span><br><span class="line">    GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">Key_GetNum</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">uint8_t</span> KeyNum = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 检测引脚1是否低电平（按钮按下）</span></span><br><span class="line"><span class="keyword">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_1) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 等待20毫秒（消除按键抖动）</span></span><br><span class="line">    Delay_ms(<span class="number">20</span>);</span><br><span class="line">    <span class="comment">// 检测引脚1是否仍然低电平（按钮保持按下）</span></span><br><span class="line">    <span class="keyword">while</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_1) == <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 再次等待20毫秒（避免多次检测到按钮按下）</span></span><br><span class="line">    Delay_ms(<span class="number">20</span>);</span><br><span class="line">    <span class="comment">// 设置按键号为1</span></span><br><span class="line">    KeyNum = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测引脚11是否低电平（按钮按下）</span></span><br><span class="line"><span class="keyword">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_11) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 等待20毫秒（消除按键抖动）</span></span><br><span class="line">    Delay_ms(<span class="number">20</span>);</span><br><span class="line">    <span class="comment">// 检测引脚11是否仍然低电平（按钮保持按下）</span></span><br><span class="line">    <span class="keyword">while</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_11) == <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 再次等待20毫秒（避免多次检测到按钮按下）</span></span><br><span class="line">    Delay_ms(<span class="number">20</span>);</span><br><span class="line">    <span class="comment">// 设置按键号为2</span></span><br><span class="line">    KeyNum = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 返回检测到的按键号（0表示没有按键按下）</span></span><br><span class="line"><span class="keyword">return</span> KeyNum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> SMT32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git全面教程——git远程仓库！！！</title>
      <link href="/2023/09/03/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-git%E6%95%99%E7%A8%8B-git%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/"/>
      <url>/2023/09/03/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-git%E6%95%99%E7%A8%8B-git%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h1><p>到目前为止，我们已经掌握了如何在Git仓库里对一个文件进行时光穿梭，你再也不用担心文件备份或者丢失的问题了。</p><p>可是有用过<strong>集中式版本控制系统SVN</strong>的童鞋会站出来说，这些功能在SVN里早就有了，没看出Git有什么特别的地方。</p><p>没错，如果只是在一个仓库里管理文件历史，Git和SVN真没啥区别。为了保证你现在所学的Git物超所值，将来绝对不会后悔，同时为了打击已经不幸学了SVN的童鞋，本章开始介绍Git的杀手级功能之一（注意是之一，也就是后面还有之二，之三……）：<strong>远程仓库</strong>。</p><p>Git是分布式版本控制系统，同一个Git仓库，可以<strong>分布到不同的机器上</strong>。怎么分布呢？最早，肯定只有一台机器有一个原始版本库，此后，别的机器可以“克隆”这个原始版本库，而且每台机器的版本库其实都是一样的，并没有主次之分。</p><p>你肯定会想，至少需要两台机器才能玩远程库不是？但是我只有一台电脑，怎么玩？</p><p>其实一台电脑上也是可以克隆多个版本库的，只要不在同一个目录下。不过，现实生活中是不会有人这么傻的在一台电脑上搞几个远程库玩，因为一台电脑上搞几个远程库完全没有意义，而且硬盘挂了会导致所有库都挂掉，所以我也不告诉你在一台电脑上怎么克隆多个仓库。</p><p>实际情况往往是这样，找一台电脑充当服务器的角色，每天24小时开机，其他每个人都从这个“服务器”仓库克隆一份到自己的电脑上，并且各自把各自的提交推送到服务器仓库里，也从服务器仓库中拉取别人的提交。</p><p>完全可以自己搭建一台运行Git的服务器，不过现阶段，为了学Git先搭个服务器绝对是小题大作。好在这个世界上有个叫<a href="https://github.com/">GitHub</a>的神奇的网站，从名字就可以看出，这个网站就是提供Git仓库托管服务的，所以，只要注册一个GitHub账号，就可以<strong>免费获得Git远程仓库</strong>。</p><p>在继续阅读后续内容前，请自行注册GitHub账号。由于你的本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要一点设置：</p><ul><li><strong>第1步</strong>：创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有<code>id_rsa</code>和<code>id_rsa.pub</code>这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：</li></ul><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</span><br></pre></td></tr></table></figure><p>你需要把邮件地址换成你自己的邮件地址，然后一路回车，使用默认值即可，由于这个Key也不是用于军事目的，所以也无需设置密码。</p><p>如果一切顺利的话，可以在用户主目录里找到<code>.ssh</code>目录，里面有<code>id_rsa</code>和<code>id_rsa.pub</code>两个文件，这两个就是SSH Key的秘钥对，<code>id_rsa</code>是私钥，不能泄露出去，<code>id_rsa.pub</code>是公钥，可以放心地告诉任何人。</p><ul><li><strong>第2步</strong>：登陆GitHub，打开“Account settings”，“SSH Keys”页面：</li></ul><p>然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴<code>id_rsa.pub</code>文件的内容：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitwarehouse1.jpg" alt="1"></p><p>点“Add Key”，你就应该看到已经添加的Key：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitwarehouse2.jpg" alt="2"></p><p>为什么GitHub需要SSH Key呢？因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。</p><p>当然，GitHub允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到GitHub，就可以在每台电脑上往GitHub推送了。</p><p>最后友情提示，在GitHub上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）。所以，不要把敏感信息放进去。</p><p>如果你不想让别人看到Git库，有两个办法，一个是交点保护费，让GitHub把公开的仓库变成私有的，这样别人就看不见了（不可读更不可写）。另一个办法是自己动手，搭一个Git服务器，因为是你自己的Git服务器，所以别人也是看不见的。这个方法我们后面会讲到的，相当简单，公司内部开发必备。</p><p>确保你拥有一个GitHub账号后，我们就即将开始远程仓库的学习。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>“有了远程仓库，妈妈再也不用担心我的硬盘了。”——Git点读机</p><h1 id="添加远程仓库"><a href="#添加远程仓库" class="headerlink" title="添加远程仓库"></a>添加远程仓库</h1><p>现在的情景是，你已经在本地创建了一个Git仓库后，又想在GitHub创建一个Git仓库，并且让这两个仓库进行远程同步，这样，GitHub上的仓库既可以作为备份，又可以让其他人通过该仓库来协作，真是一举多得。</p><p>首先，登陆GitHub，然后，在右上角找到“Create a new repo”按钮，创建一个新的仓库：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitwarehouse7.jpg" alt="3"></p><p>在Repository name填入<code>learngit</code>，其他保持默认设置，点击“Create repository”按钮，就成功地创建了一个新的Git仓库：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitwarehouse3.jpg" alt="4"></p><p>目前，在GitHub上的这个<code>learngit</code>仓库还是空的，GitHub告诉我们，可以从这个仓库克隆出新的仓库，也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到GitHub仓库。</p><p>现在，我们根据GitHub的提示，在本地的<code>learngit</code>仓库下运行命令：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git@github.com:michaelliao/learngit.git</span><br></pre></td></tr></table></figure><p>请千万注意，把上面的<code>michaelliao</code>替换成你自己的GitHub账户名，否则，你在本地关联的就是我的远程库，关联没有问题，但是你以后推送是推不上去的，因为你的SSH Key公钥不在我的账户列表中。</p><p>添加后，远程库的名字就是<code>origin</code>，这是Git默认的叫法，也可以改成别的，但是<code>origin</code>这个名字一看就知道是远程库。</p><p>下一步，就可以把本地库的所有内容推送到远程库上：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br><span class="line">Counting objects: 20, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (15/15), done.</span><br><span class="line">Writing objects: 100% (20/20), 1.64 KiB | 560.00 KiB/s, done.</span><br><span class="line">Total 20 (delta 5), reused 0 (delta 0)</span><br><span class="line">remote: Resolving deltas: 100% (5/5), done.</span><br><span class="line">To github.com:michaelliao/learngit.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br><span class="line">Branch &#x27;master&#x27; set up to track remote branch &#x27;master&#x27; from &#x27;origin&#x27;.</span><br></pre></td></tr></table></figure><p>把本地库的内容推送到远程，用<code>git push</code>命令，实际上是把当前分支<code>master</code>推送到远程。</p><p>由于远程库是空的，我们第一次推送<code>master</code>分支时，加上了<code>-u</code>参数，Git不但会把本地的<code>master</code>分支内容推送的远程新的<code>master</code>分支，还会把本地的<code>master</code>分支和远程的<code>master</code>分支关联起来，在以后的推送或者拉取时就可以简化命令。</p><p>推送成功后，可以立刻在GitHub页面中看到远程库的内容已经和本地一模一样：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitwarehouse4.jpg" alt="5"></p><p>从现在起，只要本地作了提交，就可以通过命令：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure><p>把本地<code>master</code>分支的最新修改推送至GitHub，现在，你就拥有了真正的分布式版本库！</p><h2 id="SSH警告"><a href="#SSH警告" class="headerlink" title="SSH警告"></a>SSH警告</h2><p>当你第一次使用Git的<code>clone</code>或者<code>push</code>命令连接GitHub时，会得到一个警告：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The authenticity of host &#x27;github.com (xx.xx.xx.xx)&#x27; can&#x27;t be established.</span><br><span class="line">RSA key fingerprint is xx.xx.xx.xx.xx.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)?</span><br></pre></td></tr></table></figure><p>这是因为Git使用SSH连接，而SSH连接在第一次验证GitHub服务器的Key时，需要你确认GitHub的Key的指纹信息是否真的来自GitHub的服务器，输入<code>yes</code>回车即可。</p><p>Git会输出一个警告，告诉你已经把GitHub的Key添加到本机的一个信任列表里了：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: Permanently added &#x27;github.com&#x27; (RSA) to the list of known hosts.</span><br></pre></td></tr></table></figure><p>这个警告只会出现一次，后面的操作就不会有任何警告了。</p><p>如果你实在担心有人冒充GitHub服务器，输入<code>yes</code>前可以对照<a href="https://help.github.com/articles/what-are-github-s-ssh-key-fingerprints/">GitHub的RSA Key的指纹信息</a>是否与SSH连接给出的一致。</p><h2 id="删除远程库"><a href="#删除远程库" class="headerlink" title="删除远程库"></a>删除远程库</h2><p>如果添加的时候地址写错了，或者就是想删除远程库，可以用<code>git remote rm &lt;name&gt;</code>命令。使用前，建议先用<code>git remote -v</code>查看远程库信息：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br><span class="line">origin  git@github.com:michaelliao/learn-git.git (fetch)</span><br><span class="line">origin  git@github.com:michaelliao/learn-git.git (push)</span><br></pre></td></tr></table></figure><p>然后，根据名字删除，比如删除<code>origin</code>：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote rm origin</span><br></pre></td></tr></table></figure><p>此处的“删除”其实是解除了本地和远程的绑定关系，并不是物理上删除了远程库。远程库本身并没有任何改动。要真正删除远程库，需要登录到GitHub，在后台页面找到删除按钮再删除。</p><h2 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h2><p>要关联一个远程库，使用命令<code>git remote add origin git@server-name:path/repo-name.git</code>；</p><p>关联一个远程库时必须给远程库指定一个名字，<code>origin</code>是默认习惯命名；</p><p>关联后，使用命令<code>git push -u origin master</code>第一次推送master分支的所有内容；</p><p>此后，每次本地提交后，只要有必要，就可以使用命令<code>git push origin master</code>推送最新修改；</p><p>分布式版本系统的最大好处之一是在本地工作完全不需要考虑远程库的存在，也就是有没有联网都可以正常工作，而SVN在没有联网的时候是拒绝干活的！当有网络的时候，再把本地提交推送一下就完成了同步，真是太方便了！</p><h1 id="从远程库克隆"><a href="#从远程库克隆" class="headerlink" title="从远程库克隆"></a>从远程库克隆</h1><p>上次我们讲了先有本地库，后有远程库的时候，如何关联远程库。</p><p>现在，假设我们从零开发，那么最好的方式是先创建远程库，然后，从远程库克隆。</p><p>首先，登陆GitHub，创建一个新的仓库，名字叫<code>gitskills</code>：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitwarehouse5.jpg" alt="6"></p><p>我们勾选<code>Initialize this repository with a README</code>，这样GitHub会自动为我们创建一个<code>README.md</code>文件。创建完毕后，可以看到<code>README.md</code>文件：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitwarehouse6.jpg" alt="7"></p><p>现在，远程库已经准备好了，下一步是用命令<code>git clone</code>克隆一个本地库：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@github.com:michaelliao/gitskills.git</span><br><span class="line">Cloning into &#x27;gitskills&#x27;...</span><br><span class="line">remote: Counting objects: 3, done.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 3</span><br><span class="line">Receiving objects: 100% (3/3), done.</span><br></pre></td></tr></table></figure><p>注意把Git库的地址换成你自己的，然后进入<code>gitskills</code>目录看看，已经有<code>README.md</code>文件了：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd gitskills</span><br><span class="line">$ ls</span><br><span class="line">README.md</span><br></pre></td></tr></table></figure><p>如果有多个人协作开发，那么每个人各自从远程克隆一份就可以了。</p><p>你也许还注意到，GitHub给出的地址不止一个，还可以用<code>https://github.com/michaelliao/gitskills.git</code>这样的地址。实际上，Git支持多种协议，默认的<code>git://</code>使用ssh，但也可以使用<code>https</code>等其他协议。</p><p>使用<code>https</code>除了速度慢以外，还有个最大的麻烦是每次推送都必须输入口令，但是在某些只开放http端口的公司内部就无法使用<code>ssh</code>协议而只能用<code>https</code>。</p><h2 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h2><p>要克隆一个仓库，首先必须知道仓库的地址，然后使用<code>git clone</code>命令克隆。</p><p>Git支持多种协议，包括<code>https</code>，但<code>ssh</code>协议速度最快。</p>]]></content>
      
      
      <categories>
          
          <category> 学习技能 </category>
          
          <category> git全面教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git全面教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git全面教程——使用！！！</title>
      <link href="/2023/08/30/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-git%E6%95%99%E7%A8%8B-git%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/08/30/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-git%E6%95%99%E7%A8%8B-git%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="git的使用"><a href="#git的使用" class="headerlink" title="git的使用"></a>git的使用</h1><p>我们已经成功地添加并提交了一个readme.txt文件，现在，是时候继续工作了，于是，我们继续修改readme.txt文件，改成如下内容：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></table></figure><p>现在，运行<code>git status</code>命令看看结果：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p><code>git status</code>命令可以让我们时刻掌握仓库当前的状态，上面的命令输出告诉我们，<code>readme.txt</code>被修改过了，但还没有准备提交的修改。</p><p>虽然Git告诉我们<code>readme.txt</code>被修改了，但如果能看看具体修改了什么内容，自然是很好的。比如你休假两周从国外回来，第一天上班时，已经记不清上次怎么修改的<code>readme.txt</code>，所以，需要用<code>git diff</code>这个命令看看：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git diff readme.txt </span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index 46d49bf..9247db6 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1,2 +1,2 @@</span><br><span class="line">-Git is a version control system.</span><br><span class="line">+Git is a distributed version control system.</span><br><span class="line"> Git is free software.</span><br></pre></td></tr></table></figure><p><code>git diff</code>顾名思义就是查看difference，显示的格式正是Unix通用的diff格式，可以从上面的命令输出看到，我们在第一行添加了一个<code>distributed</code>单词。</p><p>知道了对<code>readme.txt</code>作了什么修改后，再把它提交到仓库就放心多了，提交修改和提交新文件是一样的两步，第一步是<code>git add</code>：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br></pre></td></tr></table></figure><p>同样没有任何输出。在执行第二步<code>git commit</code>之前，我们再运行<code>git status</code>看看当前仓库的状态：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br></pre></td></tr></table></figure><p><code>git status</code>告诉我们，将要被提交的修改包括<code>readme.txt</code>，下一步，就可以放心地提交了：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;add distributed&quot;</span><br><span class="line">[master e475afc] add distributed</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>提交后，我们再用<code>git status</code>命令看看仓库的当前状态：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure><p>Git告诉我们当前没有需要提交的修改，而且，工作目录是干净（working tree clean）的。</p><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul><li><p>要随时掌握工作区的状态，使用<code>git status</code>命令。</p></li><li><p>如果<code>git status</code>告诉你有文件被修改过，用<code>git diff</code>可以查看修改内容。</p></li></ul><h1 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h1><p>现在，你已经学会了修改文件，然后把修改提交到Git版本库，现在，再练习一次，修改readme.txt文件如下：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br></pre></td></tr></table></figure><p>然后尝试提交：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line">$ git commit -m &quot;append GPL&quot;</span><br><span class="line">[master 1094adb] append GPL</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>像这样，你不断对文件进行修改，然后不断提交修改到版本库里，就好比玩RPG游戏时，每通过一关就会自动把游戏状态存盘，如果某一关没过去，你还可以选择读取前一关的状态。有些时候，在打Boss之前，你会手动存盘，以便万一打Boss失败了，可以从最近的地方重新开始。Git也是一样，每当你觉得文件修改到一定程度的时候，就可以“保存一个快照”，这个快照在Git中被称为<code>commit</code>。一旦你把文件改乱了，或者误删了文件，还可以从最近的一个<code>commit</code>恢复，然后继续工作，而不是把几个月的工作成果全部丢失。</p><p>现在，我们回顾一下<code>readme.txt</code>文件一共有几个版本被提交到Git仓库里了：</p><ul><li>版本1：wrote a readme file</li></ul><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></table></figure><ul><li>版本2：add distributed</li></ul><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></table></figure><ul><li>版本3：append GPL</li></ul><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br></pre></td></tr></table></figure><p>当然了，在实际工作中，我们脑子里怎么可能记得一个几千行的文件每次都改了什么内容，不然要版本控制系统干什么。版本控制系统肯定有某个命令可以告诉我们历史记录，在Git中，我们用<code>git log</code>命令查看：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">commit 1094adb7b9b3807259d8cb349e7df1d4d6477073 (HEAD -&gt; master)</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 21:06:15 2018 +0800</span><br><span class="line"></span><br><span class="line">    append GPL</span><br><span class="line"></span><br><span class="line">commit e475afc93c209a690c39c13a46716e8fa000c366</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 21:03:36 2018 +0800</span><br><span class="line"></span><br><span class="line">    add distributed</span><br><span class="line"></span><br><span class="line">commit eaadf4e385e865d25c48e7ca9c8395c3f7dfaef0</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 20:59:18 2018 +0800</span><br><span class="line"></span><br><span class="line">    wrote a readme file</span><br></pre></td></tr></table></figure><p><code>git log</code>命令显示从最近到最远的提交日志，我们可以看到3次提交，最近的一次是<code>append GPL</code>，上一次是<code>add distributed</code>，最早的一次是<code>wrote a readme file</code>。</p><p>如果嫌输出信息太多，看得眼花缭乱的，可以试试加上<code>--pretty=oneline</code>参数：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=oneline</span><br><span class="line">1094adb7b9b3807259d8cb349e7df1d4d6477073 (HEAD -&gt; master) append GPL</span><br><span class="line">e475afc93c209a690c39c13a46716e8fa000c366 add distributed</span><br><span class="line">eaadf4e385e865d25c48e7ca9c8395c3f7dfaef0 wrote a readme file</span><br></pre></td></tr></table></figure><p>需要友情提示的是，你看到的一大串类似<code>1094adb...</code>的是<code>commit id</code>（版本号），和SVN不一样，Git的<code>commit id</code>不是1，2，3……递增的数字，而是一个SHA1计算出来的一个非常大的数字，用十六进制表示，而且你看到的<code>commit id</code>和我的肯定不一样，以你自己的为准。为什么<code>commit id</code>需要用这么一大串数字表示呢？因为Git是分布式的版本控制系统，后面我们还要研究多人在同一个版本库里工作，如果大家都用1，2，3……作为版本号，那肯定就冲突了。</p><p>每提交一个新版本，实际上Git就会把它们自动串成一条时间线。如果使用可视化工具查看Git历史，就可以更清楚地看到提交历史的时间线：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gituse1.jpg" alt="1"></p><p>好了，现在我们启动时光穿梭机，准备把<code>readme.txt</code>回退到上一个版本，也就是<code>add distributed</code>的那个版本，怎么做呢？</p><p>首先，Git必须知道当前版本是哪个版本，在Git中，用<code>HEAD</code>表示当前版本，也就是最新的提交<code>1094adb...</code>（注意我的提交ID和你的肯定不一样），上一个版本就是<code>HEAD^</code>，上上一个版本就是<code>HEAD^^</code>，当然往上100个版本写100个<code>^</code>比较容易数不过来，所以写成<code>HEAD~100</code>。</p><p>现在，我们要把当前版本<code>append GPL</code>回退到上一个版本<code>add distributed</code>，就可以使用<code>git reset</code>命令：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br><span class="line">HEAD is now at e475afc add distributed</span><br></pre></td></tr></table></figure><p><code>--hard</code>参数有啥意义？这个后面再讲，现在你先放心使用。</p><p>看看<code>readme.txt</code>的内容是不是版本<code>add distributed</code>：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></table></figure><p>果然被还原了。</p><p>还可以继续回退到上一个版本<code>wrote a readme file</code>，不过且慢，让我们用<code>git log</code>再看看现在版本库的状态：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">commit e475afc93c209a690c39c13a46716e8fa000c366 (HEAD -&gt; master)</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 21:03:36 2018 +0800</span><br><span class="line"></span><br><span class="line">    add distributed</span><br><span class="line"></span><br><span class="line">commit eaadf4e385e865d25c48e7ca9c8395c3f7dfaef0</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 20:59:18 2018 +0800</span><br><span class="line"></span><br><span class="line">    wrote a readme file</span><br></pre></td></tr></table></figure><p>最新的那个版本<code>append GPL</code>已经看不到了！好比你从21世纪坐时光穿梭机来到了19世纪，想再回去已经回不去了，肿么办？</p><p>办法其实还是有的，只要上面的命令行窗口还没有被关掉，你就可以顺着往上找啊找啊，找到那个<code>append GPL</code>的<code>commit id</code>是<code>1094adb...</code>，于是就可以指定回到未来的某个版本：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard 1094a</span><br><span class="line">HEAD is now at 83b0afe append GPL</span><br></pre></td></tr></table></figure><p>版本号没必要写全，前几位就可以了，Git会自动去找。当然也不能只写前一两位，因为Git可能会找到多个版本号，就无法确定是哪一个了。</p><p>再小心翼翼地看看<code>readme.txt</code>的内容：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br></pre></td></tr></table></figure><p>果然，我胡汉三又回来了。</p><p>Git的版本回退速度非常快，因为Git在内部有个指向当前版本的<code>HEAD</code>指针，当你回退版本的时候，Git仅仅是把HEAD从指向<code>append GPL</code>：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌────┐</span><br><span class="line">│HEAD│</span><br><span class="line">└────┘</span><br><span class="line">   │</span><br><span class="line">   └──▶ ○ append GPL</span><br><span class="line">        │</span><br><span class="line">        ○ add distributed</span><br><span class="line">        │</span><br><span class="line">        ○ wrote a readme file</span><br></pre></td></tr></table></figure><p>改为指向<code>add distributed</code>：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌────┐</span><br><span class="line">│HEAD│</span><br><span class="line">└────┘</span><br><span class="line">   │</span><br><span class="line">   │    ○ append GPL</span><br><span class="line">   │    │</span><br><span class="line">   └──▶ ○ add distributed</span><br><span class="line">        │</span><br><span class="line">        ○ wrote a readme file</span><br></pre></td></tr></table></figure><p>然后顺便把工作区的文件更新了。所以你让<code>HEAD</code>指向哪个版本号，你就把当前版本定位在哪。</p><p>现在，你回退到了某个版本，关掉了电脑，第二天早上就后悔了，想恢复到新版本怎么办？找不到新版本的<code>commit id</code>怎么办？</p><p>在Git中，总是有后悔药可以吃的。当你用<code>$ git reset --hard HEAD^</code>回退到<code>add distributed</code>版本时，再想恢复到<code>append GPL</code>，就必须找到<code>append GPL</code>的commit id。Git提供了一个命令<code>git reflog</code>用来记录你的每一次命令：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line">e475afc HEAD@&#123;1&#125;: reset: moving to HEAD^</span><br><span class="line">1094adb (HEAD -&gt; master) HEAD@&#123;2&#125;: commit: append GPL</span><br><span class="line">e475afc HEAD@&#123;3&#125;: commit: add distributed</span><br><span class="line">eaadf4e HEAD@&#123;4&#125;: commit (initial): wrote a readme file</span><br></pre></td></tr></table></figure><p>终于舒了口气，从输出可知，<code>append GPL</code>的commit id是<code>1094adb</code>，现在，你又可以乘坐时光机回到未来了。</p><h3 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h3><p>现在总结一下：</p><ul><li><p><code>HEAD</code>指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令<code>git reset --hard commit_id</code>。</p></li><li><p>穿梭前，用<code>git log</code>可以查看提交历史，以便确定要回退到哪个版本。</p></li><li><p>要重返未来，用<code>git reflog</code>查看命令历史，以便确定要回到未来的哪个版本。</p></li></ul><h1 id="工作区和暂存区"><a href="#工作区和暂存区" class="headerlink" title="工作区和暂存区"></a>工作区和暂存区</h1><p>Git和其他版本控制系统如SVN的一个不同之处就是有暂存区的概念。</p><p>先来看名词解释。</p><h2 id="工作区（Working-Directory）"><a href="#工作区（Working-Directory）" class="headerlink" title="工作区（Working Directory）"></a>工作区（Working Directory）</h2><p>就是你在电脑里能看到的目录，比如我的<code>learngit</code>文件夹就是一个工作区：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gituse2.jpg" alt="2"></p><h3 id="版本库（Repository）"><a href="#版本库（Repository）" class="headerlink" title="版本库（Repository）"></a>版本库（Repository）</h3><p>工作区有一个隐藏目录<code>.git</code>，这个不算工作区，而是Git的版本库。</p><p>Git的版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区，还有Git为我们自动创建的第一个分支<code>master</code>，以及指向<code>master</code>的一个指针叫<code>HEAD</code>。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gituse3.jpg" alt="3"></p><p>分支和<code>HEAD</code>的概念我们以后再讲。</p><p>前面讲了我们把文件往Git版本库里添加的时候，是分两步执行的：</p><ul><li><p>第一步是用<code>git add</code>把文件添加进去，实际上就是把文件修改添加到暂存区；</p></li><li><p>第二步是用<code>git commit</code>提交更改，实际上就是把暂存区的所有内容提交到当前分支。</p></li></ul><p>因为我们创建Git版本库时，Git自动为我们创建了唯一一个<code>master</code>分支，所以，现在，<code>git commit</code>就是往<code>master</code>分支上提交更改。</p><p>你可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。</p><p>俗话说，实践出真知。现在，我们再练习一遍，先对<code>readme.txt</code>做个修改，比如加上一行内容：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a mutable index called stage.</span><br></pre></td></tr></table></figure><p>然后，在工作区新增一个<code>LICENSE</code>文本文件（内容随便写）。</p><p>先用<code>git status</code>查看一下状态：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class="line"></span><br><span class="line">LICENSE</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p>Git非常清楚地告诉我们，<code>readme.txt</code>被修改了，而<code>LICENSE</code>还从来没有被添加过，所以它的状态是<code>Untracked</code>。</p><p>现在，使用两次命令<code>git add</code>，把<code>readme.txt</code>和<code>LICENSE</code>都添加后，用<code>git status</code>再查看一下：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">new file:   LICENSE</span><br><span class="line">modified:   readme.txt</span><br></pre></td></tr></table></figure><p>现在，暂存区的状态就变成这样了：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gituse4.jpg" alt="4"></p><p>所以，<code>git add</code>命令实际上就是把要提交的所有修改放到暂存区（Stage），然后，执行<code>git commit</code>就可以一次性把暂存区的所有修改提交到分支。</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;understand how stage works&quot;</span><br><span class="line">[master e43a48b] understand how stage works</span><br><span class="line"> 2 files changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 LICENSE</span><br></pre></td></tr></table></figure><p>一旦提交后，如果你又没有对工作区做任何修改，那么工作区就是“干净”的：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure><p>现在版本库变成了这样，暂存区就没有任何内容了：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gituse5.jpg" alt="5"></p><h3 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h3><p>暂存区是Git非常重要的概念，弄明白了暂存区，就弄明白了Git的很多操作到底干了什么。</p><p>没弄明白暂存区是怎么回事的童鞋，请向上滚动页面，再看一次。</p><h1 id="管理修改"><a href="#管理修改" class="headerlink" title="管理修改"></a>管理修改</h1><p>现在，假定你已经完全掌握了暂存区的概念。下面，我们要讨论的就是，为什么Git比其他版本控制系统设计得优秀，因为Git跟踪并管理的是修改，而非文件。</p><p>你会问，什么是修改？比如你新增了一行，这就是一个修改，删除了一行，也是一个修改，更改了某些字符，也是一个修改，删了一些又加了一些，也是一个修改，甚至创建一个新文件，也算一个修改。</p><p>为什么说Git管理的是修改，而不是文件呢？我们还是做实验。第一步，对readme.txt做一个修改，比如加一行内容：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a mutable index called stage.</span><br><span class="line">Git tracks changes.</span><br></pre></td></tr></table></figure><p>然后，添加：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line">$ git status</span><br><span class="line"># On branch master</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line">#</span><br><span class="line">#       modified:   readme.txt</span><br><span class="line">#</span><br></pre></td></tr></table></figure><p>然后，再修改readme.txt：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt </span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a mutable index called stage.</span><br><span class="line">Git tracks changes of files.</span><br></pre></td></tr></table></figure><p>提交：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;git tracks changes&quot;</span><br><span class="line">[master 519219b] git tracks changes</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>提交后，再看看状态：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p>咦，怎么第二次的修改没有被提交？</p><p>别激动，我们回顾一下操作过程：</p><p>第一次修改 -&gt; <code>git add</code> -&gt; 第二次修改 -&gt; <code>git commit</code></p><p>你看，我们前面讲了，Git管理的是修改，当你用<code>git add</code>命令后，在工作区的第一次修改被放入暂存区，准备提交，但是，在工作区的第二次修改并没有放入暂存区，所以，<code>git commit</code>只负责把暂存区的修改提交了，也就是第一次的修改被提交了，第二次的修改不会被提交。</p><p>提交后，用<code>git diff HEAD -- readme.txt</code>命令可以查看工作区和版本库里面最新版本的区别：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git diff HEAD -- readme.txt </span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index 76d770f..a9c5755 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1,4 +1,4 @@</span><br><span class="line"> Git is a distributed version control system.</span><br><span class="line"> Git is free software distributed under the GPL.</span><br><span class="line"> Git has a mutable index called stage.</span><br><span class="line">-Git tracks changes.</span><br><span class="line">+Git tracks changes of files.</span><br></pre></td></tr></table></figure><p>可见，第二次修改确实没有被提交。</p><p>那怎么提交第二次修改呢？你可以继续<code>git add</code>再<code>git commit</code>，也可以别着急提交第一次修改，先<code>git add</code>第二次修改，再<code>git commit</code>，就相当于把两次修改合并后一块提交了：</p><p>第一次修改 -&gt; <code>git add</code> -&gt; 第二次修改 -&gt; <code>git add</code> -&gt; <code>git commit</code></p><p>好，现在，把第二次修改提交了，然后开始小结。</p><h3 id="小结-3"><a href="#小结-3" class="headerlink" title="小结"></a>小结</h3><p>现在，你又理解了Git是如何跟踪修改的，每次修改，如果不用<code>git add</code>到暂存区，那就不会加入到<code>commit</code>中。</p><h1 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h1><p>自然，你是不会犯错的。不过现在是凌晨两点，你正在赶一份工作报告，你在<code>readme.txt</code>中添加了一行：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a mutable index called stage.</span><br><span class="line">Git tracks changes of files.</span><br><span class="line">My stupid boss still prefers SVN.</span><br></pre></td></tr></table></figure><p>在你准备提交前，一杯咖啡起了作用，你猛然发现了<code>stupid boss</code>可能会让你丢掉这个月的奖金！</p><p>既然错误发现得很及时，就可以很容易地纠正它。你可以删掉最后一行，手动把文件恢复到上一个版本的状态。如果用<code>git status</code>查看一下：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p>你可以发现，Git会告诉你，<code>git checkout -- file</code>可以丢弃工作区的修改：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- readme.txt</span><br></pre></td></tr></table></figure><p>命令<code>git checkout -- readme.txt</code>意思就是，把<code>readme.txt</code>文件在工作区的修改全部撤销，这里有两种情况：</p><p>一种是<code>readme.txt</code>自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</p><p>一种是<code>readme.txt</code>已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。</p><p>总之，就是让这个文件回到最近一次<code>git commit</code>或<code>git add</code>时的状态。</p><p>现在，看看<code>readme.txt</code>的文件内容：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a mutable index called stage.</span><br><span class="line">Git tracks changes of files.</span><br></pre></td></tr></table></figure><p>文件内容果然复原了。</p><p><code>git checkout -- file</code>命令中的<code>--</code>很重要，没有<code>--</code>，就变成了“切换到另一个分支”的命令，我们在后面的分支管理中会再次遇到<code>git checkout</code>命令。</p><p>现在假定是凌晨3点，你不但写了一些胡话，还<code>git add</code>到暂存区了：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a mutable index called stage.</span><br><span class="line">Git tracks changes of files.</span><br><span class="line">My stupid boss still prefers SVN.</span><br><span class="line"></span><br><span class="line">$ git add readme.txt</span><br></pre></td></tr></table></figure><p>庆幸的是，在<code>commit</code>之前，你发现了这个问题。用<code>git status</code>查看一下，修改只是添加到了暂存区，还没有提交：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br></pre></td></tr></table></figure><p>Git同样告诉我们，用命令<code>git reset HEAD &lt;file&gt;</code>可以把暂存区的修改撤销掉（unstage），重新放回工作区：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD readme.txt</span><br><span class="line">Unstaged changes after reset:</span><br><span class="line">Mreadme.txt</span><br></pre></td></tr></table></figure><p><code>git reset</code>命令既可以回退版本，也可以把暂存区的修改回退到工作区。当我们用<code>HEAD</code>时，表示最新的版本。</p><p>再用<code>git status</code>查看一下，现在暂存区是干净的，工作区有修改：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br></pre></td></tr></table></figure><p>还记得如何丢弃工作区的修改吗？</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- readme.txt</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure><p>整个世界终于清静了！</p><p>现在，假设你不但改错了东西，还从暂存区提交到了版本库，怎么办呢？还记得<a href="https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192">版本回退</a>一节吗？可以回退到上一个版本。不过，这是有条件的，就是你还没有把自己的本地版本库推送到远程。还记得Git是分布式版本控制系统吗？我们后面会讲到远程版本库，一旦你把<code>stupid boss</code>提交推送到远程版本库，你就真的惨了……</p><h3 id="小结-4"><a href="#小结-4" class="headerlink" title="小结"></a>小结</h3><p>又到了小结时间。</p><p>场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令<code>git checkout -- file</code>。</p><p>场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令<code>git reset HEAD &lt;file&gt;</code>，就回到了场景1，第二步按场景1操作。</p><p>场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考<a href="https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192">版本回退</a>一节，不过前提是没有推送到远程库。</p><h1 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h1><p>在Git中，删除也是一个修改操作，我们实战一下，先添加一个新文件<code>test.txt</code>到Git并且提交：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git add test.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m &quot;add test.txt&quot;</span><br><span class="line">[master b84166e] add test.txt</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 test.txt</span><br></pre></td></tr></table></figure><p>一般情况下，你通常直接在文件管理器中把没用的文件删了，或者用<code>rm</code>命令删了：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm test.txt</span><br></pre></td></tr></table></figure><p>这个时候，Git知道你删除了文件，因此，工作区和版本库就不一致了，<code>git status</code>命令会立刻告诉你哪些文件被删除了：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add/rm &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">deleted:    test.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p>现在你有两个选择，一是确实要从版本库中删除该文件，那就用命令<code>git rm</code>删掉，并且<code>git commit</code>：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git rm test.txt</span><br><span class="line">rm &#x27;test.txt&#x27;</span><br><span class="line"></span><br><span class="line">$ git commit -m &quot;remove test.txt&quot;</span><br><span class="line">[master d46f35e] remove test.txt</span><br><span class="line"> 1 file changed, 1 deletion(-)</span><br><span class="line"> delete mode 100644 test.txt</span><br></pre></td></tr></table></figure><p>现在，文件就从版本库中被删除了。</p><p>小提示：先手动删除文件，然后使用git rm <file>和git add<file>效果是一样的。</p><p>另一种情况是删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- test.txt</span><br></pre></td></tr></table></figure><p><code>git checkout</code>其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。</p><p>注意：从来没有被添加到版本库就被删除的文件，是无法恢复的！</p><h3 id="小结-5"><a href="#小结-5" class="headerlink" title="小结"></a>小结</h3><p>命令<code>git rm</code>用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失<strong>最近一次提交后你修改的内容</strong>。</p>]]></content>
      
      
      <categories>
          
          <category> 学习技能 </category>
          
          <category> git全面教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git全面教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ARM体系架构知识点总结</title>
      <link href="/2023/08/27/%E7%89%A9%E8%81%94%E7%BD%91-arm/"/>
      <url>/2023/08/27/%E7%89%A9%E8%81%94%E7%BD%91-arm/</url>
      
        <content type="html"><![CDATA[<h2 id="1-硬件基础"><a href="#1-硬件基础" class="headerlink" title="1.硬件基础"></a>1.硬件基础</h2><h3 id="1-1-CPU、MPU、MCU、SOC、SOPC联系与差别？"><a href="#1-1-CPU、MPU、MCU、SOC、SOPC联系与差别？" class="headerlink" title="1.1 CPU、MPU、MCU、SOC、SOPC联系与差别？"></a>1.1 CPU、MPU、MCU、SOC、SOPC联系与差别？</h3><ol><li><p><strong>CPU（Central Processing Unit）</strong></p><p> CPU是一台计算机的<strong>运算核心和控制核心</strong>。CPU由运算器、控制器和寄存器及实现它们之间联系的数据、控制及状态的总线构成。差不多所有的CPU的运作原理可分为四个阶段：提取（Fetch）、解码（Decode）、执行（Execute）和写回（Writeback）。CPU从存储器或高速缓冲存储器中取出指令，放入指令寄存器，并对指令译码，并执行指令。所谓的计算机的可编程性主要是指对CPU的编程。</p></li><li><p><strong>MPU(Micro Processor Unit)</strong></p><p> MPU叫<strong>微处理器</strong>（不是微控制器），通常代表一个<strong>功能强大的CPU</strong>（暂且理解为<strong>增强版的CPU</strong>吧）,但不是为任何已有的特定计算目的而设计的芯片。这种芯片往往是个人计算机和高端工作站的核心CPU。最常见的微处理器是Motorola的68K系列和Intel的X86系列。</p></li><li><p><strong>MCU(Micro Control Unit)</strong></p><p> MCU叫微控制器，是指随着大规模集成电路的出现及其发展，将<strong>计算机的CPU、RAM、ROM、定时计数器和多种I/O接口集成在一片芯片上</strong>，形成芯片级的芯片，比如51，avr这些芯片，内部<strong>除了CPU外还有RAM,ROM,可以直接加简单的外围器件</strong>（电阻，电容）就可以运行代码了，而MPU如x86，arm这些就不能直接放代码了，它只不过是增强版的CPU，所以得添加RAM,ROM。MCUMPU最主要的区别就睡能否直接运行代码。MCU有内部的RAMROM，而MPU是增强版的CPU，需要添加外部RAMROM才可以运行代码。</p></li><li><p><strong>SOC（Systemon Chip）</strong></p><p> SOC指的是片上系统，MCU只是<strong>芯片级</strong>的芯片，而<strong>SOC是系统级的芯片</strong>，它既MCU（51，avr）那样有内置RAM,ROM同时又像MPU（arm）那样强大的，不单单是放简单的代码，可以放系统级的代码，也就是说可以<strong>运行操作系统</strong>（将就认为是MCU集成化与MPU强处理力各优点二合一）。</p></li><li><p><strong>SOPC（System On a Programmable Chip）</strong></p><p> SOPC可编程片上系统（FPGA就是其中一种），上面4点的硬件配置是固化的，就是说51单片机就是51单片机，不能变为avr，而avr就是avr不是51单片机，他们的硬件是一次性掩膜成型的，能改的就是软件配置，说白点就是改代码，本来是跑流水灯的，改下代码，变成数码管，而SOPC则是<strong>硬件配置，软件配置都可以修改</strong>，软件配置跟上面一样，没什么好说的，至于硬件，是可以自己构建的也就是说这个芯片是自己构造出来的，<strong>这颗芯片我们叫“白片”</strong>，什么芯片都不是，把<strong>硬件配置信息下载进去了，他就是相应的芯片了</strong>，可以让他变成51，也可以是avr，甚至arm，同时SOPC是在SOC基础上来的，所以他也是系统级的芯片，所以记得当把他变成arm时还得加外围ROM，RAM之类的，不然就是MPU了。</p></li></ol><h3 id="1-2-交叉编译器是什么？为什么需要交叉编译器？"><a href="#1-2-交叉编译器是什么？为什么需要交叉编译器？" class="headerlink" title="1.2 交叉编译器是什么？为什么需要交叉编译器？"></a>1.2 交叉编译器是什么？为什么需要交叉编译器？</h3><ol><li><p><strong>在一种计算机环境中运行的编译程序，能编译出在另外一种环境下运行的代码</strong>，我们就称这种编译器支持交叉编译。这个编译过程就叫交叉编译。简单地说，就是在一个平台上生成另一个平台上的可执行代码。</p></li><li><p>这里需要注意的是所谓平台，实际上包含两个概念：<strong>体系结构（Architecture）、操作系统（Operating System）</strong>。同一个体系结构可以运行不同的操作系统；同样，同一个操作系统也可以在不同的体系结构上运行。举例来说，我们常说的x86 Linux平台实际上是Intel x86体系结构和Linux for x86操作系统的统称；而x86 WinNT平台实际上是Intel x86体系结构和WindowsNT for x86操作系统的简称。</p></li><li><p>有时是因为目的平台上不允许或不能够安装我们所需要的编译器，而我们又<strong>需要这个编译器的某些特征</strong>；有时是因为目的平台上的<strong>资源贫乏</strong>，无法运行我们所需要编译器；有时又是因为目的<strong>平台还没有建立</strong>，连操作系统都没有，根本谈不上运行什么编译器。</p></li></ol><h3 id="1-3-描述一下嵌入式基于ROM的运行方式和基于RAM的运行方式有什么区别？"><a href="#1-3-描述一下嵌入式基于ROM的运行方式和基于RAM的运行方式有什么区别？" class="headerlink" title="1.3 描述一下嵌入式基于ROM的运行方式和基于RAM的运行方式有什么区别？"></a>1.3 描述一下嵌入式基于ROM的运行方式和基于RAM的运行方式有什么区别？</h3><p>基于RAM</p><ol><li><p>需要把硬盘和其他介质的代码先加载到ram中，加载过程中一般有<strong>重定位</strong>的操作。</p></li><li><p><strong>速度比基于ROM的快，可用RAM比基于ROM的少</strong>，因为所有的代码，数据都必须存放在RAM中。</p></li></ol><p>基于ROM</p><ol><li><p><strong>速度较基于RAM的慢</strong>，因为会有一个把变量，部分代码等从存储器（硬盘，flash）搬移到RAM的过程。</p></li><li><p><strong>可用RAM资源比基于RAM的多</strong></p></li></ol><h2 id="2-ARM处理器"><a href="#2-ARM处理器" class="headerlink" title="2.ARM处理器"></a>2.ARM处理器</h2><h3 id="2-1-什么是哈佛结构和冯诺依曼结构？"><a href="#2-1-什么是哈佛结构和冯诺依曼结构？" class="headerlink" title="2.1 什么是哈佛结构和冯诺依曼结构？"></a>2.1 什么是哈佛结构和冯诺依曼结构？</h3><p>定义：冯诺依曼结构釆用指令和数据<strong>统一编址</strong>，使用<strong>同条总线</strong>传输，CPU读取指令和数据的操作<strong>无法重叠</strong>。哈佛结构釆用指令和数据<strong>独立编址</strong>，使用<strong>两条独立的总线传输</strong>，CPU读取指令和数据的操作<strong>可以重叠</strong>。</p><p>利弊：冯诺依曼结构主要用于<strong>通用计算机领域</strong>，需要对存储器中的代码和数据频繁的进行修改，统一编址有利于<strong>节约资源</strong>。哈佛结构主要用于<strong>嵌入式计算机</strong>，程序固化在硬件中，有较高的<strong>可靠性、运算速度和较大的吞吐量</strong>。</p><h3 id="2-2-什么是ARM流水线技术？"><a href="#2-2-什么是ARM流水线技术？" class="headerlink" title="2.2 什么是ARM流水线技术？"></a>2.2 什么是ARM流水线技术？</h3><ol><li><p>流水线技术通过<strong>多个功能部件并行</strong>工作来<strong>缩短程序执行时间</strong>，提高处理器核的<strong>效率和吞吐率</strong>，从而成为微处理器设计中最为重要的技术之一。ARM7处理器核使用了典型<strong>三级流水线的冯·诺伊曼结构</strong>，ARM9系列则采用了基于<strong>五级流水线的哈佛结构</strong>。通过增加流水线级数简化了流水线各级的逻辑，进一步提高了处理器的性能。</p></li><li><p>PC代表<strong>程序计数器</strong>，流水线使用三个阶段，因此指令分为三个阶段执行：1.<strong>取指</strong>（从存储器装载一条指令）；2.<strong>译码</strong>（识别将要被执行的指令）；3.<strong>执行</strong>（处理指令并将结果写回寄存器）。而<strong>R15（PC）总是指向“正在取指”的指令</strong>，而不是指向“正在执行”的指令或正在“译码”的指令。一般来说，人们习惯性约定将“正在执行的指令作为参考点”，称之为当前第一条指令，因此<strong>PC总是指向第三条指令</strong>。当ARM状态时，每条指令为4字节长，所以PC始终指向该指令地址加8字节的地址，即：<strong>PC值=当前程序执行位置+8</strong>；</p></li><li><p>ARM指令是三级流水线，取指，译指，执行，同时执行的，现在PC指向的是正在取指的地址（下一条指令），那么<strong>cpu正在译指的指令地址是PC-4</strong>（假设在ARM状态下，一个指令占4个字节），<strong>cpu正在执行的指令地址是PC-8</strong>，也就是说PC所指向的地址和现在所执行的指令地址相差8。当突然发生中断的时候，保存的是PC的地址（PC-8+4=<strong>PC-4</strong>下一条指令的地址）。这样你就知道了，<strong>如果返回的时候返回PC，那么中间就有一个指令没有执行</strong>，所以用<code>SUB pc lr-irq</code></p><p> <img src="https://tuchuang.voooe.cn/images/2023/03/05/ARM7025050fed1ab1a6.png" alt="https://tuchuang.voooe.cn/images/2023/03/05/ARM7025050fed1ab1a6.png"></p></li></ol><h3 id="2-3-ARM有几种工作模式？"><a href="#2-3-ARM有几种工作模式？" class="headerlink" title="2.3 ARM有几种工作模式？"></a>2.3 ARM有几种工作模式？</h3><ol><li><p><strong>用户模式(USR)</strong></p><p> 用户模式是用户程序的工作模式，它运行在操作系统的用户态，它<strong>没有权限去操作其它硬件资源</strong>，只能执行处理自己的数据，也<strong>不能切换到其它模式下</strong>，要想访问硬件资源或切换到其它模式只能通过<strong>软中断或产生异常</strong>。</p></li><li><p><strong>系统模式(SYS)</strong></p><p> 系统模式是<strong>特权模式</strong>，不受用户模式的限制。用户模式和系统模式共用一套寄存器，操作系统在该模式下可以方便的访问用户模式的寄存器，而且操作系统的一些特权任务可以使用这个模式<strong>访问一些受控的资源</strong>。</p><blockquote><p>说明：用户模式与系统模式两者<strong>使用相同的寄存器</strong>，都没有SPSR（Saved Program Statement Register，已保存程序状态寄存器），但系统模式比用户模式有更高的权限，可以访问所有系统资源。</p></blockquote></li><li><p><strong>一般中断模式(IRQ)</strong></p><p> 一般中断模式也叫普通中断模式，用于处理一般的中断请求，通常在硬件<strong>产生中断信号之后自动进入</strong>该模式，该模式为特权模式，可以<strong>自由访问系统硬件资源</strong>。</p></li><li><p><strong>快速中断模式(FIQ)</strong></p><p> 快速中断模式是相对一般中断模式而言的，它是用来处理<strong>对时间要求比较紧急的中断请求</strong>，主要用于高速数据传输及通道处理中。（快中断有许多（R8~R14）自己的专用寄存器，发生中断时，使用自己的寄存器就避免了保存和恢复某些寄存器。如果异常中断处理程序中使用它自己的物理寄存器之外的其他寄存器，异常中断处理程序必须保存和恢复这些寄存器）</p></li><li><p><strong>管理模式（SVC）</strong></p><p> 管理模式是<strong>CPU上电后默认模式</strong>，因此，在该模式下主要用来做<strong>系统的初始化</strong>，软中断处理也在该模式下。当用户模式下的用户程序请求使用硬件资源时，通过软件中断进入该模式。</p><blockquote><p>说明：系统复位或开机、软中断时进入到SVC模式下。</p></blockquote></li><li><p><strong>终止模式(ABT)</strong></p><p> 中止模式用于支持虚拟内存或存储器保护，当用户程序<strong>访问非法地址，没有权限读取的内存地址</strong>时，会进入该模式，linux下编程时经常出现的segment fault通常都是在该模式下抛出返回的。</p></li><li><p><strong>未定义模式(UND)</strong></p><p> 未定义模式用于支持硬件协处理器的软件仿真，CPU在指令的译码阶段不能识别该指令操作时，会进入未定义模式。</p></li></ol><p><strong>注意：</strong></p><ol><li><p><strong>除了用户模式外</strong>，其它6种模式称为特权模式。所谓特权模式，即具有如下权利：</p><p> a.MRS（把状态寄存器的内容放到通用寄存器）；</p><p> b.MSR（把通用寄存器的内容放到状态寄存器中）。</p><p> 由于状态寄存器中的内容不能够改变，因此，要先把内容复制到通用寄存器中，然后修改通用寄存器中的内容，再把通用寄存器中的内容复制给状态寄存器中，即可完成“修改状态寄存器”的任务。</p></li><li><p>剩下的六种模式中<strong>除去系统模式</strong>外，统称为异常模式。</p></li></ol><h3 id="2-4-Arm有多少32位寄存器？"><a href="#2-4-Arm有多少32位寄存器？" class="headerlink" title="2.4 Arm有多少32位寄存器？"></a>2.4 Arm有多少32位寄存器？</h3><p>ARM处理器共有37个寄存器。它包含<strong>31个通用寄存器和6个状态寄存器</strong>。</p><h3 id="2-5-ARM指令集分为几类？"><a href="#2-5-ARM指令集分为几类？" class="headerlink" title="2.5 ARM指令集分为几类？"></a>2.5 ARM指令集分为几类？</h3><p>2类，分别为Thumb指令集，ARM指令集。<strong>ARM指令长度为32位，Thumb指令长度为16位</strong>。这种特点<br>使得ARM既能执行16位指令，又能执行32位指令，从而增强了ARM内核的功能。</p><h3 id="2-6-通用寄存器包括R0～R15，可以分为具体哪三类？"><a href="#2-6-通用寄存器包括R0～R15，可以分为具体哪三类？" class="headerlink" title="2.6 通用寄存器包括R0～R15，可以分为具体哪三类？"></a>2.6 通用寄存器包括R0～R15，可以分为具体哪三类？</h3><p>通用寄存器包括R0-R15，可以分为3类：</p><ol><li><p><strong>未分组寄存器R0-R7</strong></p><p> 在所有运行模式下，未分组寄存器都指向<strong>同一个物理寄存器</strong>，他们未被系统用作特殊的用途。因此在中断或<strong>异常处理</strong>进行异常模式转换时，由于不同的处理器运行模式均使用相同的物理寄存器，所以<strong>可能造成寄存器中数据的破坏</strong>。</p></li><li><p><strong>分组寄存器R8-R14</strong></p><p> 对于分组寄存器，他们每次所访问的物理寄存器都<strong>与当前的处理器运行模式相关</strong>。R13常用作存放堆栈指针，用户也可以使用其他寄存器存放堆栈指针，但在Thumb指令集下，某些指令强制要求使用R13存放堆栈指针。R14称为链接寄存器（LR，Link Register），当执行子程序时，R14可得到R15（PC）的备份，执行完子程序后，又将R14的值复制回PC，即使用R14保存返回地址。</p></li><li><p><strong>程序计数器PC（R15）</strong></p><p> 寄存器R15用作程序计数器（PC），在ARM状态下，位[1:0]为0，位[31:2]用于保存PC；在Thumb状态下,位[0]为0，位[31:1]用于保存PC。</p></li></ol><p>ARM系统中，在函数调用的时候，参数是通过哪种方式传递的？</p><p>当参数小于等于4的时候是通过<strong>r0-r3</strong>寄存器来进行传递的，当参数大于4的时候是通过<strong>压栈</strong>的方式进行传递。</p><h3 id="2-7-ARM处理器有几种工作状态？"><a href="#2-7-ARM处理器有几种工作状态？" class="headerlink" title="2.7 ARM处理器有几种工作状态？"></a>2.7 ARM处理器有几种工作状态？</h3><p>从编程的角度来看，ARM微处理器的工作状态一般ARM和Thumb有两种，并可在两种状态之间切换。</p><ol><li><p>ARM状态：此时处理器执行32位的字对齐ARM指令，绝大部分工作在此状态。</p></li><li><p>Thumb状态：此时处理器执行16位的半字对齐的Thumb指令。</p></li></ol><h3 id="2-8-ARM协处理器指令包括哪3类，请描述它们的功能？"><a href="#2-8-ARM协处理器指令包括哪3类，请描述它们的功能？" class="headerlink" title="2.8 ARM协处理器指令包括哪3类，请描述它们的功能？"></a>2.8 ARM协处理器指令包括哪3类，请描述它们的功能？</h3><ol><li><p>用于ARM处理器<strong>初始化</strong>ARM协处理器的数据处理操作。</p></li><li><p>用于ARM处理器的<strong>寄存器和ARM协处理器</strong>的寄存器间的<strong>数据传送</strong>操作。</p></li><li><p>用于在ARM协处理器的<strong>寄存器和内存单元</strong>之间传送数据。</p></li></ol><h3 id="2-9-什么是PLL（锁相环）？"><a href="#2-9-什么是PLL（锁相环）？" class="headerlink" title="2.9 什么是PLL（锁相环）？"></a>2.9 什么是PLL（锁相环）？</h3><p>简单来说，输入时钟的存在是作为“参考源”。锁相环<strong>不是为了单纯产生同频同相信号，而是一般集成进某种“频率综合电路”，产生一个不同频，但锁相的信号</strong>。有点绕，打个比方：某参考晶振10Mhz，频率综合器A使用该参考源产生了900Mhz时钟，而频率综合器B产生了1Ghz时钟。虽然两路频率不同，但<strong>由于使用的通一个参考源，他们俩仍然是同源信号</strong>。相反，如果不同源，那么即便同频他们也不可能一致，因为世界上没有两个钟能做到完全一样，总有微弱的频差，导致相位飘移。在很多现实应用中有要求同源时钟的场合，所以，锁相环被广泛应用。锁相环的另外一项衍生应用是<strong>相干解调</strong>。</p><h2 id="3-中断与异常"><a href="#3-中断与异常" class="headerlink" title="3.中断与异常"></a>3.中断与异常</h2><h3 id="3-1-中断与异常有何区别？"><a href="#3-1-中断与异常有何区别？" class="headerlink" title="3.1 中断与异常有何区别？"></a>3.1 中断与异常有何区别？</h3><p><strong>中断</strong>是指<strong>外部硬件</strong>产生的一个电信号从CPU的中断引脚进入，打断CPU的运行。</p><p><strong>异常</strong>是指软件运行过程中发生了一些<strong>必须作出处理</strong>的事件，CPU自动产生一个陷入来打断CPU的运行。异常在处理的时候必须考虑与处理器的<strong>时钟同步</strong>，实际上异常也称为同步中断，在处理器执行到因编译错误而导致的错误指令时，或者在执行期间出现特殊错误，<strong>必须靠内核处理</strong>的时候，处理器就会产生一个异常。</p><h3 id="3-2-中断与DMA有何区别？"><a href="#3-2-中断与DMA有何区别？" class="headerlink" title="3.2 中断与DMA有何区别？"></a>3.2 中断与DMA有何区别？</h3><p><strong>DMA</strong></p><p>是一种<strong>无须CPU参与</strong>，就可以让<strong>外设与系统内存</strong>之间进行双向数据传输的硬件机制，使用DMA可以使系统CPU从实际的I/O数据传输过程中摆脱出来，从而<strong>大大提高系统的吞吐率</strong>。</p><p><strong>中断</strong></p><p>是指CPU在执行程序的过程中，出现了某些突发事件时，CPU<strong>必须暂停执行当前的程序</strong>，转去处理突发事件，处理完毕后CPU又返回源程序被中断的位置并继续执行。</p><p>区别：<strong>DMA不需CPU参与，而中断需要CPU参与</strong>。</p><h3 id="3-3-中断能不能睡眠，为什么？下半部能不能睡眠？"><a href="#3-3-中断能不能睡眠，为什么？下半部能不能睡眠？" class="headerlink" title="3.3 中断能不能睡眠，为什么？下半部能不能睡眠？"></a>3.3 中断能不能睡眠，为什么？下半部能不能睡眠？</h3><ol><li><p>中断处理的时候，不应该发生进程切换。因为在中断上下文中，唯一能打断当前中断handler的<strong>只有更高优先级的中断，它不会被进程打断</strong>。如果在中断上下文中休眠，则没有办法唤醒它，因为所有的wake_up_xxx都是针对某个进程而言的，而在中断上下文中，没有进程的概念，没有一个task_struct（这点对于softirq和tasklet一样）。因此真的休眠了，比如调用了会导致阻塞的例程，<strong>内核几乎肯定会死</strong>。</p></li><li><p>schedule()在切换进程时，保存当前的进程上下文（CPU寄存器的值、进程的状态以及堆栈中的内容），以便以后恢复此进程运行。中断发生后，内核会先保存当前被中断的进程上下文（在调用中断处理程序后恢复）。但<strong>在中断处理程序里，CPU寄存器的值肯定已经变化了</strong>（最重要的程序计数器PC、堆栈SP等）。如果此时因为睡眠或阻塞操作调用了schedule()，则保存的进程上下文就不是当前的进程上下文了。所以，<strong>不可以在中断处理程序中调用schedule()</strong>。</p></li><li><p>2.4内核中schedule()函数本身在<strong>进来的时候判断是否处于中断上下文</strong>。因此，强行调用schedule()的结果就是内核BUG，但看2.6.18的内核schedule()的实现却没有这句，改掉了。</p></li></ol><pre><code>C</code></pre><ol><li><p>中断handler会使用被中断的进程内核堆栈，但不会对它有任何影响，因为handler使用完后会<strong>完全清除它使用的那部分堆栈</strong>，恢复被中断前的原貌。</p></li><li><p>处于中断上下文时候，<strong>内核是不可抢占</strong>的。因此，如果休眠，则内核一定挂起。</p></li></ol><h3 id="3-4-中断的响应执行流程是什么？"><a href="#3-4-中断的响应执行流程是什么？" class="headerlink" title="3.4 中断的响应执行流程是什么？"></a>3.4 中断的响应执行流程是什么？</h3><p>中断的响应流程：<strong>cpu接受中断-&gt;保存中断上下文跳转到中断处理历程-&gt;执行中断上半部-&gt;执行中断下半部-&gt;恢复中断上下文</strong>。</p><h3 id="3-5-当一个异常出现以后，ARM微处理器会执行哪几步操作？"><a href="#3-5-当一个异常出现以后，ARM微处理器会执行哪几步操作？" class="headerlink" title="3.5 当一个异常出现以后，ARM微处理器会执行哪几步操作？"></a>3.5 当一个异常出现以后，ARM微处理器会执行哪几步操作？</h3><ol><li><p>将下一条指令的地址存入相应<strong>连接寄存器LR</strong>，以便程序在处理异常返回时能从正确的位置重新开始执行。若异常是从<strong>ARM状态</strong>进入，则LR寄存器中保存的是<strong>下一条指令的地址</strong>（当前PC＋4或PC＋8，与异常的类型有关）；若异常是从<strong>Thumb状态</strong>进入，则在LR寄存器中保存<strong>当前PC的偏移量</strong>，这样，异常处理程序就不需要确定异常是从何种状态进入的。例如：在软件中断异常SWI，指令MOVPC，R14_svc总是返回到下一条指令，不管SWI是在ARM状态执行，还是在Thumb状态执行。</p></li><li><p>将CPSR(程序状态寄存器 current program status register)<strong>复制</strong>到相应的SPSR中。</p></li><li><p>根据异常类型，强制<strong>设置CPSR的运行模式位</strong>。</p></li><li><p>强制PC从相关的异常向量地址取下一条指令执行，从而<strong>跳转到相应的异常处理程序</strong>处。</p></li></ol><h3 id="3-6-写一个中断服务需要注意哪些？如果中断产生之后要做比较多的事情你是怎么做的？"><a href="#3-6-写一个中断服务需要注意哪些？如果中断产生之后要做比较多的事情你是怎么做的？" class="headerlink" title="3.6 写一个中断服务需要注意哪些？如果中断产生之后要做比较多的事情你是怎么做的？"></a>3.6 写一个中断服务需要注意哪些？如果中断产生之后要做比较多的事情你是怎么做的？</h3><ol><li><p>写一个中断服务程序要注意<strong>快进快出</strong>，在中断服务程序里面尽量<strong>快速采集信息</strong>，包括硬件信息，然后退出中断，要做其它事情可以使用<strong>工作队列</strong>或者<strong>tasklet</strong>方式。也就是中断上半部和下半部。</p></li><li><p>中断服务程序中<strong>不能有阻塞操作</strong>。应为中断期间是完全占用CPU的（即不存在内核调度），中断被阻塞住，其他进程将无法操作。</p></li><li><p>中断服务程序<strong>注意返回值</strong>，要用操作系统定义的宏做为返回值，而不是自己定义的。</p></li><li><p>如果要做的事情较多，应将这些任务放在<strong>后半段</strong>(tasklet，等待队列等)处理。</p></li></ol><h3 id="3-7-为什么FIQ比IRQ要快？"><a href="#3-7-为什么FIQ比IRQ要快？" class="headerlink" title="3.7 为什么FIQ比IRQ要快？"></a>3.7 为什么FIQ比IRQ要快？</h3><ol><li><p>ARM的FIQ模式提供了<strong>更多的banked寄存器</strong>，r8到r14还有SPSR，而IRQ模式就没有那么多，R8,R9,R10,R11,R12对应的banked的寄存器就没有，这就意味着在ARM的IRQ模式下，中断处理程序<strong>自己要保存R8到R12这几个寄存器</strong>，然后退出中断处理时程序要<strong>恢复这几个寄存器</strong>，而FIQ模式由于这几个寄存器都有banked寄存器，模式切换时CPU<strong>自动保存</strong>这些值到banked寄存器，退出FIQ模式时<strong>自动恢复</strong>，所以这个过程FIQ比IRQ快.不要小看这几个寄存器，ARM在编译的时候，如果你FIQ中断处理程序足够用这几个独立的寄存器来运作，它就不<strong>会进行通用寄存器的压栈</strong>，这样也省了一些时间。</p></li><li><p>FIQ比IRQ有<strong>更高优先级</strong>，如果FIQ和IRQ同时产生，那么FIQ先处理。</p></li><li><p>在symbian系统里，当CPU处于FIQ模式处理FIQ中断的过程中，预取指令异常，未定义指令异常，软件中断全被禁止，所有的中断被屏蔽。所以FIQ就会很快执行，<strong>不会被其他异常或者中断打断</strong>，所以它又比IRQ快了。而IRQ不一样，当ARM处理IRQ模式处理IRQ中断时，如果来了一个FIQ中断请求，那正在执行的IRQ中断处理程序会被抢断，ARM切换到FIQ模式去执行这个FIQ，所以FIQ比IRQ快多了。</p></li><li><p>另外FIQ的入口地址是0x1c,IRQ的入口地址是0x18。写过完整汇编系统的都比较明白这点的差别，18只能放一条指令，为了不与1C处的FIQ冲突，这个地方只能跳转，而FIQ不一样，1C以后<strong>没有任何中断向量表</strong>了，这样可以直接在1C处放FIQ的中断处理程序，由于跳转的范围限制，至少<strong>少了一条跳转指令</strong>。</p></li></ol><h3 id="3-8-中断和轮询哪个效率高？怎样决定是采用中断方式还是采用轮询方式去实现驱动？"><a href="#3-8-中断和轮询哪个效率高？怎样决定是采用中断方式还是采用轮询方式去实现驱动？" class="headerlink" title="3.8 中断和轮询哪个效率高？怎样决定是采用中断方式还是采用轮询方式去实现驱动？"></a>3.8 中断和轮询哪个效率高？怎样决定是采用中断方式还是采用轮询方式去实现驱动？</h3><ol><li><p>中断是CPU处于<strong>被动</strong>状态下来接受设备的信号，而轮询是CPU<strong>主动</strong>去查询该设备是否有请求。</p></li><li><p>凡事都是两面性，所以，看效率不能简单的说那个效率高。如果是请求设备是一个<strong>频繁请求cpu</strong>的设备，或者有<strong>大量数据</strong>请求的网络设备，那么<strong>轮询的效率是比中断高</strong>。如果是一般设备，并且该设备请求cpu的频率比较低，则用<strong>中断效率要高一些</strong>。主要是看<strong>请求频率</strong>。</p></li></ol><h2 id="4-通信协议"><a href="#4-通信协议" class="headerlink" title="4.通信协议"></a>4.通信协议</h2><h3 id="4-1-什么是异步传输和同步传输？"><a href="#4-1-什么是异步传输和同步传输？" class="headerlink" title="4.1 什么是异步传输和同步传输？"></a>4.1 什么是异步传输和同步传输？</h3><p><strong>异步传输</strong>：是一种典型的基于字节的输入输出，数据按每次<strong>一个字节</strong>进行传输，其传输<strong>速度低</strong>。</p><p><strong>同步传输</strong>：需要外界的<strong>时钟信号</strong>进行通信，是把数据字节组合起来一起发送，这种组合称之为帧，其传输速度比异步传输<strong>快</strong>。</p><h3 id="4-2-RS232和RS485通讯接口有什么区别？"><a href="#4-2-RS232和RS485通讯接口有什么区别？" class="headerlink" title="4.2 RS232和RS485通讯接口有什么区别？"></a>4.2 RS232和RS485通讯接口有什么区别？</h3><ol><li><p><strong>传输方式不同</strong>。RS232采取不平衡传输方式，即所谓<strong>单端通讯</strong>。而RS485则采用平衡传输，即<strong>差分传输</strong>方式。</p></li><li><p><strong>传输距离不同</strong>。RS232适合本地设备之间的通信，传输距离一般<strong>不超过20m</strong>。而RS485的传输距离为<strong>几十米到上千米</strong>。</p></li><li><p><strong>设备数量</strong>。RS232只允许<strong>一对一</strong>通信，而RS485接口在总线上是允许连接<strong>多达128个收发器</strong>。</p></li><li><p><strong>连接方式</strong>。RS232，规定用<strong>电平</strong>表示数据，因此线路就是单线路的，用<strong>两根线才能达到全双工</strong>的目的；而RS485，使用<strong>差分电平</strong>表示数据，因此，必须用<strong>两根线</strong>才能达到传输数据的基本要求，要实现<strong>全双工</strong>，必需用<strong>4根线</strong>。</p></li></ol><p><strong>总结</strong>：从某种意义上，可以说，线路上存在的仅仅是电流，<strong>RS232/RS485规定了这些电流在什么样的线路上流动和流动的样式</strong>。</p><h3 id="4-3-SPI协议"><a href="#4-3-SPI协议" class="headerlink" title="4.3 SPI协议"></a>4.3 SPI协议</h3><p>SPI的应用</p><p>SPI(Serial Peripheral Interface)协议是由摩托罗拉公司提出的通讯协议，即<strong>串行外围设备接口</strong>，是一种<strong>高速全双工</strong>的通信总线。SPI总线系统是一种同步串行外设接口，它可以使MCU与各种外围设备以串行方式进行通信以交换信息。SPI总线可直接与各个厂家生产的多种标准外围器件相连，包括FLASH、RAM、网络控制器、LCD显示驱动器、A/D转换器和MCU等。</p><h3 id="4-4-接口"><a href="#4-4-接口" class="headerlink" title="4.4 接口"></a>4.4 接口</h3><ol><li><p><strong>MOSI(MasterOutput，SlaveInput)</strong></p><p> 主设备输出/从设备输入引脚。主机的数据从这条信号线输出，从机由这条信号线读入主机发送的数据，即这条线上数据的方向为主机到从机。</p></li><li><p><strong>MISO(MasterInput,，SlaveOutput)</strong></p><p> 主设备输入/从设备输出引脚。主机从这条信号线读入数据，从机的数据由这条信号线输出到主机，即在这条线上数据的方向为从机到主机。</p></li><li><p><strong>SCLK(SerialClock)</strong></p><p> 时钟信号线，用于通讯数据同步。它由通讯主机产生，决定了通讯的速率，不同的设备支持的最高时钟频率不一样，如STM32的SPI时钟频率最大为fpclk/2，两个设备之间通讯时，通讯速率受限于低速设备。</p></li><li><p><strong>SS(SlaveSelect)</strong></p><p> 从设备选择信号线，常称为片选信号线，也称为NSS、CS，以下用NSS表示。当有多个SPI从设备与SPI主机相连时，设备的其它信号线SCK、MOSI及MISO同时并联到相同的SPI总线上，即无论有多少个从设备，都共同只使用这3条总线；而每个从设备都有独立的这一条NSS信号线，本信号线独占主机的一个引脚，即有多少个从设备，就有多少条片选信号线。I2C协议中通过设备地址来寻址、选中总线上的某个设备并与其进行通讯；而SPI协议中没有设备地址，它使用NSS信号线来寻址，当主机要选择从设备时，把该从设备的NSS信号线设置为低电平，该从设备即被选中，即片选有效，接着主机开始与被选中的从设备进行SPI通讯。所以SPI通讯以NSS线置低电平为开始信号，以NSS线被拉高作为结束信号。</p></li></ol><p><img src="https://tuchuang.voooe.cn/images/2023/03/18/_.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_.png"></p><p><img src="https://tuchuang.voooe.cn/images/2023/03/18/_21f31a802aea8fa8.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_21f31a802aea8fa8.png"></p><ol><li><p><strong>通讯的起始和停止信号</strong></p><p> 在图中的标号1处，NSS信号线<strong>由高变低，是SPI通讯的起始信号</strong>。NSS是每个从机各自独占的信号线，当从机检在自己的NSS线检测到起始信号后，就知道自己被主机选中了，开始准备与主机通讯。在图中的标号处，<strong>NSS信号由低变高，是SPI通讯的停止信号</strong>，表示本次通讯结束，从机的选中状态被取消。</p></li><li><p><strong>数据有效性</strong></p><p> SPI使用MOSI及MISO信号线来传输数据，使用SCK信号线进行数据同步。MOSI及MISO数据线在SCK的每个时钟周期传输一位数据，且数据输入输出是同时进行的。数据传输时，MSB先行（高位先行）或LSB（低位先行）先行并没有作硬性规定，但要保证两个SPI通讯设备之间使用同样的协定，一般都会采用上图中的MSB先行（高位先行）模式。观察图中的2345标号处，<strong>MOSI及MISO的数据在SCK的上升沿期间变化输出，在SCK的下降沿时被采样</strong>。即在<strong>SCK的下降沿时刻，MOSI及MISO的数据有效</strong>，高电平时表示数据“1”，为低电平时表示数据“0”。在其它时刻，数据无效，MOSI及MISO为下一次表示数据做准备。SPI每次数据传输可以8位或16位为单位，每次传输的单位数不受限制。</p></li><li><p><strong>CPOL（时钟极性）/CPHA（时钟相位）及通讯模式</strong></p><p> 上面讲述的图中的时序只是SPI中的其中一种通讯模式，SPI一共有四种通讯模式，它们的主要区别是：总线空闲时SCK的时钟状态以及数据采样时刻。为方便说明，在此引入“时钟极性CPOL”和“时钟相位CPHA”的概念。</p><blockquote><p>时钟极性CPOL是指SPI通讯设备处于空闲状态时，SCK信号线的电平信号(即SPI通讯开始前、NSS线为高电平时SCK的状态)。CPOL=0时，SCK在空闲状态时为低电平，CPOL=1时，则相反。</p></blockquote></li></ol><p>时钟相位CPHA是指数据的采样的时刻，当CPHA=0时，MOSI或MISO数据线上的信号将会在SCK时钟线的“奇数边沿”被采样。当CPHA=1时，数据线在SCK的“偶数边沿”采样。</p><h3 id="4-4-IIC协议"><a href="#4-4-IIC协议" class="headerlink" title="4.4 IIC协议"></a>4.4 IIC协议</h3><p><strong>简介</strong></p><ol><li><p>IIC协议是由<strong>数据线SDA和时钟SCL</strong>构成的串行总线，可发送和接收数据,是一个多主机的<strong>半双工</strong>通信方式</p></li><li><p>每个挂接在总线上的器件都有个<strong>唯一的地址</strong>。位速在标准模式下可达 100kbit/s，在快速模式下可达400kbit/s，在高速模式下可待3.4Mbit/s。</p></li><li><p>I2C总线系统结构,如下所示:</p><p> <img src="https://tuchuang.voooe.cn/images/2023/03/18/_0e8765696e41629a.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_0e8765696e41629a.png"></p></li></ol><p><strong>时序介绍</strong></p><ol><li><p>空闲状态<br>当总线上的SDA和SCL<strong>两条信号线同时处于高电平，便是空闲状态</strong>，如上面的硬件图所示，当我们不传输数据时，SDA和SCL被上拉电阻拉高，即进入空闲状态</p></li><li><p>起始信号<br>当<strong>时钟线SCL为高期间，数据线SDA由高到低(下降沿)的跳变；便是总线的启动</strong>信号，只能由<strong>主机</strong>发起，且在空闲状态下才能启动该信号，如下图所示：</p></li></ol><p><img src="https://tuchuang.voooe.cn/images/2023/03/18/_02de16c30bdfa26e.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_02de16c30bdfa26e.png"></p><p><strong>停止信号</strong></p><ul><li>当<strong>SCL为高期间，SDA由低到高(上升沿)的跳变；便是总线的停止</strong>信号,表示数据已传输完成，如下图所示：</li></ul><blockquote><p>总结：时钟线SCL与数据线SDA、半双工、空闲时两线高电平、起始与停止SCL均为高电平(SDa下降沿开始、上升沿结束)</p></blockquote><p><strong>传输数据格式</strong><br>当发了起始信号后,就开始传输数据,传输的数据格式如下图所示：</p><p><img src="https://tuchuang.voooe.cn/images/2023/03/18/_d78c7db3a8a0f5d7.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_d78c7db3a8a0f5d7.png"></p><ol><li><p>当<strong>SCL为高电平时，便会获取SDA数据</strong>，其中SDA数据必须是<strong>稳定</strong>的(若SDA不稳定就会变成起始/停止信<br>号)。</p></li><li><p>当SCL为<strong>低电平</strong>时，便是SDA的电平<strong>变化</strong>状态。</p></li><li><p>若主从机在传输数据期间，需要完成其它功能(例如一个<strong>中断</strong>)，可以<strong>主动拉低SCL</strong>，使I2C进入<strong>等待</strong>(不读取)状态，直到处理结束再释放SCL，数据传输会继续。</p></li></ol><p><strong>应答信号ACK</strong></p><ul><li><p>I2C总线上的数据都是以<strong>8位数据(一个字节</strong>)进行的，当发送了8个数据后，发送方会在<strong>第9个时钟脉冲期间</strong>释放SDA数据，当接收方接收该字节成功，便会输出一个ACK应答信号，当SDA为高电平，表示为非应答信号NACK，当<strong>SDA为低电平，表示为有效应答信号ACK</strong>(记住是接收方发送ACK信号)</p></li><li><p>PS:当主机为接收方时，收到<strong>最后</strong>一个字节后，主机可以不发送ACK，直接发送<strong>停止信号</strong>来结束传输。</p></li><li><p>当从机为接收方时，没有发送ACK，则表示从机可能在忙其它事、或者不匹配地址信号和不支持多主机发送，主机可以发送停止信号，再次发送起始信号<strong>启动新的传输</strong>。</p></li></ul><p><img src="https://tuchuang.voooe.cn/images/2023/03/18/_632beb8c0c138d38.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_632beb8c0c138d38.png"></p><p><strong>完整的数据传输</strong></p><ul><li><p>如下图所示，发送起始信号后，便发送一个<strong>8位的设备地址</strong>，其中<strong>第8位是对设备的读写标志</strong>，后面紧跟着的就是数据了，直到发送停止信号终止。</p></li><li><p>PS:当我们第一次是读操作，然后想换成写操作时，可以<strong>再次发送一个起始信号</strong>，然后发送读的设备地址，不需要停止信号便能实现<strong>不同的地址转换</strong>。</p></li></ul><p><img src="https://tuchuang.voooe.cn/images/2023/03/18/_0c443cec30276300.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_0c443cec30276300.png"></p><p><strong>IIC传输数据的格式</strong></p><ul><li><p><strong>写操作</strong></p><p>  刚开始主芯片要发出一个<strong>start信号</strong>，然后发出一个(用来确定是往哪一个芯片写数据，即器件地址)，<strong>方向</strong>(读/写，0表示写，1表示读)。回应(用来确定这个设备是否存在)，然后就可以传输数据，传输数据之后，要有一个<strong>回应</strong>信号（确定数据是否接受完成)，然后再传输下一个数据。<strong>每传输一个数据，接受方都会有一个回应信号</strong>，数据发送完之后，主芯片就会发送一个停止信号。<br>白色：主→从 | 灰色：从→主。</p></li></ul><p><img src="https://tuchuang.voooe.cn/images/2023/03/18/_7b444066e8987422.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_7b444066e8987422.png"></p><ul><li><strong>读操作</strong><br>刚开始主芯片要发出一个<strong>start信号</strong>，然后发出一个<strong>设备地址</strong>(用来确定是从哪一个芯片读取数据)，方向(读/写，0表示写，1表示读)。回应(用来确定这个设备是否存在)，然后就可以传输数据，传输数据之后，要有一个回应信号（确定数据是否接受完成)，然后在传输下一个数据。<strong>每传输一个数据，接受方都会有一个回应信号</strong>，数据发送完之后，主芯片就会发送一个停止信号。<br>白色：主→从 | 灰色：从→主</li></ul><p><img src="https://tuchuang.voooe.cn/images/2023/03/18/_fad840b315ab024c.png" alt="https://tuchuang.voooe.cn/images/2023/03/18/_fad840b315ab024c.png"></p><blockquote><p>注意灰色与白色的不同，其实搞清楚读那个就是只要发送开始信号和回应即可</p></blockquote><h2 id="5-编程"><a href="#5-编程" class="headerlink" title="5.编程"></a>5.编程</h2><p><strong>嵌人式编程中，什么是大端？什么是小端？</strong><br>大端模式：低位字节存在高地址上，高位字节存在低地址上。<br>小端模式：高位字节存在高地址上，低位字节存在低地址上。</p><p><img src="https://tuchuang.voooe.cn/images/2023/03/19/_.png" alt="https://tuchuang.voooe.cn/images/2023/03/19/_.png"></p><p>STM32属于小端模式，简单的说，比如<code>u32 temp=0X12345678</code>；假设temp地址在0X2000 0010。那么内存里面,存放就变成了：</p><p>PLAINTEXT</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>因为是16进制的，一个数为0.5字节，所以 12 代表一个字节 34 代表一个字节。<br>釆用小端模式的CPU对操作数的存放方式是从低字节到高字节，而大端模式对操作数的存放方式是从高字节到低字节。例如，16位宽的数<code>0x1234</code>在小端模式CPU内存中的存放方式（假设从地址<code>0x4000</code>开始存放）见表1，而在大端模式CPU内存中的存放方式见表2。</p><p>表1：0x1234在小端CPU内存中的存放方式</p><div class="table-container"><table><thead><tr><th>内存地址</th><th>存放内容</th></tr></thead><tbody><tr><td>0x4000</td><td>0x34</td></tr><tr><td>0x4001</td><td>0x12</td></tr></tbody></table></div><p>表2：0x1234在大端CPU内存中的存放方式</p><div class="table-container"><table><thead><tr><th>内存地址</th><th>存放内容</th></tr></thead><tbody><tr><td>0x4000</td><td>0x12</td></tr><tr><td>0x4001</td><td>0x34</td></tr></tbody></table></div><p>32位宽的数<code>0x12345678</code>在小端模式CPU内存中的存放方式（假设从地址0x4000开始存放）见表3，而在大端模式CPU内存中的存放方式见表4。</p><p>表3：0x12345678在小端CPU内存中的存放方式</p><div class="table-container"><table><thead><tr><th>内存地址</th><th>存放内容</th></tr></thead><tbody><tr><td>0x4000</td><td>0x78</td></tr><tr><td>0x4001</td><td>0x56</td></tr><tr><td>0x4002</td><td>0x34</td></tr><tr><td>0x4003</td><td>0x12</td></tr></tbody></table></div><p>表4：0x12345678在大端CPU内存中的存放方式</p><div class="table-container"><table><thead><tr><th>内存地址</th><th>存放内容</th></tr></thead><tbody><tr><td>0x4000</td><td>0x12</td></tr><tr><td>0x4001</td><td>0x34</td></tr><tr><td>0x4002</td><td>0x56</td></tr><tr><td>0x4003</td><td>0x78</td></tr></tbody></table></div><p>以下程序为例：</p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>程序的输出结果为 50。<br>上例中，<code>sizeof(test)=2</code>，上例的声明方式是把一个 short（也就是一块16位内存）分成3部分，各部分的大小分别是4位、5位、7位，赋值语句<code>i*(short*)&amp;test）</code>就是把上面的16位内存转换成 short类型进行解释。<br>变量a的二进制表示为0000000000000010，取其低四位是<code>0010</code>.变量b的二进制表示为0000000000000011，取其低五位是<code>00011</code>。变量c的二进制表示为0000000000000000，取其低七位是<code>0000000</code>。<br><strong>80x86机是小端（修改分区表时要注意）模式，单片机一般为大端模式</strong>。小端一般是低位字节在高位字节的前面，也就是低位在内存地址低的一端，可以这样记（小端→低位→在前→与正常逻辑顺序相反），所以合成后得到<code>0000000000110010</code>，即十进制的50。<br>下面给出另外一个例子</p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>小端模式是低地址存放低字节，高地址存放高字节，结构如下所示：</p><p>78 //低地址<br>56<br>34<br>12 //高地址</p><p>在内存里面测试机是小端，地址由小到大。</p><p>val1:78563412<br>val2:12345678</p><p>结果如下：</p><p>7856<br>3412</p><p><strong>如何判断计算机处理器是大端，还是小端？</strong></p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>编者的处理器为Intel处理器，因为Intel处理器一般都是小端模式，所以此时程序的输出结果为：小端<br>上述代码中，如果处理器是大端，则返回0；如果处理器是小端，则返回1。联合体 union的存放顺序是所有成员都从低地址开始存放，如果能够通过改代码知道CPU对内存是采用小端模式读写，还是采用大端模式读写，一定会令面试官刮目相看。<br>还可以通过指针地址来判断，由于在32位计算机系统中， short占两个字节，char占1个字节，所以可以采用如下做法实现该判断。</p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>char类型转换会截取低位地址的值，因此如果低位存放的是22，那么说明低位地址存放低位数据，因此说明就是小端存储，即程序输出的结果为：小端</p><p><strong>如何进行大小端的转换？</strong></p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>如何对绝对地址0x100000赋值？</p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>那么要是想让程序跳转到绝对地址是0x100000去执行，应该怎么做？</p><p>首先要将0x100000强制转换成函数指针,即：</p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>然后再调用它：</p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><p>用typedef可以看得更直观些：</p><p>C</p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
          <category> 嵌入式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 嵌入式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git全面教程——简介！！！</title>
      <link href="/2023/08/27/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-git%E6%95%99%E7%A8%8B-git%E7%AE%80%E4%BB%8B/"/>
      <url>/2023/08/27/%E5%AD%A6%E4%B9%A0%E6%8A%80%E8%83%BD-git%E6%95%99%E7%A8%8B-git%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h1><p>Git是什么？</p><p>Git是目前世界上最先进的分布式版本控制系统（没有之一）。</p><p>Git有什么特点？简单来说就是：高端大气上档次！</p><p>那什么是版本控制系统？</p><p>如果你用Microsoft Word写过长篇大论，那你一定有这样的经历：</p><p>想删除一个段落，又怕将来想恢复找不回来怎么办？有办法，先把当前文件“另存为……”一个新的Word文件，再接着改，改到一定程度，再“另存为……”一个新文件，这样一直改下去，最后你的Word文档变成了这样：</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitjianjie1.jpg" alt="1"></p><p>过了一周，你想找回被删除的文字，但是已经记不清删除前保存在哪个文件里了，只好一个一个文件去找，真麻烦。</p><p>看着一堆乱七八糟的文件，想保留最新的一个，然后把其他的删掉，又怕哪天会用上，还不敢删，真郁闷。</p><p>更要命的是，有些部分需要你的财务同事帮助填写，于是你把文件Copy到U盘里给她（也可能通过Email发送一份给她），然后，你继续修改Word文件。一天后，同事再把Word文件传给你，此时，你必须想想，发给她之后到你收到她的文件期间，你作了哪些改动，得把你的改动和她的部分合并，真困难。</p><p>于是你想，如果有一个软件，不但能自动帮我记录每次文件的改动，还可以让同事协作编辑，这样就不用自己管理一堆类似的文件了，也不需要把文件传来传去。如果想查看某次改动，只需要在软件里瞄一眼就可以，岂不是很方便？</p><p>这个软件用起来就应该像这个样子，能记录每次文件的改动：</p><div class="table-container"><table><thead><tr><th>版本</th><th>文件名</th><th>用户</th><th>说明</th><th>日期</th></tr></thead><tbody><tr><td>1</td><td>service.doc</td><td>张三</td><td>删除了软件服务条款5</td><td>7/12 10:38</td></tr><tr><td>2</td><td>service.doc</td><td>张三</td><td>增加了License人数限制</td><td>7/12 18:09</td></tr><tr><td>3</td><td>service.doc</td><td>李四</td><td>财务部门调整了合同金额</td><td>7/13 9:51</td></tr><tr><td>4</td><td>service.doc</td><td>张三</td><td>延长了免费升级周期</td><td>7/14 15:17</td></tr></tbody></table></div><p>这样，你就结束了手动管理多个“版本”的史前时代，进入到版本控制的20世纪。</p><h1 id="git的诞生"><a href="#git的诞生" class="headerlink" title="git的诞生"></a>git的诞生</h1><p>  很多人都知道，Linus在1991年创建了开源的Linux，从此，Linux系统不断发展，已经成为最大的服务器系统软件了。</p><p>Linus虽然创建了Linux，但Linux的壮大是靠全世界热心的志愿者参与的，这么多人在世界各地为Linux编写代码，那Linux的代码是如何管理的呢？</p><p>事实是，在2002年以前，世界各地的志愿者把源代码文件通过diff的方式发给Linus，然后由Linus本人通过手工方式合并代码！</p><p>你也许会想，为什么Linus不把Linux代码放到版本控制系统里呢？不是有CVS、SVN这些免费的版本控制系统吗？因为Linus坚定地反对CVS和SVN，这些集中式的版本控制系统不但速度慢，而且必须联网才能使用。有一些商用的版本控制系统，虽然比CVS、SVN好用，但那是付费的，和Linux的开源精神不符。</p><p>不过，到了2002年，Linux系统已经发展了十年了，代码库之大让Linus很难继续通过手工方式管理了，社区的弟兄们也对这种方式表达了强烈不满，于是Linus选择了一个商业的版本控制系统BitKeeper，BitKeeper的东家BitMover公司出于人道主义精神，授权Linux社区免费使用这个版本控制系统。</p><p>安定团结的大好局面在2005年就被打破了，原因是Linux社区牛人聚集，不免沾染了一些梁山好汉的江湖习气。开发Samba的Andrew试图破解BitKeeper的协议（这么干的其实也不只他一个），被BitMover公司发现了（监控工作做得不错！），于是BitMover公司怒了，要收回Linux社区的免费使用权。</p><p>Linus可以向BitMover公司道个歉，保证以后严格管教弟兄们，嗯，这是不可能的。实际情况是这样的：</p><p>Linus花了两周时间自己用C写了一个分布式版本控制系统，这就是Git！一个月之内，Linux系统的源码已经由Git管理了！牛是怎么定义的呢？大家可以体会一下。</p><p>Git迅速成为最流行的分布式版本控制系统，尤其是2008年，GitHub网站上线了，它为开源项目免费提供Git存储，无数开源项目开始迁移至GitHub，包括jQuery，PHP，Ruby等等。</p><p>历史就是这么偶然，如果不是当年BitMover公司威胁Linux社区，可能现在我们就没有免费而超级好用的Git了。</p><h1 id="集中式vs分布式"><a href="#集中式vs分布式" class="headerlink" title="集中式vs分布式"></a>集中式vs分布式</h1><p>Linus一直痛恨的CVS及SVN都是集中式的版本控制系统，而Git是分布式版本控制系统，集中式和分布式版本控制系统有什么区别呢？</p><p>先说集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitjianjie2.jpg" alt="2"></p><p>集中式版本控制系统最大的毛病就是必须联网才能工作，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要5分钟，这还不得把人给憋死啊。</p><p>那分布式版本控制系统与集中式版本控制系统有何不同呢？首先，分布式版本控制系统根本没有“中央服务器”，每个人的电脑上都是一个完整的版本库，这样，你工作的时候，就不需要联网了，因为版本库就在你自己的电脑上。既然每个人电脑上都有一个完整的版本库，那多个人如何协作呢？比方说你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。</p><p>和集中式版本控制系统相比，分布式版本控制系统的安全性要高很多，因为每个人电脑里都有完整的版本库，某一个人的电脑坏掉了不要紧，随便从其他人那里复制一个就可以了。而集中式版本控制系统的中央服务器要是出了问题，所有人都没法干活了。</p><p>在实际使用分布式版本控制系统的时候，其实很少在两人之间的电脑上推送版本库的修改，因为可能你们俩不在一个局域网内，两台电脑互相访问不了，也可能今天你的同事病了，他的电脑压根没有开机。因此，分布式版本控制系统通常也有一台充当“中央服务器”的电脑，但这个服务器的作用仅仅是用来方便“交换”大家的修改，没有它大家也一样干活，只是交换修改不方便而已。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitjianjie3.jpg" alt="3"></p><p>当然，Git的优势不单是不必联网这么简单，后面我们还会看到Git极其强大的分支管理，把SVN等远远抛在了后面。</p><p>CVS作为最早的开源而且免费的集中式版本控制系统，直到现在还有不少人在用。由于CVS自身设计的问题，会造成提交文件不完整，版本库莫名其妙损坏的情况。同样是开源而且免费的SVN修正了CVS的一些稳定性问题，是目前用得最多的集中式版本库控制系统。</p><p>除了免费的外，还有收费的集中式版本控制系统，比如IBM的ClearCase（以前是Rational公司的，被IBM收购了），特点是安装比Windows还大，运行比蜗牛还慢，能用ClearCase的一般是世界500强，他们有个共同的特点是财大气粗，或者人傻钱多。</p><p>微软自己也有一个集中式版本控制系统叫VSS，集成在Visual Studio中。由于其反人类的设计，连微软自己都不好意思用了。</p><p>分布式版本控制系统除了Git以及促使Git诞生的BitKeeper外，还有类似Git的Mercurial和Bazaar等。这些分布式版本控制系统各有特点，但最快、最简单也最流行的依然是Git！</p><h1 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h1><p>最早Git是在Linux上开发的，很长一段时间内，Git也只能在Linux和Unix系统上跑。不过，慢慢地有人把它移植到了Windows上。现在，Git可以在Linux、Unix、Mac和Windows这几大平台上正常运行了。</p><p>要使用Git，第一步当然是安装Git了。根据你当前使用的平台来阅读下面的文字：</p><h2 id="在Linux上安装Git"><a href="#在Linux上安装Git" class="headerlink" title="在Linux上安装Git"></a>在Linux上安装Git</h2><p>首先，你可以试着输入<code>git</code>，看看系统有没有安装Git：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git</span><br><span class="line">The program &#x27;git&#x27; is currently not installed. You can install it by typing:</span><br><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><p>像上面的命令，有很多Linux会友好地告诉你Git没有安装，还会告诉你如何安装Git。</p><p>如果你碰巧用Debian或Ubuntu Linux，通过一条<code>sudo apt-get install git</code>就可以直接完成Git的安装，非常简单。</p><p>老一点的Debian或Ubuntu Linux，要把命令改为<code>sudo apt-get install git-core</code>，因为以前有个软件也叫GIT（GNU Interactive Tools），结果Git就只能叫<code>git-core</code>了。由于Git名气实在太大，后来就把GNU Interactive Tools改成<code>gnuit</code>，<code>git-core</code>正式改为<code>git</code>。</p><p>如果是其他Linux版本，可以直接通过源码安装。先从Git官网下载源码，然后解压，依次输入：<code>./config</code>，<code>make</code>，<code>sudo make install</code>这几个命令安装就好了。</p><h2 id="在Mac-OS-X上安装Git"><a href="#在Mac-OS-X上安装Git" class="headerlink" title="在Mac OS X上安装Git"></a>在Mac OS X上安装Git</h2><p>如果你正在使用Mac做开发，有两种安装Git的方法。</p><p>一是安装homebrew，然后通过homebrew安装Git，具体方法请参考homebrew的文档：<a href="http://brew.sh/">http://brew.sh/</a>。</p><p>第二种方法更简单，也是推荐的方法，就是直接从AppStore安装Xcode，Xcode集成了Git，不过默认没有安装，你需要运行Xcode，选择菜单“Xcode”-&gt;“Preferences”，在弹出窗口中找到“Downloads”，选择“Command Line Tools”，点“Install”就可以完成安装了。</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitjianjie4.jpg" alt="4"></p><p>Xcode是Apple官方IDE，功能非常强大，是开发Mac和iOS App的必选装备，而且是免费的！</p><h2 id="在Windows上安装Git"><a href="#在Windows上安装Git" class="headerlink" title="在Windows上安装Git"></a>在Windows上安装Git</h2><p>在Windows上使用Git，可以从Git官网直接<a href="https://git-scm.com/downloads">下载安装程序</a>，然后按默认选项安装即可。</p><p>安装完成后，在开始菜单里找到“Git”-&gt;“Git Bash”，蹦出一个类似命令行窗口的东西，就说明Git安装成功！</p><p><img src="https://cdn.jsdelivr.net/gh//ahoilcming/tu/picture/gitjianjie5.jpg" alt="5"></p><p>安装完成后，还需要最后一步设置，在命令行输入：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;Your Name&quot;</span><br><span class="line">$ git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure><p>因为Git是分布式版本控制系统，所以，每个机器都必须自报家门：你的名字和Email地址。你也许会担心，如果有人故意冒充别人怎么办？这个不必担心，首先我们相信大家都是善良无知的群众，其次，真的有冒充的也是有办法可查的。</p><p>注意<code>git config</code>命令的<code>--global</code>参数，用了这个参数，表示你这台机器上所有的Git仓库都会使用这个配置，当然也可以对某个仓库指定不同的用户名和Email地址。</p><h1 id="创建版本库"><a href="#创建版本库" class="headerlink" title="创建版本库"></a>创建版本库</h1><p>什么是版本库呢？版本库又名仓库，英文名<strong>repository</strong>，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。</p><p>所以，创建一个版本库非常简单，首先，选择一个合适的地方，创建一个空目录：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir learngit</span><br><span class="line">$ cd learngit</span><br><span class="line">$ pwd</span><br><span class="line">/Users/michael/learngit</span><br></pre></td></tr></table></figure><p><code>pwd</code>命令用于显示当前目录。在我的Mac上，这个仓库位于<code>/Users/michael/learngit</code>。</p><p>如果你使用Windows系统，为了避免遇到各种莫名其妙的问题，请确保目录名（包括父目录）不包含中文。</p><p>第二步，通过<code>git init</code>命令把这个目录变成GitGit可以管理的仓库：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">Initialized empty Git repository in /Users/michael/learngit/.git/</span><br></pre></td></tr></table></figure><p>瞬间Git就把仓库建好了，而且告诉你是一个空的仓库（empty Git repository），细心的读者可以发现当前目录下多了一个<code>.git</code>的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了。</p><p>如果你没有看到<code>.git</code>目录，那是因为这个目录默认是隐藏的，用<code>ls -ah</code>命令就可以看见。</p><p>也不一定必须在空目录下创建Git仓库，选择一个已经有东西的目录也是可以的。不过，不建议你使用自己正在开发的公司项目来学习Git，否则造成的一切后果概不负责。</p><h2 id="把文件添加到版本库"><a href="#把文件添加到版本库" class="headerlink" title="把文件添加到版本库"></a>把文件添加到版本库</h2><p>首先这里再明确一下，所有的版本控制系统，其实只能跟踪文本文件的改动，比如TXT文件，网页，所有的程序代码等等，Git也不例外。版本控制系统可以告诉你每次的改动，比如在第5行加了一个单词“Linux”，在第8行删了一个单词“Windows”。而图片、视频这些二进制文件，虽然也能由版本控制系统管理，但没法跟踪文件的变化，只能把二进制文件每次改动串起来，也就是只知道图片从100KB改成了120KB，但到底改了啥，版本控制系统不知道，也没法知道。</p><p>不幸的是，Microsoft的Word格式是二进制格式，因此，版本控制系统是没法跟踪Word文件的改动的，前面我们举的例子只是为了演示，如果要真正使用版本控制系统，就要以纯文本方式编写文件。</p><p>因为文本是有编码的，比如中文有常用的GBK编码，日文有Shift_JIS编码，如果没有历史遗留问题，强烈建议使用标准的UTF-8编码，所有语言使用同一种编码，既没有冲突，又被所有平台所支持。</p><p><strong>使用Windows的童鞋要特别注意：</strong></p><p>千万不要使用Windows自带的<strong>记事本</strong>编辑任何文本文件。原因是Microsoft开发记事本的团队使用了一个非常弱智的行为来保存UTF-8编码的文件，他们自作聪明地在每个文件开头添加了0xefbbbf（十六进制）的字符，你会遇到很多不可思议的问题，比如，网页第一行可能会显示一个“?”，明明正确的程序一编译就报语法错误，等等，都是由记事本的弱智行为带来的。建议你下载<a href="https://code.visualstudio.com/">Visual Studio Code</a>代替记事本，不但功能强大，而且免费！</p><p>言归正传，现在我们编写一个<code>readme.txt</code>文件，内容如下：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></table></figure><p>一定要放到<code>learngit</code>目录下（子目录也行），因为这是一个Git仓库，放到其他地方Git再厉害也找不到这个文件。</p><p>和把大象放到冰箱需要3步相比，把一个文件放到Git仓库只需要两步。</p><p>第一步，用命令<code>git add</code>告诉Git，把文件添加到仓库：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br></pre></td></tr></table></figure><p>执行上面的命令，没有任何显示，这就对了，Unix的哲学是“没有消息就是好消息”，说明添加成功。</p><p>第二步，用命令<code>git commit</code>告诉Git，把文件提交到仓库：</p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;wrote a readme file&quot;</span><br><span class="line">[master (root-commit) eaadf4e] wrote a readme file</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 readme.txt</span><br></pre></td></tr></table></figure><p>简单解释一下<code>git commit</code>命令，<code>-m</code>后面输入的是本次提交的说明，可以输入任意内容，当然最好是有意义的，这样你就能从历史记录里方便地找到改动记录。</p><p>嫌麻烦不想输入<code>-m &quot;xxx&quot;</code>行不行？确实有办法可以这么干，但是强烈不建议你这么干，因为输入说明对自己对别人阅读都很重要。实在不想输入说明的童鞋请自行Google，我不告诉你这个参数。</p><p><code>git commit</code>命令执行成功后会告诉你，<code>1 file changed</code>：1个文件被改动（我们新添加的readme.txt文件）；<code>2 insertions</code>：插入了两行内容（readme.txt有两行内容）。</p><p><strong>为什么Git添加文件需要<code>add</code>，<code>commit</code>一共两步呢？因为<code>commit</code>可以一次提交很多文件，所以你可以多次<code>add</code>不同的文件，比如：</strong></p><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add file1.txt</span><br><span class="line">$ git add file2.txt file3.txt</span><br><span class="line">$ git commit -m &quot;add 3 files.&quot;</span><br></pre></td></tr></table></figure><h3 id="疑难解答"><a href="#疑难解答" class="headerlink" title="疑难解答"></a><strong>疑难解答</strong></h3><p><strong>Q：输入<code>git add readme.txt</code>，得到错误：<code>fatal: not a git repository (or any of the parent directories)</code>。</strong></p><p><strong>A：Git命令必须在Git仓库目录内执行（<code>git init</code>除外），在仓库目录外执行是没有意义的。</strong></p><p><strong>Q：输入<code>git add readme.txt</code>，得到错误<code>fatal: pathspec &#39;readme.txt&#39; did not match any files</code>。</strong></p><p><strong>A：添加某个文件时，该文件必须在当前目录下存在，用<code>ls</code>或者<code>dir</code>命令查看当前目录的文件，看看文件是否存在，或者是否写错了文件名。</strong></p><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a><strong>小结</strong></h3><p><strong>现在总结一下今天学的两点内容：</strong></p><p><strong>初始化一个Git仓库，使用<code>git init</code>命令。</strong></p><p><strong>添加文件到Git仓库，分两步：</strong></p><ol><li><p><strong>使用命令<code>git add &lt;file&gt;</code>，注意，可反复多次使用，添加多个文件；</strong></p></li><li><p><strong>使用命令<code>git commit -m &lt;message&gt;</code>，完成。</strong></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 学习技能 </category>
          
          <category> git全面教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git全面教程 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>关于</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<h1 id=""><a href="#" class="headerlink" title=""></a><!-- GitCalendar容器 --></h1><div id="gitZone"></div><p><img align="right" src="https://count.getloli.com/get/@:fomalhaut1998?theme=moebooru"></p><h2 id="ahoilc明🥝"><a href="#ahoilc明🥝" class="headerlink" title="ahoilc明🥝 "></a>ahoilc明🥝 <img src="https://emojis.slackmojis.com/emojis/images/1588866973/8934/hellokittydance.gif?1588866973" alt="Hi" width="42" /></h2><h3 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a>自我介绍</h3><div><img align="right" alt="GIF" src="https://z4a.net/images/2023/08/14/push.webp" width="300" height="100%" /></div><ul><li>大家好，我是ahoilc明，来自广东深圳</li><li>目前是一名硬件开发在读学生</li><li>对物联网，硬件编程开发，前端感兴趣</li><li>欢迎光临我的博客 🍧</li></ul><h3 id="社交主页"><a href="#社交主页" class="headerlink" title="社交主页"></a>社交主页</h3><p><a href="https://www.fomal.cc"><img height="22" width="22" src="https://www.fomal.cc/favicon.ico"></a>：个人网站</p><h3 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h3><p><a href="https://github.com/fomalhaut1998/hexo-theme-Fomalhaut"><img src="https://github-readme-stats.vercel.app/api/pin/?username=fomalhaut1998&amp;repo=hexo-theme-Fomalhaut&amp;theme=tokyonight" alt=""></a><br>&emsp;&emsp;<br><a href="https://github.com/fomalhaut1998/fomalhaut1998.github.io"><img src="https://github-readme-stats.vercel.app/api/pin/?username=fomalhaut1998&amp;repo=fomalhaut1998.github.io&amp;theme=tokyonight" alt=""></a><br><br></p><!-- [![](https://github-readme-stats.vercel.app/api/pin/?username=fomalhaut1998&repo=DeleteSpace_and_Translation&theme=tokyonight)](https://github.com/fomalhaut1998/DeleteSpace_and_Translation)<br> --><!-- ### 编程语言 --><!-- ![Top Langs](https://github-readme-stats.vercel.app/api/top-langs/?username=fomalhaut1998&langs_count=6&theme=tokyonight) -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>唠叨</title>
      <link href="/bb/index.html"/>
      <url>/bb/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* 页脚与头图透明 */#footer {    background: transparent !important;  }  #page-header {    background: transparent !important;  }    /* 白天模式遮罩透明 */  #footer::before {    background: transparent !important;  }  #page-header::before {    background: transparent !important;  }    /* 夜间模式遮罩透明 */  [data-theme="dark"] #footer::before {    background: transparent !important;  }  [data-theme="dark"] #page-header::before {    background: transparent !important;  }  @font-face {    /* 为载入的字体取名字(随意) */    font-family: 'YSHST';    /* 字体文件地址(相对或者绝对路径都可以) */    src: url(/font/优设好身体.woff2);    /* 定义加粗样式(加粗多少) */    font-weight: normal;    /* 定义字体样式(斜体/非斜体) */    font-style: normal;    /* 定义显示样式 */    font-display: block;  }/* 翻页按钮居中 */#pagination {  width: 100%;  margin: auto;}/* 一级菜单居中 */#nav .menus_items {  position: absolute !important;  width: fit-content !important;  left: 50% !important;  transform: translateX(-50%) !important;}/* 子菜单横向展示 */#nav .menus_items .menus_item:hover .menus_item_child {  display: flex !important;}/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */.menus_items .menus_item:nth-child(2) .menus_item_child {  left: -125px;}/* 夜间模式菜单栏发光字 */[data-theme="dark"] #nav .site-page,[data-theme="dark"] #nav .menus_items .menus_item .menus_item_child li a {  text-shadow: 0 0 2px var(rgb(179, 71, 241)) !important;}/* 手机端适配 */[data-theme="dark"] #sidebar #sidebar-menus .menus_items .site-page {  text-shadow: 0 0 2px var(rgb(179, 71, 241)) !important;}/* 闪烁变动颜色连续渐变 */#site-name,#site-title,#site-subtitle,#post-info,.author-info__name,.author-info__description {  transition: text-shadow 1s linear !important;}/* 侧边栏个人信息卡片动态渐变色 */#aside-content > .card-widget.card-info {  background: linear-gradient(    -45deg,    #e8d8b9,    #eccec5,    #a3e9eb,    #bdbdf0,    #eec1ea  );  box-shadow: 0 0 5px rgb(66, 68, 68);  position: relative;  background-size: 400% 400%;  -webkit-animation: Gradient 10s ease infinite;  -moz-animation: Gradient 10s ease infinite;  animation: Gradient 10s ease infinite !important;}@-webkit-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@-moz-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}/* 黑夜模式适配 */[data-theme="dark"] #aside-content > .card-widget.card-info {  background: #191919ee;}/* 个人信息Follow me按钮 */#aside-content > .card-widget.card-info > #card-info-btn {  background-color: #3eb8be;  border-radius: 8px;}/* 鼠标样式 */#cursor {  position: fixed;  width: 16px;  height: 16px;  /* 这里改变跟随的底色 */  background: rgb(57, 134, 197);  border-radius: 8px;  opacity: 0.25;  z-index: 10086;  pointer-events: none;  transition: 0.2s ease-in-out;  transition-property: background, opacity, transform;}#cursor.hidden {  opacity: 0;}#cursor.hover {  opacity: 0.1;  transform: scale(2.5);  -webkit-transform: scale(2.5);  -moz-transform: scale(2.5);  -ms-transform: scale(2.5);  -o-transform: scale(2.5);}#cursor.active {  opacity: 0.5;  transform: scale(0.5);  -webkit-transform: scale(0.5);  -moz-transform: scale(0.5);  -ms-transform: scale(0.5);  -o-transform: scale(0.5);}:root {  --trans-light: rgba(255, 255, 255, 0.88);  --trans-dark: rgba(25, 25, 25, 0.88);  --border-style: 1px solid rgb(169, 169, 169);  --backdrop-filter: blur(5px) saturate(150%);}/* 首页文章卡片 */#recent-posts > .recent-post-item {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 25px;  border: var(--border-style);}/* 首页侧栏卡片 */#aside-content .card-widget {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 18px;  border: var(--border-style);}/* 文章页、归档页、普通页面 */div#post,div#page,div#archive {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border: var(--border-style);  border-radius: 20px;}/* 导航栏 */#page-header.nav-fixed #nav {  background: rgba(255, 255, 255, 0.75);  backdrop-filter: var(--backdrop-filter);}[data-theme="dark"] #page-header.nav-fixed #nav {  background: rgba(0, 0, 0, 0.7) !important;}/* 夜间模式遮罩 */[data-theme="dark"] #recent-posts > .recent-post-item,[data-theme="dark"] #aside-content .card-widget,[data-theme="dark"] div#post,[data-theme="dark"] div#archive,[data-theme="dark"] div#page {  background: var(--trans-dark);}/* 夜间模式页脚页头遮罩透明 */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* 阅读模式 */.read-mode #aside-content .card-widget {  background: rgba(158, 204, 171, 0.5) !important;}.read-mode div#post {  background: rgba(158, 204, 171, 0.5) !important;}/* 夜间模式下的阅读模式 */[data-theme="dark"] .read-mode #aside-content .card-widget {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}[data-theme="dark"] .read-mode div#post {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/lib_categorybar.css"/>
      <url>/css/lib_categorybar.css</url>
      
        <content type="html"><![CDATA[#categoryBar {  width: 100% !important;}ul.categoryBar-list {  margin: 5px 5px 0 5px !important;  padding: 0 !important;}li.categoryBar-list-item {  font-weight: bold;  display: inline-block;  height: 180px !important;  margin: 5px 0.5% 0 0.5% !important;  background-image: linear-gradient(rgba(0,0,0,0.4) 25%, rgba(16,16,16,0) 100%);  border-radius: 10px;  padding: 25px 0 25px 25px !important;  box-shadow: rgba(50,50,50,0.3) 50px 50px 50px 50px inset;  overflow: hidden;  background-size: 100% !important;  background-position: center !important;}li.categoryBar-list-item:hover {  background-size: 110% !important;  box-shadow: inset 500px 50px 50px 50px rgba(50,50,50,0.6);}li.categoryBar-list-item:hover span.categoryBar-list-descr {  transition: all 0.5s;  transform: translate(-100%, 0);}a.categoryBar-list-link {  color: #fff !important;  font-size: 20px !important;}a.categoryBar-list-link::before {  content: '|' !important;  color: #fff !important;  font-size: 20px !important;}a.categoryBar-list-link:after {  content: '';  position: relative;  width: 0;  bottom: 0;  display: block;  height: 3px;  border-radius: 3px;  background-color: #fff;}a.categoryBar-list-link:hover:after {  width: 90%;  left: 1%;  transition: all 0.5s;}span.categoryBar-list-count {  display: block !important;  color: #fff !important;  font-size: 20px !important;}span.categoryBar-list-count::before {  content: '\f02d' !important;  padding-right: 15px !important;  display: inline-block;  font-weight: 600;  font-style: normal;  font-variant: normal;  font-family: 'Font Awesome 6 Free';  text-rendering: auto;  -webkit-font-smoothing: antialiased;}span.categoryBar-list-descr {  padding: 5px;  display: block !important;  color: #fff !important;  font-size: 20px !important;  position: relative;  right: -100%;}@media screen and (max-width: 650px) {  li.categoryBar-list-item {    width: 48% !important;    height: 150px !important;    margin: 5px 1% 0 1% !important;  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/lib_clock.min.css"/>
      <url>/css/lib_clock.min.css</url>
      
        <content type="html"><![CDATA[@font-face{font-family:UnidreamLED;src:url(https://cdn.cbd.int/anzhiyu-blog@1.1.6/fonts/UnidreamLED.ttf);font-display:swap}.card-clock-location,.card-clock-windDir,span.card-clock-weather{font-family:ZhuZiAYuanJWD}span.temp{font-family:UnidreamLED}#hexo_electric_clock{padding:20px}.card-clock{padding:0!important}.card-background{height:153px;margin:15px;border-radius:8px;box-shadow:inset 0 0 4px 2px rgb(145 148 154 / 40%);z-index:2}.clock-row{font-family:UnidreamLED;font-weight:400;color:#000;display:flex;justify-content:space-between;flex-wrap:nowrap;white-space:nowrap}.card-clock-clockdate,.card-clock-ip{text-align:left}.card-clock-location,.card-clock-weather{text-align:center}.card-clock-dackorlight,.card-clock-humidity{text-align:right}.card-clock-time{flex:1;font-family:UnidreamLED;font-size:38px;text-align:center;line-height:1.5}[data-theme=dark] .card-background{background-color:#212121}[data-theme=dark] .clock-row{color:#fff}@font-face{font-family:qweather-icons;src:url(fonts/qweather-icons.woff2?5bb5b475709c49961682eda055eb3dc5) format("woff2"),url(fonts/qweather-icons.woff?5bb5b475709c49961682eda055eb3dc5) format("woff"),url(fonts/qweather-icons.ttf?5bb5b475709c49961682eda055eb3dc5) format("truetype")}[class*=" qi-"]::before,[class^=qi-]::before{display:inline-block;font-family:qweather-icons!important;font-style:normal;font-weight:400!important;font-variant:normal;text-transform:none;line-height:1;vertical-align:-.125em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media screen and (min-width:900px){.card-clock-humidity{display:block}}@media screen and (max-width:1086px){.card-clock-humidity{display:none}}.qi-100::before{content:"\f101"}.qi-101::before{content:"\f102"}.qi-102::before{content:"\f103"}.qi-103::before{content:"\f104"}.qi-104::before{content:"\f105"}.qi-150::before{content:"\f106"}.qi-151::before{content:"\f107"}.qi-152::before{content:"\f108"}.qi-153::before{content:"\f109"}.qi-300::before{content:"\f10a"}.qi-301::before{content:"\f10b"}.qi-302::before{content:"\f10c"}.qi-303::before{content:"\f10d"}.qi-304::before{content:"\f10e"}.qi-305::before{content:"\f10f"}.qi-306::before{content:"\f110"}.qi-307::before{content:"\f111"}.qi-308::before{content:"\f112"}.qi-309::before{content:"\f113"}.qi-310::before{content:"\f114"}.qi-311::before{content:"\f115"}.qi-312::before{content:"\f116"}.qi-313::before{content:"\f117"}.qi-314::before{content:"\f118"}.qi-315::before{content:"\f119"}.qi-316::before{content:"\f11a"}.qi-317::before{content:"\f11b"}.qi-318::before{content:"\f11c"}.qi-350::before{content:"\f11d"}.qi-351::before{content:"\f11e"}.qi-399::before{content:"\f11f"}.qi-400::before{content:"\f120"}.qi-401::before{content:"\f121"}.qi-402::before{content:"\f122"}.qi-403::before{content:"\f123"}.qi-404::before{content:"\f124"}.qi-405::before{content:"\f125"}.qi-406::before{content:"\f126"}.qi-407::before{content:"\f127"}.qi-408::before{content:"\f128"}.qi-409::before{content:"\f129"}.qi-410::before{content:"\f12a"}.qi-456::before{content:"\f12b"}.qi-457::before{content:"\f12c"}.qi-499::before{content:"\f12d"}.qi-500::before{content:"\f12e"}.qi-501::before{content:"\f12f"}.qi-502::before{content:"\f130"}.qi-503::before{content:"\f131"}.qi-504::before{content:"\f132"}.qi-507::before{content:"\f133"}.qi-508::before{content:"\f134"}.qi-509::before{content:"\f135"}.qi-510::before{content:"\f136"}.qi-511::before{content:"\f137"}.qi-512::before{content:"\f138"}.qi-513::before{content:"\f139"}.qi-514::before{content:"\f13a"}.qi-515::before{content:"\f13b"}.qi-800::before{content:"\f13c"}.qi-801::before{content:"\f13d"}.qi-802::before{content:"\f13e"}.qi-803::before{content:"\f13f"}.qi-804::before{content:"\f140"}.qi-805::before{content:"\f141"}.qi-806::before{content:"\f142"}.qi-807::before{content:"\f143"}.qi-900::before{content:"\f144"}.qi-901::before{content:"\f145"}.qi-999::before{content:"\f146"}.qi-1001::before{content:"\f147"}.qi-1002::before{content:"\f148"}.qi-1003::before{content:"\f149"}.qi-1004::before{content:"\f14a"}.qi-1005::before{content:"\f14b"}.qi-1006::before{content:"\f14c"}.qi-1007::before{content:"\f14d"}.qi-1008::before{content:"\f14e"}.qi-1009::before{content:"\f14f"}.qi-1010::before{content:"\f150"}.qi-1011::before{content:"\f151"}.qi-1012::before{content:"\f152"}.qi-1013::before{content:"\f153"}.qi-1014::before{content:"\f154"}.qi-1015::before{content:"\f155"}.qi-1016::before{content:"\f156"}.qi-1017::before{content:"\f157"}.qi-1018::before{content:"\f158"}.qi-1019::before{content:"\f159"}.qi-1020::before{content:"\f15a"}.qi-1021::before{content:"\f15b"}.qi-1022::before{content:"\f15c"}.qi-1023::before{content:"\f15d"}.qi-1024::before{content:"\f15e"}.qi-1025::before{content:"\f15f"}.qi-1026::before{content:"\f160"}.qi-1027::before{content:"\f161"}.qi-1028::before{content:"\f162"}.qi-1029::before{content:"\f163"}.qi-1030::before{content:"\f164"}.qi-1031::before{content:"\f165"}.qi-1032::before{content:"\f166"}.qi-1033::before{content:"\f167"}.qi-1034::before{content:"\f168"}.qi-1035::before{content:"\f169"}.qi-1036::before{content:"\f16a"}.qi-1037::before{content:"\f16b"}.qi-1038::before{content:"\f16c"}.qi-1039::before{content:"\f16d"}.qi-1040::before{content:"\f16e"}.qi-1041::before{content:"\f16f"}.qi-1042::before{content:"\f170"}.qi-1043::before{content:"\f171"}.qi-1044::before{content:"\f172"}.qi-1045::before{content:"\f173"}.qi-1046::before{content:"\f174"}.qi-1047::before{content:"\f175"}.qi-1048::before{content:"\f176"}.qi-1049::before{content:"\f177"}.qi-1050::before{content:"\f178"}.qi-1051::before{content:"\f179"}.qi-1052::before{content:"\f17a"}.qi-1053::before{content:"\f17b"}.qi-1054::before{content:"\f17c"}.qi-1055::before{content:"\f17d"}.qi-1056::before{content:"\f17e"}.qi-1057::before{content:"\f17f"}.qi-1058::before{content:"\f180"}.qi-1059::before{content:"\f181"}.qi-1061::before{content:"\f182"}.qi-1064::before{content:"\f183"}.qi-1101::before{content:"\f184"}.qi-1302::before{content:"\f185"}.qi-1402::before{content:"\f186"}.qi-1601::before{content:"\f187"}.qi-1602::before{content:"\f188"}.qi-1603::before{content:"\f189"}.qi-1604::before{content:"\f18a"}.qi-1605::before{content:"\f18b"}.qi-1606::before{content:"\f18c"}.qi-1607::before{content:"\f18d"}.qi-2001::before{content:"\f18e"}.qi-2002::before{content:"\f18f"}.qi-2003::before{content:"\f190"}.qi-2004::before{content:"\f191"}.qi-2005::before{content:"\f192"}.qi-2006::before{content:"\f193"}.qi-2007::before{content:"\f194"}.qi-2008::before{content:"\f195"}.qi-2009::before{content:"\f196"}.qi-2010::before{content:"\f197"}.qi-2011::before{content:"\f198"}.qi-2012::before{content:"\f199"}.qi-2013::before{content:"\f19a"}.qi-2014::before{content:"\f19b"}.qi-2015::before{content:"\f19c"}.qi-2016::before{content:"\f19d"}.qi-2017::before{content:"\f19e"}.qi-2018::before{content:"\f19f"}.qi-2019::before{content:"\f1a0"}.qi-2020::before{content:"\f1a1"}.qi-2021::before{content:"\f1a2"}.qi-2022::before{content:"\f1a3"}.qi-2023::before{content:"\f1a4"}.qi-2024::before{content:"\f1a5"}.qi-2025::before{content:"\f1a6"}.qi-2026::before{content:"\f1a7"}.qi-2027::before{content:"\f1a8"}.qi-2028::before{content:"\f1a9"}.qi-9998::before{content:"\f1aa"}.qi-9999::before{content:"\f1ab"}.qi-100-fill::before{content:"\f1ac"}.qi-101-fill::before{content:"\f1ad"}.qi-102-fill::before{content:"\f1ae"}.qi-103-fill::before{content:"\f1af"}.qi-104-fill::before{content:"\f1b0"}.qi-150-fill::before{content:"\f1b1"}.qi-151-fill::before{content:"\f1b2"}.qi-152-fill::before{content:"\f1b3"}.qi-153-fill::before{content:"\f1b4"}.qi-300-fill::before{content:"\f1b5"}.qi-301-fill::before{content:"\f1b6"}.qi-302-fill::before{content:"\f1b7"}.qi-303-fill::before{content:"\f1b8"}.qi-304-fill::before{content:"\f1b9"}.qi-305-fill::before{content:"\f1ba"}.qi-306-fill::before{content:"\f1bb"}.qi-307-fill::before{content:"\f1bc"}.qi-308-fill::before{content:"\f1bd"}.qi-309-fill::before{content:"\f1be"}.qi-310-fill::before{content:"\f1bf"}.qi-311-fill::before{content:"\f1c0"}.qi-312-fill::before{content:"\f1c1"}.qi-313-fill::before{content:"\f1c2"}.qi-314-fill::before{content:"\f1c3"}.qi-315-fill::before{content:"\f1c4"}.qi-316-fill::before{content:"\f1c5"}.qi-317-fill::before{content:"\f1c6"}.qi-318-fill::before{content:"\f1c7"}.qi-350-fill::before{content:"\f1c8"}.qi-351-fill::before{content:"\f1c9"}.qi-399-fill::before{content:"\f1ca"}.qi-400-fill::before{content:"\f1cb"}.qi-401-fill::before{content:"\f1cc"}.qi-402-fill::before{content:"\f1cd"}.qi-403-fill::before{content:"\f1ce"}.qi-404-fill::before{content:"\f1cf"}.qi-405-fill::before{content:"\f1d0"}.qi-406-fill::before{content:"\f1d1"}.qi-407-fill::before{content:"\f1d2"}.qi-408-fill::before{content:"\f1d3"}.qi-409-fill::before{content:"\f1d4"}.qi-410-fill::before{content:"\f1d5"}.qi-456-fill::before{content:"\f1d6"}.qi-457-fill::before{content:"\f1d7"}.qi-499-fill::before{content:"\f1d8"}.qi-500-fill::before{content:"\f1d9"}.qi-501-fill::before{content:"\f1da"}.qi-502-fill::before{content:"\f1db"}.qi-503-fill::before{content:"\f1dc"}.qi-504-fill::before{content:"\f1dd"}.qi-507-fill::before{content:"\f1de"}.qi-508-fill::before{content:"\f1df"}.qi-509-fill::before{content:"\f1e0"}.qi-510-fill::before{content:"\f1e1"}.qi-511-fill::before{content:"\f1e2"}.qi-512-fill::before{content:"\f1e3"}.qi-513-fill::before{content:"\f1e4"}.qi-514-fill::before{content:"\f1e5"}.qi-515-fill::before{content:"\f1e6"}.qi-900-fill::before{content:"\f1e7"}.qi-901-fill::before{content:"\f1e8"}.qi-999-fill::before{content:"\f1e9"}.qi-sunny::before{content:"\f101"}.qi-cloudy::before{content:"\f102"}.qi-few-clouds::before{content:"\f103"}.qi-partly-cloudy::before{content:"\f104"}.qi-overcast::before{content:"\f105"}.qi-clear-night::before{content:"\f106"}.qi-cloudy-night::before{content:"\f107"}.qi-few-clouds-night::before{content:"\f108"}.qi-partly-cloudy-night::before{content:"\f109"}.qi-shower-rain::before{content:"\f10a"}.qi-heavy-shower-rain::before{content:"\f10b"}.qi-thundershower::before{content:"\f10c"}.qi-heavy-thunderstorm::before{content:"\f10d"}.qi-thundershower-with-hail::before{content:"\f10e"}.qi-light-rain::before{content:"\f10f"}.qi-moderate-rain::before{content:"\f110"}.qi-heavy-rain::before{content:"\f111"}.qi-extreme-rain::before{content:"\f112"}.qi-drizzle-rain::before{content:"\f113"}.qi-storm::before{content:"\f114"}.qi-heavy-storm::before{content:"\f115"}.qi-severe-storm::before{content:"\f116"}.qi-freezing-rain::before{content:"\f117"}.qi-light-to-moderate-rain::before{content:"\f118"}.qi-moderate-to-heavy-rain::before{content:"\f119"}.qi-heavy-rain-to-storm::before{content:"\f11a"}.qi-storm-to-heavy-storm::before{content:"\f11b"}.qi-heavy-to-severe-storm::before{content:"\f11c"}.qi-shower-rain-night::before{content:"\f11d"}.qi-heavy-shower-rain-night::before{content:"\f11e"}.qi-rain::before{content:"\f11f"}.qi-light-snow::before{content:"\f120"}.qi-moderate-snow::before{content:"\f121"}.qi-heavy-snow::before{content:"\f122"}.qi-snowstorm::before{content:"\f123"}.qi-sleet::before{content:"\f124"}.qi-rain-and-snow::before{content:"\f125"}.qi-shower-snow::before{content:"\f126"}.qi-snow-flurry::before{content:"\f127"}.qi-light-to-moderate-snow::before{content:"\f128"}.qi-moderate-to-heavy-snow::before{content:"\f129"}.qi-heavy-snow-to-snowstorm::before{content:"\f12a"}.qi-shower-snow-night::before{content:"\f12b"}.qi-snow-flurry-night::before{content:"\f12c"}.qi-snow::before{content:"\f12d"}.qi-mist::before{content:"\f12e"}.qi-foggy::before{content:"\f12f"}.qi-haze::before{content:"\f130"}.qi-sand::before{content:"\f131"}.qi-dust::before{content:"\f132"}.qi-duststorm::before{content:"\f133"}.qi-sandstorm::before{content:"\f134"}.qi-dense-fog::before{content:"\f135"}.qi-strong-fog::before{content:"\f136"}.qi-moderate-haze::before{content:"\f137"}.qi-heavy-haze::before{content:"\f138"}.qi-severe-haze::before{content:"\f139"}.qi-heavy-fog::before{content:"\f13a"}.qi-extra-heavy-fog::before{content:"\f13b"}.qi-new-moon::before{content:"\f13c"}.qi-waxing-crescent::before{content:"\f13d"}.qi-first-quarter::before{content:"\f13e"}.qi-waxing-gibbous::before{content:"\f13f"}.qi-full-moon::before{content:"\f140"}.qi-waning-gibbous::before{content:"\f141"}.qi-last-quarter::before{content:"\f142"}.qi-waning-crescent::before{content:"\f143"}.qi-hot::before{content:"\f144"}.qi-cold::before{content:"\f145"}.qi-unknown::before{content:"\f146"}.qi-typhoon::before{content:"\f147"}.qi-tornado::before{content:"\f148"}.qi-rainstorm::before{content:"\f149"}.qi-snow-storm::before{content:"\f14a"}.qi-cold-wave::before{content:"\f14b"}.qi-gale::before{content:"\f14c"}.qi-sandstorm-warning::before{content:"\f14d"}.qi-low-temperature-freeze::before{content:"\f14e"}.qi-high-temperature::before{content:"\f14f"}.qi-heat-wave::before{content:"\f150"}.qi-dry-hot-air::before{content:"\f151"}.qi-downburst::before{content:"\f152"}.qi-avalanche::before{content:"\f153"}.qi-lightning::before{content:"\f154"}.qi-hail::before{content:"\f155"}.qi-frost::before{content:"\f156"}.qi-heavy-fog-warning::before{content:"\f157"}.qi-low-level-wind-shearl::before{content:"\f158"}.qi-haze-warning::before{content:"\f159"}.qi-thunder-gust::before{content:"\f15a"}.qi-road-icing::before{content:"\f15b"}.qi-drought::before{content:"\f15c"}.qi-gale-at-sea::before{content:"\f15d"}.qi-heat-stroke::before{content:"\f15e"}.qi-wildfire::before{content:"\f15f"}.qi-grassland-fire::before{content:"\f160"}.qi-freeze::before{content:"\f161"}.qi-space-weather::before{content:"\f162"}.qi-heavy-air-pollution::before{content:"\f163"}.qi-low-temperature-rain-and-snow::before{content:"\f164"}.qi-strong-convection::before{content:"\f165"}.qi-ozone::before{content:"\f166"}.qi-heavy-snow-warning::before{content:"\f167"}.qi-cold-warning::before{content:"\f168"}.qi-continuous-rain::before{content:"\f169"}.qi-waterlogging::before{content:"\f16a"}.qi-geological-hazard::before{content:"\f16b"}.qi-heavy-rainfall::before{content:"\f16c"}.qi-severely-falling-temperature::before{content:"\f16d"}.qi-snow-disaster::before{content:"\f16e"}.qi-wildfire-grassland::before{content:"\f16f"}.qi-medical-meteorology::before{content:"\f170"}.qi-thunderstorm::before{content:"\f171"}.qi-school-closure::before{content:"\f172"}.qi-factory-closure::before{content:"\f173"}.qi-maritime-risk::before{content:"\f174"}.qi-spring-dust::before{content:"\f175"}.qi-falling-temperature::before{content:"\f176"}.qi-typhoon-and-rainstorm::before{content:"\f177"}.qi-severe-cold::before{content:"\f178"}.qi-sand-dust::before{content:"\f179"}.qi-sea-thunderstorms::before{content:"\f17a"}.qi-sea-fog::before{content:"\f17b"}.qi-sea-thunder::before{content:"\f17c"}.qi-sea-typhoon::before{content:"\f17d"}.qi-low-temperature::before{content:"\f17e"}.qi-road-ice-and-snow::before{content:"\f17f"}.qi-thunderstorm-and-gale::before{content:"\f180"}.qi-continuous-low-temperature::before{content:"\f181"}.qi-strong-dust::before{content:"\f182"}.qi-short-lived-heavy-shower-rain::before{content:"\f183"}.qi-flood::before{content:"\f184"}.qi-mudflow::before{content:"\f185"}.qi-storm-surge::before{content:"\f186"}.qi-very-hot-weather::before{content:"\f187"}.qi-strong-monsoon-signal::before{content:"\f188"}.qi-landslip::before{content:"\f189"}.qi-tropical-cyclone::before{content:"\f18a"}.qi-fire-danger::before{content:"\f18b"}.qi-flooding-in-the-northern-new-territories::before{content:"\f18c"}.qi-cold-weather::before{content:"\f18d"}.qi-wind::before{content:"\f18e"}.qi-snow-ice::before{content:"\f18f"}.qi-fog::before{content:"\f190"}.qi-coastal-event::before{content:"\f191"}.qi-forest-fire::before{content:"\f192"}.qi-rain-warning::before{content:"\f193"}.qi-rain-flood::before{content:"\f194"}.qi-freezing-rain-icing::before{content:"\f195"}.qi-ground-frost::before{content:"\f196"}.qi-dust-raising-winds::before{content:"\f197"}.qi-strong-surface-winds::before{content:"\f198"}.qi-hot-day::before{content:"\f199"}.qi-warm-night::before{content:"\f19a"}.qi-cold-day::before{content:"\f19b"}.qi-thunderstorm-and-lightning::before{content:"\f19c"}.qi-hailstorm::before{content:"\f19d"}.qi-sea-area-warning::before{content:"\f19e"}.qi-fishermen-warning::before{content:"\f19f"}.qi-low-humidity::before{content:"\f1a0"}.qi-accumulated-rain::before{content:"\f1a1"}.qi-hazardous-surf-warning::before{content:"\f1a2"}.qi-marine-wind-warning::before{content:"\f1a3"}.qi-road-weather-alert::before{content:"\f1a4"}.qi-thunder-rain::before{content:"\f1a5"}.qi-thunder-rain-and-fog::before{content:"\f1a6"}.qi-damaging-winds::before{content:"\f1a7"}.qi-veld-fire-conditions::before{content:"\f1a8"}.qi-weather-advisory::before{content:"\f1a9"}.qi-severe-weather-warning::before{content:"\f1aa"}.qi-warning-default::before{content:"\f1ab"}.qi-sunny-fill::before{content:"\f1ac"}.qi-cloudy-fill::before{content:"\f1ad"}.qi-few-clouds-fill::before{content:"\f1ae"}.qi-partly-cloudy-fill::before{content:"\f1af"}.qi-overcast-fill::before{content:"\f1b0"}.qi-clear-night-fill::before{content:"\f1b1"}.qi-cloudy-night-fill::before{content:"\f1b2"}.qi-few-clouds-night-fill::before{content:"\f1b3"}.qi-partly-cloudy-night-fill::before{content:"\f1b4"}.qi-shower-rain-fill::before{content:"\f1b5"}.qi-heavy-shower-rain-fill::before{content:"\f1b6"}.qi-thundershower-fill::before{content:"\f1b7"}.qi-heavy-thunderstorm-fill::before{content:"\f1b8"}.qi-thundershower-with-hail-fill::before{content:"\f1b9"}.qi-light-rain-fill::before{content:"\f1ba"}.qi-moderate-rain-fill::before{content:"\f1bb"}.qi-heavy-rain-fill::before{content:"\f1bc"}.qi-extreme-rain-fill::before{content:"\f1bd"}.qi-drizzle-rain-fill::before{content:"\f1be"}.qi-storm-fill::before{content:"\f1bf"}.qi-heavy-storm-fill::before{content:"\f1c0"}.qi-severe-storm-fill::before{content:"\f1c1"}.qi-freezing-rain-fill::before{content:"\f1c2"}.qi-light-to-moderate-rain-fill::before{content:"\f1c3"}.qi-moderate-to-heavy-rain-fill::before{content:"\f1c4"}.qi-heavy-rain-to-storm-fill::before{content:"\f1c5"}.qi-storm-to-heavy-storm-fill::before{content:"\f1c6"}.qi-heavy-to-severe-storm-fill::before{content:"\f1c7"}.qi-shower-rain-night-fill::before{content:"\f1c8"}.qi-heavy-shower-rain-night-fill::before{content:"\f1c9"}.qi-rain-fill::before{content:"\f1ca"}.qi-light-snow-fill::before{content:"\f1cb"}.qi-moderate-snow-fill::before{content:"\f1cc"}.qi-heavy-snow-fill::before{content:"\f1cd"}.qi-snowstorm-fill::before{content:"\f1ce"}.qi-sleet-fill::before{content:"\f1cf"}.qi-rain-and-snow-fill::before{content:"\f1d0"}.qi-shower-snow-fill::before{content:"\f1d1"}.qi-snow-flurry-fill::before{content:"\f1d2"}.qi-light-to-moderate-snow-fill::before{content:"\f1d3"}.qi-moderate-to-heavy-snow-fill::before{content:"\f1d4"}.qi-heavy-snow-to-snowstorm-fill::before{content:"\f1d5"}.qi-shower-snow-night-fill::before{content:"\f1d6"}.qi-snow-flurry-night-fill::before{content:"\f1d7"}.qi-snow-fill::before{content:"\f1d8"}.qi-mist-fill::before{content:"\f1d9"}.qi-foggy-fill::before{content:"\f1da"}.qi-haze-fill::before{content:"\f1db"}.qi-sand-fill::before{content:"\f1dc"}.qi-dust-fill::before{content:"\f1dd"}.qi-duststorm-fill::before{content:"\f1de"}.qi-sandstorm-fill::before{content:"\f1df"}.qi-dense-fog-fill::before{content:"\f1e0"}.qi-strong-fog-fill::before{content:"\f1e1"}.qi-moderate-haze-fill::before{content:"\f1e2"}.qi-heavy-haze-fill::before{content:"\f1e3"}.qi-severe-haze-fill::before{content:"\f1e4"}.qi-heavy-fog-fill::before{content:"\f1e5"}.qi-extra-heavy-fog-fill::before{content:"\f1e6"}.qi-hot-fill::before{content:"\f1e7"}.qi-cold-fill::before{content:"\f1e8"}.qi-unknown-fill::before{content:"\f1e9"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/runtime.min.css"/>
      <url>/css/runtime.min.css</url>
      
        <content type="html"><![CDATA[div#runtime{width:180px;margin:auto;color:#fff;padding-inline:5px;border-radius:10px;background-color:rgba(0,0,0,.7)}#workboard{font-size:12px}[data-theme=dark] div#runtime{color:#28b4c8;box-shadow:0 0 5px rgba(28,69,218,.71);animation:flashlight 1s linear infinite alternate}#ghbdages .github-badge img{height:20px}@-moz-keyframes flashlight{from{box-shadow:0 0 5px #1478d2}to{box-shadow:0 0 2px #1478d2}}@-webkit-keyframes flashlight{from{box-shadow:0 0 5px #1478d2}to{box-shadow:0 0 2px #1478d2}}@-o-keyframes flashlight{from{box-shadow:0 0 5px #1478d2}to{box-shadow:0 0 2px #1478d2}}@keyframes flashlight{from{box-shadow:0 0 5px #1478d2}to{box-shadow:0 0 2px #1478d2}}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/universe.css"/>
      <url>/css/universe.css</url>
      
        <content type="html"><![CDATA[/* 背景宇宙星光  */#universe{    display: block;    position: fixed;    margin: 0;    padding: 0;    border: 0;    outline: 0;    left: 0;    top: 0;    width: 100%;    height: 100%;    pointer-events: none;    /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */    z-index: -1;  }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/cursor.js"/>
      <url>/js/cursor.js</url>
      
        <content type="html"><![CDATA[var CURSOR;Math.lerp = (a, b, n) => (1 - n) * a + n * b;const getStyle = (el, attr) => {    try {        return window.getComputedStyle            ? window.getComputedStyle(el)[attr]            : el.currentStyle[attr];    } catch (e) {}    return "";};class Cursor {    constructor() {        this.pos = {curr: null, prev: null};        this.pt = [];        this.create();        this.init();        this.render();    }    move(left, top) {        this.cursor.style["left"] = `${left}px`;        this.cursor.style["top"] = `${top}px`;    }    create() {        if (!this.cursor) {            this.cursor = document.createElement("div");            this.cursor.id = "cursor";            this.cursor.classList.add("hidden");            document.body.append(this.cursor);        }        var el = document.getElementsByTagName('*');        for (let i = 0; i < el.length; i++)            if (getStyle(el[i], "cursor") == "pointer")                this.pt.push(el[i].outerHTML);        document.body.appendChild((this.scr = document.createElement("style")));        // 这里改变鼠标指针的颜色 由svg生成        this.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='rgb(57, 197, 187)'/></svg>") 4 4, auto}`;    }    refresh() {        this.scr.remove();        this.cursor.classList.remove("hover");        this.cursor.classList.remove("active");        this.pos = {curr: null, prev: null};        this.pt = [];        this.create();        this.init();        this.render();    }    init() {        document.onmouseover  = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.add("hover");        document.onmouseout   = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.remove("hover");        document.onmousemove  = e => {(this.pos.curr == null) && this.move(e.clientX - 8, e.clientY - 8); this.pos.curr = {x: e.clientX - 8, y: e.clientY - 8}; this.cursor.classList.remove("hidden");};        document.onmouseenter = e => this.cursor.classList.remove("hidden");        document.onmouseleave = e => this.cursor.classList.add("hidden");        document.onmousedown  = e => this.cursor.classList.add("active");        document.onmouseup    = e => this.cursor.classList.remove("active");    }    render() {        if (this.pos.prev) {            this.pos.prev.x = Math.lerp(this.pos.prev.x, this.pos.curr.x, 0.15);            this.pos.prev.y = Math.lerp(this.pos.prev.y, this.pos.curr.y, 0.15);            this.move(this.pos.prev.x, this.pos.prev.y);        } else {            this.pos.prev = this.pos.curr;        }        requestAnimationFrame(() => this.render());    }}(() => {    CURSOR = new Cursor();    // 需要重新获取列表时，使用 CURSOR.refresh()})();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/lib_clock.min.js"/>
      <url>/js/lib_clock.min.js</url>
      
        <content type="html"><![CDATA[function clockUpdateTime(e,c){let a="#000";switch(e.now.icon){case"100":a="#fdcc45";break;case"101":a="#fe6976";break;case"102":case"103":a="#fe7f5b";break;case"104":case"150":case"151":case"152":case"153":case"154":case"800":case"801":case"802":case"803":case"804":case"805":case"806":case"807":a="#2152d1";break;case"300":case"301":case"305":case"306":case"307":case"308":case"309":case"310":case"311":case"312":case"313":case"314":case"315":case"316":case"317":case"318":case"350":case"351":case"399":a="#49b1f5";break;case"302":case"303":case"304":a="#fdcc46";break;case"400":case"401":case"402":case"403":case"404":case"405":case"406":case"407":case"408":case"409":case"410":case"456":case"457":case"499":a="#a3c2dc";break;case"500":case"501":case"502":case"503":case"504":case"507":case"508":case"509":case"510":case"511":case"512":case"513":case"514":case"515":a="#97acba";break;case"900":case"999":a="red";break;case"901":a="#179fff;"}var t=document.getElementById("hexo_electric_clock");clock_box_html=`\n  <div class="clock-row">\n    <span id="card-clock-clockdate" class="card-clock-clockdate"></span>\n    <span class="card-clock-weather"><i class="qi-${e.now.icon}-fill" style="color: ${a}"></i> ${e.now.text} <span>${e.now.temp}</span> ℃</span>\n    <span class="card-clock-humidity">💧 ${e.now.humidity}%</span>\n  </div>\n  <div class="clock-row">\n    <span id="card-clock-time" class="card-clock-time"></span>\n  </div>\n  <div class="clock-row">\n    <span class="card-clock-windDir"> <i class="qi-gale"></i> ${e.now.windDir}</span>\n    <span class="card-clock-location">${c}</span>\n    <span id="card-clock-dackorlight" class="card-clock-dackorlight"></span>\n  </div>\n  `;var s=["SUN","MON","TUE","WED","THU","FRI","SAT"],n=document.getElementById("card-clock-loading");function r(){var e,c=new Date,a=o(c.getHours(),2)+":"+o(c.getMinutes(),2)+":"+o(c.getSeconds(),2),t=o(c.getFullYear(),4)+"-"+o(c.getMonth()+1,2)+"-"+o(c.getDate(),2)+" "+s[c.getDay()],n=c.getHours();if(n>12?(n-=12,e=" P M"):e=" A M",document.getElementById("card-clock-time")){var r=document.getElementById("card-clock-time"),l=document.getElementById("card-clock-clockdate"),i=document.getElementById("card-clock-dackorlight");r.innerHTML=a,l.innerHTML=t,i.innerHTML=e}}function o(e,c){for(var a="",t=0;t<c;t++)a+="0";return(a+e).slice(-c)}n&&(n.innerHTML=""),t.innerHTML=clock_box_html;setInterval(r,1e3);r()}function getIpInfo(){let e={city:"长沙市",qweather_url:""};"true"===clock_default_rectangle_enable&&e?fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`).then((e=>e.json())).then((e=>{if("1"===e.status){const c=e.regeocode.addressComponent;return Array.isArray(c.city)?c.province:c.city}})).then((c=>{fetch(`https://devapi.qweather.com/v7/weather/now?location=${clock_rectangle}&key=${qweather_key}`).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c)?e.city:c)}}))})):fetch(`https://restapi.amap.com/v3/ip?key=${gaud_map_key}`).then((e=>e.json())).then((c=>{let a=Array.isArray(c.rectangle)?clock_rectangle:c.rectangle.split(";")[0];e.qweather_url=`https://devapi.qweather.com/v7/weather/now?location=${a}&key=${qweather_key}`,Array.isArray(c.rectangle)?fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`).then((e=>e.json())).then((a=>{if("1"===a.status){const c=a.regeocode.addressComponent;e.city=Array.isArray(c.city)?c.province:c.city}return c})).then((c=>{fetch(e.qweather_url).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c.city)?e.city:c.city)}}))})):fetch(e.qweather_url).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c.city)?e.city:c.city)}}))}))}getIpInfo();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/light.js"/>
      <url>/js/light.js</url>
      
        <content type="html"><![CDATA[// 霓虹灯效果// 颜色数组var arr = ["#39c5bb", "#f14747", "#f1a247", "#f1ee47", "#b347f1", "#1edbff", "#ed709b", "#5636ed"];// 颜色索引var idx = 0;// 切换颜色function changeColor() {    // 仅夜间模式才启用    if (document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark') {        if (document.getElementById("site-name"))            document.getElementById("site-name").style.textShadow = arr[idx] + " 0 0 15px";        if (document.getElementById("site-title"))            document.getElementById("site-title").style.textShadow = arr[idx] + " 0 0 15px";        if (document.getElementById("site-subtitle"))            document.getElementById("site-subtitle").style.textShadow = arr[idx] + " 0 0 10px";        if (document.getElementById("post-info"))            document.getElementById("post-info").style.textShadow = arr[idx] + " 0 0 5px";        try {            document.getElementsByClassName("author-info__name")[0].style.textShadow = arr[idx] + " 0 0 12px";            document.getElementsByClassName("author-info__description")[0].style.textShadow = arr[idx] + " 0 0 12px";        } catch {                    }        idx++;        if (idx == 8) {            idx = 0;        }    } else {        // 白天模式恢复默认        if (document.getElementById("site-name"))            document.getElementById("site-name").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("site-title"))            document.getElementById("site-title").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("site-subtitle"))            document.getElementById("site-subtitle").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("post-info"))            document.getElementById("post-info").style.textShadow = "#1e1e1ee0 1px 1px 1px";        try {            document.getElementsByClassName("author-info__name")[0].style.textShadow = "";            document.getElementsByClassName("author-info__description")[0].style.textShadow = "";        } catch {                    }    }}// 开启计时器window.onload = setInterval(changeColor, 1200);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime.js"/>
      <url>/js/runtime.js</url>
      
        <content type="html"><![CDATA[var now=new Date;function createtime(){var t=new Date("08/24/2023 00:00:00");now.setTime(now.getTime()+250);var e=(now-t)/1e3/60/60/24,a=Math.floor(e),n=(now-t)/1e3/60/60-24*a,r=Math.floor(n);1==String(r).length&&(r="0"+r);var s=(now-t)/1e3/60-1440*a-60*r,i=Math.floor(s);1==String(i).length&&(i="0"+i);var o=(now-t)/1e3-86400*a-3600*r-60*i,l=Math.round(o);1==String(l).length&&(l="0"+l);let g="";g=r<18&&r>=9?`<img class='boardsign' src='https://npm.elemecdn.com/anzhiyu-blog@2.0.3/img/badge/安知鱼-上班摸鱼中.svg' title='距离月入25k也就还差一个大佬带我~'><span class='textTip'> <br> 本站居然运行了 ${a} 天</span><span id='runtime'> ${r} 小时 ${i} 分 ${l} 秒 </span> <i class='fas fa-heartbeat' style='color:red'></i>`:`<img class='boardsign' src='https://npm.elemecdn.com/anzhiyu-blog@2.0.3/img/badge/安知鱼-下班啦.svg' title='下班了就该开开心心的玩耍，嘿嘿~'><span class='textTip'> <br> 本站居然运行了 ${a} 天</span><span id='runtime'> ${r} 小时 ${i} 分 ${l} 秒 </span> <i class='fas fa-heartbeat' style='color:red'></i>`,document.getElementById("workboard")&&(document.getElementById("workboard").innerHTML=g)}setInterval((()=>{createtime()}),250);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友情链接</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/universe.js"/>
      <url>/js/universe.js</url>
      
        <content type="html"><![CDATA[function dark() {window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var n,e,i,h,t=.05,s=document.getElementById("universe"),o=!0,a="180,184,240",r="226,225,142",d="226,225,224",c=[];function f(){n=window.innerWidth,e=window.innerHeight,i=.216*n,s.setAttribute("width",n),s.setAttribute("height",e)}function u(){h.clearRect(0,0,n,e);for(var t=c.length,i=0;i<t;i++){var s=c[i];s.move(),s.fadeIn(),s.fadeOut(),s.draw()}}function y(){this.reset=function(){this.giant=m(3),this.comet=!this.giant&&!o&&m(10),this.x=l(0,n-10),this.y=l(0,e),this.r=l(1.1,2.6),this.dx=l(t,6*t)+(this.comet+1-1)*t*l(50,120)+2*t,this.dy=-l(t,6*t)-(this.comet+1-1)*t*l(50,120),this.fadingOut=null,this.fadingIn=!0,this.opacity=0,this.opacityTresh=l(.2,1-.4*(this.comet+1-1)),this.do=l(5e-4,.002)+.001*(this.comet+1-1)},this.fadeIn=function(){this.fadingIn&&(this.fadingIn=!(this.opacity>this.opacityTresh),this.opacity+=this.do)},this.fadeOut=function(){this.fadingOut&&(this.fadingOut=!(this.opacity<0),this.opacity-=this.do/2,(this.x>n||this.y<0)&&(this.fadingOut=!1,this.reset()))},this.draw=function(){if(h.beginPath(),this.giant)h.fillStyle="rgba("+a+","+this.opacity+")",h.arc(this.x,this.y,2,0,2*Math.PI,!1);else if(this.comet){h.fillStyle="rgba("+d+","+this.opacity+")",h.arc(this.x,this.y,1.5,0,2*Math.PI,!1);for(var t=0;t<30;t++)h.fillStyle="rgba("+d+","+(this.opacity-this.opacity/20*t)+")",h.rect(this.x-this.dx/4*t,this.y-this.dy/4*t-2,2,2),h.fill()}else h.fillStyle="rgba("+r+","+this.opacity+")",h.rect(this.x,this.y,this.r,this.r);h.closePath(),h.fill()},this.move=function(){this.x+=this.dx,this.y+=this.dy,!1===this.fadingOut&&this.reset(),(this.x>n-n/4||this.y<0)&&(this.fadingOut=!0)},setTimeout(function(){o=!1},50)}function m(t){return Math.floor(1e3*Math.random())+1<10*t}function l(t,i){return Math.random()*(i-t)+t}f(),window.addEventListener("resize",f,!1),function(){h=s.getContext("2d");for(var t=0;t<i;t++)c[t]=new y,c[t].reset();u()}(),function t(){document.getElementsByTagName('html')[0].getAttribute('data-theme')=='dark'&&u(),window.requestAnimationFrame(t)}()};dark()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>每日工作</title>
      <link href="/work/index.html"/>
      <url>/work/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
